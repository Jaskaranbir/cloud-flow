!function(){function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function e(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)})(t)}function l(t,e,n){return(l=g()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&d(i,n.prototype),i}).apply(null,arguments)}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=g();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}(self.webpackChunkcloud_flow_frontend=self.webpackChunkcloud_flow_frontend||[]).push([[179],{8255:function(t){function e(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=8255,t.exports=e},7950:function(t,e,n){var r;r=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),o=n(2),a=n(5)||("undefined"!=typeof window?window.cola:null),s=n(4),u=function(t){return(void 0===t?"undefined":r(t))===r(0)},l=function(){},c=function(t,e){var n;return null!=(n=t)&&(void 0===n?"undefined":r(n))===r(function(){})?t.apply(e,[e]):t};function h(t){this.options=i({},o,t)}h.prototype.run=function(){var t=this,e=this.options;t.manuallyStopped=!1;var n=e.cy,i=e.eles,o=i.nodes(),h=i.edges(),d=!1,f=o.filter(function(t){return t.isParent()}),p=o.subtract(f),v=e.boundingBox||{x1:0,y1:0,w:n.width(),h:n.height()};void 0===v.x2&&(v.x2=v.x1+v.w),void 0===v.w&&(v.w=v.x2-v.x1),void 0===v.y2&&(v.y2=v.y1+v.h),void 0===v.h&&(v.h=v.y2-v.y1);var g=function(){for(var t=0;t<o.length;t++){var r=o[t],i=r.layoutDimensions(e),a=r.scratch("cola");if(!a.updatedDims){var s=c(e.nodeSpacing,r);a.width=i.w+2*s,a.height=i.h+2*s}}o.positions(function(t){var e=t.scratch().cola,n=void 0;return!t.grabbed()&&p.contains(t)&&(u((n={x:v.x1+e.x,y:v.y1+e.y}).x)&&u(n.y)||(n=void 0)),n}),o.updateCompoundBounds(),d||(m(),d=!0),e.fit&&n.fit(e.padding)},y=function(){e.ungrabifyWhileSimulating&&w.grabify(),n.off("destroy",x),o.off("grab free position",k),o.off("lock unlock",S),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})},m=function(){t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t})},b=e.refresh;b=e.refresh<0?1:Math.max(1,b);var _=t.adaptor=a.adaptor({trigger:function(t){switch(t.type){case"tick":case a.EventType?a.EventType.tick:null:e.animate&&g();break;case"end":case a.EventType?a.EventType.end:null:g(),e.infinite||y()}},kick:function(){var n=!0,r=function(){if(t.manuallyStopped)return y(),!0;var r=_.tick();return e.infinite||n||_.convergenceThreshold(e.convergenceThreshold),n=!1,r&&e.infinite&&_.resume(),r};if(e.animate)s(function t(){(function(){for(var t=void 0,e=0;e<b&&!t;e++)t=t||r();return t})()||s(t)});else for(;!r(););},on:l,drag:l});t.adaptor=_;var w=o.filter(":grabbable");e.ungrabifyWhileSimulating&&w.ungrabify();var x=void 0;n.one("destroy",x=function(){t.stop()});var k=void 0;o.on("grab free position",k=function(t){var e=this.scratch().cola,n=this.position();if(t.cyTarget===this||t.target===this)switch(t.type){case"grab":_.dragstart(e);break;case"free":_.dragend(e);break;case"position":e.px===n.x-v.x1&&e.py===n.y-v.y1||(e.px=n.x-v.x1,e.py=n.y-v.y1)}});var S=void 0;o.on("lock unlock",S=function(){var t=this.scratch().cola;t.fixed=this.locked(),this.locked()?_.dragstart(t):_.dragend(t)}),_.nodes(p.map(function(t,n){var r=c(e.nodeSpacing,t),i=t.position(),o=t.layoutDimensions(e);return t.scratch().cola={x:e.randomize&&!t.locked()||void 0===i.x?Math.round(Math.random()*v.w):i.x,y:e.randomize&&!t.locked()||void 0===i.y?Math.round(Math.random()*v.h):i.y,width:o.w+2*r,height:o.h+2*r,index:n,fixed:t.locked()}}));var E=[];e.alignment&&(e.alignment.vertical&&e.alignment.vertical.forEach(function(t){var e=[];t.forEach(function(t){var n=t.node.scratch().cola;e.push({node:n.index,offset:t.offset?t.offset:0})}),E.push({type:"alignment",axis:"x",offsets:e})}),e.alignment.horizontal&&e.alignment.horizontal.forEach(function(t){var e=[];t.forEach(function(t){var n=t.node.scratch().cola;e.push({node:n.index,offset:t.offset?t.offset:0})}),E.push({type:"alignment",axis:"y",offsets:e})})),e.gapInequalities&&e.gapInequalities.forEach(function(t){var e=t.left.scratch().cola.index,n=t.right.scratch().cola.index;E.push({axis:t.axis,left:e,right:n,gap:t.gap,equality:t.equality})}),E.length>0&&_.constraints(E),_.groups(f.map(function(t,n){var r=c(e.nodeSpacing,t),i=function(e){return parseFloat(t.style("padding-"+e))},o=i("left")+r,a=i("right")+r,s=i("top")+r,u=i("bottom")+r;return t.scratch().cola={index:n,padding:Math.max(o,a,s,u),leaves:t.children().intersection(p).map(function(t){return t[0].scratch().cola.index}),fixed:t.locked()},t}).map(function(t){return t.scratch().cola.groups=t.children().intersection(f).map(function(t){return t.scratch().cola.index}),t.scratch().cola}));var C,T=void 0,P=void 0;if(null!=e.edgeLength?(T=e.edgeLength,P="linkDistance"):null!=e.edgeSymDiffLength?(T=e.edgeSymDiffLength,P="symmetricDiffLinkLengths"):null!=e.edgeJaccardLength?(T=e.edgeJaccardLength,P="jaccardLinkLengths"):(T=100,P="linkDistance"),_.links(h.stdFilter(function(t){return p.contains(t.source())&&p.contains(t.target())}).map(function(t){var e=t.scratch().cola={source:t.source()[0].scratch().cola.index,target:t.target()[0].scratch().cola.index};return null!=T&&(e.calcLength=c(T,t)),e})),_.size([v.w,v.h]),null!=T&&_[P](function(t){return t.calcLength}),e.flow){var A=void 0;(void 0===(C=e.flow)?"undefined":r(C))===r("")?A={axis:e.flow,minSeparation:50}:u(e.flow)?A={axis:"y",minSeparation:e.flow}:function(t){return null!=t&&(void 0===t?"undefined":r(t))===r({})}(e.flow)?((A=e.flow).axis=A.axis||"y",A.minSeparation=null!=A.minSeparation?A.minSeparation:50):A={axis:"y",minSeparation:50},_.flowLayout(A.axis,A.minSeparation)}return t.trigger({type:"layoutstart",layout:t}),_.avoidOverlaps(e.avoidOverlap).handleDisconnected(e.handleDisconnected).start(e.unconstrIter,e.userConstIter,e.allConstIter),e.infinite||setTimeout(function(){t.manuallyStopped||_.stop()},e.maxSimulationTime),this},h.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t.exports=h},function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.filter(function(t){return null!=t}).forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e,n){"use strict";t.exports={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1}},function(t,e,n){"use strict";var r=n(0),i=function(t){t&&t("layout","cola",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(t,e,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r="undefined"!==("undefined"==typeof window?"undefined":i(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)}:function(t){t()},t.exports=r},function(e,n){e.exports=t}])},t.exports=r(n(1282))},2508:function(t){self,t.exports=function(){"use strict";var t={347:function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(218),o=n(259),a=n(171),s=n(961),u=0;t.exports=function(t,e){var n=t;o.options=t;var l,c,h,d,f,p,v,g,y,m,b,_,w,x,k,S,E,C,T,P="cy-edge-bend-editing-cxt-add-bend-point"+u,A="cy-edge-bend-editing-cxt-remove-bend-point"+u,D="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+u,O="cy-edge-control-editing-cxt-add-control-point"+u,M="cy-edge-control-editing-cxt-remove-control-point"+u,I="cy-edge-bend-editing-cxt-remove-multiple-control-point"+u,L=null,N=null,R=!1,F={init:function(){s(e,o,t);var n=t,r=$(this),F="cy-node-edge-editing-stage"+u;u++;var j,B,z=$('<div id="'+F+'"></div>');r.find("#"+F).length<1&&r.append(z),(j=Konva.stages.length<u?new Konva.Stage({id:"node-edge-editing-stage",container:F,width:r.width(),height:r.height()}):Konva.stages[u-1]).getChildren().length<1?(B=new Konva.Layer,j.add(B)):B=j.getChildren()[0];var V={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(t){t.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(t){t.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(t){e.autounselectify(!1),R=!0,V.touchedAnchor=t.target,T=!1,V.edge.unselect();var n=o.syntax[V.edgeType].weight,r=o.syntax[V.edgeType].distance,i=V.edge;ft={edge:i,type:V.edgeType,weights:i.data(n)?[].concat(i.data(n)):[],distances:i.data(r)?[].concat(i.data(r)):[]},E=e.style()._private.coreStyle["active-bg-opacity"]?e.style()._private.coreStyle["active-bg-opacity"].value:.15,e.style().selector("core").style("active-bg-opacity",0).update(),st(),e.autoungrabify(!0),B.getStage().on("contentTouchend contentMouseup",V.eMouseUp),B.getStage().on("contentMouseout",V.eMouseOut)},eMouseUp:function(t){R=!1,V.touchedAnchor=void 0,T=!1,V.edge.select(),e.style().selector("core").style("active-bg-opacity",E).update(),ut(),e.autounselectify(!0),e.autoungrabify(!1),B.getStage().off("contentTouchend contentMouseup",V.eMouseUp),B.getStage().off("contentMouseout",V.eMouseOut)},eMouseOut:function(t){T=!0},clearAnchorsExcept:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=!1;this.anchors.forEach(function(r,i){e&&r===e?n=!0:(t.unbindListeners(r),r.destroy())}),n?this.anchors=[e]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(t){if(this.edge=t,this.edgeType=o.getEdgeType(t),t.hasClass("edgebendediting-hasbendpoints")||t.hasClass("edgecontrolediting-hascontrolpoints")){for(var e=o.getAnchorsAsArray(t),n=.65*it(t),r=(t.source().position(),t.target().position(),0);e&&r<e.length;r+=2)this.renderAnchorShape(e[r],e[r+1],n);B.draw()}},renderAnchorShape:function(t,n,r){var i=nt({x:t-r/2,y:n-r/2});r*=e.zoom();var o=new Konva.Rect({x:i.x,y:i.y,width:r,height:r,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(o),this.bindListeners(o),B.add(o)}},G=function(t,n){var r=t.target||t.cyTarget;if(!o.isIgnoredEdge(r)){var i,a,s,u,l=o.getEdgeType(r);"none"===l?(i=[],a=[]):(u=o.syntax[l].distance,i=r.data(s=o.syntax[l].weight)?[].concat(r.data(s)):r.data(s),a=r.data(u)?[].concat(r.data(u)):r.data(u));var c={edge:r,type:l,weights:i,distances:a};o.addAnchorPoint(void 0,void 0,n),et().undoable&&e.undoRedo().do("changeAnchorPoints",c)}rt(),r.select()},U=function(t){var n=V.edge,r=o.getEdgeType(n);if(!o.edgeTypeNoneShouldntHappen(r,"UiUtilities.js, cxtRemoveAnchorFcn")){var i={edge:n,type:r,weights:[].concat(n.data(o.syntax[r].weight)),distances:[].concat(n.data(o.syntax[r].distance))};o.removeAnchor(),et().undoable&&e.undoRedo().do("changeAnchorPoints",i),setTimeout(function(){rt(),n.select()},50)}},H=function(t){var n=V.edge,r=o.getEdgeType(n),i={edge:n,type:r,weights:[].concat(n.data(o.syntax[r].weight)),distances:[].concat(n.data(o.syntax[r].distance))};o.removeAllAnchors(),et().undoable&&e.undoRedo().do("changeAnchorPoints",i),setTimeout(function(){rt(),n.select()},50)},q=n.handleReconnectEdge,W=n.validateEdge,Y=n.actOnUnsuccessfulReconnection,K=[{id:P,content:n.addBendMenuItemTitle,selector:"edge",onClickFunction:function(t){G(t,"bend")},hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:A,content:n.removeBendMenuItemTitle,selector:"edge",onClickFunction:U,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:D,content:n.removeAllBendMenuItemTitle,selector:n.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:H,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:O,content:n.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(t){G(t,"control")},hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:M,content:n.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:U,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:I,content:n.removeAllControlMenuItemTitle,selector:n.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:H,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions}];if(e.contextMenus){var X=e.contextMenus("get");X.isActive()?X.appendMenuItems(K):e.contextMenus({menuItems:K})}var Q=i(function(){z.attr("height",r.height()).attr("width",r.width()).css({position:"absolute",top:0,left:0,"z-index":et().zIndex}),setTimeout(function(){var t=z.offset(),n=r.offset();z.css({top:-(t.top-n.top),left:-(t.left-n.left)}),B.getStage().setWidth(r.width()),B.getStage().setHeight(r.height()),e&&rt()},0)},250);function Z(){Q()}Z(),$(window).bind("resize",function(){Z()});var J,tt=r.data("cyedgeediting");function et(){return J||(J=r.data("cyedgeediting").options)}function nt(t){var n=e.pan(),r=e.zoom();return{x:t.x*r+n.x,y:t.y*r+n.y}}function rt(){V.clearAnchorsExcept(V.touchedAnchor),null!==L&&(L.destroy(),L=null),null!==N&&(N.destroy(),N=null),B.draw(),C&&(V.renderAnchorShapes(C),function(t){if(t){var n=o.getAnchorsAsArray(t);void 0===n&&(n=[]);var r=t.sourceEndpoint(),i=t.targetEndpoint();if(r.x&&i.x&&(n.unshift(r.y),n.unshift(r.x),n.push(i.x),n.push(i.y),n)){var a={x:n[2],y:n[3]},s={x:n[n.length-4],y:n[n.length-3]};!function(t,n,r,i,o){var a=n.x-r/2,s=n.y-r/2,u=i.x-r/2,l=i.y-r/2,c=o.x-r/2,h=o.y-r/2,d=nt({x:t.x-r/2,y:t.y-r/2}),f=nt({x:a,y:s});r=r*e.zoom()/2;var p=nt({x:u,y:l}),v=nt({x:c,y:h}),g=r,y=Math.sqrt(Math.pow(p.x-d.x,2)+Math.pow(p.y-d.y,2)),m=d.x+g/y*(p.x-d.x),b=d.y+g/y*(p.y-d.y),_=Math.sqrt(Math.pow(v.x-f.x,2)+Math.pow(v.y-f.y,2)),w=f.x+g/_*(v.x-f.x),x=f.y+g/_*(v.y-f.y);null===L&&(L=new Konva.Circle({x:m+r,y:b+r,radius:r,fill:"black"})),null===N&&(N=new Konva.Circle({x:w+r,y:x+r,radius:r,fill:"black"})),B.add(L),B.add(N),B.draw()}({x:n[0],y:n[1]},{x:n[n.length-2],y:n[n.length-1]},.65*it(t),a,s)}}}(C))}function it(t){var e=et().anchorShapeSizeFactor;return parseFloat(t.css("width"))<=2.5?2.5*e:parseFloat(t.css("width"))*e}function ot(t,e,n,r,i){return t>=r-n/2&&t<=r+n/2&&e>=i-n/2&&e<=i+n/2}function at(t,e,n){var r=o.getEdgeType(n);if("none"===r)return-1;if(null==n.data(o.syntax[r].weight)||0==n.data(o.syntax[r].weight).length)return-1;for(var i=o.getAnchorsAsArray(n),a=it(n),s=0;i&&s<i.length;s+=2)if(ot(t,e,a,i[s],i[s+1]))return s/2;return-1}function st(){x=e.panningEnabled(),k=e.zoomingEnabled(),S=e.boxSelectionEnabled(),e.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function ut(){e.zoomingEnabled(k).panningEnabled(x).boxSelectionEnabled(S)}null==tt&&(tt={}),tt.options=n;var lt=i(function(t,e,n,r){var i=t.data(o.syntax[e].weight),a=t.data(o.syntax[e].distance),s=o.convertToRelativePosition(t,r);i[n]=s.weight,a[n]=s.distance,t.data(o.syntax[e].weight,i),t.data(o.syntax[e].distance,a)},5);x=e.panningEnabled(),k=e.zoomingEnabled(),S=e.boxSelectionEnabled();var ct,ht,dt,ft,pt,vt,gt,yt,mt,bt=(St=e.edges(":selected")).length;1===bt&&(C=St[0]),e.bind("zoom pan",d=function(){C&&rt()}),e.on("data","edge",w=function(){C&&rt()}),e.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",l=function(){setTimeout(function(){rt()},50)}),e.on("remove","edge",c=function(){if(this.selected()){if(bt-=1,e.startBatch(),C&&C.removeClass("cy-edge-editing-highlight"),1===bt){var t=e.edges(":selected");1===t.length?(C=t[0]).addClass("cy-edge-editing-highlight"):C=void 0}else C=void 0;e.endBatch()}rt()}),e.on("add","edge",h=function(){this.selected()&&(bt+=1,e.startBatch(),C&&C.removeClass("cy-edge-editing-highlight"),1===bt?(C=this).addClass("cy-edge-editing-highlight"):C=void 0,e.endBatch()),rt()}),e.on("select","edge",f=function(){var t=this;0!=t.target().connectedEdges().length&&0!=t.source().connectedEdges().length&&(bt+=1,e.startBatch(),C&&C.removeClass("cy-edge-editing-highlight"),1===bt?(C=t).addClass("cy-edge-editing-highlight"):C=void 0,e.endBatch(),rt())}),e.on("unselect","edge",p=function(){if(bt-=1,e.startBatch(),C&&C.removeClass("cy-edge-editing-highlight"),1===bt){var t=e.edges(":selected");1===t.length?(C=t[0]).addClass("cy-edge-editing-highlight"):C=void 0}else C=void 0;e.endBatch(),rt()});var _t,wt,xt,kt,St,Et=!1;e.on("tapstart",v=function(t){ht=t.position||t.cyPosition}),e.on("tapstart","edge",g=function(t){var n=this;if(C&&C.id()===n.id()){dt=n;var r=o.getEdgeType(n);"none"===r&&(r="bend");var i=function(t,e,n){var r=it(n),i=n._private.rscratch.allpts,o={x:i[0],y:i[1]},a={x:i[i.length-2],y:i[i.length-1]};return nt(o),nt(a),ot(t,e,r,o.x,o.y)?0:ot(t,e,r,a.x,a.y)?1:-1}(ht.x,ht.y,n);if(0==i||1==i){n.unselect(),vt=i,yt=0==i?dt.source():dt.target();var s=a.disconnectEdge(dt,e,t.renderedPosition,0==i?"source":"target");gt=s.dummyNode,dt=s.edge,st()}else ct=void 0,pt=!0}else pt=!1}),e.on("drag","node",_=function(){C&&rt()}),e.on("tapdrag",y=function(t){e.edges(":selected").length>0&&e.autounselectify(!1);var r=dt;if(void 0===dt||!o.isIgnoredEdge(r)){var i=o.getEdgeType(r);if(pt&&n.enableCreateAnchorOnDrag&&!R&&"none"!==i){var a=o.syntax[i].weight,s=o.syntax[i].distance;ft={edge:r,type:i,weights:r.data(a)?[].concat(r.data(a)):[],distances:r.data(s)?[].concat(r.data(s)):[]},r.unselect(),ct=o.addAnchorPoint(r,ht),dt=r,pt=void 0,Et=!0,st()}if(R||void 0!==dt&&(void 0!==ct||void 0!==vt)){var u=t.position||t.cyPosition;-1!=vt&&gt?gt.position(u):null!=ct?lt(r,i,ct,u):R&&(void 0===V.touchedAnchorIndex&&ht&&(V.touchedAnchorIndex=at(ht.x,ht.y,V.edge)),void 0!==V.touchedAnchorIndex&&lt(V.edge,V.edgeType,V.touchedAnchorIndex,u)),t.target&&t.target[0]&&t.target.isNode()&&(mt=t.target)}}}),e.on("tapend",m=function(t){T&&B.getStage().fire("contentMouseup");var n=dt||V.edge;if(void 0!==n){var r=V.touchedAnchorIndex;if(null!=r){var i,s=n.source().position("x"),u=n.source().position("y"),l=n.target().position("x"),c=n.target().position("y"),h=o.getAnchorsAsArray(n),d=[s,u].concat(h).concat([l,c]),f=r+1,p=f-1,v=f+1,g={x:d[2*f],y:d[2*f+1]},y={x:d[2*p],y:d[2*p+1]},m={x:d[2*v],y:d[2*v+1]};if(g.x===y.x&&g.y===y.y||g.x===y.x&&g.y===y.y)i=!0;else{var b,_=(y.y-m.y)/(y.x-m.x),w=o.getIntersection(n,g,{srcPoint:y,tgtPoint:m,m1:_,m2:-1/_}),x=Math.sqrt(Math.pow(g.x-w.x,2)+Math.pow(g.y-w.y,2));"bend"===(b=o.getEdgeType(n))&&x<et().bendRemovalSensitivity&&(i=!0)}i&&o.removeAnchor(n,r)}else if(null!=gt&&(0==vt||1==vt)){var k=yt,S="valid",E=0==vt?"source":"target";if(mt){var C=0==vt?mt:n.source(),P=1==vt?mt:n.target();"function"==typeof W&&(S=W(n,C,P)),k="valid"===S?mt:yt}if(C=0==vt?k:n.source(),P=1==vt?k:n.target(),n=a.connectEdge(n,yt,E),yt.id()!==k.id())if("function"==typeof q){var A=q(C.id(),P.id(),n.data());if(A&&(a.copyEdge(n,A),o.initAnchorPoints(et().bendPositionsFunction,et().controlPositionsFunction,[A])),A&&et().undoable){var D={newEdge:A,oldEdge:n};e.undoRedo().do("removeReconnectedEdge",D),n=A}else A&&(e.remove(n),n=A)}else{var O=0==vt?{source:k.id()}:{target:k.id()},M=0==vt?{source:yt.id()}:{target:yt.id()};if(et().undoable&&k.id()!==yt.id()){var I={edge:n,location:O,oldLoc:M};n=e.undoRedo().do("reconnectEdge",I).edge}}"valid"!==S&&"function"==typeof Y&&Y(),n.select(),e.remove(gt)}}"none"===(b=o.getEdgeType(n))&&(b="bend"),void 0!==V.touchedAnchorIndex||Et||(ft=void 0);var L=o.syntax[b].weight;void 0!==n&&void 0!==ft&&(n.data(L)?n.data(L).toString():null)!=ft.weights.toString()&&(Et&&(n.select(),e.autounselectify(!0)),et().undoable&&e.undoRedo().do("changeAnchorPoints",ft)),ct=void 0,dt=void 0,ft=void 0,pt=void 0,vt=void 0,gt=void 0,yt=void 0,mt=void 0,ht=void 0,Et=!1,V.touchedAnchorIndex=void 0,ut(),setTimeout(function(){rt()},50)}),e.on("edgeediting.movestart",function(t,e){kt=!1,null!=e[0]&&e.forEach(function(t){null==o.getAnchorsAsArray(t)||kt||(wt={x:o.getAnchorsAsArray(t)[0],y:o.getAnchorsAsArray(t)[1]},_t={firstTime:!0,firstAnchorPosition:{x:wt.x,y:wt.y},edges:e},xt=t,kt=!0)})}),e.on("edgeediting.moveend",function(t,n){if(null!=_t){var r=_t.firstAnchorPosition,i={x:o.getAnchorsAsArray(xt)[0],y:o.getAnchorsAsArray(xt)[1]};_t.positionDiff={x:-i.x+r.x,y:-i.y+r.y},delete _t.firstAnchorPosition,et().undoable&&e.undoRedo().do("moveAnchorPoints",_t),_t=void 0}}),e.on("cxttap",b=function(t){var r,i,a=t.target||t.cyTarget,s=!1;try{s=a.isEdge()}catch(t){}if(s?i=o.getEdgeType(r=a):(r=V.edge,i=V.edgeType),e.contextMenus){var u=e.contextMenus("get");if(!C||C.id()!=r.id()||o.isIgnoredEdge(r)||C!==r)return u.hideMenuItem(A),u.hideMenuItem(P),u.hideMenuItem(M),void u.hideMenuItem(O);var l=t.position||t.cyPosition,c=at(l.x,l.y,r);-1==c?(u.hideMenuItem(A),u.hideMenuItem(M),"control"===i&&s?(u.showMenuItem(O),u.hideMenuItem(P)):"bend"===i&&s?(u.showMenuItem(P),u.hideMenuItem(O)):s?(u.showMenuItem(P),u.showMenuItem(O)):(u.hideMenuItem(P),u.hideMenuItem(O)),o.currentCtxPos=l):(u.hideMenuItem(P),u.hideMenuItem(O),"control"===i?(u.showMenuItem(M),u.hideMenuItem(A),n.enableMultipleAnchorRemovalOption&&r.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&u.showMenuItem(I)):"bend"===i?(u.showMenuItem(A),u.hideMenuItem(M)):(u.hideMenuItem(A),u.hideMenuItem(M),u.hideMenuItem(I)),o.currentAnchorIndex=c),o.currentCtxEdge=r}}),e.on("cyedgeediting.changeAnchorPoints","edge",function(){e.startBatch(),e.edges().unselect(),e.trigger("bendPointMovement"),e.endBatch(),rt()});var Ct=!1,Tt={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(n){if("function"==typeof et().moveSelectedAnchorsOnKeyEvents?et().moveSelectedAnchorsOnKeyEvents():et().moveSelectedAnchorsOnKeyEvents){var r,i,a=document.activeElement.tagName;if("TEXTAREA"!=a&&"INPUT"!=a){switch(n.keyCode){case 37:case 39:case 38:case 40:case 32:n.preventDefault()}if(n.keyCode<"37"||n.keyCode>"40")return;if(Tt[n.keyCode]=!0,e.edges(":selected").length!=e.elements(":selected").length||1!=e.edges(":selected").length)return;Ct||(St=e.edges(":selected"),e.trigger("edgeediting.movestart",[St]),Ct=!0);var s=3;if(n.altKey&&n.shiftKey)return;n.altKey?s=1:n.shiftKey&&(s=10);var u=0,l=0;u+=Tt[39]?s:0,l+=Tt[40]?s:0,r={x:u-=Tt[37]?s:0,y:l-=Tt[38]?s:0},(i=St).forEach(function(e){var n=o.getAnchorsAsArray(e),i=[];if(null!=n){for(var a=0;a<n.length;a+=2)i.push({x:n[a]+r.x,y:n[a+1]+r.y});var s=o.getEdgeType(e);if(o.edgeTypeNoneShouldntHappen(s,"UiUtilities.js, moveAnchorPoints"))return;"bend"===s?t.bendPointPositionsSetterFunction(e,i):"control"===s&&t.controlPointPositionsSetterFunction(e,i)}}),o.initAnchorPoints(et().bendPositionsFunction,et().controlPositionsFunction,i),e.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(t){t.keyCode<"37"||t.keyCode>"40"||(t.preventDefault(),Tt[t.keyCode]=!1,("function"==typeof et().moveSelectedAnchorsOnKeyEvents?et().moveSelectedAnchorsOnKeyEvents():et().moveSelectedAnchorsOnKeyEvents)&&(e.trigger("edgeediting.moveend",[St]),St=void 0,Ct=!1))},!0),r.data("cyedgeediting",tt)},unbind:function(){e.off("remove","node",c).off("add","node",h).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",l).off("select","edge",f).off("unselect","edge",p).off("tapstart",v).off("tapstart","edge",g).off("tapdrag",y).off("tapend",m).off("cxttap",b).off("drag","node",_).off("data","edge",w),e.unbind("zoom pan",d)}};return F[n]?F[n].apply($(e.container()),Array.prototype.slice.call(arguments,1)):"object"!=(void 0===n?"undefined":r(n))&&n?($.error("No such function `"+n+"` for cytoscape.js-edge-editing"),$(this)):F.init.apply($(e.container()),arguments)}},259:function(t){var e={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(t){this.ignoredClasses=t},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(t){return t?t.hasClass(this.syntax.bend.class)?"bend":t.hasClass(this.syntax.control.class)?"control":t.css("curve-style")===this.syntax.bend.edge?"bend":t.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(t)&&this.options.bendPositionsFunction(t).length>0?"bend":this.options.controlPositionsFunction(t)&&this.options.controlPositionsFunction(t).length>0?"control":"none":"none"},initAnchorPoints:function(t,e,n){for(var r=0;r<n.length;r++){var i=n[r],o=this.getEdgeType(i);if("none"!==o&&!this.isIgnoredEdge(i)){var a;"bend"===o?a=t.apply(this,i):"control"===o&&(a=e.apply(this,i));var s={weights:[],distances:[]};if(a)s=this.convertToRelativePositions(i,a);else{var u=i.data(this.syntax[o].weight),l=i.data(this.syntax[o].distance);u&&l&&(s={weights:u,distances:l})}s.distances.length>0?(i.data(this.syntax[o].weight,s.weights),i.data(this.syntax[o].distance,s.distances),i.addClass(this.syntax[o].class),s.distances.length>1&&i.addClass(this.syntax[o].multiClass)):(i.data(this.syntax[o].weight,[]),i.data(this.syntax[o].distance,[]),i.hasClass(this.syntax[o].class)&&i.removeClass(this.syntax[o].class),i.hasClass(this.syntax[o].multiClass)&&i.removeClass(this.syntax[o].multiClass))}}},isIgnoredEdge:function(t){var e=t.source().position("x"),n=t.source().position("y"),r=t.target().position("x"),i=t.target().position("y");if(e==r&&n==i||t.source().id()==t.target().id())return!0;for(var o=0;this.ignoredClasses&&o<this.ignoredClasses.length;o++)if(t.hasClass(this.ignoredClasses[o]))return!0;return!1},getLineDirection:function(t,e){return t.y==e.y&&t.x<e.x?1:t.y<e.y&&t.x<e.x?2:t.y<e.y&&t.x==e.x?3:t.y<e.y&&t.x>e.x?4:t.y==e.y&&t.x>e.x?5:t.y>e.y&&t.x>e.x?6:t.y>e.y&&t.x==e.x?7:8},getSrcTgtPointsAndTangents:function(t){var e=t.source(),n=t.target(),r=(n.position(),e.position(),e.position()),i=n.position(),o=(i.y-r.y)/(i.x-r.x);return{m1:o,m2:-1/o,srcPoint:r,tgtPoint:i}},getIntersection:function(t,e,n){void 0===n&&(n=this.getSrcTgtPointsAndTangents(t));var r,i,o=n.srcPoint,a=n.m1,s=n.m2;if(a==1/0||a==-1/0)r=o.x,i=e.y;else if(0==a)r=e.x,i=o.y;else{var u=o.y-a*o.x;i=a*(r=(e.y-s*e.x-u)/(a-s))+u}return{x:r,y:i}},getAnchorsAsArray:function(t){var e=this.getEdgeType(t);if("none"!==e&&t.css("curve-style")===this.syntax[e].edge){for(var n=[],r=t.pstyle(this.syntax[e].weightCss)?t.pstyle(this.syntax[e].weightCss).pfValue:[],i=t.pstyle(this.syntax[e].distanceCss)?t.pstyle(this.syntax[e].distanceCss).pfValue:[],o=Math.min(r.length,i.length),a=t.source().position(),s=t.target().position(),u=s.y-a.y,l=s.x-a.x,c=Math.sqrt(l*l+u*u),h={x:l/c,y:u/c},d=-h.y,f=h.x,p=0;p<o;p++){var v=r[p],g=i[p],y=1-v,m={x1:a.x,x2:s.x,y1:a.y,y2:s.y},b={x:m.x1*y+m.x2*v,y:m.y1*y+m.y2*v};n.push(b.x+d*g,b.y+f*g)}return n}},convertToRelativePosition:function(t,e,n){void 0===n&&(n=this.getSrcTgtPointsAndTangents(t));var r,i=this.getIntersection(t,e,n),o=i.x,a=i.y,s=n.srcPoint,u=n.tgtPoint;r=o!=s.x?(o-s.x)/(u.x-s.x):a!=s.y?(a-s.y)/(u.y-s.y):0;var l=Math.sqrt(Math.pow(a-e.y,2)+Math.pow(o-e.x,2)),c=this.getLineDirection(s,u),h=this.getLineDirection(i,e);return c-h!=-2&&c-h!=6&&0!=l&&(l*=-1),{weight:r,distance:l}},convertToRelativePositions:function(t,e){for(var n=this.getSrcTgtPointsAndTangents(t),r=[],i=[],o=0;e&&o<e.length;o++){var a=this.convertToRelativePosition(t,e[o],n);r.push(a.weight),i.push(a.distance)}return{weights:r,distances:i}},getDistancesString:function(t,e){for(var n="",r=t.data(this.syntax[e].distance),i=0;r&&i<r.length;i++)n=n+" "+r[i];return n},getWeightsString:function(t,e){for(var n="",r=t.data(this.syntax[e].weight),i=0;r&&i<r.length;i++)n=n+" "+r[i];return n},addAnchorPoint:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==t&&void 0!==e||(t=this.currentCtxEdge,e=this.currentCtxPos),void 0===n&&(n=this.getEdgeType(t));for(var r,i=this.syntax[n].weight,o=this.syntax[n].distance,a=this.convertToRelativePosition(t,e),s=a.weight,u=t.source().position("x"),l=t.source().position("y"),c=t.target().position("x"),h=t.target().position("y"),d=this.convertToRelativePosition(t,{x:u,y:l}).weight,f=this.convertToRelativePosition(t,{x:c,y:h}).weight,p=[d].concat(t.data(i)?t.data(i):[]).concat([f]),v=this.getAnchorsAsArray(t),g=1/0,y=[u,l].concat(v||[]).concat([c,h]),m=-1,b=0;b<p.length-1;b++){var _=p[b],w=p[b+1],x=this.compareWithPrecision(s,_,!0),k=this.compareWithPrecision(s,w),S=this.compareWithPrecision(s,w,!0),E=this.compareWithPrecision(s,_);if(x&&k||S&&E){var C={x:u=y[2*b],y:l=y[2*b+1]},T={x:c=y[2*b+2],y:h=y[2*b+3]},P=(l-h)/(u-c),A=this.getIntersection(t,e,{srcPoint:C,tgtPoint:T,m1:P,m2:-1/P}),D=Math.sqrt(Math.pow(e.x-A.x,2)+Math.pow(e.y-A.y,2));D<g&&(g=D,r=A,m=b)}}void 0!==r&&(e=r),a=this.convertToRelativePosition(t,e),void 0===r&&(a.distance=0);var O=t.data(i),M=t.data(o);return M=M||[],0===(O=O||[]).length&&(m=0),-1!=m&&(O.splice(m,0,a.weight),M.splice(m,0,a.distance)),t.data(i,O),t.data(o,M),t.addClass(this.syntax[n].class),(O.length>1||M.length>1)&&t.addClass(this.syntax[n].multiClass),m},removeAnchor:function(t,e){void 0!==t&&void 0!==e||(t=this.currentCtxEdge,e=this.currentAnchorIndex);var n=this.getEdgeType(t);if(!this.edgeTypeNoneShouldntHappen(n,"anchorPointUtilities.js, removeAnchor")){var r,i=this.syntax[n].weight,o=this.syntax[n].distance,a=t.data(i),s=t.data(o);"bend"===n?r=this.options.bendPositionsFunction(t):"control"===n&&(r=this.options.controlPositionsFunction(t)),a.splice(e,1),s.splice(e,1),r&&r.splice(e,1),1==a.length||1==s.length?t.removeClass(this.syntax[n].multiClass):0==a.length||0==s.length?(t.removeClass(this.syntax[n].class),t.data(i,[]),t.data(o,[])):(t.data(i,a),t.data(o,s))}},removeAllAnchors:function(t){void 0===t&&(t=this.currentCtxEdge);var e=this.getEdgeType(t);if(!this.edgeTypeNoneShouldntHappen(e,"anchorPointUtilities.js, removeAllAnchors")){t.removeClass(this.syntax[e].class),t.removeClass(this.syntax[e].multiClass);var n=this.syntax[e].distance;t.data(this.syntax[e].weight,[]),t.data(n,[]),"bend"===e&&this.options.bendPositionsFunction(t)?this.options.bendPointPositionsSetterFunction(t,[]):"control"===e&&this.options.controlPositionsFunction(t)&&this.options.controlPointPositionsSetterFunction(t,[])}},calculateDistance:function(t,e){var n=t.y-e.y;return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(n,2))},compareWithPrecision:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01;return Math.abs(t-e)<=r||(n?t<e:t>e)},edgeTypeNoneShouldntHappen:function(t,e){return"none"===t&&(console.log("In "+e+": edge type none should never happen here!!"),!0)}};t.exports=e},218:function(t){var e,n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=(e=Math.max,n=Date.now||function(){return(new Date).getTime()},function(t,i,o){var a,s,u,l,c,h,d,f,p,v=0,g=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");if(i=i<0?0:+i||0,!0===o){var m=!0;y=!1}else p=void 0===(f=o)?"undefined":r(f),!f||"object"!=p&&"function"!=p||(m=!!o.leading,g="maxWait"in o&&e(+o.maxWait||0,i),y="trailing"in o?!!o.trailing:y);function b(e,r){r&&clearTimeout(r),s=h=d=void 0,e&&(v=n(),u=t.apply(c,a),h||s||(a=c=void 0))}function _(){var t=i-(n()-l);t<=0||t>i?b(d,s):h=setTimeout(_,t)}function w(){b(y,h)}function x(){if(a=arguments,l=n(),c=this,d=y&&(h||!m),!1===g)var e=m&&!h;else{s||m||(v=l);var r=g-(l-v),o=r<=0||r>g;o?(s&&(s=clearTimeout(s)),v=l,u=t.apply(c,a)):s||(s=setTimeout(w,r))}return o&&h?h=clearTimeout(h):h||i===g||(h=setTimeout(_,i)),e&&(o=!0,u=t.apply(c,a)),!o||h||s||(a=c=void 0),u}return x.cancel=function(){h&&clearTimeout(h),s&&clearTimeout(s),v=0,s=h=d=void 0},x});t.exports=i},579:function(t,e,n){var r,i,o;i=n(259),n(218),o=function(t,e,r){var o=n(347);if(t&&e&&r){var a,s={bendPositionsFunction:function(t){return t.data("bendPointPositions")},controlPositionsFunction:function(t){return t.data("controlPointPositions")},bendPointPositionsSetterFunction:function(t,e){t.data("bendPointPositions",e)},controlPointPositionsSetterFunction:function(t,e){t.data("controlPointPositions",e)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},u=!1;t("core","edgeEditing",function(t){var e=this;return"initialized"===t?u:("get"!==t&&(a=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)if("bendRemovalSensitivity"==r){var i=e[r];isNaN(i)||(n[r]=i>=0&&i<=20?e[r]:i<0?0:20)}else n[r]=e[r];return n}(s,t),u=!0,e.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(t){return i.getDistancesString(t,"bend")},"segment-weights":function(t){return i.getWeightsString(t,"bend")},"edge-distances":"node-position"}),e.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(t){return i.getDistancesString(t,"control")},"control-point-weights":function(t){return i.getWeightsString(t,"control")},"edge-distances":"node-position"}),e.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),i.setIgnoredClasses(a.ignoredClasses),a.initAnchorsAutomatically&&i.initAnchorPoints(a.bendPositionsFunction,a.controlPositionsFunction,e.edges(),a.ignoredClasses),o(a,e)),u?{getAnchorsAsArray:function(t){return i.getAnchorsAsArray(t)},initAnchorPoints:function(t){i.initAnchorPoints(a.bendPositionsFunction,a.controlPositionsFunction,t)},deleteSelectedAnchor:function(t,e){i.removeAnchor(t,e)},getEdgeType:function(t){return i.getEdgeType(t)}}:void 0)})}},t.exports&&(t.exports=o),void 0===(r=(function(){return o}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&$&&Konva&&o(cytoscape,$,Konva)},171:function(t){t.exports={disconnectEdge:function(t,e,n,r){var i={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:n};return e.add(i),t=t.move("source"===r?{source:i.data.id}:{target:i.data.id})[0],{dummyNode:e.nodes("#"+i.data.id)[0],edge:t}},connectEdge:function(t,e,n){if(t.isEdge()&&e.isNode()){var r={};if("source"===n)r.source=e.id();else{if("target"!==n)return;r.target=e.id()}return t.move(r)[0]}},copyEdge:function(t,e){this.copyAnchors(t,e),this.copyStyle(t,e)},copyStyle:function(t,e){t&&e&&(e.data("line-color",t.data("line-color")),e.data("width",t.data("width")),e.data("cardinality",t.data("cardinality")))},copyAnchors:function(t,e){if(t.hasClass("edgebendediting-hasbendpoints")){var n=t.data("cyedgebendeditingDistances"),r=t.data("cyedgebendeditingWeights");e.data("cyedgebendeditingDistances",n),e.data("cyedgebendeditingWeights",r),e.addClass("edgebendediting-hasbendpoints")}else t.hasClass("edgecontrolediting-hascontrolpoints")&&(n=t.data("cyedgecontroleditingDistances"),r=t.data("cyedgecontroleditingWeights"),e.data("cyedgecontroleditingDistances",n),e.data("cyedgecontroleditingWeights",r),e.addClass("edgecontrolediting-hascontrolpoints"));t.hasClass("edgebendediting-hasmultiplebendpoints")?e.addClass("edgebendediting-hasmultiplebendpoints"):t.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&e.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:function(t){t.exports=function(t,e,n){if(null!=t.undoRedo){var r=t.undoRedo({defaultActions:!1,isDebug:!0});r.action("changeAnchorPoints",i,i),r.action("moveAnchorPoints",o,o),r.action("reconnectEdge",a,a),r.action("removeReconnectedEdge",s,s)}function i(n){var r,i,o,a,s=t.getElementById(n.edge.id()),u="none"!==n.type?n.type:e.getEdgeType(s);"none"!==n.type||n.set?(o=e.syntax[u].weight,a=e.syntax[u].distance,r=n.set?s.data(o):n.weights,i=n.set?s.data(a):n.distances):(r=[],i=[]);var l={edge:s,type:u,weights:r,distances:i,set:!0};if(n.set){var c=n.weights&&n.weights.length>0,h=c&&n.weights.length>1;c&&(s.data(o,n.weights),s.data(a,n.distances));var d=e.syntax[u].class,f=e.syntax[u].multiClass;c||h?c&&!h?(s.addClass(d),s.removeClass(f)):s.addClass(d+" "+f):s.removeClass(d+" "+f),c||(s.data(o,[]),s.data(a,[])),s.selected()?(s.unselect(),s.select()):s.select()}return s.trigger("cyedgeediting.changeAnchorPoints"),l}function o(t){if(t.firstTime)return delete t.firstTime,t;var r=t.edges,i=t.positionDiff,o={edges:r,positionDiff:{x:-i.x,y:-i.y}};return function(t,r){r.forEach(function(r){var i=e.getEdgeType(r),o=e.getAnchorsAsArray(r),a=[];if(null!=o){for(var s=0;s<o.length;s+=2)a.push({x:o[s]+t.x,y:o[s+1]+t.y});"bend"===i?n.bendPointPositionsSetterFunction(r,a):"control"===i&&n.controlPointPositionsSetterFunction(r,a)}}),e.initAnchorPoints(n.bendPositionsFunction,n.controlPositionsFunction,r)}(i,r),o}function a(t){var e=t.edge,n=t.location,r=t.oldLoc,i={edge:e=e.move(n)[0],location:r,oldLoc:n};return e.unselect(),i}function s(e){var n=e.oldEdge;(r=t.getElementById(n.data("id")))&&r.length>0&&(n=r);var r,i=e.newEdge;return(r=t.getElementById(i.data("id")))&&r.length>0&&(i=r),n.inside()&&(n=n.remove()[0]),i.removed()&&(i=i.restore()).unselect(),{oldEdge:i,newEdge:n}}}}},e={};return function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(579)}()},9049:function(t,e,n){var r;r=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.filter(function(t){return null!=t}).forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e,n){"use strict";var r=n(10),i=n(0);t.exports=function(t){return new r(i({cy:this},t))}},function(t,e,n){"use strict";t.exports={disableGestures:function(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,t),window.addEventListener("touchmove",this.preventDefault,t),window.addEventListener("wheel",this.preventDefault,t)}return this},resetGestures:function(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,t),window.removeEventListener("touchmove",this.preventDefault,t),window.removeEventListener("wheel",this.preventDefault,t)}return this},saveGestureState:function(){var t=this.cy;return this.lastPanningEnabled=t.panningEnabled(),this.lastZoomingEnabled=t.zoomingEnabled(),this.lastBoxSelectionEnabled=t.boxSelectionEnabled(),this}}},function(t,e,n){"use strict";t.exports={addCytoscapeListeners:function(){var t=this,e=this.cy,n=this.options;return this.addListener(e,"drag",function(){return t.grabbingNode=!0}),this.addListener(e,"free",function(){return t.grabbingNode=!1}),this.addListener(e,"mouseover","node",function(e){t.show(e.target)}),this.addListener(e,"tap","node",function(e){var n=e.target;n.same(t.handleNode)||t.show(n)}),this.addListener(e,"position","node",function(e){e.target.same(t.sourceNode)&&t.hide()}),this.addListener(e,"tapstart","node",function(e){var n=e.target;n.same(t.handleNode)?t.start(t.sourceNode):t.drawMode?t.start(n):n.same(t.sourceNode)&&t.hide()}),this.addListener(e,"tapdrag",function(e){t.update(e.position)}),this.addListener(e,"tapdragover","node",function(e){n.snap||t.preview(e.target)}),this.addListener(e,"tapdragout","node",function(e){n.snap||t.unpreview(e.target)}),this.addListener(e,"tapend",function(){t.stop()}),this.addListener(e,"remove",function(e){e.target.same(t.sourceNode)&&t.hide()}),this}}},function(t,e,n){"use strict";t.exports={preview:!0,hoverDelay:150,handleNodes:"node",snap:!1,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!1,disableBrowserGestures:!0,handlePosition:function(t){return"middle top"},handleInDrawMode:!1,edgeType:function(t,e){return"flat"},loopAllowed:function(t){return!1},nodeLoopOffset:-50,nodeParams:function(t,e){return{}},edgeParams:function(t,e,n){return{}},ghostEdgeParams:function(){return{}},show:function(t){},hide:function(t){},start:function(t){},complete:function(t,e,n){},stop:function(t){},cancel:function(t,e){},hoverover:function(t,e){},hoverout:function(t,e){},previewon:function(t,e,n){},previewoff:function(t,e,n){},drawon:function(){},drawoff:function(){}}},function(t,e,n){"use strict";t.exports={toggleDrawMode:function(t){var e=this.cy,n=this.options;return this.drawMode=null!=t?t:!this.drawMode,this.drawMode?(this.prevUngrabifyState=e.autoungrabify(),e.autoungrabify(!0),!n.handleInDrawMode&&this.handleShown()&&this.hide(),this.emit("drawon")):(e.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function(){return this.toggleDrawMode(!0)},disableDrawMode:function(){return this.toggleDrawMode(!1)}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0);function o(t,e,n){var o,a={};return i(a,e,t),i(a.data,e.data,t.data),a.classes=(void 0===(o=e.classes)?"undefined":r(o))===r("")?e.classes+" "+n:function(t){return(void 0===t?"undefined":r(t))===r([])&&null!=t.length}(e.classes)?e.classes.join(" ")+" "+n:n,a}t.exports={makeEdges:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy,n=this.options,r=this.presumptiveTargets,i=this.previewEles,a=this.active,s=this.sourceNode,u=this.targetNode,l=t?"eh-preview":"",c=e.collection(),h=n.edgeType(s,u);if(a&&h&&(!t||n.preview)){if(!u||0===u.size())return i.remove(),void this.emit("cancel",this.mp(),s,r);if(!t&&n.preview)return i.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),s,u,i);var d=s.position(),f=u.position(),p=void 0;if(p=s.same(u)?{x:d.x+n.nodeLoopOffset,y:d.y+n.nodeLoopOffset}:{x:(d.x+f.x)/2,y:(d.y+f.y)/2},"node"===h){var v=e.add(o({group:"nodes",position:p},n.nodeParams(s,u),l)),g=e.add(o({group:"edges",data:{source:s.id(),target:v.id()}},n.edgeParams(s,u,0),l)),y=e.add(o({group:"edges",data:{source:v.id(),target:u.id()}},n.edgeParams(s,u,1),l));c=c.merge(v).merge(g).merge(y)}else{var m=e.add(o({group:"edges",data:{source:s.id(),target:u.id()}},n.edgeParams(s,u,0),l));c=c.merge(m)}return t?(this.previewEles=c,c.style("events","no")):(c.style("events",""),this.emit("complete",this.mp(),s,u,c)),this}},makePreview:function(){return this.makeEdges(!0),this},removePreview:function(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function(){var t=this,e=this.sourceNode,n=this.ghostNode,r=this.cy,o=this.options,a=this.mx,s=this.my,u=void 0,l=void 0;if(e)return n&&0!==n.length&&!n.removed()||(l=this.ghostEles=r.collection(),r.batch(function(){(n=t.ghostNode=r.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var a=o.ghostEdgeParams();(u=r.add(i({},a,{group:"edges",data:i({},a.data,{source:e.id(),target:n.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),l.merge(n).merge(u)),n.position({x:a,y:s}),this},handleShown:function(){return this.handleNode.nonempty()&&this.handleNode.inside()},setHandleFor:function(t){var e=this,n=this.options,i=this.cy,o=r(n.handlePosition)===r("")?function(){return n.handlePosition}:n.handlePosition,a=t.position(),s=t.outerHeight(),u=t.outerWidth(),l=0,c=0,h=o(t).toLowerCase().split(/\s+/),d=h[0],f=h[1];"left"===d?l=-u/2:"right"===d&&(l=u/2),"top"===f?c=-s/2:"bottom"===f&&(c=s/2);var p={x:this.hx=a.x+l,y:this.hy=a.y+c};return this.handleShown()?this.handleNode.position(p):i.batch(function(){e.handleNode=i.add({classes:"eh-handle",position:p,grabbable:!1,selectable:!1}),e.handleNode.style("z-index",9007199254740991)}),this},removeHandle:function(){return this.handleShown()&&this.handleNode.remove(),this}}},function(t,e,n){"use strict";t.exports={disableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(t,e,n){"use strict";t.exports={enable:function(){return this.enabled=!0,this.emit("enable"),this},disable:function(){return this.enabled=!1,this.emit("disable"),this}}},function(t,e,n){"use strict";n(13);var r=Math.sqrt(2);t.exports={show:function(t){var e=this.options,n=this.drawMode;if(this.canStartOn(t)&&(!n||e.handleInDrawMode))return this.sourceNode=t,this.setHandleFor(t),this.emit("show",this.hp(),this.sourceNode),this},hide:function(){return this.removeHandle(),this.emit("hide",this.hp(),this.sourceNode),this},start:function(t){this.canStartOn(t)&&(this.active=!0,this.sourceNode=t,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents(),this.emit("start",this.hp(),t))},update:function(t){if(this.active){var e=t;return this.mx=e.x,this.my=e.y,this.updateEdge(),this.throttledSnap(),this}},preview:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.options,i=this.sourceNode,o=this.ghostNode,a=this.ghostEles,s=this.presumptiveTargets,u=this.previewEles,l=this.active,c=i,h=t.same(c),d=r.loopAllowed(t),f=t.same(o),p=!r.edgeType(c,t),v=t.same(this.handleNode),g=t.same(this.targetNode);if(!l||v||f||p||g||h&&!d)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var y=function(){e.targetNode=t,s.merge(t),t.addClass("eh-presumptive-target"),t.addClass("eh-target"),e.emit("hoverover",e.mp(),c,t),r.preview&&(t.addClass("eh-preview"),a.addClass("eh-preview-active"),i.addClass("eh-preview-active"),t.addClass("eh-preview-active"),e.makePreview(),e.emit("previewon",e.mp(),c,t,u))};return n&&r.hoverDelay>0?this.previewTimeout=setTimeout(y,r.hoverDelay):y(),!0},unpreview:function(t){if(this.active&&!t.same(this.handleNode)){var e=this.sourceNode,n=this.previewEles,r=this.ghostEles,i=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var o=e;return t.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),r.removeClass("eh-preview-active"),e.removeClass("eh-preview-active"),this.targetNode=i.collection(),this.removePreview(o,t),this.emit("hoverout",this.mp(),o,t),this.emit("previewoff",this.mp(),o,t,n),this}},stop:function(){if(this.active){var t=this.sourceNode,e=this.targetNode,n=this.ghostEles,r=this.presumptiveTargets;return clearTimeout(this.previewTimeout),t.removeClass("eh-source"),e.removeClass("eh-target eh-preview eh-hover"),r.removeClass("eh-presumptive-target"),this.makeEdges(),this.removeHandle(),n.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),t),this}},snap:function(){if(!this.active||!this.options.snap)return!1;var t=this.cy,e=this.targetNode,n=this.options.snapThreshold,i=this.mp(),o=this.handleNode,a=this.previewEles,s=this.ghostNode,u=function(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o},l=function(t){return function(t){return e=t.position(),u(e.x,e.y,(n=i).x,n.y);var e,n}(t)<=function(t){var e=function(t){return r*Math.max(t.outerWidth(),t.outerHeight())/2}(t)+n;return e*e}(t)},c=function(t){var e=t.position(),n=t.outerWidth()/2,r=t.outerHeight()/2,o=e.x,a=e.y,s=i.x,l=i.y,c=o-n,h=o+n,d=a-r,f=a+r,p=c<=s&&s<=h,v=d<=l&&l<=f;if(p&&v)return 0;if(p){var g=l-d,y=l-f;return Math.min(g*g,y*y)}if(v){var m=s-c,b=s-h;return Math.min(m*m,b*b)}return s<c&&l<d?u(s,l,c,d):s>h&&l<d?u(s,l,h,d):u(s,l,s<c&&l>f?c:h,f)},h=function(t){var e=i,n=t.outerWidth()/2,r=t.outerHeight()/2,o=t.position();return o.x-n<=e.x&&e.x<=o.x+n&&o.y-r<=e.y&&e.y<=o.y+r},d=t.nodes(function(t){return!function(t){return t.same(o)||t.same(a)||t.same(s)}(t)&&l(t)}).sort(function(t,e){return c(t)-c(e)}),f=!1;e.nonempty()&&!l(e)&&this.unpreview(e);for(var p=0;p<d.length;p++){var v=d[p];if((!v.isParent()||!h(v))&&(!v.isChild()||h(v.parent()))&&(v.same(e)||this.preview(v,!1))){f=!0;break}}return f},canStartOn:function(t){var e,n=this.options,r=this.previewEles,i=this.ghostEles,o=this.handleNode;return this.enabled&&!this.active&&!this.grabbingNode&&(null==t||!(function(t){return r.anySame(t)}(e=t)||function(t){return o.same(t)}(e)||function(t){return i.anySame(t)}(e))&&function(t){return t.filter(n.handleNodes).length>0}(t))},canStartDrawModeOn:function(t){return this.canStartOn(t)&&this.drawMode},canStartNonDrawModeOn:function(t){return this.canStartOn(t)&&!this.drawMode}}},function(t,e,n){"use strict";var r=n(4),i=n(0),o=n(14),a=n(2),s=n(3),u=n(5),l=n(6),c=n(8),h=n(9),d=n(11),f=n(7);function p(t){var e=t.cy;this.cy=e,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.handleNode=e.collection(),this.clearCollections(),this.hx=0,this.hy=0,this.hr=0,this.mx=0,this.my=0,this.options=i({},r,t),this.saveGestureState(),this.addListeners(),this.throttledSnap=o(this.snap.bind(this),1e3/t.snapFrequency),this.preventDefault=function(t){return t.preventDefault()};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,a)}catch(s){}this.windowListenerOptions=!n||{capture:!0,passive:!1}}var v=p.prototype={};v.destroy=function(){this.removeListeners()},v.setOptions=function(t){i(this.options,t)},v.mp=function(){return{x:this.mx,y:this.my}},v.hp=function(){return{x:this.hx,y:this.hy}},v.clearCollections=function(){var t=this.cy;this.previewEles=t.collection(),this.ghostEles=t.collection(),this.ghostNode=t.collection(),this.sourceNode=t.collection(),this.targetNode=t.collection(),this.presumptiveTargets=t.collection()},[a,s,u,l,c,h,d,f].forEach(function(t){return i(v,t)}),t.exports=p},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e,n,i,o){return(void 0===n?"undefined":r(n))!==r("")&&(o=i=n,n=null),null==o&&(o=!1),{target:t,event:e,selector:n,callback:i,options:o}}function o(t){return t instanceof Element}t.exports={addListener:function(t,e,n,r,a){var s=i(t,e,n,r,a);return this.listeners.push(s),o(s.target)?s.target.addEventListener(s.event,s.callback,s.options):s.selector?s.target.addListener(s.event,s.selector,s.callback,s.options):s.target.addListener(s.event,s.callback,s.options),this},addListeners:function(){var t=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return t.destroy()}),this},removeListener:function(t,e,n,r,a){for(var s=i(t,e,n,r,a),u=this.listeners.length-1;u>=0;u--){var l=this.listeners[u];if(!(s.target!==l.target||s.event!==l.event||null!=s.selector&&s.selector!==l.selector||null!=s.callback&&s.callback!==l.callback)){this.listeners.splice(u,1),o(s.target)?s.target.removeEventListener(s.event,s.callback,s.options):s.selector?s.target.removeListener(s.event,s.selector,s.callback,s.options):s.target.removeListener(s.event,s.callback,s.options);break}}return this},removeListeners:function(){for(var t=this.listeners.length-1;t>=0;t--){var e=this.listeners[t];this.removeListener(e.target,e.event,e.selector,e.callback,e.options)}return this},emit:function(t,e){for(var n=this.options,r=this.cy,i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];r.emit({type:"eh"+t,position:e},o);var s=n[t];return null!=s&&s.apply(void 0,o),this}}},function(t,e,n){"use strict";var r=n(1),i=function(t){t&&t("core","edgehandles",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(e,n){e.exports=t},function(t,n){t.exports=e}])},t.exports=r(n(6301),n(2548))},8080:function(t){t.exports=function(t,e,n){function r(t,e,n){t.union(t.descendants()).filter(":childless").positions(function(t,r){"number"==typeof t&&(t=r);var i=t.position();return{x:i.x+e,y:i.y+n}})}if(n||t("collection","align",function(t,e,n){var i=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})}(this.nodes(":visible")),o=n||i[0];i=i.not(o);var a=0,s=0;"left"==(e=e||"none")?a=-1:"right"==e&&(a=1),"top"==(t=t||"none")?s=-1:"bottom"==t&&(s=1);for(var u=0;u<i.length;u++){var l=i[u],c=Object.assign({},l.position()),h=Object.assign({},l.position());"none"!=e&&(h.x=o.position("x")+a*(o.outerWidth()-l.outerWidth())/2),"none"!=t&&(h.y=o.position("y")+s*(o.outerHeight()-l.outerHeight())/2),r(l,h.x-c.x,h.y-c.y)}return this}),e.undoRedo){var i=function(t){var n={};return e.nodes().not(":parent").positions(function(e,r){"number"==typeof e&&(e=r),n[e.id()]={x:e.position("x"),y:e.position("y")};var i=t[e.id()];return{x:i.x,y:i.y}}),n};e.undoRedo(null,!0).action("align",function(t){var n;return t.firstTime?(n=function(){for(var t={},n=e.nodes(),r=0;r<n.length;r++){var i=n[r];t[i.id()]={x:i.position("x"),y:i.position("y")}}return t}(),t.nodes.align(t.horizontal,t.vertical,t.alignTo)):n=i(t),n},function(t){return i(t)})}}},5567:function(t){var e,n,r=(e=Math.max,n=Date.now||function(){return(new Date).getTime()},function(t,r,i){var o,a,s,u,l,c,h,d,f,p=0,v=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");if(r=r<0?0:+r||0,!0===i){var y=!0;g=!1}else f=typeof(d=i),!d||"object"!=f&&"function"!=f||(y=!!i.leading,v="maxWait"in i&&e(+i.maxWait||0,r),g="trailing"in i?!!i.trailing:g);function m(e,r){r&&clearTimeout(r),a=c=h=void 0,e&&(p=n(),s=t.apply(l,o),c||a||(o=l=void 0))}function b(){var t=r-(n()-u);t<=0||t>r?m(h,a):c=setTimeout(b,t)}function _(){m(g,c)}function w(){if(o=arguments,u=n(),l=this,h=g&&(c||!y),!1===v)var e=y&&!c;else{a||y||(p=u);var i=v-(u-p),d=i<=0||i>v;d?(a&&(a=clearTimeout(a)),p=u,s=t.apply(l,o)):a||(a=setTimeout(_,i))}return d&&c?c=clearTimeout(c):c||r===v||(c=setTimeout(b,r)),e&&(d=!0,s=t.apply(l,o)),!d||c||a||(o=l=void 0),s}return w.cancel=function(){c&&clearTimeout(c),a&&clearTimeout(a),p=0,a=c=h=void 0},w});t.exports=r},7150:function(t){t.exports=function(t,e,n){var r=t,i=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.documentElement.scrollTop,left:e.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),a=e.container(),s=o.getContext("2d");a.appendChild(o);var u=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=r.gridStackOrder};u();var l=function(){var t=e.zoom(),n=e.width(),i=e.height(),o=r.gridSpacing*t,a=e.pan(),u=a.x%o,l=a.y%o;s.strokeStyle=r.gridColor,s.lineWidth=r.lineWidth;var h='\t<svg width="'+n+'" height="'+i+'" xmlns="http://www.w3.org/2000/svg">\n            <defs>\n                <pattern id="horizontalLines" width="'+o+'" height="'+o+'" patternUnits="userSpaceOnUse">\n                    <path d="M '+o+' 0 L 0 0 0 0" fill="none" stroke="'+r.gridColor+'" stroke-width="'+r.lineWidth+'" />\n                </pattern>\n                <pattern id="verticalLines" width="'+o+'" height="'+o+'" patternUnits="userSpaceOnUse">\n                    <path d="M 0 0 L 0 0 0 '+o+'" fill="none" stroke="'+r.gridColor+'" stroke-width="'+r.lineWidth+'" />\n                </pattern>\n            </defs>\n            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, '+l+')" />\n            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate('+u+', 0)" />\n        </svg>\n',d=new Image;h=encodeURIComponent(h),d.onload=function(){c(),s.drawImage(d,0,0)},d.src="data:image/svg+xml,"+h},c=function(){var t=e.width(),n=e.height();s.clearRect(0,0,t,n)},h=n(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=r.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var t=i(o),n=i(a);o.style.top=-(t.top-n.top),o.style.left=-(t.left-n.left),l()},0)},250);return{initCanvas:h,resizeCanvas:h,resetCanvas:u,clearCanvas:c,drawGrid:l,changeOptions:function(t){r=t},sizeCanvas:l}}},8896:function(t){t.exports=function(t,e,n,r,i,o,a,s){var u=function(t){return function(e){t(e)}},l={snapToGridDuringDrag:new u(function(e){t[f(e)]("tapstart","node",r.onTapStartNode)}),resize:new u(function(e){t[f(e)]("ready",v),e?v():g()}),snapToGridOnRelease:new u(function(n){t[f(n)]("add","node",b),t[f(n)]("ready",y),t[f(n)]("free","node",e.onFreeNode),n?y():m()}),drawGrid:new u(function(e){t[f(e)]("zoom",_),t[f(e)]("pan",w),e?(i.initCanvas(),t.on("resize",i.resizeCanvas)):(i.clearCanvas(),i.resetCanvas(),t.off("resize",i.resizeCanvas))}),guidelines:new u(function(e){e?(o.resizeCanvas(),t.on("tapstart","node",T),t.on("grab",k),t.on("pan",P),t.on("drag","node",S),t.on("free",E),window.addEventListener("resize",C)):(t.off("tapstart","node",T),t.off("grab",k),t.off("pan",P),t.off("drag","node",S),t.off("free",E),o.resetCanvas(),window.removeEventListener("resize",C))}),parentPadding:new u(function(e){A(e),t[f(e)]("ready",A),t[f(e)]("add","node:parent",c(D,!0))})};function c(t,e){return function(n){var r=n.target||n.cyTarget;r.is(":parent")&&!e||t(r)}}function h(e){return function(){t.nodes().not(":parent").each(function(t,n){"number"==typeof t&&(t=n),e(t)})}}function d(e){return function(){t.nodes().each(function(t,n){"number"==typeof t&&(t=n),e(t)})}}function f(t){return t?"on":"off"}var p,v=h(n.resizeNode),g=(c(n.resizeNode),h(n.recoverNodeDimensions)),y=d(e.snapNodesTopDown),m=d(e.recoverSnapNode),b=c(e.snapNode,!0),_=function(){p.zoomDash&&i.drawGrid()},w=function(){p.panGrid&&i.drawGrid()},x=null,k=function(t){var e=t.target||t.cyTarget,n=e.selected()?t.cy.$(":selected"):e;x=o.getTopMostNodes(n.nodes()),o.lines.init(x)},S=function(t){this.id()==x.id()&&(o.lines.update(x),p.snapToAlignmentLocationDuringDrag&&o.lines.snapToAlignmentLocation(x))},E=function(t){p.snapToAlignmentLocationOnRelease&&o.lines.snapToAlignmentLocation(x),o.lines.destroy(),x=null},C=function(t){o.lines.resize()},T=function(t){o.getMousePos(t)},P=function(e){x&&(o.setMousePos(t.pan()),o.lines.init(x))},A=function(e){a.setPaddingOfParent(t.nodes(":parent"),e)},D=function(t){a.setPaddingOfParent(t,!0)},O={},M={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function I(t){for(var r in p=Object.extend({},t),t.guidelines=t.initPosAlignment||t.distributionGuidelines||t.geometricGuideline,t)if(O[r]!=t[r])if(l.hasOwnProperty(r))l[r](t[r]);else for(var s in M)M[s].indexOf(r)>=0&&("drawGrid"==s&&(i.changeOptions(t),t.drawGrid&&i.resizeCanvas()),"snapToGridOnRelease"==s&&(e.changeOptions(t),t.snapToGridOnRelease&&y()),"guidelines"==s&&o.changeOptions(t),"resize"==s&&(n.changeOptions(t),t.resize&&v()),"parentPadding"==s&&a.changeOptions(t));O=Object.extend({},O,t)}return{init:I,syncWithOptions:I}}},5713:function(){Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=Array.isArray(n[r])?n[r].slice():"object"==typeof n[r]?Object.extend(t[r],n[r]):n[r])}return t}},7441:function(t,e,n){t.exports=function(t,e,r){var i=n(6620),o=t,a=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.documentElement.scrollTop,left:e.left+document.documentElement.scrollLeft}},s=r(function(){u(),l.height=e.height(),l.width=e.width(),l.style.position="absolute",l.style.top=0,l.style.left=0,l.style.zIndex=o.guidelinesStackOrder,setTimeout(function(){l.height=e.height(),l.width=e.width();var t=a(l),n=a(c);l.style.top=-(t.top-n.top),l.style.left=-(t.left-n.left)},0)},250),u=function(){var t=e.width(),n=e.height();h.clearRect(0,0,t,n)},l=document.createElement("canvas"),c=e.container(),h=l.getContext("2d");c.appendChild(l);var d=function(){l.height=0,l.width=0,l.style.position="absolute",l.style.top=0,l.style.left=0,l.style.zIndex=o.guidelinesStackOrder};d();var f,p,v=null,g=null,y={},m={},b={h:null,v:null};y.getDims=function(t){var e=t.renderedPosition(),n=t.renderedWidth(),r=t.renderedHeight(),i=Number(t.renderedStyle("padding-left").replace("px","")),o=Number(t.renderedStyle("padding-right").replace("px","")),a=Number(t.renderedStyle("padding-top").replace("px","")),s=Number(t.renderedStyle("padding-bottom").replace("px",""));return{horizontal:{center:e.x,left:Math.round(e.x-(i+n/2)),right:Math.round(e.x+(o+n/2))},vertical:{center:e.y,top:Math.round(e.y-(a+r/2)),bottom:Math.round(e.y+(s+r/2))}}},y.init=function(t){v=i(),g=i(),f||(m.x=e.pan("x"),m.y=e.pan("y"),f=t.renderedPosition());var n=e.nodes(":visible");p=(p=t.union(t.ancestors())).union(t.descendants()),n.not(p).each(function(t,e){"number"==typeof t&&(t=e);var n=y.getDims(t);["left","center","right"].forEach(function(e){var r=n.horizontal[e];g.get(r)?g.get(r).push(t):g=g.insert(r,[t])}),["top","center","bottom"].forEach(function(e){var r=n.vertical[e];v.get(r)?v.get(r).push(t):v=v.insert(r,[t])})}),h.lineWidth=o.lineWidth,y.update(t)},y.destroy=function(){y.clear(),v=null,g=null,f=null,k={},b={h:null,v:null},T&&(T.unlock(),T=void 0)},y.clear=u,y.drawLine=function(t,e,n,r){h.setLineDash(r),h.beginPath(),h.moveTo(t.x,t.y),h.lineTo(e.x,e.y),h.strokeStyle=n,h.stroke()},y.drawArrow=function(t,e){"right"==e?(h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y-5),h.lineTo(t.x,t.y),h.lineTo(t.x-5,t.y+5),h.stroke()):"left"==e?(h.setLineDash([]),h.beginPath(),h.moveTo(t.x+5,t.y-5),h.lineTo(t.x,t.y),h.lineTo(t.x+5,t.y+5),h.stroke()):"top"==e?(h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y+5),h.lineTo(t.x,t.y),h.lineTo(t.x+5,t.y+5),h.stroke()):"bottom"==e&&(h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y-5),h.lineTo(t.x,t.y),h.lineTo(t.x+5,t.y-5),h.stroke())},y.drawCross=function(t){h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y+5),h.lineTo(t.x+5,t.y-5),h.moveTo(t.x-5,t.y-5),h.lineTo(t.x+5,t.y+5),h.stroke()};var _=function(t,n){for(var r=t[0],i=y.getDims(r)[n].center,a=t[0],s=y.getDims(a)[n].center,u=0;u<t.length;u++){var l=t[u];y.getDims(l)[n].center<i&&(i=y.getDims(l)[n].center,r=l),y.getDims(l)[n].center>s&&(s=y.getDims(l)[n].center,a=l)}if("horizontal"==n)var c=(i+s)/2<y.getDims(t[1])[n].center?s+(.5*a.width()+o.guidelinesStyle.distGuidelineOffset)*e.zoom():i-(.5*r.width()+o.guidelinesStyle.distGuidelineOffset)*e.zoom();else c=(i+s)/2<y.getDims(t[1])[n].center?s+(.5*a.height()+o.guidelinesStyle.distGuidelineOffset)*e.zoom():i-(.5*r.height()+o.guidelinesStyle.distGuidelineOffset)*e.zoom();return c};function w(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})}y.horizontalDistribution=function(t){var n=null,r=null,i=y.getDims(t),a=i.horizontal.center,s=i.vertical.center;if(g.forEach(function(t,u){for(var l=0;l<u.length;l++){var c=u[l],h=y.getDims(c);if(Math.abs(h.vertical.center-i.vertical.center)<o.guidelinesStyle.range*e.zoom()&&h.horizontal.right==t&&i.horizontal.left-h.horizontal.right>o.guidelinesStyle.minDistRange){var d=Math.round(2*a)-t;g.forEach(function(t,i){for(var a=0;a<i.length;a++){var u=i[a];Math.abs(y.getDims(u).vertical.center-s)<o.guidelinesStyle.range*e.zoom()&&Math.abs(d-y.getDims(u).horizontal.left)<2*o.guidelinesTolerance&&(n=c,r=u)}},d-o.guidelinesTolerance,d+o.guidelinesTolerance)}}},a-o.guidelinesStyle.range*e.zoom(),a),n){b.hd=a-(y.getDims(r).horizontal.left+y.getDims(n).horizontal.right)/2,(!o.geometricGuideline||null==b.h||Math.abs(b.h)>Math.abs(b.hd))&&(b.h=b.hd);var u=_([n,t,r],"vertical");y.drawLine({x:y.getDims(n).horizontal.right,y:u},{x:i.horizontal.left,y:u},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(r).horizontal.left,y:u},{x:i.horizontal.right,y:u},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(n).horizontal.right,y:u},{x:y.getDims(n).horizontal.right,y:y.getDims(n).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(r).horizontal.left,y:u},{x:y.getDims(r).horizontal.left,y:y.getDims(r).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:i.horizontal.left,y:u},{x:i.horizontal.left,y:s},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:i.horizontal.right,y:u},{x:i.horizontal.right,y:s},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawArrow({x:y.getDims(n).horizontal.right,y:u},"left"),y.drawArrow({x:i.horizontal.left,y:u},"right"),y.drawArrow({x:i.horizontal.right,y:u},"left"),y.drawArrow({x:y.getDims(r).horizontal.left,y:u},"right")}else y.horizontalDistributionNext(t,"left")||y.horizontalDistributionNext(t,"right")},y.verticalDistribution=function(t){var n=null,r=null,i=y.getDims(t),a=i.horizontal.center,s=i.vertical.center;if(v.forEach(function(t,u){for(var l=0;l<u.length;l++){var c=u[l],h=y.getDims(c);if(Math.abs(h.horizontal.center-i.horizontal.center)<o.guidelinesStyle.range*e.zoom()&&h.vertical.bottom==t&&i.vertical.top-h.vertical.bottom>o.guidelinesStyle.minDistRange){var d=Math.round(2*s-t);v.forEach(function(t,i){for(var s=0;s<i.length;s++){var u=i[s];Math.abs(y.getDims(u).horizontal.center-a)<o.guidelinesStyle.range*e.zoom()&&Math.abs(d-y.getDims(u).vertical.top)<2*o.guidelinesTolerance&&(n=c,r=u)}},d-o.guidelinesTolerance,d+o.guidelinesTolerance)}}},s-o.guidelinesStyle.range*e.zoom(),s),n){b.vd=s-(y.getDims(n).vertical.bottom+y.getDims(r).vertical.top)/2,(!o.geometricGuideline||null==b.v||Math.abs(b.v)>Math.abs(b.vd))&&(b.v=b.vd);var u=_([n,t,r],"horizontal");y.drawLine({y:y.getDims(n).vertical.bottom,x:u},{y:i.vertical.top,x:u},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({y:y.getDims(r).vertical.top,x:u},{y:i.vertical.bottom,x:u},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({y:y.getDims(n).vertical.bottom,x:u},{y:y.getDims(n).vertical.bottom,x:y.getDims(n).horizontal.center},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({y:y.getDims(r).vertical.top,x:u},{y:y.getDims(r).vertical.top,x:y.getDims(r).horizontal.center},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({y:i.vertical.bottom,x:u},{y:i.vertical.bottom,x:a},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({y:i.vertical.top,x:u},{y:i.vertical.top,x:a},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawArrow({x:u,y:y.getDims(n).vertical.bottom},"top"),y.drawArrow({x:u,y:i.vertical.top},"bottom"),y.drawArrow({x:u,y:y.getDims(r).vertical.top},"bottom"),y.drawArrow({x:u,y:i.vertical.bottom},"top")}else y.verticalDistributionNext(t,"below")||y.verticalDistributionNext(t,"above")},y.searchForLine=function(t,n){var r,i,a,s,u,l,c,h=y.getDims(n)[t],d=Number.MAX_SAFE_INTEGER;for(var f in"horizontal"==t?(l=g,s="y",u="x",b.h=null):(l=v,s="x",u="y",b.v=null),a=n.renderedPosition(s),h)if(l.forEach(function(t,n){for(var r=0;r<n.length;r++){var l=n[r];if(o.centerToEdgeAlignment||"center"!=f&&l.renderedPosition(u)!=t||"center"==f&&l.renderedPosition(u)==t){var h=Math.abs(a-l.renderedPosition(s));h<d&&h<o.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(i=l,d=h,c=t)}}},(r=h[f])-Number(o.guidelinesTolerance),r+Number(o.guidelinesTolerance)),i){d=y.getDims(n)[t][f],"horizontal"==t?(b.h=d-c,y.drawLine({x:d,y:n.renderedPosition("y")},{x:d,y:i.renderedPosition("y")},o.guidelinesStyle.strokeStyle,o.guidelinesStyle.lineDash)):(b.v=d-c,y.drawLine({x:n.renderedPosition("x"),y:d},{x:i.renderedPosition("x"),y:d},o.guidelinesStyle.strokeStyle,o.guidelinesStyle.lineDash));break}},y.horizontalDistributionNext=function(t,n){var r=null,i=null,a=y.getDims(t),s=a.horizontal.center,u=a.vertical.center,l="right",c="left",h=s;"left"==n&&(l="left",c="right",h=s-o.guidelinesStyle.range*e.zoom());var d={left:function(t,e){return e-t>o.guidelinesStyle.minDistRange},right:function(t,e){return t-e>o.guidelinesStyle.minDistRange}};return g.forEach(function(t,s){for(var h=0;h<s.length;h++){var f=s[h],p=y.getDims(f);if(Math.abs(p.vertical.center-a.vertical.center)<o.guidelinesStyle.range*e.zoom()&&p.horizontal[c]==t&&d[n](p.horizontal[c],a.horizontal[l])){var v=p.horizontal[l]-(a.horizontal[l]-t);g.forEach(function(t,n){for(var a=0;a<n.length;a++){var s=n[a];Math.abs(y.getDims(s).vertical.center-u)<o.guidelinesStyle.range*e.zoom()&&Math.abs(v-y.getDims(s).horizontal[c])<2*o.guidelinesTolerance&&(r=f,i=s)}},v-o.guidelinesTolerance,v+o.guidelinesTolerance)}}},h,h+o.guidelinesStyle.range*e.zoom()),r?(b.hd=y.getDims(t).horizontal[l]-y.getDims(r).horizontal[c]-(y.getDims(r).horizontal[l]-y.getDims(i).horizontal[c]),(!o.geometricGuideline||null==b.h||Math.abs(b.h)>Math.abs(b.hd))&&(b.h=b.hd),y.drawDH(t,r,i,n),!0):(o.geometricGuideline||(b.h=null),!1)},y.drawDH=function(t,e,n,r){var i=y.getDims(t).vertical.center,a="right",s="left";"left"==r&&(a="left",s="right");var u=_([e,t,n],"vertical");y.drawLine({x:y.getDims(e).horizontal[s],y:u},{x:y.getDims(t).horizontal[a],y:u},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(t).horizontal[a],y:u},{x:y.getDims(t).horizontal[a],y:i},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(n).horizontal[s],y:u},{x:y.getDims(e).horizontal[a],y:u},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(n).horizontal[s],y:u},{x:y.getDims(n).horizontal[s],y:y.getDims(n).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(e).horizontal[s],y:u},{x:y.getDims(e).horizontal[s],y:y.getDims(e).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawLine({x:y.getDims(e).horizontal[a],y:u},{x:y.getDims(e).horizontal[a],y:y.getDims(e).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),y.drawArrow({x:y.getDims(t).horizontal[a],y:u},s),y.drawArrow({x:y.getDims(e).horizontal[s],y:u},a),y.drawArrow({x:y.getDims(e).horizontal[a],y:u},s),y.drawArrow({x:y.getDims(n).horizontal[s],y:u},a)},y.verticalDistributionNext=function(t,n){var r=null,i=null,a=y.getDims(t),s=a.horizontal.center,u=a.vertical.center,l="top",c="bottom",h=u-o.guidelinesStyle.range*e.zoom();"above"==n&&(l="bottom",c="top",h=u);var d={below:function(t,e){return e-t>o.guidelinesStyle.minDistRange},above:function(t,e){return t-e>o.guidelinesStyle.minDistRange}};return v.forEach(function(t,u){for(var h=0;h<u.length;h++){var f=u[h],p=y.getDims(f);if(Math.abs(p.horizontal.center-a.horizontal.center)<o.guidelinesStyle.range*e.zoom()&&p.vertical[c]==t&&d[n](p.vertical[c],a.vertical[l])){var g=p.vertical[l]-(a.vertical[l]-t);v.forEach(function(t,n){for(var a=0;a<n.length;a++){var u=n[a];Math.abs(y.getDims(u).horizontal.center-s)<o.guidelinesStyle.range*e.zoom()&&Math.abs(g-y.getDims(u).vertical[c])<2*o.guidelinesTolerance&&(r=f,i=u)}},g-o.guidelinesTolerance,g+o.guidelinesTolerance)}}},h,h+o.guidelinesStyle.range*e.zoom()),r?(b.vd=y.getDims(t).vertical[l]-y.getDims(r).vertical[c]-(y.getDims(r).vertical[l]-y.getDims(i).vertical[c]),(!o.geometricGuideline||null==b.v||Math.abs(b.v)>Math.abs(b.vd))&&(b.v=b.vd),y.drawDV(t,r,i,n),!0):(o.geometricGuideline||(b.v=null),!1)},y.drawDV=function(t,e,n,r){var i=y.getDims(t),a=i.horizontal.center,s="top",u="bottom";"above"==r&&(s="bottom",u="top");var l=_([e,t,n],"horizontal");y.drawLine({x:l,y:i.vertical[s]},{x:l,y:y.getDims(e).vertical[u]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({x:l,y:y.getDims(e).vertical[s]},{x:l,y:y.getDims(n).vertical[u]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({x:a,y:i.vertical[s]},{x:l,y:i.vertical[s]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({x:y.getDims(e).horizontal.center,y:y.getDims(e).vertical[u]},{x:l,y:y.getDims(e).vertical[u]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({x:y.getDims(e).horizontal.center,y:y.getDims(e).vertical[s]},{x:l,y:y.getDims(e).vertical[s]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawLine({x:l,y:y.getDims(n).vertical[u]},{x:y.getDims(n).horizontal.center,y:y.getDims(n).vertical[u]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),y.drawArrow({x:l,y:i.vertical[s]},u),y.drawArrow({x:l,y:y.getDims(e).vertical[u]},s),y.drawArrow({x:l,y:y.getDims(e).vertical[s]},u),y.drawArrow({x:l,y:y.getDims(n).vertical[u]},s)},y.update=function(t){y.clear(),o.initPosAlignment&&E(t),t.each(function(t,e){"number"==typeof t&&(t=e),o.geometricGuideline&&(y.searchForLine("horizontal",t),y.searchForLine("vertical",t)),o.distributionGuidelines&&(y.horizontalDistribution(t),y.verticalDistribution(t))})},y.resize=function(){s()};var x,k={},S={},E=function(t){var e=t.renderedPosition();Math.abs(f.y-e.y)<o.guidelinesTolerance?(y.drawLine({x:S.x,y:k.y},{x:e.x,y:k.y},o.guidelinesStyle.initPosAlignmentColor,o.guidelinesStyle.initPosAlignmentLine),y.drawCross(k.y==S.y?S:k)):Math.abs(f.x-e.x)<o.guidelinesTolerance&&(y.drawLine({x:k.x,y:S.y},{x:k.x,y:e.y},o.guidelinesStyle.initPosAlignmentColor,o.guidelinesStyle.initPosAlignmentLine),y.drawCross(k.x==S.x?S:k))};e.on("tapstart","node",function(){x=this});var C,T,P={x:0,y:0};return e.on("mousemove",function(t){C=t.renderedPosition||t.cyRenderedPosition,T&&T.each(function(t,e){if("number"==typeof t&&(t=e),t.locked()&&(Math.abs(C.x-P.x)>2*o.guidelinesTolerance||Math.abs(C.y-P.y)>2*o.guidelinesTolerance)){t.unlock();var n={};n.x=C.x-x.renderedPosition("x"),n.y=C.y-x.renderedPosition("y"),r=n,(i=w(t)).union(i.descendants()).filter(":childless").forEach(function(t,e){"number"==typeof t&&(t=e);var n={x:r.x+t.renderedPosition("x"),y:r.y+t.renderedPosition("y")};t.renderedPosition(n)})}var r,i})}),y.snapToAlignmentLocation=function(t){T=t,t.each(function(t,e){"number"==typeof t&&(t=e);var n=t.renderedPosition();b.h&&(P=C,n.x-=b.h,t.renderedPosition(n)),b.v&&(P=C,n.y-=b.v,t.renderedPosition(n)),(b.v||b.h)&&(b.h=null,b.v=null,T.lock())}),y.update(t)},{changeOptions:function(t){0==(o=t).guidelinesTolerance&&(o.guidelinesTolerance=.001)},lines:y,getTopMostNodes:w,getMousePos:function(t){S.x=(k=t.renderedPosition||t.cyRenderedPosition).x,S.y=k.y},setMousePos:function(t){S.x+=t.x-m.x,S.y+=t.y-m.y,m.x=t.x,m.y=t.y},resizeCanvas:s,resetCanvas:d}}},3091:function(t,e,n){var r;!function(){"use strict";var i=function(t){if(t){n(5713);var e=!1,r={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=n(5362),o=n(5343),a=n(7150),s=n(4993),u=n(8896),l=n(7441),c=n(3417),h=n(8080),d=n(5567);t("core","gridGuide",function(n){var f,p,v,g,y,m,b,_=this,w=function(t){return t.scratch("_gridGuide")||t.scratch("_gridGuide",{}),t.scratch("_gridGuide")}(_),x=Object.extend({},w.options||r,n);return w.options=x,w.initialized?(y=w.eventsController).syncWithOptions(x):(f=i(_,x.gridSpacing,x.snapToGridCenter),p=s(x.gridSpacing),v=o(_,f),g=a(x,_,d),m=l(x,_,d),b=c(x,_),y=u(_,f,p,v,g,m,b,x),h(t,_,e),e=!0,y.init(x),w.initialized=!0,w.eventsController=y),this})}};t.exports&&(t.exports=i),void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&i(cytoscape)}()},3417:function(t){t.exports=function(t,e){var n,r=t,i="_gridParentPadding";return{changeOptions:function(t){n=(r=t).parentSpacing<0?r.gridSpacing:r.parentSpacing,e.style().selector("."+i).style("compound-sizing-wrt-labels","exclude").style("padding-left",n).style("padding-right",n).style("padding-top",n).style("padding-bottom",n).update()},setPaddingOfParent:function(t,e){e?t.addClass(i):t.removeClass(i)}}}},4993:function(t){t.exports=function(t){var e=function(t){return t.scratch("_gridGuide")||t.scratch("_gridGuide",{}),t.scratch("_gridGuide")};return{resizeNode:function(n){var r=n.width(),i=n.height(),o=Math.round((r-t)/(2*t))*(2*t),a=Math.round((i-t)/(2*t))*(2*t);a=a>0?a+t:t,r==(o=o>0?o+t:t)&&i==a||(n.style({width:o,height:a}),e(n).resize={oldWidth:r,oldHeight:i})},recoverNodeDimensions:function(t){var n=e(t).resize;n&&t.style({width:n.oldWidth,height:n.oldHeight})},changeOptions:function(e){t=Number(e.gridSpacing)}}}},5343:function(t){t.exports=function(t,e){var n,r,i,o,a={onTapStartNode:function(e){if(!(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)){var o=e.target||e.cyTarget;r=o.selected()?e.cy.$(":selected"):o,i=e.position||e.cyPosition,o.grabbable()&&!o.locked()&&((n=o).lock(),t.on("tapdrag",u),t.on("tapend",s))}}},s=function e(r){t.off("tapdrag",u),t.off("tapend",e),n.unlock(),r.preventDefault()},u=function(t){n.position();var a=(o=e.snapPos(o=t.position||t.cyPosition)).x-i.x,s=o.y-i.y;0==a&&0==s||(n.unlock(),r.union(r.descendants()).filter(":childless").positions(function(t,n){"number"==typeof t&&(t=n);var r=t.position();return e.snapPos({x:r.x+a,y:r.y+s})}),i=o,n.lock(),n.trigger("drag"))};return a}},5362:function(t){t.exports=function(t,e,n){var r={changeOptions:function(t){e=t.gridSpacing,n=t.snapToGridCenter?.5:0},snapPos:function(t){var r=n?Math.floor(t.x/e):Math.round(t.x/e),i=n?Math.floor(t.y/e):Math.round(t.y/e);return{x:(r+n)*e,y:(i+n)*e}},snapNode:function(t){var e=t.position(),n=r.snapPos(e);t.position(n)},snapNodesTopDown:function(e){t.startBatch(),e.union(e.descendants()).filter(":childless").positions(function(t,e){"number"==typeof t&&(t=e);var n=t.position();return r.snapPos(n)}),t.endBatch()},onFreeNode:function(t){var e,n=t.target||t.cyTarget;e=n.selected()?t.cy.$(":selected"):n,r.snapNodesTopDown(e)},recoverSnapNode:function(t){var e=function(t){return t.scratch("_gridGuide")||t.scratch("_gridGuide",{}),t.scratch("_gridGuide")}(t).snap;e&&t.position(e.oldPos)}};return r}},6685:function(t,e,n){var r;!function(){"use strict";var i=function(t,e){t&&e&&(e.fn.cyPanzoom=e.fn.cytoscapePanzoom=function(n){return a.apply(this,[n,t,e]),this},t("core","panzoom",function(n){return a.apply(this,[n,t,e]),this}))},o={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},a=function(t,e,n){var r=this,i=n.extend(!0,{},o,t),a=t,s={destroy:function(){var t=n(r.container()).find(".cy-panzoom");t.data("winbdgs").forEach(function(t){n(window).unbind(t.evt,t.fn)}),t.data("cybdgs").forEach(function(t){r.off(t.evt,t.fn)}),t.remove()},init:function(){return window,n(r.container()).each(function(){var t=n(this);t.cytoscape=e;var o=[],a=n(window),s=function(t,e){o.push({evt:t,fn:e}),a.bind(t,e)},u=function(t,e){for(var n=0;n<o.length;n++){var r=o[n];if(r.evt===t&&r.fn===e){o.splice(n,1);break}}a.unbind(t,e)},l=[],c=n('<div class="cy-panzoom"></div>');t.prepend(c),c.css("position","absolute"),c.data("winbdgs",o),c.data("cybdgs",l),i.zoomOnly&&c.addClass("cy-panzoom-zoom-only");var h=n('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+i.zoomInIcon+'"></span></div>');c.append(h);var d=n('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+i.zoomOutIcon+'"></span></div>');c.append(d);var f=n('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+i.resetIcon+'"></span></div>');c.append(f);var p=n('<div class="cy-panzoom-slider"></div>');c.append(p),p.append('<div class="cy-panzoom-slider-background"></div>');var v=n('<div class="cy-panzoom-slider-handle"><span class="icon '+i.sliderHandleIcon+'"></span></div>');p.append(v);var g=n('<div class="cy-panzoom-no-zoom-tick"></div>');p.append(g);var y=n('<div class="cy-panzoom-panner"></div>');c.append(y);var m=n('<div class="cy-panzoom-panner-handle"></div>');y.append(m);var b=n('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),_=n('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),w=n('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),x=n('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');y.append(b).append(_).append(w).append(x);var k=n('<div class="cy-panzoom-pan-indicator"></div>');function S(){clearInterval(P),u("mousemove",I),k.hide()}function E(){r.pan(),r.zoom(),C=t.width()/2,T=t.height()/2}y.append(k);var C,T,P,A=!1;function D(){A=!0,E()}function O(){A=!1}function M(t){A||E(),r.zoom({level:t,renderedPosition:{x:C,y:T}})}var I=function(t){t.stopPropagation(),t.preventDefault(),clearInterval(P);var e=function(t){var e={x:t.originalEvent.pageX-y.offset().left-y.width()/2,y:t.originalEvent.pageY-y.offset().top-y.height()/2},n=i.panDragAreaSize,r=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.min(r/n,1);return r<i.panInactiveArea?{x:NaN,y:NaN}:(e={x:e.x/r,y:e.y/r},o=Math.max(i.panMinPercentSpeed,o),{x:-1*e.x*(o*i.panDistance),y:-1*e.y*(o*i.panDistance)})}(t);isNaN(e.x)||isNaN(e.y)?k.hide():(function(t){var e=t,n=Math.sqrt(e.x*e.x+e.y*e.y),r=-1*e.x/n,o=-1*e.y/n,a=y.width(),s=y.height(),u=Math.max(i.panIndicatorMinOpacity,n/i.panDistance),l=255-Math.round(255*u);k.show().css({left:a/2*r+a/2,top:s/2*o+s/2,background:"rgb("+l+", "+l+", "+l+")"})}(e),P=setInterval(function(){r.panBy(e)},i.panSpeed))};m.bind("mousedown",function(t){I(t),s("mousemove",I)}),m.bind("mouseup",function(){S()}),s("mouseup blur",function(){S()}),p.bind("mousedown",function(){return!1});var L,N,R=!1;function F(t,e){void 0===e&&(e=0);var n=p.height()-v.height()-4,r=t.pageY-p.offset().top-e;r<2&&(r=2),r>n&&(r=n);var o=1-(r-2)/(n-2);v.css("top",r);var a=i.minZoom,s=i.maxZoom,u=Math.log(a)/Math.log(s),l=Math.pow(s,(1-u)*o+u);l<a?l=a:l>s&&(l=s),M(l)}function j(){var t=r.zoom(),e=i.maxZoom,n=Math.log(i.minZoom)/Math.log(e),o=1-(Math.log(t)/Math.log(e)-n)/(1-n),a=p.height()-v.height()-4,s=o*(a-2);s<2&&(s=2),s>a&&(s=a),v.css("top",s)}function B(t,e){var n;t.bind("mousedown",function(t){if(t.preventDefault(),t.stopPropagation(),0==t.button){var o=function(){var t=r.zoom(),n=r.zoom()*e;n<i.minZoom&&(n=i.minZoom),n>i.maxZoom&&(n=i.maxZoom),n==i.maxZoom&&t==i.maxZoom||n==i.minZoom&&t==i.minZoom||M(n)};return D(),o(),n=setInterval(o,i.zoomDelay),!1}}),s("mouseup blur",function(){clearInterval(n),O()})}v.bind("mousedown",L=function(t){var e=t.target===v[0]?t.offsetY:0;R=!0,D(),v.addClass("active");var n=0;return s("mousemove",N=function(t){var r=+new Date;return r>n+10&&(n=r,F(t,e),!1)}),s("mouseup",function(){u("mousemove",N),R=!1,v.removeClass("active"),O()}),!1}),p.bind("mousedown",function(t){t.target!==v[0]&&(L(t),F(t))}),j(),function(t,e){l.push({evt:"zoom",fn:e}),r.on("zoom",e)}(0,function(){R||j()}),function(){var t=i.maxZoom,e=Math.log(i.minZoom)/Math.log(t),n=1-(Math.log(1)/Math.log(t)-e)/(1-e);if(n>1||n<0)g.hide();else{var r=p.height()-v.height()-4,o=n*(r-2);o<2&&(o=2),o>r&&(o=r),g.css("top",o)}}(),B(h,1+i.zoomFactor),B(d,1-i.zoomFactor),f.bind("mousedown",function(t){if(0==t.button){var e=i.fitSelector?r.elements(i.fitSelector):r.elements();return 0===e.size()?r.reset():("function"==typeof i.animateOnFit?i.animateOnFit.call():i.animateOnFit)?r.animate({fit:{eles:e,padding:i.fitPadding}},{duration:i.fitAnimationDuration}):r.fit(e,i.fitPadding),!1}})})}};return s[a]?s[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?(n.error("No such function `"+a+"` for jquery.cytoscapePanzoom"),n(this)):s.init.apply(this,arguments)};t.exports?t.exports=function(t,e){i(t,e||n(4173))}:void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&i(cytoscape,jQuery)}()},2598:function(t,e,n){var r;!function(){"use strict";var i=function(t){function e(t,e){void 0===t.scratch("_undoRedo")&&t.scratch("_undoRedo",{});var n=t.scratch("_undoRedo");return void 0===e?n:n[e]}function n(t,n,r){var i=e(t);i[n]=r,t.scratch("_undoRedo",i)}t&&t("core","undoRedo",function(t,r){var i=this,o=e(i,"instance")||function(t){return{options:{isDebug:!1,actions:{},undoableDrag:!0,stackSizeLimit:void 0,beforeUndo:function(){},afterUndo:function(){},beforeRedo:function(){},afterRedo:function(){},ready:function(){}},actions:{},undoStack:[],redoStack:[],reset:function(t,e){this.undoStack=t||[],this.redoStack=e||[]},undo:function(){if(!this.isUndoStackEmpty()){var e=this.undoStack.pop();t.trigger("beforeUndo",[e.name,e.args]);var n=this.actions[e.name]._undo(e.args);return this.redoStack.push({name:e.name,args:n}),t.trigger("afterUndo",[e.name,e.args,n]),n}this.options.isDebug&&console.log("Undoing cannot be done because undo stack is empty!")},redo:function(){if(!this.isRedoStackEmpty()){var e=this.redoStack.pop();t.trigger(e.firstTime?"beforeDo":"beforeRedo",[e.name,e.args]),e.args||(e.args={}),e.args.firstTime=!!e.firstTime;var n=this.actions[e.name]._do(e.args);return this.undoStack.push({name:e.name,args:n}),null!=this.options.stackSizeLimit&&this.undoStack.length>this.options.stackSizeLimit&&this.undoStack.shift(),t.trigger(e.firstTime?"afterDo":"afterRedo",[e.name,e.args,n]),n}this.options.isDebug&&console.log("Redoing cannot be done because redo stack is empty!")},do:function(t,e){return this.redoStack.length=0,this.redoStack.push({name:t,args:e,firstTime:!0}),this.redo()},undoAll:function(){for(;!this.isUndoStackEmpty();)this.undo()},redoAll:function(){for(;!this.isRedoStackEmpty();)this.redo()},action:function(t,e,n){return this.actions[t]={_do:e,_undo:n},this},removeAction:function(t){delete this.actions[t]},isUndoStackEmpty:function(){return 0===this.undoStack.length},isRedoStackEmpty:function(){return 0===this.redoStack.length},getUndoStack:function(){return this.undoStack},getRedoStack:function(){return this.redoStack}}}(i);if(n(i,"instance",o),t){for(var a in t)o.options.hasOwnProperty(a)&&(o.options[a]=t[a]);if(t.actions)for(var a in t.actions)o.actions[a]=t.actions[a]}if(!e(i,"isInitialized")&&!r){var s=function(t){function n(t,e,r){for(var i=r?e:function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})}(e),o=0;o<i.length;o++){var a=i[o],s=a.position("x"),u=a.position("y");a.isParent()||a.position({x:s+t.x,y:u+t.y}),n(t,a.children(),!0)}}function r(e){return"string"==typeof e?t.$(e):e}function i(t){return r(t).restore()}function o(e){var n={};return t.nodes().not(":parent").positions(function(t,r){"number"==typeof t&&(t=r),n[t.id()]={x:t.position("x"),y:t.position("y")};var i=e[t.id()];return{x:i.x,y:i.y}}),n}function a(t){var e={};if(t.firstTime){var r=null==t.parentData?null:t.parentData,i=t.nodes.union(t.nodes.descendants());e.elesToRestore=i.union(i.connectedEdges()),e.movedEles=t.nodes.move({parent:r}),n({x:t.posDiffX,y:t.posDiffY},e.movedEles)}else e.elesToRestore=t.movedEles.remove(),e.movedEles=t.elesToRestore.restore();return t.callback&&(e.callback=t.callback,t.callback(e.movedEles)),e}function s(t){var e={};if(t.firstTime){var r=null==t.parentData?null:t.parentData,i=t.nodes.union(t.nodes.descendants()),o={};i.forEach(function(t){t.parent().id()?o[t.id()]=t.parent():o[t.id()]=null});var a={};i.forEach(function(t){a[t.id()]={},a[t.id()].x=t.position("x"),a[t.id()].y=t.position("y")}),e.oldParent=o,e.oldPosition=a,e.newParent=r,e.movedEles=i,t.nodes.move({parent:r}).nodes(),n({x:t.posDiffX,y:t.posDiffY},e.movedEles)}else e.oldParent={},t.movedEles.forEach(function(t){t.parent().id()?e.oldParent[t.id()]=t.parent():e.oldParent[t.id()]=null}),e.oldPosition={},t.movedEles.forEach(function(t){e.oldPosition[t.id()]={},e.oldPosition[t.id()].x=t.position("x"),e.oldPosition[t.id()].y=t.position("y")}),e.newParent=t.oldParent,e.movedEles=t.movedEles,e.movedEles.forEach(function(n){"object"!=typeof e.newParent?n.move({parent:e.newParent}):null==e.newParent[n.id()]?n.move({parent:null}):n.move({parent:e.newParent[n.id()].id()}),n.position(t.oldPosition[n.id()])});return t.callback&&(e.callback=t.callback,t.callback(e.movedEles)),e}function u(n,r){for(var i=[],o=e(t,"instance").actions,a=0;a<n.length;a++)if(!o.hasOwnProperty((s=n[a]).name))throw"Action "+s.name+" does not exist as an undoable function";for(a=0;a<n.length;a++){var s,u;(s=n[a]).param.firstTime=n.firstTime,u="undo"==r?o[s.name]._undo(s.param):o[s.name]._do(s.param),i.unshift({name:s.name,param:u})}return i}return{add:{_do:function(e){return e.firstTime?t.add(e):i(e)},_undo:t.remove},remove:{_do:t.remove,_undo:i},restore:{_do:i,_undo:t.remove},select:{_do:function(t){return r(t).select()},_undo:function(t){return r(t).unselect()}},unselect:{_do:function(t){return r(t).unselect()},_undo:function(t){return r(t).select()}},move:{_do:function(t){var e=r(t.eles),n=e.nodes(),i=e.edges(),o=[],a=[],s=[];return n.forEach(function(t){o.push(t.parent().length>1?t.parent().id():null)}),i.forEach(function(t){a.push(t.source().id()),s.push(t.target().id())}),{oldNodesParents:o,newNodes:n.move(t.location),oldEdgesSources:a,oldEdgesTargets:s,newEdges:i.move(t.location)}},_undo:function(e){var n=t.collection(),r={};if(e.newNodes.length>0){r.parent=e.newNodes[0].parent().id();for(var i=0;i<e.newNodes.length;i++){var o=e.newNodes[i].move({parent:e.oldNodesParents[i]});n=n.union(o)}}else for(r.source=e.newEdges[0].source().id(),r.target=e.newEdges[0].target().id(),i=0;i<e.newEdges.length;i++){var a=e.newEdges[i].move({source:e.oldEdgesSources[i],target:e.oldEdgesTargets[i]});n=n.union(a)}return{eles:n,location:r}}},drag:{_do:function(e){return e.move&&(n(e.positionDiff,e.nodes),t.elements().unselect()),e},_undo:function(e){var r={positionDiff:e.positionDiff,nodes:e.nodes,move:!0};return n({x:-1*e.positionDiff.x,y:-1*e.positionDiff.y},e.nodes),t.elements().unselect(),r}},layout:{_do:function(e){if(e.firstTime){var n,i=function(){for(var e={},n=t.nodes(),r=0;r<n.length;r++){var i=n[r];e[i.id()]={x:i.position("x"),y:i.position("y")}}return e}();return(n=e.eles?r(e.eles).layout(e.options):t.layout(e.options))&&n.run&&n.run(),i}return o(e)},_undo:function(t){return o(t)}},changeParent:{_do:function(e){return t.nodes()[0].component?s(e):a(e)},_undo:function(e){return t.nodes()[0].component?s(e):a(e)}},batch:{_do:function(t){return u(t,"do")},_undo:function(t){return u(t,"undo")}}}}(i);for(var a in s)o.actions[a]=s[a];!function(t,n){var r=null;t.on("grab","node",function(){("function"==typeof n?n.call(this):n)&&((r={}).lastMouseDownPosition={x:this.position("x"),y:this.position("y")},r.node=this)}),t.on("free","node",function(){var i=e(t,"instance");if("function"==typeof n?n.call(this):n){if(null==r)return;var o=r.node,a=r.lastMouseDownPosition,s={x:o.position("x"),y:o.position("y")};if(s.x!=a.x||s.y!=a.y){var u,l={x:s.x-a.x,y:s.y-a.y};u=o.selected()?t.nodes(":visible").filter(":selected"):t.collection([o]),i.do("drag",{positionDiff:l,nodes:u,move:!1}),r=null}}})}(i,o.options.undoableDrag),n(i,"isInitialized",!0)}return o.options.ready(),o})};t.exports&&(t.exports=i),void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&i(cytoscape)}()},6934:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var i=r(n(6188)),o=r(n(7889));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d="undefined"==typeof window?null:window,f=d?d.navigator:null,p=a(""),v=a({}),g=a(function(){}),y="undefined"==typeof HTMLElement?"undefined":a(HTMLElement),m=function(t){return t&&t.instanceString&&_(t.instanceString)?t.instanceString():null},b=function(t){return null!=t&&a(t)==p},_=function(t){return null!=t&&a(t)===g},w=function(t){return!E(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},x=function(t){return null!=t&&a(t)===v&&!w(t)&&t.constructor===Object},k=function(t){return null!=t&&a(t)===a(1)&&!isNaN(t)},S=function(t){return"undefined"===y?void 0:null!=t&&t instanceof HTMLElement},E=function(t){return C(t)||T(t)},C=function(t){return"collection"===m(t)&&t._private.single},T=function(t){return"collection"===m(t)&&!t._private.single},P=function(t){return"core"===m(t)},A=function(t){return"stylesheet"===m(t)},D=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},O=function(t){return function(t){return null!=t&&a(t)===v}(t)&&_(t.then)},M=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=this,o=arguments,a=e.apply(i,o),s=n.cache;return(r=s[a])||(r=s[a]=t.apply(i,o)),r};return n.cache={},n},I=M(function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),L=M(function(t){return t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),N=M(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),R=function(t){return D(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},F="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",j=function(t,e){return t<e?-1:t>e?1:0},B=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},z={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},V=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(x(o))throw Error("Tried to set map with object key");i<n.length-1?(null==e[o]&&(e[o]={}),e=e[o]):e[o]=t.value}},G=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(x(o))throw Error("Tried to get map with object key");if(null==(e=e[o]))return e}return e},U=d?d.performance:null,H=U&&U.now?function(){return U.now()}:function(){return Date.now()},q=function(){if(d){if(d.requestAnimationFrame)return function(t){d.requestAnimationFrame(t)};if(d.mozRequestAnimationFrame)return function(t){d.mozRequestAnimationFrame(t)};if(d.webkitRequestAnimationFrame)return function(t){d.webkitRequestAnimationFrame(t)};if(d.msRequestAnimationFrame)return function(t){d.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(H())},1e3/60)}}(),W=function(t){return q(t)},Y=H,K=65599,X=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,r=n;!(e=t.next()).done;)r=r*K+e.value|0;return r},Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return e*K+t|0},Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(e<<5)+e+t|0},$=function(t){return 2097152*t[0]+t[1]},J=function(t,e){return[Q(t[0],e[0]),Z(t[1],e[1])]},tt=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return X({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},et=function(){return nt(arguments)},nt=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?tt(r):tt(r,e)}return e},rt=!0,it=null!=console.warn,ot=null!=console.trace,at=Number.MAX_SAFE_INTEGER||9007199254740991,st=function(){return!0},ut=function(){return!1},lt=function(){return 0},ct=function(){},ht=function(t){throw new Error(t)},dt=function(t){if(void 0===t)return rt;rt=!!t},ft=function(t){dt()&&(it?console.warn(t):(console.log(t),ot&&console.trace()))},pt=function(t){return null==t?t:w(t)?t.slice():x(t)?function(t){return B({},t)}(t):t},vt=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},gt={},yt=function(){return gt},mt=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var o=e[i],a=null==n?void 0:n[o];r[o]=void 0===a?t[o]:a}return r}},bt=function(t,e,n){for(var r=t.length-1;r>=0&&(t[r]!==e||(t.splice(r,1),!n));r--);},_t=function(t){t.splice(0,t.length)},wt=function(t,e,n){return n&&(e=N(n,e)),t[e]},xt=function(t,e,n,r){n&&(e=N(n,e)),t[e]=r},kt="undefined"!=typeof Map?Map:function(){function t(){s(this,t),this._obj={}}return l(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),St=function(){function t(e){if(s(this,t),this._obj=Object.create(null),this.size=0,null!=e){var n;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return l(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(e){return t.has(e)})}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Et="undefined"!==("undefined"==typeof Set?"undefined":a(Set))?Set:St,Ct=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==e&&P(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new Et,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var o=e.renderedPosition,a=t.pan(),s=t.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var u=[];w(e.classes)?u=e.classes:b(e.classes)&&(u=e.classes.split(/\s+/));for(var l=0,c=u.length;l<c;l++){var h=u[l];h&&""!==h&&i.classes.add(h)}this.createEmitter();var d=e.style||e.css;d&&(ft("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d)),(void 0===n||n)&&this.restore()}else ht("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else ht("An element must have a core reference and parameters set")},Tt=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;x(e)&&!E(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||_(n)?r:n,n=_(n)?n:function(){};for(var o,a=this._private.cy,s=e=b(e)?this.filter(e):e,u=[],l=[],c={},h={},d={},f=0,p=this.byGroup(),v=p.nodes,g=p.edges,y=0;y<s.length;y++){var m=s[y],w=m.id();m.isNode()&&(u.unshift(m),t.bfs&&(d[w]=!0,l.push(m)),h[w]=0)}var k=function(){var e=t.bfs?u.shift():u.pop(),i=e.id();if(t.dfs){if(d[i])return"continue";d[i]=!0,l.push(e)}var a,s=h[i],p=c[i],y=null!=p?p.source():null,m=null!=p?p.target():null,b=null==p?void 0:e.same(y)?m[0]:y[0];if(!0===(a=n(e,p,b,f++,s)))return o=e,"break";if(!1===a)return"break";for(var _=e.connectedEdges().filter(function(t){return(!r||t.source().same(e))&&g.has(t)}),w=0;w<_.length;w++){var x=_[w],k=x.connectedNodes().filter(function(t){return!t.same(e)&&v.has(t)}),S=k.id();0===k.length||d[S]||(u.push(k=k[0]),t.bfs&&(d[S]=!0,l.push(k)),c[S]=x,h[S]=h[i]+1)}};t:for(;0!==u.length;){var S=k();switch(S){case"continue":continue;case"break":break t}}for(var C=a.collection(),T=0;T<l.length;T++){var P=l[T],A=c[P.id()];null!=A&&C.push(A),C.push(P)}return{path:a.collection(C),found:a.collection(o)}}},Pt={breadthFirstSearch:Tt({bfs:!0}),depthFirstSearch:Tt({dfs:!0})};Pt.bfs=Pt.breadthFirstSearch,Pt.dfs=Pt.depthFirstSearch;var At=mt({root:null,weight:function(t){return 1},directed:!1}),Dt={dijkstra:function(t){if(!x(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=At(t),r=n.root,i=n.weight,a=n.directed,s=this,u=i,l=b(r)?this.filter(r)[0]:r[0],c={},h={},d={},f=this.byGroup(),p=f.nodes,v=f.edges;v.unmergeBy(function(t){return t.isLoop()});for(var g=function(t){return c[t.id()]},y=function(t,e){c[t.id()]=e,m.updateItem(t)},m=new o(function(t,e){return g(t)-g(e)}),_=0;_<p.length;_++){var w=p[_];c[w.id()]=w.same(l)?0:1/0,m.push(w)}for(var k=function(t,e){for(var n,r=(a?t.edgesTo(e):t.edgesWith(e)).intersect(v),i=1/0,o=0;o<r.length;o++){var s=r[o],l=u(s);(l<i||!n)&&(i=l,n=s)}return{edge:n,dist:i}};m.size()>0;){var S=m.pop(),E=g(S),C=S.id();if(d[C]=E,E!==1/0)for(var T=S.neighborhood().intersect(p),P=0;P<T.length;P++){var A=T[P],D=A.id(),O=k(S,A),M=E+O.dist;M<g(A)&&(y(A,M),h[D]={node:S,edge:O.edge})}}return{distanceTo:function(t){var e=b(t)?p.filter(t)[0]:t[0];return d[e.id()]},pathTo:function(t){var e=b(t)?p.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);h[i];){var o=h[i];n.unshift(o.edge),n.unshift(o.node),i=(r=o.node).id()}return s.spawn(n)}}}},Ot={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,o=new Array(i),a=n,s=function(t){for(var e=0;e<o.length;e++)if(o[e].has(t))return e},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var l=r.sort(function(e,n){return t(e)-t(n)}),c=0;c<l.length;c++){var h=l[c],d=h.source()[0],f=h.target()[0],p=s(d),v=s(f),g=o[p],y=o[v];p!==v&&(a.merge(h),g.merge(y),o.splice(v,1))}return a}},Mt=mt({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),It={aStar:function(t){var e=this.cy(),n=Mt(t),r=n.root,i=n.goal,a=n.heuristic,s=n.directed,u=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var l,c,h=r.id(),d=i.id(),f={},p={},v={},g=new o(function(t,e){return p[t.id()]-p[e.id()]}),y=new Et,m={},b={},_=function(t,e){g.push(t),y.add(e)};_(r,h),f[h]=0,p[h]=a(r);for(var w=0;g.size()>0;){if(c=(l=g.pop()).id(),y.delete(c),w++,c===d){for(var x=[],k=i,S=d,E=b[S];x.unshift(k),null!=E&&x.unshift(E),null!=(k=m[S]);)E=b[S=k.id()];return{found:!0,distance:f[c],path:this.spawn(x),steps:w}}v[c]=!0;for(var C=l._private.edges,T=0;T<C.length;T++){var P=C[T];if(this.hasElementWithId(P.id())&&(!s||P.data("source")===c)){var A=P.source(),D=P.target(),O=A.id()!==c?A:D,M=O.id();if(this.hasElementWithId(M)&&!v[M]){var I=f[c]+u(P);y.has(M)?I<f[M]&&(f[M]=I,p[M]=I+a(O),m[M]=l,b[M]=P):(f[M]=I,p[M]=I+a(O),_(O,M),m[M]=l,b[M]=P)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},Lt=mt({weight:function(t){return 1},directed:!1}),Nt={floydWarshall:function(t){for(var e=this.cy(),n=Lt(t),r=n.directed,i=n.weight,o=this.byGroup(),a=o.nodes,s=o.edges,u=a.length,l=u*u,c=function(t){return a.indexOf(t)},h=function(t){return a[t]},d=new Array(l),f=0;f<l;f++){var p=f%u;d[f]=(f-p)/u===p?0:1/0}for(var v=new Array(l),g=new Array(l),y=0;y<s.length;y++){var m=s[y],_=m.source()[0],w=m.target()[0];if(_!==w){var x=c(_),k=c(w),S=x*u+k,E=i(m);if(d[S]>E&&(d[S]=E,v[S]=k,g[S]=m),!r){var C=k*u+x;!r&&d[C]>E&&(d[C]=E,v[C]=x,g[C]=m)}}}for(var T=0;T<u;T++)for(var P=0;P<u;P++)for(var A=P*u+T,D=0;D<u;D++){var O=P*u+D,M=T*u+D;d[A]+d[M]<d[O]&&(d[O]=d[A]+d[M],v[O]=v[A])}var I=function(t){return c(function(t){return(b(t)?e.filter(t):t)[0]}(t))};return{distance:function(t,e){var n=I(t),r=I(e);return d[n*u+r]},path:function(t,n){var r=I(t),i=I(n),o=h(r);if(r===i)return o.collection();if(null==v[r*u+i])return e.collection();var a=e.collection();for(a.merge(o);r!==i;)a.merge(g[r*u+(r=v[r*u+i])]),a.merge(h(r));return a}}}},Rt=mt({weight:function(t){return 1},directed:!1,root:null}),Ft={bellmanFord:function(t){var e=this,n=Rt(t),r=n.directed,i=n.root,o=n.weight,a=this,s=this.cy(),u=this.byGroup(),l=u.edges,c=u.nodes,h=c.length,d=new kt,f=!1;i=s.collection(i)[0],l.unmergeBy(function(t){return t.isLoop()});for(var p=l.length,v=function(t){var e=d.get(t.id());return e||(e={},d.set(t.id(),e)),e},g=function(t){return(b(t)?s.$(t):t)[0]},y=0;y<h;y++){var m=c[y],_=v(m);_.dist=m.same(i)?0:1/0,_.pred=null,_.edge=null}for(var w=!1,x=function(t,e,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=t,i.edge=n,w=!0)},k=1;k<h;k++){w=!1;for(var S=0;S<p;S++){var E=l[S],C=E.source(),T=E.target(),P=o(E),A=v(C),D=v(T);x(C,0,E,A,D,P),r||x(T,0,E,D,A,P)}if(!w)break}if(w)for(var O=0;O<p;O++){var M=l[O],I=M.source(),L=M.target(),N=o(M),R=v(I).dist,F=v(L).dist;if(R+N<F||!r&&F+N<R){ft("Graph contains a negative weight cycle for Bellman-Ford"),f=!0;break}}return{distanceTo:function(t){return v(g(t)).dist},pathTo:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=g(t),o=[],s=r;;){if(null==s)return e.spawn();var u=v(s),l=u.edge,c=u.pred;if(o.unshift(s[0]),s.same(n)&&o.length>0)break;null!=l&&o.unshift(l),s=c}return a.spawn(o)},hasNegativeWeightCycle:f,negativeWeightCycles:[]}}},jt=Math.sqrt(2),Bt=function(t,e,n){0===n.length&&ht("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=e[r[1]],o=e[r[2]],a=n,s=a.length-1;s>=0;s--){var u=a[s],l=u[1],c=u[2];(e[l]===i&&e[c]===o||e[l]===o&&e[c]===i)&&a.splice(s,1)}for(var h=0;h<a.length;h++){var d=a[h];d[1]===o?(a[h]=d.slice(),a[h][1]=i):d[2]===o&&(a[h]=d.slice(),a[h][2]=i)}for(var f=0;f<e.length;f++)e[f]===o&&(e[f]=i);return a},zt=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=Bt(i,t,e),n--}return e},Vt={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy(function(t){return t.isLoop()});var i=n.length,o=r.length,a=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/jt);if(!(i<2)){for(var u=[],l=0;l<o;l++){var c=r[l];u.push([l,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,d=[],f=new Array(i),p=new Array(i),v=new Array(i),g=function(t,e){for(var n=0;n<i;n++)e[n]=t[n]},y=0;y<=a;y++){for(var m=0;m<i;m++)p[m]=m;var b=zt(p,u.slice(),i,s),_=b.slice();g(p,v);var w=zt(p,b,s,2),x=zt(v,_,s,2);w.length<=x.length&&w.length<h?(h=w.length,d=w,g(p,f)):x.length<=w.length&&x.length<h&&(h=x.length,d=x,g(v,f))}for(var k=this.spawn(d.map(function(t){return r[t[0]]})),S=this.spawn(),E=this.spawn(),C=f[0],T=0;T<f.length;T++){var P=n[T];f[T]===C?S.merge(P):E.merge(P)}var A=function(e){var n=t.spawn();return e.forEach(function(e){n.merge(e),e.connectedEdges().forEach(function(e){t.contains(e)&&!k.contains(e)&&n.merge(e)})}),n},D=[A(S),A(E)];return{cut:k,components:D,partition1:S,partition2:E}}ht("At least 2 nodes are required for Karger-Stein algorithm")}},Gt=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},Ut=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},Ht=function(t){return{x:t[0],y:t[1]}},qt=function(t,e){return Math.atan2(e,t)-Math.PI/2},Wt=Math.log2||function(t){return Math.log(t)/Math.log(2)},Yt=function(t){return t>0?1:t<0?-1:0},Kt=function(t,e){return Math.sqrt(Xt(t,e))},Xt=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},Qt=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},Zt=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},$t=function(t,e,n,r){return{x:Zt(t.x,e.x,n.x,r),y:Zt(t.y,e.y,n.y,r)}},Jt=function(t,e,n){return Math.max(t,Math.min(n,e))},te=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},ee=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},ne=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},re=function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)e=n=r=i=o[0];else if(2===o.length)e=r=o[0],i=n=o[1];else if(4===o.length){var a=h(o,4);e=a[0],n=a[1],r=a[2],i=a[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},ie=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},oe=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},ae=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},se=function(t,e){return ae(t,e.x1,e.y1)&&ae(t,e.x2,e.y2)},ue=function(t,e,n,r,i,o,a){var s,u=Ce(i,o),l=i/2,c=o/2,h=r-c-a;if((s=_e(t,e,n,r,n-l+u-a,h,n+l-u+a,h,!1)).length>0)return s;var d=n+l+a;if((s=_e(t,e,n,r,d,r-c+u-a,d,r+c-u+a,!1)).length>0)return s;var f=r+c+a;if((s=_e(t,e,n,r,n-l+u-a,f,n+l-u+a,f,!1)).length>0)return s;var p,v=n-l-a;if((s=_e(t,e,n,r,v,r-c+u-a,v,r+c-u+a,!1)).length>0)return s;var g=n-l+u,y=r-c+u;if((p=me(t,e,n,r,g,y,u+a)).length>0&&p[0]<=g&&p[1]<=y)return[p[0],p[1]];var m=n+l-u,b=r-c+u;if((p=me(t,e,n,r,m,b,u+a)).length>0&&p[0]>=m&&p[1]<=b)return[p[0],p[1]];var _=n+l-u,w=r+c-u;if((p=me(t,e,n,r,_,w,u+a)).length>0&&p[0]>=_&&p[1]>=w)return[p[0],p[1]];var x=n-l+u,k=r+c-u;return(p=me(t,e,n,r,x,k,u+a)).length>0&&p[0]<=x&&p[1]>=k?[p[0],p[1]]:[]},le=function(t,e,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return u-s<=t&&t<=l+s&&c-s<=e&&e<=h+s},ce=function(t,e,n,r,i,o,a,s,u){var l=Math.min(n,a,i)-u,c=Math.max(n,a,i)+u,h=Math.min(r,s,o)-u,d=Math.max(r,s,o)+u;return!(t<l||t>c||e<h||e>d)},he=function(t,e,n,r,i,o,a,s){var u,l,c,h,d,f,p,v,g,y,m,b,_,w=[];l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,h=1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,0==(u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s)&&(u=1e-5),v=-27*(h/=u)+(l/=u)*(9*(c/=u)-l*l*2),f=(p=(3*c-l*l)/9)*p*p+(v/=54)*v,(d=w)[1]=0,b=l/3,f>0?(y=(y=v+Math.sqrt(f))<0?-Math.pow(-y,1/3):Math.pow(y,1/3),m=(m=v-Math.sqrt(f))<0?-Math.pow(-m,1/3):Math.pow(m,1/3),d[0]=-b+y+m,d[4]=d[2]=-(b+=(y+m)/2),b=Math.sqrt(3)*(-m+y)/2,d[3]=b,d[5]=-b):(d[5]=d[3]=0,0===f?(_=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),d[0]=2*_-b,d[4]=d[2]=-(_+b)):(g=(p=-p)*p*p,g=Math.acos(v/Math.sqrt(g)),_=2*Math.sqrt(p),d[0]=-b+_*Math.cos(g/3),d[2]=-b+_*Math.cos((g+2*Math.PI)/3),d[4]=-b+_*Math.cos((g+4*Math.PI)/3)));for(var x=[],k=0;k<6;k+=2)Math.abs(w[k+1])<1e-7&&w[k]>=0&&w[k]<=1&&x.push(w[k]);x.push(1),x.push(0);for(var S,E,C,T=-1,P=0;P<x.length;P++)S=Math.pow(1-x[P],2)*n+2*(1-x[P])*x[P]*i+x[P]*x[P]*a,E=Math.pow(1-x[P],2)*r+2*(1-x[P])*x[P]*o+x[P]*x[P]*s,C=Math.pow(S-t,2)+Math.pow(E-e,2),T>=0?C<T&&(T=C):T=C;return T},de=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return c<0?l:h>u?(t-i)*(t-i)+(e-o)*(e-o):l-h},fe=function(t,e,n){for(var r,i,o,a,s=0,u=0;u<n.length/2;u++)if(i=n[2*u+1],u+1<n.length/2?(o=n[2*(u+1)],a=n[2*(u+1)+1]):(o=n[2*(u+1-n.length/2)],a=n[2*(u+1-n.length/2)+1]),(r=n[2*u])==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(a-i)+i>e&&s++}return s%2!=0},pe=function(t,e,n,r,i,o,a,s,u){var l,c=new Array(n.length);null!=s[0]?(l=Math.atan(s[1]/s[0]),s[0]<0?l+=Math.PI/2:l=-l-Math.PI/2):l=s;for(var h,d=Math.cos(-l),f=Math.sin(-l),p=0;p<c.length/2;p++)c[2*p]=o/2*(n[2*p]*d-n[2*p+1]*f),c[2*p+1]=a/2*(n[2*p+1]*d+n[2*p]*f),c[2*p]+=r,c[2*p+1]+=i;if(u>0){var v=ge(c,-u);h=ve(v)}else h=c;return fe(t,e,h)},ve=function(t){for(var e,n,r,i,o=new Array(t.length/2),a=0;a<t.length/4;a++){a<t.length/4-1?(e=t[4*(a+1)],n=t[4*(a+1)+1],r=t[4*(a+1)+2],i=t[4*(a+1)+3]):(e=t[0],n=t[1],r=t[2],i=t[3]);var s=_e(t[4*a],t[4*a+1],t[4*a+2],t[4*a+3],e,n,r,i,!0);o[2*a]=s[0],o[2*a+1]=s[1]}return o},ge=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var u=o-(r=t[2*s+1]),l=-(i-(n=t[2*s])),c=Math.sqrt(u*u+l*l),h=u/c,d=l/c;a[4*s]=n+h*e,a[4*s+1]=r+d*e,a[4*s+2]=i+h*e,a[4*s+3]=o+d*e}return a},ye=function(t,e,n,r,i,o,a){return t-=i,e-=o,(t/=n/2+a)*t+(e/=r/2+a)*e<=1},me=function(t,e,n,r,i,o,a){var s=[n-t,r-e],u=[t-i,e-o],l=s[0]*s[0]+s[1]*s[1],c=2*(u[0]*s[0]+u[1]*s[1]),h=c*c-4*l*(u[0]*u[0]+u[1]*u[1]-a*a);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*l),f=(-c-Math.sqrt(h))/(2*l),p=Math.min(d,f),v=Math.max(d,f),g=[];if(p>=0&&p<=1&&g.push(p),v>=0&&v<=1&&g.push(v),0===g.length)return[];var y=g[0]*s[0]+t,m=g[0]*s[1]+e;return g.length>1?g[0]==g[1]?[y,m]:[y,m,g[1]*s[0]+t,g[1]*s[1]+e]:[y,m]},be=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},_e=function(t,e,n,r,i,o,a,s,u){var l=t-i,c=n-t,h=a-i,d=e-o,f=r-e,p=s-o,v=h*d-p*l,g=c*d-f*l,y=p*c-h*f;if(0!==y){var m=v/y,b=g/y;return-.001<=m&&m<=1.001&&-.001<=b&&b<=1.001||u?[t+m*c,e+m*f]:[]}return 0===v||0===g?be(t,n,a)===a?[a,s]:be(t,n,i)===i?[i,o]:be(i,a,n)===n?[n,r]:[]:[]},we=function(t,e,n,r,i,o,a,s){var u,l,c,h,d=[],f=new Array(n.length),p=!0;if(null==o&&(p=!1),p){for(var v=0;v<f.length/2;v++)f[2*v]=n[2*v]*o+r,f[2*v+1]=n[2*v+1]*a+i;if(s>0){var g=ge(f,-s);l=ve(g)}else l=f}else l=n;for(var y=0;y<l.length/2;y++)y<l.length/2-1?(c=l[2*(y+1)],h=l[2*(y+1)+1]):(c=l[0],h=l[1]),0!==(u=_e(t,e,r,i,l[2*y],l[2*y+1],c,h)).length&&d.push(u[0],u[1]);return d},xe=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},ke=function(t,e){var n=Ee(t,e);return Se(n)},Se=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,u=0;u<r;u++)e=t[2*u],n=t[2*u+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),h=0;h<r;h++)e=t[2*h]=t[2*h]*l,n=t[2*h+1]=t[2*h+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var d=0;d<r;d++)n=t[2*d+1]=t[2*d+1]+(-1-o);return t},Ee=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},Ce=function(t,e){return Math.min(t/4,e/4,8)},Te=function(t,e){return Math.min(t/10,e/10,8)},Pe=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Ae=mt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),De={pageRank:function(t){for(var e=Ae(t),n=e.dampingFactor,r=e.precision,i=e.iterations,o=e.weight,a=this._private.cy,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,h=l.length,d=new Array(c*c),f=new Array(c),p=(1-n)/c,v=0;v<c;v++){for(var g=0;g<c;g++)d[v*c+g]=0;f[v]=0}for(var y=0;y<h;y++){var m=l[y],b=m.data("source"),_=m.data("target");if(b!==_){var w=u.indexOfId(b),x=u.indexOfId(_),k=o(m);d[x*c+w]+=k,f[w]+=k}}for(var S=1/c+p,E=0;E<c;E++)if(0===f[E])for(var C=0;C<c;C++)d[C*c+E]=S;else for(var T=0;T<c;T++){var P=T*c+E;d[P]=d[P]/f[E]+p}for(var A,D=new Array(c),O=new Array(c),M=0;M<c;M++)D[M]=1;for(var I=0;I<i;I++){for(var L=0;L<c;L++)O[L]=0;for(var N=0;N<c;N++)for(var R=0;R<c;R++)O[N]+=d[N*c+R]*D[R];Qt(O),A=D,D=O,O=A;for(var F=0,j=0;j<c;j++){var B=A[j]-D[j];F+=B*B}if(F<r)break}return{rank:function(t){return t=a.collection(t)[0],D[u.indexOf(t)]}}}},Oe=mt({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Me={degreeCentralityNormalized:function(t){t=Oe(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},o={},a=0,s=0,u=0;u<r;u++){var l=n[u],c=l.id();t.root=l;var h=this.degreeCentrality(t);a<h.indegree&&(a=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(t){return 0==a?0:(b(t)&&(t=e.filter(t)),i[t.id()]/a)},outdegree:function(t){return 0===s?0:(b(t)&&(t=e.filter(t)),o[t.id()]/s)}}}for(var d={},f=0,p=0;p<r;p++){var v=n[p];t.root=v;var g=this.degreeCentrality(t);f<g.degree&&(f=g.degree),d[v.id()]=g.degree}return{degree:function(t){return 0===f?0:(b(t)&&(t=e.filter(t)),d[t.id()]/f)}}},degreeCentrality:function(t){t=Oe(t);var e=this.cy(),n=this,r=t.root,i=t.weight,o=t.directed,a=t.alpha;if(r=e.collection(r)[0],o){for(var s=r.connectedEdges(),u=s.filter(function(t){return t.target().same(r)&&n.has(t)}),l=s.filter(function(t){return t.source().same(r)&&n.has(t)}),c=u.length,h=l.length,d=0,f=0,p=0;p<u.length;p++)d+=i(u[p]);for(var v=0;v<l.length;v++)f+=i(l[v]);return{indegree:Math.pow(c,1-a)*Math.pow(d,a),outdegree:Math.pow(h,1-a)*Math.pow(f,a)}}for(var g=r.connectedEdges().intersection(n),y=g.length,m=0,b=0;b<g.length;b++)m+=i(g[b]);return{degree:Math.pow(y,1-a)*Math.pow(m,a)}}};Me.dc=Me.degreeCentrality,Me.dcn=Me.degreeCentralityNormalised=Me.degreeCentralityNormalized;var Ie=mt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Le={closenessCentralityNormalized:function(t){for(var e=Ie(t),n=e.harmonic,r=e.weight,i=e.directed,o=this.cy(),a={},s=0,u=this.nodes(),l=this.floydWarshall({weight:r,directed:i}),c=0;c<u.length;c++){for(var h=0,d=u[c],f=0;f<u.length;f++)if(c!==f){var p=l.distance(d,u[f]);h+=n?1/p:p}n||(h=1/h),s<h&&(s=h),a[d.id()]=h}return{closeness:function(t){return 0==s?0:(t=b(t)?o.filter(t)[0].id():t.id(),a[t]/s)}}},closenessCentrality:function(t){var e=Ie(t),n=e.root,r=e.weight,i=e.directed,o=e.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++){var c=u[l];if(!c.same(n)){var h=a.distanceTo(c);s+=o?1/h:h}}return o?s:1/s}};Le.cc=Le.closenessCentrality,Le.ccn=Le.closenessCentralityNormalised=Le.closenessCentralityNormalized;var Ne=mt({weight:null,directed:!1}),Re={betweennessCentrality:function(t){for(var e=Ne(t),n=e.directed,r=e.weight,i=null!=r,a=this.cy(),s=this.nodes(),u={},l={},c=0,h=function(t,e){l[t]=e,e>c&&(c=e)},d=function(t){return l[t]},f=0;f<s.length;f++){var p=s[f],v=p.id();u[v]=n?p.outgoers().nodes():p.openNeighborhood().nodes(),h(v,0)}for(var g=function(t){for(var e=s[t].id(),n=[],l={},c={},f={},p=new o(function(t,e){return f[t]-f[e]}),v=0;v<s.length;v++){var g=s[v].id();l[g]=[],c[g]=0,f[g]=1/0}for(c[e]=1,f[e]=0,p.push(e);!p.empty();){var y=p.pop();if(n.push(y),i)for(var m=0;m<u[y].length;m++){var b,_=u[y][m],w=a.getElementById(y);b=w.edgesTo(_).length>0?w.edgesTo(_)[0]:_.edgesTo(w)[0];var x=r(b);_=_.id(),f[_]>f[y]+x&&(f[_]=f[y]+x,p.nodes.indexOf(_)<0?p.push(_):p.updateItem(_),c[_]=0,l[_]=[]),f[_]==f[y]+x&&(c[_]=c[_]+c[y],l[_].push(y))}else for(var k=0;k<u[y].length;k++){var S=u[y][k].id();f[S]==1/0&&(p.push(S),f[S]=f[y]+1),f[S]==f[y]+1&&(c[S]=c[S]+c[y],l[S].push(y))}}for(var E={},C=0;C<s.length;C++)E[s[C].id()]=0;for(;n.length>0;){for(var T=n.pop(),P=0;P<l[T].length;P++){var A=l[T][P];E[A]=E[A]+c[A]/c[T]*(1+E[T])}T!=s[t].id()&&h(T,d(T)+E[T])}},y=0;y<s.length;y++)g(y);var m={betweenness:function(t){var e=a.collection(t).id();return d(e)},betweennessNormalized:function(t){if(0==c)return 0;var e=a.collection(t).id();return d(e)/c}};return m.betweennessNormalised=m.betweennessNormalized,m}};Re.bc=Re.betweennessCentrality;var Fe=mt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),je=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Be=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var o=0;o<e;o++)t[o*e+r]=t[o*e+r]/n}},ze=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=t[i*n+a]*e[a*n+s]}return r},Ve=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=ze(t,r,e);return t},Ge=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Be(r,e),r},Ue=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},He=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},qe=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=function(t){return Fe(t)}(t),o={},a=0;a<e.length;a++)o[e[a].id()]=a;for(var s,u=e.length,l=u*u,c=new Array(l),h=0;h<l;h++)c[h]=0;for(var d=0;d<n.length;d++){var f=n[d],p=o[f.source().id()],v=o[f.target().id()],g=je(f,i.attributes);c[p*u+v]+=g,c[v*u+p]+=g}!function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n}(c,u,i.multFactor),Be(c,u);for(var y=!0,m=0;y&&m<i.maxIterations;)y=!1,s=Ve(c,u,i.expandFactor),c=Ge(s,u,i.inflateFactor),Ue(c,s,l,4)||(y=!0),m++;return function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&He(t[e],t[n])&&t.splice(n,1);return t}(function(t,e,n,r){for(var i=[],o=0;o<e;o++){for(var a=[],s=0;s<e;s++)Math.round(1e3*t[o*e+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i}(c,u,e,r))},We={markovClustering:qe,mcl:qe},Ye=function(t){return t},Ke=function(t,e){return Math.abs(e-t)},Xe=function(t,e,n){return t+Ke(e,n)},Qe=function(t,e,n){return t+Math.pow(n-e,2)},Ze=function(t){return Math.sqrt(t)},$e=function(t,e,n){return Math.max(t,Ke(e,n))},Je=function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ye,a=r,s=0;s<t;s++)a=i(a,e(s),n(s));return o(a)},tn={euclidean:function(t,e,n){return t>=2?Je(t,e,n,0,Qe,Ze):Je(t,e,n,0,Xe)},squaredEuclidean:function(t,e,n){return Je(t,e,n,0,Qe)},manhattan:function(t,e,n){return Je(t,e,n,0,Xe)},max:function(t,e,n){return Je(t,e,n,-1/0,$e)}};function en(t,e,n,r,i,o){var a;return a=_(t)?t:tn[t]||tn.euclidean,0===e&&_(t)?a(i,o):a(e,n,r,i,o)}tn["squared-euclidean"]=tn.squaredEuclidean,tn.squaredeuclidean=tn.squaredEuclidean;var nn=mt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),rn=function(t){return nn(t)},on=function(t,e,n,r,i){var o="kMedoids"!==i?function(t){return n[t]}:function(t){return r[t](n)};return en(t,r.length,o,function(t){return r[t](e)},n,e)},an=function(t,e,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(e),s=null,u=0;u<r;u++)i[u]=t.min(n[u]).value,o[u]=t.max(n[u]).value;for(var l=0;l<e;l++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[l]=s}return a},sn=function(t,e,n,r,i){for(var o=1/0,a=0,s=0;s<e.length;s++){var u=on(n,t,e[s],r,i);u<o&&(o=u,a=s)}return a},un=function(t,e,n){for(var r=[],i=null,o=0;o<e.length;o++)n[(i=e[o]).id()]===t&&r.push(i);return r},ln=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},cn=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},hn=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];cn(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var o=0;o<e;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},dn=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=on("manhattan",e[i],t,n,"kMedoids");return r},fn=function(t,e,n,r,i){for(var o,a,s=0;s<e.length;s++)for(var u=0;u<t.length;u++)r[s][u]=Math.pow(n[s][u],i.m);for(var l=0;l<t.length;l++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var h=0;h<e.length;h++)o+=r[h][l]*i.attributes[c](e[h]),a+=r[h][l];t[l][c]=o/a}},pn=function(t,e,n,r,i){for(var o=0;o<t.length;o++)e[o]=t[o].slice();for(var a,s,u,l=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<r.length;h++){a=0;for(var d=0;d<n.length;d++)s=on(i.distance,r[h],n[c],i.attributes,"cmeans"),u=on(i.distance,r[h],n[d],i.attributes,"cmeans"),a+=Math.pow(s/u,l);t[h][c]=1/a}},vn=function(t){var e,n,r,i,o=this.cy(),a=this.nodes(),s=rn(t);r=new Array(a.length);for(var u=0;u<a.length;u++)r[u]=new Array(s.k);n=new Array(a.length);for(var l=0;l<a.length;l++)n[l]=new Array(s.k);for(var c=0;c<a.length;c++){for(var h=0,d=0;d<s.k;d++)n[c][d]=Math.random(),h+=n[c][d];for(var f=0;f<s.k;f++)n[c][f]=n[c][f]/h}e=new Array(s.k);for(var p=0;p<s.k;p++)e[p]=new Array(s.attributes.length);i=new Array(a.length);for(var v=0;v<a.length;v++)i[v]=new Array(s.k);for(var g=!0,y=0;g&&y<s.maxIterations;)g=!1,fn(e,a,n,i,s),pn(n,r,e,a,s),ln(n,r,s.sensitivityThreshold)||(g=!0),y++;return{clusters:function(t,e,n,r){for(var i,o,a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var u=0;u<e.length;u++){i=-1/0,o=-1;for(var l=0;l<e[0].length;l++)e[u][l]>i&&(i=e[u][l],o=l);a[o].push(t[u])}for(var c=0;c<a.length;c++)a[c]=r.collection(a[c]);return a}(a,n,s,o),degreeOfMembership:n}},gn={kMeans:function(t){var e,n=this.cy(),r=this.nodes(),i=null,o=rn(t),s=new Array(o.k),u={};e=o.testMode?"number"==typeof o.testCentroids?an(r,o.k,o.attributes):"object"===a(o.testCentroids)?o.testCentroids:an(r,o.k,o.attributes):an(r,o.k,o.attributes);for(var l,c=!0,h=0;c&&h<o.maxIterations;){for(var d=0;d<r.length;d++)u[(i=r[d]).id()]=sn(i,e,o.distance,o.attributes,"kMeans");c=!1;for(var f=0;f<o.k;f++){var p=un(f,r,u);if(0!==p.length){for(var v=o.attributes.length,g=e[f],y=new Array(v),m=new Array(v),b=0;b<v;b++){m[b]=0;for(var _=0;_<p.length;_++)m[b]+=o.attributes[b](i=p[_]);y[b]=m[b]/p.length,l=o.sensitivityThreshold,Math.abs(g[b]-y[b])<=l||(c=!0)}e[f]=y,s[f]=n.collection(p)}}h++}return s},kMedoids:function(t){var e,n,r=this.cy(),i=this.nodes(),o=null,s=rn(t),u=new Array(s.k),l={},c=new Array(s.k);s.testMode?"number"==typeof s.testCentroids||(e="object"===a(s.testCentroids)?s.testCentroids:hn(i,s.k)):e=hn(i,s.k);for(var h=!0,d=0;h&&d<s.maxIterations;){for(var f=0;f<i.length;f++)l[(o=i[f]).id()]=sn(o,e,s.distance,s.attributes,"kMedoids");h=!1;for(var p=0;p<e.length;p++){var v=un(p,i,l);if(0!==v.length){c[p]=dn(e[p],v,s.attributes);for(var g=0;g<v.length;g++)(n=dn(v[g],v,s.attributes))<c[p]&&(c[p]=n,e[p]=v[g],h=!0);u[p]=r.collection(v)}}d++}return u},fuzzyCMeans:vn,fcm:vn},yn=mt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),mn={single:"min",complete:"max"},bn=function(t,e,n,r,i){for(var o,a=0,s=1/0,u=i.attributes,l=function(t,e){return en(i.distance,u.length,function(e){return u[e](t)},function(t){return u[t](e)},t,e)},c=0;c<t.length;c++){var h=t[c].key,d=n[h][r[h]];d<s&&(a=h,s=d)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var f,p=e[a],v=e[r[a]];f="dendrogram"===i.mode?{left:p,right:v,key:p.key}:{value:p.value.concat(v.value),key:p.key},t[p.index]=f,t.splice(v.index,1),e[p.key]=f;for(var g=0;g<t.length;g++){var y=t[g];p.key===y.key?o=1/0:"min"===i.linkage?(o=n[p.key][y.key],n[p.key][y.key]>n[v.key][y.key]&&(o=n[v.key][y.key])):"max"===i.linkage?(o=n[p.key][y.key],n[p.key][y.key]<n[v.key][y.key]&&(o=n[v.key][y.key])):o="mean"===i.linkage?(n[p.key][y.key]*p.size+n[v.key][y.key]*v.size)/(p.size+v.size):"dendrogram"===i.mode?l(y.value,p.value):l(y.value[0],p.value[0]),n[p.key][y.key]=n[y.key][p.key]=o}for(var m=0;m<t.length;m++){var b=t[m].key;if(r[b]===p.key||r[b]===v.key){for(var _=b,w=0;w<t.length;w++){var x=t[w].key;n[b][x]<n[b][_]&&(_=x)}r[b]=_}t[m].index=m}return p.key=v.key=p.index=v.index=null,!0},_n=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},wn=function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return e.value?e.value.id():void 0},xn=function t(e,n,r){if(!e)return[];var i=[],o=[],a=[];return 0===n?(e.left&&_n(e.left,i),e.right&&_n(e.right,o),a=i.concat(o),[r.collection(a)]):1===n?e.value?[r.collection(e.value)]:(e.left&&_n(e.left,i),e.right&&_n(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))},kn=function(t){for(var e=this.cy(),n=this.nodes(),r=function(t){var e=yn(t),n=mn[e.linkage];return null!=n&&(e.linkage=n),e}(t),i=r.attributes,o=function(t,e){return en(r.distance,i.length,function(e){return i[e](t)},function(t){return i[t](e)},t,e)},a=[],s=[],u=[],l=[],c=0;c<n.length;c++){var h={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};a[c]=h,l[c]=h,s[c]=[],u[c]=0}for(var d=0;d<a.length;d++)for(var f=0;f<=d;f++){var p;p="dendrogram"===r.mode?d===f?1/0:o(a[d].value,a[f].value):d===f?1/0:o(a[d].value[0],a[f].value[0]),s[d][f]=p,s[f][d]=p,p<s[d][u[d]]&&(u[d]=f)}for(var v,g=bn(a,l,s,u,r);g;)g=bn(a,l,s,u,r);return"dendrogram"===r.mode?(v=xn(a[0],r.dendrogramDepth,e),r.addDendrogram&&wn(a[0],e)):(v=new Array(a.length),a.forEach(function(t,n){t.key=t.index=null,v[n]=e.collection(t.value)})),v},Sn={hierarchicalClustering:kn,hca:kn},En=mt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Cn=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-en(t,r.length,function(t){return i(e,t)},function(t){return i(n,t)},e,n)},Tn=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var o=-1,a=-1/0,s=0;s<n.length;s++){var u=n[s];e[i*t+u]>a&&(o=u,a=e[i*t+u])}o>0&&r.push(o)}for(var l=0;l<n.length;l++)r[n[l]]=n[l];return r},Pn=function(t){for(var e,n,r,i,o,a,s=this.cy(),u=this.nodes(),l=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||ht("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some(function(t){return t===n})||k(n)||ht("Preference must be one of [".concat(r.map(function(t){return"'".concat(t,"'")}).join(", "),"] or a number.  Got: ").concat(n)),En(t)}(t),c={},h=0;h<u.length;h++)c[u[h].id()]=h;n=(e=u.length)*e,r=new Array(n);for(var d=0;d<n;d++)r[d]=-1/0;for(var f=0;f<e;f++)for(var p=0;p<e;p++)f!==p&&(r[f*e+p]=Cn(l.distance,u[f],u[p],l.attributes));i=function(t,e){return"median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e)):t=t.slice(e,n);for(var o=0,a=t.length-1;a>=0;a--)i?isFinite(t[a])||(t[a]=-1/0,o++):t.splice(a,1);r&&t.sort(function(t,e){return t-e});var s=t.length,u=Math.floor(s/2);return s%2!=0?t[u+1+o]:(t[u-1+o]+t[u+o])/2}(t):"mean"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=0,r=0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<e;i++){var o=t[i];isFinite(o)&&(n+=o,r++)}return n/r}(t):"min"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=1/0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r<e;r++){var i=t[r];isFinite(i)&&(n=Math.min(i,n))}return n}(t):"max"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=-1/0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r<e;r++){var i=t[r];isFinite(i)&&(n=Math.max(i,n))}return n}(t):e}(r,l.preference);for(var v=0;v<e;v++)r[v*e+v]=i;o=new Array(n);for(var g=0;g<n;g++)o[g]=0;a=new Array(n);for(var y=0;y<n;y++)a[y]=0;for(var m=new Array(e),b=new Array(e),_=new Array(e),w=0;w<e;w++)m[w]=0,b[w]=0,_[w]=0;for(var x,S=new Array(e*l.minIterations),E=0;E<S.length;E++)S[E]=0;for(x=0;x<l.maxIterations;x++){for(var C=0;C<e;C++){for(var T=-1/0,P=-1/0,A=-1,D=0,O=0;O<e;O++)m[O]=o[C*e+O],(D=a[C*e+O]+r[C*e+O])>=T?(P=T,T=D,A=O):D>P&&(P=D);for(var M=0;M<e;M++)o[C*e+M]=(1-l.damping)*(r[C*e+M]-T)+l.damping*m[M];o[C*e+A]=(1-l.damping)*(r[C*e+A]-P)+l.damping*m[A]}for(var I=0;I<e;I++){for(var L=0,N=0;N<e;N++)m[N]=a[N*e+I],b[N]=Math.max(0,o[N*e+I]),L+=b[N];L-=b[I],b[I]=o[I*e+I],L+=b[I];for(var R=0;R<e;R++)a[R*e+I]=(1-l.damping)*Math.min(0,L-b[R])+l.damping*m[R];a[I*e+I]=(1-l.damping)*(L-b[I])+l.damping*m[I]}for(var F=0,j=0;j<e;j++){var B=a[j*e+j]+o[j*e+j]>0?1:0;S[x%l.minIterations*e+j]=B,F+=B}if(F>0&&(x>=l.minIterations-1||x==l.maxIterations-1)){for(var z=0,V=0;V<e;V++){_[V]=0;for(var G=0;G<l.minIterations;G++)_[V]+=S[G*e+V];0!==_[V]&&_[V]!==l.minIterations||z++}if(z===e)break}}for(var U=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r}(e,o,a),H=function(t,e,n){for(var r=Tn(t,e,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,u=-1/0,l=0;l<o.length;l++){for(var c=0,h=0;h<o.length;h++)c+=e[o[h]*t+o[l]];c>u&&(s=l,u=c)}n[i]=o[s]}return Tn(t,e,n)}(e,r,U),q={},W=0;W<U.length;W++)q[U[W]]=[];for(var Y=0;Y<u.length;Y++){var K=H[c[u[Y].id()]];null!=K&&q[K].push(u[Y])}for(var X=new Array(U.length),Q=0;Q<U.length;Q++)X[Q]=s.collection(q[U[Q]]);return X},An={affinityPropagation:Pn,ap:Pn},Dn=mt({root:void 0,directed:!1}),On=function(){var t=this,e={},n=0,r=0,i=[],o=[],a={},s=function s(u,l,c){u===c&&(r+=1),e[l]={id:n,low:n++,cutVertex:!1};var h,d,f,p,v=t.getElementById(l).connectedEdges().intersection(t);0===v.size()?i.push(t.spawn(t.getElementById(l))):v.forEach(function(n){h=n.source().id(),d=n.target().id(),(f=h===l?d:h)!==c&&(p=n.id(),a[p]||(a[p]=!0,o.push({x:l,y:f,edge:n})),f in e?e[l].low=Math.min(e[l].low,e[f].id):(s(u,f,l),e[l].low=Math.min(e[l].low,e[f].low),e[l].id<=e[f].low&&(e[l].cutVertex=!0,function(n,r){for(var a=o.length-1,s=[],u=t.spawn();o[a].x!=n||o[a].y!=r;)s.push(o.pop().edge),a--;s.push(o.pop().edge),s.forEach(function(n){var r=n.connectedNodes().intersection(t);u.merge(n),r.forEach(function(n){var r=n.id(),i=n.connectedEdges().intersection(t);u.merge(n),u.merge(e[r].cutVertex?i.filter(function(t){return t.isLoop()}):i)})}),i.push(u)}(l,f))))})};t.forEach(function(t){if(t.isNode()){var n=t.id();n in e||(r=0,s(n,n),e[n].cutVertex=r>1)}});var u=Object.keys(e).filter(function(t){return e[t].cutVertex}).map(function(e){return t.getElementById(e)});return{cut:t.spawn(u),components:i}},Mn=function(){var t=this,e={},n=0,r=[],i=[],o=t.spawn(t),a=function a(s){if(i.push(s),e[s]={index:n,low:n++,explored:!1},t.getElementById(s).connectedEdges().intersection(t).forEach(function(t){var n=t.target().id();n!==s&&(n in e||a(n),e[n].explored||(e[s].low=Math.min(e[s].low,e[n].low)))}),e[s].index===e[s].low){for(var u=t.spawn();;){var l=i.pop();if(u.merge(t.getElementById(l)),e[l].low=e[s].index,e[l].explored=!0,l===s)break}var c=u.edgesWith(u),h=u.merge(c);r.push(h),o=o.difference(h)}};return t.forEach(function(t){if(t.isNode()){var n=t.id();n in e||a(n)}}),{cut:o,components:r}},In={};[Pt,Dt,Ot,It,Nt,Ft,Vt,De,Me,Le,Re,We,gn,Sn,An,{hierholzer:function(t){if(!x(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,o=Dn(t),a=o.root,s=o.directed,u=this,l=!1;a&&(i=b(a)?this.filter(a)[0].id():a[0].id());var c={},h={};u.forEach(s?function(t){var e=t.id();if(t.isNode()){var i=t.indegree(!0),o=t.outdegree(!0),a=i-o,s=o-i;1==a?n?l=!0:n=e:1==s?r?l=!0:r=e:(s>1||a>1)&&(l=!0),c[e]=[],t.outgoers().forEach(function(t){t.isEdge()&&c[e].push(t.id())})}else h[e]=[void 0,t.target().id()]}:function(t){var e=t.id();t.isNode()?(t.degree(!0)%2&&(n?r?l=!0:r=e:n=e),c[e]=[],t.connectedEdges().forEach(function(t){return c[e].push(t.id())})):h[e]=[t.source().id(),t.target().id()]});var d={found:!1,trail:void 0};if(l)return d;if(r&&n)if(s){if(i&&r!=i)return d;i=r}else{if(i&&r!=i&&n!=i)return d;i||(i=r)}else i||(i=u[0].id());var f=function(t){for(var e,n,r,i=t,o=[t];c[i].length;)e=c[i].shift(),n=h[e][0],i!=(r=h[e][1])?(c[r]=c[r].filter(function(t){return t!=e}),i=r):s||i==n||(c[n]=c[n].filter(function(t){return t!=e}),i=n),o.unshift(e),o.unshift(i);return o},p=[],v=[];for(v=f(i);1!=v.length;)0==c[v[0]].length?(p.unshift(u.getElementById(v.shift())),p.unshift(u.getElementById(v.shift()))):v=f(v.shift()).concat(v);for(var g in p.unshift(u.getElementById(v.shift())),c)if(c[g].length)return d;return d.found=!0,d.trail=this.spawn(p,!0),d}},{hopcroftTarjanBiconnected:On,htbc:On,htb:On,hopcroftTarjanBiconnectedComponents:On},{tarjanStronglyConnected:Mn,tsc:Mn,tscc:Mn,tarjanStronglyConnectedComponents:Mn}].forEach(function(t){B(In,t)});var Ln=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ln.prototype={fulfill:function(t){return Nn(this,1,"fulfillValue",t)},reject:function(t){return Nn(this,2,"rejectReason",t)},then:function(t,e){var n=new Ln;return this.onFulfilled.push(jn(t,n,"fulfill")),this.onRejected.push(jn(e,n,"reject")),Rn(this),n.proxy}};var Nn=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,Rn(t)),t},Rn=function(t){1===t.state?Fn(t,"onFulfilled",t.fulfillValue):2===t.state&&Fn(t,"onRejected",t.rejectReason)},Fn=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},jn=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(o){return void e.reject(o)}Bn(e,i)}}},Bn=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===a(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(o){return void e.reject(o)}if("function"!=typeof r)e.fulfill(n);else{var i=!1;try{r.call(n,function(r){i||(i=!0,r===n?e.reject(new TypeError("circular thenable chain")):t(e,r))},function(t){i||(i=!0,e.reject(t))})}catch(o){i||e.reject(o)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};Ln.all=function(t){return new Ln(function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then(function(t){o(e,t)},function(t){n(t)}):o(e,r)}(a)})},Ln.resolve=function(t){return new Ln(function(e,n){e(t)})},Ln.reject=function(t){return new Ln(function(e,n){n(t)})};var zn="undefined"!=typeof Promise?Promise:Ln,Vn=function(t,e,n){var r=P(t),i=!r,o=this._private=B({duration:1e3},e,n);if(o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&_(o.complete)&&o.completes.push(o.complete),i){var a=t.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(r){var s=t.pan();o.startPan={x:s.x,y:s.y},o.startZoom=t.zoom()}this.length=1,this[0]=this},Gn=Vn.prototype;B(Gn,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),E(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new zn(function(t,n){e.push(function(){t()})})}}),Gn.complete=Gn.completed,Gn.run=Gn.play,Gn.running=Gn.playing;var Un={};[{animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++)t[e]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,o=!n,a=!o;if(!i.styleEnabled())return this;var s=i.style();if(t=B({},t,e),0===Object.keys(t).length)return new Vn(r[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(a&&(t.style=s.getPropsList(t.style||t.css),t.css=void 0),a&&null!=t.renderedPosition){var u=t.renderedPosition,l=i.pan(),c=i.zoom();t.position=Ut(u,c,l)}if(o&&null!=t.panBy){var h=t.panBy,d=i.pan();t.pan={x:d.x+h.x,y:d.y+h.y}}var f=t.center||t.centre;if(o&&null!=f){var p=i.getCenterPan(f.eles,t.zoom);null!=p&&(t.pan=p)}if(o&&null!=t.fit){var v=t.fit,g=i.getFitViewport(v.eles||v.boundingBox,v.padding);null!=g&&(t.pan=g.pan,t.zoom=g.zoom)}if(o&&x(t.zoom)){var y=i.getZoomedViewport(t.zoom);null!=y?(y.zoomed&&(t.zoom=y.zoom),y.panned&&(t.pan=y.pan)):t.zoom=null}return new Vn(r[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=B({},t,e));for(var r=0;r<n.length;r++){var i=n[r],o=i.animated()&&(void 0===t.queue||t.queue);i.animation(t,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var o=n[i]._private,a=o.animation.current,s=0;s<a.length;s++)e&&(a[s]._private.duration=0);t&&(o.animation.queue=[]),e||(o.animation.current=[])}return r.notify("draw"),this}}},{data:function(t){return t=B({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=void 0!==this.length,o=i?this:[this],a=i?this[0]:this;if(b(e)){var s;if(r.allowGetting&&void 0===n)return a&&(r.beforeGet(a),s=a._private[r.field][e]),s;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var u=c({},e,n);r.beforeSet(this,u);for(var l=0,h=o.length;l<h;l++){var d=o[l];r.canSet(d)&&(d._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&x(e)){var f,p,v=e,g=Object.keys(v);r.beforeSet(this,v);for(var y=0;y<g.length;y++)if(p=v[f=g[y]],!r.immutableKeys[f])for(var m=0;m<o.length;m++){var w=o[m];r.canSet(w)&&(w._private[r.field][f]=p)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&_(e))this.on(r.bindingEvent,e);else if(r.allowGetting&&void 0===e){var k;return a&&(r.beforeGet(a),k=a._private[r.field]),k}return this}},removeData:function(t){return t=B({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(b(e)){for(var i=e.split(/\s+/),o=i.length,a=0;a<o;a++){var s=i[a];if(!D(s)&&!n.immutableKeys[s])for(var u=0,l=r.length;u<l;u++)r[u]._private[n.field][s]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var c=0,h=r.length;c<h;c++)for(var d=r[c]._private[n.field],f=Object.keys(d),p=0;p<f.length;p++){var v=f[p];!n.immutableKeys[v]&&(d[v]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new zn(function(t,e){var i=r.concat([function(e){n.off.apply(n,o),t(e)}]),o=i.concat([]);n.on.apply(n,i)})}}}].forEach(function(t){B(Un,t)});var Hn={animate:Un.animate(),animation:Un.animation(),animated:Un.animated(),clearQueue:Un.clearQueue(),delay:Un.delay(),delayAnimation:Un.delayAnimation(),stop:Un.stop()},qn={classes:function(t){if(void 0===t){var e=[];return this[0]._private.classes.forEach(function(t){return e.push(t)}),e}w(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],r=new Et(t),i=0;i<this.length;i++){for(var o=this[i],a=o._private,s=a.classes,u=!1,l=0;l<t.length;l++)if(!s.has(t[l])){u=!0;break}u||(u=s.size!==t.length),u&&(a.classes=r,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){w(t)||(t=t.match(/\S+/g)||[]);for(var n=void 0===e,r=[],i=0,o=this.length;i<o;i++)for(var a=this[i],s=a._private.classes,u=!1,l=0;l<t.length;l++){var c=t[l],h=s.has(c),d=!1;e||n&&!h?(s.add(c),d=!0):(!e||n&&h)&&(s.delete(c),d=!0),!u&&d&&(r.push(a),u=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};qn.className=qn.classNames=qn.classes;var Wn={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:F,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Wn.variable="(?:[\\w-]|(?:\\\\"+Wn.metaChar+"))+",Wn.value=Wn.string+"|"+Wn.number,Wn.className=Wn.variable,Wn.id=Wn.variable,function(){var t,e,n;for(t=Wn.comparatorOp.split("|"),n=0;n<t.length;n++)Wn.comparatorOp+="|@"+(e=t[n]);for(t=Wn.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(Wn.comparatorOp+="|\\!"+e)}();var Yn=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(t,e){return function(t,e){return-1*j(t,e)}(t.selector,e.selector)}),Kn=function(){for(var t,e={},n=0;n<Yn.length;n++)e[(t=Yn[n]).selector]=t.matches;return e}(),Xn="("+Yn.map(function(t){return t.selector}).join("|")+")",Qn=function(t){return t.replace(new RegExp("\\\\("+Wn.metaChar+")","g"),function(t,e){return e})},Zn=function(t,e,n){t[t.length-1]=n},$n=[{name:"group",query:!0,regex:"("+Wn.group+")",populate:function(t,e,n){var r=h(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:Xn,populate:function(t,e,n){var r=h(n,1);e.checks.push({type:7,value:r[0]})}},{name:"id",query:!0,regex:"\\#("+Wn.id+")",populate:function(t,e,n){var r=h(n,1);e.checks.push({type:8,value:Qn(r[0])})}},{name:"className",query:!0,regex:"\\.("+Wn.className+")",populate:function(t,e,n){var r=h(n,1);e.checks.push({type:9,value:Qn(r[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Wn.variable+")\\s*\\]",populate:function(t,e,n){var r=h(n,1);e.checks.push({type:4,field:Qn(r[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Wn.variable+")\\s*("+Wn.comparatorOp+")\\s*("+Wn.value+")\\s*\\]",populate:function(t,e,n){var r=h(n,3),i=r[0],o=r[1],a=r[2];a=null!=new RegExp("^"+Wn.string+"$").exec(a)?a.substring(1,a.length-1):parseFloat(a),e.checks.push({type:3,field:Qn(i),operator:o,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Wn.boolOp+")\\s*("+Wn.variable+")\\s*\\]",populate:function(t,e,n){var r=h(n,2),i=r[0];e.checks.push({type:5,field:Qn(r[1]),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Wn.meta+")\\s*("+Wn.comparatorOp+")\\s*("+Wn.number+")\\s*\\]\\]",populate:function(t,e,n){var r=h(n,3),i=r[1],o=r[2];e.checks.push({type:6,field:Qn(r[0]),operator:i,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Wn.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,o=t[t.length-1];return null!=n&&(o.subject=n,t.currentSubject=null),o.edgeCount=r,o.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Wn.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:11,source:e,target:r}),Zn(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:12,source:e,target:o}),Zn(t,0,i),t.edgeCount++,o}},{name:"undirectedEdge",separator:!0,regex:Wn.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:10,nodes:[e,r]}),Zn(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:14,node:e,neighbor:o}),Zn(t,0,i),o}},{name:"child",separator:!0,regex:Wn.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:15,parent:t[t.length-1],child:r}),Zn(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},a={checks:[]},s={checks:[]},u={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:a}),a.checks=e.checks,e.checks=[{type:20}],u.checks.push({type:20}),o.checks.push({type:17,parent:u,child:s}),Zn(t,0,i),t.currentSubject=a,t.compoundCount++,s}var l={checks:[]},c={checks:[]},h=[{type:17,parent:l,child:c}];return l.checks=e.checks,e.checks=h,t.compoundCount++,c}},{name:"descendant",separator:!0,regex:Wn.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:16,ancestor:t[t.length-1],descendant:r}),Zn(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},a={checks:[]},s={checks:[]},u={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:a}),a.checks=e.checks,e.checks=[{type:20}],u.checks.push({type:20}),o.checks.push({type:18,ancestor:u,descendant:s}),Zn(t,0,i),t.currentSubject=a,t.compoundCount++,s}var l={checks:[]},c={checks:[]},h=[{type:18,ancestor:l,descendant:c}];return l.checks=e.checks,e.checks=h,t.compoundCount++,c}},{name:"subject",modifier:!0,regex:Wn.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return ft("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];$n.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Jn=function(t){for(var e,n,r,i=0;i<$n.length;i++){var o=$n[i],a=o.name,s=t.match(o.regexObj);if(null!=s){n=s,e=o,r=a,t=t.substring(s[0].length);break}}return{expr:e,match:n,name:r,remaining:t}},tr={parse:function(t){var e=this.inputText=t,n=this[0]={checks:[]};for(this.length=1,e=function(t){var e=t.match(/^\s+/);return e&&(t=t.substring(e[0].length)),t}(e);;){var r=Jn(e);if(null==r.expr)return ft("The selector `"+t+"`is invalid"),!1;var i=r.match.slice(1),o=r.expr.populate(this,n,i);if(!1===o)return!1;if(null!=o&&(n=o),(e=r.remaining).match(/^\s*$/))break}var a=this[this.length-1];null!=this.currentSubject&&(a.subject=this.currentSubject),a.edgeCount=this.edgeCount,a.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var u=this[s];if(u.compoundCount>0&&u.edgeCount>0)return ft("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(u.edgeCount>1)return ft("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===u.edgeCount&&ft("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return b(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function r(i,o){return i.checks.reduce(function(a,s,u){return a+(o===i&&0===u?"$":"")+function(i,o){var a=i.value;switch(i.type){case 0:var s=t(a);return s.substring(0,s.length-1);case 3:return"["+i.field+n(t(i.operator))+e(a)+"]";case 5:var u=i.field;return"["+t(i.operator)+u+"]";case 4:return"["+i.field+"]";case 6:return"[["+i.field+n(t(i.operator))+e(a)+"]]";case 7:return a;case 8:return"#"+a;case 9:return"."+a;case 17:case 15:return r(i.parent,o)+n(">")+r(i.child,o);case 18:case 16:return r(i.ancestor,o)+" "+r(i.descendant,o);case 19:var l=r(i.left,o),c=r(i.subject,o),h=r(i.right,o);return l+(l.length>0?" ":"")+c+h;case 20:return""}}(s,o)},"")},i="",o=0;o<this.length;o++){var a=this[o];i+=r(a,a.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i}},er=function(t,e,n){var r,i,o,a=b(t),s=k(t),u=b(n),l=!1,c=!1,h=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),c=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),l=!0),(a||u||l)&&(i=a||s?""+t:"",o=""+n),l&&(t=i=i.toLowerCase(),n=o=o.toLowerCase()),e){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=t===n;break;case">":h=!0,r=t>n;break;case">=":h=!0,r=t>=n;break;case"<":h=!0,r=t<n;break;case"<=":h=!0,r=t<=n;break;default:r=!1}return!c||null==t&&h||(r=!r),r},nr=function(t,e){return t.data(e)},rr=[],ir=function(t,e){return t.checks.every(function(t){return rr[t.type](t,e)})};rr[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},rr[7]=function(t,e){return function(t,e){return Kn[t](e)}(t.value,e)},rr[8]=function(t,e){var n=t.value;return e.id()===n},rr[9]=function(t,e){return e.hasClass(t.value)},rr[6]=function(t,e){var n=t.operator,r=t.value;return er(function(t,e){return t[e]()}(e,t.field),n,r)},rr[3]=function(t,e){var n=t.operator,r=t.value;return er(nr(e,t.field),n,r)},rr[5]=function(t,e){var n=t.operator;return function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(nr(e,t.field),n)},rr[4]=function(t,e){return void 0!==nr(e,t.field)},rr[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return ir(n,i)&&ir(r,o)||ir(r,i)&&ir(n,o)},rr[14]=function(t,e){return ir(t.node,e)&&e.neighborhood().some(function(e){return e.isNode()&&ir(t.neighbor,e)})},rr[11]=function(t,e){return ir(t.source,e.source())&&ir(t.target,e.target())},rr[12]=function(t,e){return ir(t.source,e)&&e.outgoers().some(function(e){return e.isNode()&&ir(t.target,e)})},rr[13]=function(t,e){return ir(t.target,e)&&e.incomers().some(function(e){return e.isNode()&&ir(t.source,e)})},rr[15]=function(t,e){return ir(t.child,e)&&ir(t.parent,e.parent())},rr[17]=function(t,e){return ir(t.parent,e)&&e.children().some(function(e){return ir(t.child,e)})},rr[16]=function(t,e){return ir(t.descendant,e)&&e.ancestors().some(function(e){return ir(t.ancestor,e)})},rr[18]=function(t,e){return ir(t.ancestor,e)&&e.descendants().some(function(e){return ir(t.descendant,e)})},rr[19]=function(t,e){return ir(t.subject,e)&&ir(t.left,e)&&ir(t.right,e)},rr[20]=function(){return!0},rr[1]=function(t,e){return t.value.has(e)},rr[2]=function(t,e){return(0,t.value)(e)};var or=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||b(t)&&t.match(/^\s*$/)||(E(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):_(t)?this.addQuery({checks:[{type:2,value:t}]}):b(t)?this.parse(t)||(this.invalid=!0):ht("A selector must be created from a string; found "))},ar=or.prototype;[tr,{matches:function(t){for(var e=0;e<this.length;e++)if(ir(this[e],t))return!0;return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++)if(ir(e[n],t))return!0;return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}}].forEach(function(t){return B(ar,t)}),ar.text=function(){return this.inputText},ar.size=function(){return this.length},ar.eq=function(t){return this[t]},ar.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},ar.addQuery=function(t){this[this.length++]=t},ar.selector=ar.toString;var sr={allAre:function(t){var e=new or(t);return this.every(function(t){return e.matches(t)})},is:function(t){var e=new or(t);return this.some(function(t){return e.matches(t)})},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every(function(e){return t.hasElementWithId(e.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every(function(t){return e.hasElementWithId(t.id())})},contains:function(t){t=this.cy().collection(t);var e=this;return t.every(function(t){return e.hasElementWithId(t.id())})}};sr.allAreNeighbours=sr.allAreNeighbors,sr.has=sr.contains,sr.equal=sr.equals=sr.same;var ur,lr,cr=function(t,e){return function(n,r,i,o){var a,s=n;if(null==s?a="":E(s)&&1===s.length&&(a=s.id()),1===this.length&&a){var u=this[0]._private,l=u.traversalCache=u.traversalCache||{},c=l[e]=l[e]||[],h=tt(a);return c[h]||(c[h]=t.call(this,n,r,i,o))}return t.call(this,n,r,i,o)}},hr={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,!0).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++)e.push(n[r]);n=n.parent()}return this.spawn(e,!0).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isChild()}).filter(t)},children:cr(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,!0).filter(t)}};function dr(t,e,n,r){for(var i=[],o=new Et,a=t.cy().hasCompoundNodes(),s=0;s<t.length;s++){var u=t[s];n?i.push(u):a&&r(i,o,u)}for(;i.length>0;){var l=i.shift();e(l),o.add(l.id()),a&&r(i,o,l)}return t}function fr(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function pr(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function vr(t,e,n){pr(t,e,n),fr(t,e,n)}hr.forEachDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return dr(this,t,e,fr)},hr.forEachUp=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return dr(this,t,e,pr)},hr.forEachUpAndDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return dr(this,t,e,vr)},hr.ancestors=hr.parents,(ur=lr={data:Un.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Un.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Un.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Un.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Un.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Un.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=ur.data,ur.removeAttr=ur.removeData;var gr,yr,mr=lr,br={};function _r(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,o=0;o<i.length;o++){var a=i[o];!e&&a.isLoop()||(n+=t(r,a))}return n}}}function wr(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][t](n);void 0===a||void 0!==r&&!e(a,r)||(r=a)}return r}}B(br,{degree:_r(function(t,e){return e.source().same(e.target())?2:1}),indegree:_r(function(t,e){return e.target().same(t)?1:0}),outdegree:_r(function(t,e){return e.source().same(t)?1:0})}),B(br,{minDegree:wr("degree",function(t,e){return t<e}),maxDegree:wr("degree",function(t,e){return t>e}),minIndegree:wr("indegree",function(t,e){return t<e}),maxIndegree:wr("indegree",function(t,e){return t>e}),minOutdegree:wr("outdegree",function(t,e){return t<e}),maxOutdegree:wr("outdegree",function(t,e){return t>e})}),B(br,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var xr=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var o=i._private.position,a={x:null!=e.x?e.x-o.x:0,y:null!=e.y?e.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,n),i.dirtyBoundingBoxCache()}}},kr={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){xr(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(gr=yr={position:Un.data(kr),silentPosition:Un.data(B({},kr,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){xr(t,e,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,e){if(x(t))e?this.silentPosition(t):this.position(t);else if(_(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o,a=this[i];(o=n(a,i))&&(e?a.silentPosition(o):a.position(o))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(x(t)?(r={x:k(t.x)?t.x:0,y:k(t.y)?t.y:0},n=e):b(t)&&k(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=a.position(),u={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(u):a.position(u)}i.endBatch()}return this},silentShift:function(t,e){return x(t)?this.shift(t,!0):b(t)&&k(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=x(t)?t:void 0,s=void 0!==a||void 0!==e&&b(t);if(n&&n.isNode()){if(!s){var u=n.position();return a=Gt(u,i,o),void 0===t?a:a[t]}for(var l=0;l<this.length;l++){var c=this[l];void 0!==e?c.position(t,(e-o[t])/i):void 0!==a&&c.position(Ut(a,i,o))}}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=x(t)?t:void 0,o=void 0!==i||void 0!==e&&b(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),u=a?n.parent():null,l=u&&u.length>0;l&&(u=u[0]);var c=l?u.position():{x:0,y:0};return i={x:s.x-c.x,y:s.y-c.y},void 0===t?i:i[t]}for(var h=0;h<this.length;h++){var d=this[h],f=a?d.parent():null,p=f&&f.length>0;p&&(f=f[0]);var v=p?f.position():{x:0,y:0};void 0!==e?d.position(t,e+v[t]):void 0!==i&&d.position({x:i.x+v.x,y:i.y+v.y})}}else if(!o)return;return this}}).modelPosition=gr.point=gr.position,gr.modelPositions=gr.points=gr.positions,gr.renderedPoint=gr.renderedPosition,gr.relativePoint=gr.relativePosition;var Sr,Er,Cr=yr;Sr=Er={},Er.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},Er.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(e){if(e.isParent()){var n=e._private;n.compoundBoundsClean=!1,n.bbCache=null,t||e.emitAndNotify("bounds")}}),this):this},Er.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),a=e.position;0!==o.w&&0!==o.h||((o={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var u=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(u=100*u/i.width.val);var l=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(l=100*l/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=y(i.width.val-o.w,s,u),d=h.biasDiff,f=h.biasComplementDiff,p=y(i.height.val-o.h,l,c),v=p.biasDiff,g=p.biasComplementDiff;e.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(o.w,o.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(o.w,i.width.val),a.x=(-d+o.x1+o.x2+f)/2,e.autoHeight=Math.max(o.h,i.height.val),a.y=(-v+o.y1+o.y2+g)/2}function y(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean&&!t||(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var Tr=function(t){return t===1/0||t===-1/0?0:t},Pr=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Ar=function(t,e){return null==e?t:Pr(t,e.x1,e.y1,e.x2,e.y2)},Dr=function(t,e,n){return wt(t,e,n)},Or=function(t,e,n){if(!e.cy().headless()){var r,i,o=e._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var u=o.arrowBounds=o.arrowBounds||{},l=u[n]=u[n]||{};l.x1=r-s,l.y1=i-s,l.x2=r+s,l.y2=i+s,l.w=l.x2-l.x1,l.h=l.y2-l.y1,ne(l,1),Pr(t,l.x1,l.y1,l.x2,l.y2)}}},Mr=function(t,e,n){if(!e.cy().headless()){var r,i=e._private,o=i.rstyle;if(e.pstyle((r=n?n+"-":"")+"label").strValue){var a,s,u,l,c=e.pstyle("text-halign"),h=e.pstyle("text-valign"),d=Dr(o,"labelWidth",n),f=Dr(o,"labelHeight",n),p=Dr(o,"labelX",n),v=Dr(o,"labelY",n),g=e.pstyle(r+"text-margin-x").pfValue,y=e.pstyle(r+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle(r+"text-rotation"),_=e.pstyle("text-outline-width").pfValue,w=e.pstyle("text-border-width").pfValue/2,x=e.pstyle("text-background-padding").pfValue,k=f,S=d,E=S/2,C=k/2;if(m)a=p-E,s=p+E,u=v-C,l=v+C;else{switch(c.value){case"left":a=p-S,s=p;break;case"center":a=p-E,s=p+E;break;case"right":a=p,s=p+S}switch(h.value){case"top":u=v-k,l=v;break;case"center":u=v-C,l=v+C;break;case"bottom":u=v,l=v+k}}a+=g-Math.max(_,w)-x-2,s+=g+Math.max(_,w)+x+2,u+=y-Math.max(_,w)-x-2,l+=y+Math.max(_,w)+x+2;var T=n||"main",P=i.labelBounds,A=P[T]=P[T]||{};A.x1=a,A.y1=u,A.x2=s,A.y2=l,A.w=s-a,A.h=l-u;var D=m&&"autorotate"===b.strValue;if(D||null!=b.pfValue&&0!==b.pfValue){var O=D?Dr(i.rstyle,"labelAngle",n):b.pfValue,M=Math.cos(O),I=Math.sin(O),L=(a+s)/2,N=(u+l)/2;if(!m){switch(c.value){case"left":L=s;break;case"right":L=a}switch(h.value){case"top":N=l;break;case"bottom":N=u}}var R=function(t,e){return{x:(t-=L)*M-(e-=N)*I+L,y:t*I+e*M+N}},F=R(a,u),j=R(a,l),B=R(s,u),z=R(s,l);a=Math.min(F.x,j.x,B.x,z.x),s=Math.max(F.x,j.x,B.x,z.x),u=Math.min(F.y,j.y,B.y,z.y),l=Math.max(F.y,j.y,B.y,z.y)}var V=T+"Rot",G=P[V]=P[V]||{};G.x1=a,G.y1=u,G.x2=s,G.y2=l,G.w=s-a,G.h=l-u,Pr(t,a,u,s,l),Pr(i.labelBounds.all,a,u,s,l)}return t}},Ir=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),(r+=n(t.includeTargetLabels))+n(t.includeOverlays)},Lr=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return function(t,e){var n={value:0,done:!1},r=0,i=t.length;return X({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},void 0)}([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},Nr=function(t,e){var n,r=t._private,i=t.isEdge(),o=(null==e?Fr:Ir(e))===Fr,a=Lr(t),s=r.bbCachePosKey===a,u=e.useCache&&s,l=function(t){return null==t._private.bbCache||t._private.styleDirty};if(!u||l(t)||i&&l(t.source())||l(t.target())?(s||t.recalculateRenderedStyle(u),n=function(t,e){var n,r,i,o,a,s,u,l=t._private.cy,c=l.styleEnabled(),h=l.headless(),d=te(),f=t._private,p=t.isNode(),v=t.isEdge(),g=f.rstyle,y=p&&c?t.pstyle("bounds-expansion").pfValue:[0],m=function(t){return"none"!==t.pstyle("display").value},b=!c||m(t)&&(!v||m(t.source())&&m(t.target()));if(b){var _=0;c&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(_=t.pstyle("overlay-padding").value);var w=0;if(c&&(w=t.pstyle("width").pfValue/2),p&&e.includeNodes){var x=t.position();a=x.x,s=x.y;var k=t.outerWidth()/2,S=t.outerHeight()/2;Pr(d,n=a-k,i=s-S,r=a+k,o=s+S)}else if(v&&e.includeEdges)if(c&&!h){var E=t.pstyle("curve-style").strValue;if(n=Math.min(g.srcX,g.midX,g.tgtX),r=Math.max(g.srcX,g.midX,g.tgtX),i=Math.min(g.srcY,g.midY,g.tgtY),o=Math.max(g.srcY,g.midY,g.tgtY),Pr(d,n-=w,i-=w,r+=w,o+=w),"haystack"===E){var C=g.haystackPts;if(C&&2===C.length){if((n=C[0].x)>(r=C[1].x)){var T=n;n=r,r=T}if((i=C[0].y)>(o=C[1].y)){var P=i;i=o,o=P}Pr(d,n-w,i-w,r+w,o+w)}}else if("bezier"===E||"unbundled-bezier"===E||"segments"===E||"taxi"===E){var A;switch(E){case"bezier":case"unbundled-bezier":A=g.bezierPts;break;case"segments":case"taxi":A=g.linePts}if(null!=A)for(var D=0;D<A.length;D++){var O=A[D];Pr(d,n=O.x-w,i=O.y-w,r=O.x+w,o=O.y+w)}}}else{var M=t.source().position(),I=t.target().position();if((n=M.x)>(r=I.x)){var L=n;n=r,r=L}if((i=M.y)>(o=I.y)){var N=i;i=o,o=N}Pr(d,n-=w,i-=w,r+=w,o+=w)}if(c&&e.includeEdges&&v&&(Or(d,t,"mid-source"),Or(d,t,"mid-target"),Or(d,t,"source"),Or(d,t,"target")),c&&"yes"===t.pstyle("ghost").value){var R=t.pstyle("ghost-offset-x").pfValue,F=t.pstyle("ghost-offset-y").pfValue;Pr(d,d.x1+R,d.y1+F,d.x2+R,d.y2+F)}var j=f.bodyBounds=f.bodyBounds||{};ie(j,d),re(j,y),ne(j,1),c&&Pr(d,(n=d.x1)-_,(i=d.y1)-_,(r=d.x2)+_,(o=d.y2)+_);var B=f.overlayBounds=f.overlayBounds||{};ie(B,d),re(B,y),ne(B,1);var z=f.labelBounds=f.labelBounds||{};null!=z.all?((u=z.all).x1=1/0,u.y1=1/0,u.x2=-1/0,u.y2=-1/0,u.w=0,u.h=0):z.all=te(),c&&e.includeLabels&&(e.includeMainLabels&&Mr(d,t,null),v&&(e.includeSourceLabels&&Mr(d,t,"source"),e.includeTargetLabels&&Mr(d,t,"target")))}return d.x1=Tr(d.x1),d.y1=Tr(d.y1),d.x2=Tr(d.x2),d.y2=Tr(d.y2),d.w=Tr(d.x2-d.x1),d.h=Tr(d.y2-d.y1),d.w>0&&d.h>0&&b&&(re(d,y),ne(d,1)),d}(t,Rr),r.bbCache=n,r.bbCachePosKey=a):n=r.bbCache,!o){var c=t.isNode();n=te(),(e.includeNodes&&c||e.includeEdges&&!c)&&Ar(n,e.includeOverlays?r.overlayBounds:r.bodyBounds),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?Ar(n,r.labelBounds.all):(e.includeMainLabels&&Ar(n,r.labelBounds.mainRot),e.includeSourceLabels&&Ar(n,r.labelBounds.sourceRot),e.includeTargetLabels&&Ar(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Rr={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},Fr=Ir(Rr),jr=mt(Rr);Er.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=te();var n=jr(t=t||Rr);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],o=i._private,a=Lr(i);i.recalculateRenderedStyle(n.useCache&&o.bbCachePosKey===a&&!o.styleDirty)}this.updateCompoundBounds(!t.useCache);for(var s=0;s<this.length;s++)Ar(e,Nr(this[s],n))}else t=void 0===t?Rr:jr(t),e=Nr(this[0],t);return e.x1=Tr(e.x1),e.y1=Tr(e.y1),e.x2=Tr(e.x2),e.y2=Tr(e.y2),e.w=Tr(e.x2-e.x1),e.h=Tr(e.y2-e.y1),e},Er.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Er.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(t){return t.isParent()}),e=e.not(i)),x(t)){var o=t;t=function(){return o}}n.startBatch(),e.forEach(function(e,n){return e._private.bbAtOldPos=t(e,n)}).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var a=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions(function(t){return t._private.bbAtOldPos}),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),a},Sr.boundingbox=Sr.bb=Sr.boundingBox,Sr.renderedBoundingbox=Sr.renderedBoundingBox;var Br,zr,Vr=Er;Br=zr={};var Gr=function(t){t.uppercaseName=R(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=R(t.outerName),Br[t.name]=function(){var e=this[0],n=e._private;if(e){if(!n.cy._private.styleEnabled)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var r=e.pstyle(t.name);switch(r.strValue){case"label":return e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0;default:return r.pfValue}}},Br["outer"+t.uppercaseName]=function(){var e=this[0];if(e)return e._private.cy._private.styleEnabled?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},Br["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},Br["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};Gr({name:"width"}),Gr({name:"height"}),zr.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},zr.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},zr.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Ur=zr,Hr={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},qr=Object.keys(Hr).reduce(function(t,e){var n=Hr[e],r=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,n.get)},t[r]=n.mult?function(){return function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map(function(t){return Gt(t,i,r)})}}(this,n.get)}:function(){return function(t,e){if(t.isEdge()){var n=t.cy();return Gt(e(t),n.zoom(),n.pan())}}(this,n.get)},t},{}),Wr=B({},Cr,Vr,Ur,qr),Yr=function(t,e){this.recycle(t,e)};function Kr(){return!1}function Xr(){return!0}Yr.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Kr,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Xr:Kr):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Xr;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Xr;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Xr,this.stopPropagation()},isDefaultPrevented:Kr,isPropagationStopped:Kr,isImmediatePropagationStopped:Kr};var Qr=/^([^.]+)(\.(?:[^.]+))?$/,Zr={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},$r=Object.keys(Zr),Jr={};function ti(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr,e=arguments.length>1?arguments[1]:void 0,n=0;n<$r.length;n++){var r=$r[n];this[r]=t[r]||Zr[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ei=ti.prototype,ni=function(t,e,n,r,i,o,a){_(r)&&(i=r,r=null),a&&(o=null==o?a:B({},o,a));for(var s=w(n)?n:n.split(/\s+/),u=0;u<s.length;u++){var l=s[u];if(!D(l)){var c=l.match(Qr);if(c&&!1===e(t,l,c[1],c[2]?c[2]:null,r,i,o))break}}},ri=function(t,e){return t.addEventFields(t.context,e),new Yr(e.type,e)};ei.on=ei.addListener=function(t,e,n,r,i){return ni(this,function(t,e,n,r,i,o,a){_(o)&&t.listeners.push({event:e,callback:o,type:n,namespace:r,qualifier:i,conf:a})},t,e,n,r,i),this},ei.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},ei.removeListener=ei.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var o=this.listeners,a=function(a){var s=o[a];ni(i,function(e,n,r,i,u,l){if((s.type===r||"*"===t)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!u||e.qualifierCompare(s.qualifier,u))&&(!l||s.callback===l))return o.splice(a,1),!1},t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this},ei.removeAllListeners=function(){return this.removeListener("*")},ei.emit=ei.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,w(e)||(e=[e]),function(t,e,n){if("event"!==m(n))if(x(n))e(t,ri(t,n));else for(var r=w(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!D(o)){var a=o.match(Qr);a&&e(t,ri(t,{type:a[1],namespace:a[2]?a[2]:null,target:t.context}))}}else e(t,n)}(this,function(t,o){null!=n&&(i=(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}]).length);for(var a=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,o)){var a=[o];null!=e&&function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])}(a,e),t.beforeEmit(t.context,i,o),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter(function(t){return t!==i}));var s=t.callbackContext(t.context,i,o),u=i.callback.apply(s,a);t.afterEmit(t.context,i,o),!1===u&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);t.bubble(t.context)&&!o.isPropagationStopped()&&t.parent(t.context).emit(o,e)},t),this.emitting--,this};var ii={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&C(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},oi=function(t){return b(t)?new or(t):t},ai={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new ti(ii,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};Un.eventAliasesOn(ai);var si={nodes:function(t){return this.filter(function(t){return t.isNode()}).filter(t)},edges:function(t){return this.filter(function(t){return t.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.push(r):e.push(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(b(t)||E(t))return new or(t).filter(this);if(_(t)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(e?t.apply(e,[i,r,this]):t(i,r,this))&&n.push(i)}return n}return this.spawn()},not:function(t){if(t){b(t)&&(t=this.filter(t));for(var e=this.spawn(),n=0;n<this.length;n++){var r=this[n];t.has(r)||e.push(r)}return e}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(b(t))return this.filter(t);for(var e=this.spawn(),n=this.length<t.length,r=n?this:t,i=n?t:this,o=0;o<r.length;o++){var a=r[o];i.has(a)&&e.push(a)}return e},xor:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=this.spawn(),r=t,i=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];e.hasElementWithId(i._private.data.id)||n.push(i)}};return i(this,r),i(r,this),n},diff:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=this.spawn(),r=this.spawn(),i=this.spawn(),o=t,a=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];e.hasElementWithId(o._private.data.id)?i.merge(o):n.push(o)}};return a(this,o,n),a(o,this,r),{left:n,right:r,both:i}},add:function(t){var e=this._private.cy;if(!t)return this;if(b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<t.length;i++){var o=t[i];!this.has(o)&&r.push(o)}return r},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&b(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(!i.has(s)){var u=this.length++;this[u]=a,i.set(s,{ele:a,index:u})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(e),this.length>1&&t!==this.length-1){var r=this.length-1,i=this[r],o=i._private.data.id;this[r]=void 0,this[t]=i,n.set(o,{ele:i,index:t})}return this.length--,this},unmergeOne:function(t){var e=this._private.map.get((t=t[0])._private.data.id);return e?(this.unmergeAt(e.index),this):this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(o)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n,r=-1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a>r&&(r=a,n=o)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a<r&&(r=a,n=o)}return{value:r,ele:n}}},ui=si;ui.u=ui["|"]=ui["+"]=ui.union=ui.or=ui.add,ui["\\"]=ui["!"]=ui["-"]=ui.difference=ui.relativeComplement=ui.subtract=ui.not,ui.n=ui["&"]=ui["."]=ui.and=ui.intersection=ui.intersect,ui["^"]=ui["(+)"]=ui["(-)"]=ui.symmetricDifference=ui.symdiff=ui.xor,ui.fnFilter=ui.filterFn=ui.stdFilter=ui.filter,ui.complement=ui.abscomp=ui.absoluteComplement;var li=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?at:0}var i=r(t)-r(e);if(0!==i)return i;function o(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var a=o(t)-o(e);if(0!==a)return a;var s=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==s?s:t.poolIndex()-e.poolIndex()},ci={forEach:function(t,e){if(_(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!_(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(li)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:at-1}var r=e.target,i=e.source.zDepth(),o=r.zDepth();return Math.max(i,o,0)}}};ci.each=ci.forEach,"undefined"!=("undefined"==typeof Symbol?"undefined":a(Symbol))&&"undefined"!=a(Symbol.iterator)&&(ci[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return c({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,function(){return this})});var hi=mt({nodeDimensionsIncludeLabels:!1}),di={layoutDimensions:function(t){var e;if(t=hi(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes().filter(function(t){return!t.isParent()}),i=this.cy(),o=e.eles,a=function(t){return t.id()},s=M(n,a);t.emit({type:"layoutstart",layout:t}),t.animations=[];var u=e.spacingFactor&&1!==e.spacingFactor,l=function(){if(!u)return null;for(var t=te(),e=0;e<r.length;e++){var n=s(r[e],e);ee(t,n.x,n.y)}return t}(),c=M(function(t,n){var r,i,o,a,c,h=s(t,n);return u&&(r=Math.abs(e.spacingFactor),h={x:(a=(i=l).x1+i.w/2)+((o=h).x-a)*r,y:(c=i.y1+i.h/2)+(o.y-c)*r}),null!=e.transform&&(h=e.transform(t,h)),h},a);if(e.animate){for(var h=0;h<r.length;h++){var d=r[h],f=c(d,h);if(null==e.animateFilter||e.animateFilter(d,h)){var p=d.animation({position:f,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(p)}else d.position(f)}if(e.fit){var v=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(v)}else if(void 0!==e.zoom&&void 0!==e.pan){var g=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}t.animations.forEach(function(t){return t.play()}),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),zn.all(t.animations.map(function(t){return t.promise()})).then(function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})})}else r.positions(c),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(B({},t,{eles:this}))}};function fi(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[t])?r:r=o[t]=e(n)}function pi(t,e){return t=tt(t),function(n){return fi(t,e,n)}}function vi(t,e){t=tt(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return fi(t,n,e)}}di.createLayout=di.makeLayout=di.layout;var gi={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach(function(t){n(t),t.connectedEdges().forEach(n)}),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),e.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return t?r.emitAndNotify("style"):r.emit("style"),n.forEach(function(t){return t._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var n=this[e];n._private.styleDirty&&(n._private.styleDirty=!1,t.style().apply(n))}},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(x(t))r.applyBypass(this,t,!1),this.emitAndNotify("style");else if(b(t)){if(void 0===e){var i=this[0];return i?r.getStylePropertyValue(i,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++)n.removeAllBypasses(this[r],!1);else{t=t.split(/\s+/);for(var i=0;i<this.length;i++)n.removeBypasses(this[i],t,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++)i*=o[a].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function yi(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function mi(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var a=i._private;if(!e(i))return!1;if(i.isNode())return!o||yi(i,r);var s=a.source,u=a.target;return n(s)&&(!o||yi(s,n))&&(s===u||n(u)&&(!o||yi(u,n)))}}}var bi=pi("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});gi.takesUpSpace=vi("takesUpSpace",mi({ok:bi}));var _i=pi("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&bi(t)}),wi=pi("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&bi(t)});gi.interactive=vi("interactive",mi({ok:_i,parentOk:wi,edgeOkViaNode:bi})),gi.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var xi=pi("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&bi(t)});gi.visible=vi("visible",mi({ok:xi,edgeOkViaNode:bi})),gi.hidden=function(){var t=this[0];if(t)return!t.visible()},gi.isBundledBezier=vi("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),gi.bypass=gi.css=gi.style,gi.renderedCss=gi.renderedStyle,gi.removeBypass=gi.removeCss=gi.removeStyle,gi.pstyle=gi.parsedStyle;var ki={};function Si(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length&&_(e[0])){var o=e[0];this.on(t.event,o)}else if(0===e.length||1===e.length&&w(e[0])){for(var a=1===e.length?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(u);if(void 0!==h&&(l=h,!h))return this}l&&(u._private[t.field]=t.value,c&&n.push(u))}var d=this.spawn(n);d.updateStyle(),d.emit(t.event),a&&d.emit(a)}return this}}function Ei(t){ki[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},ki[t.on]=Si({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),ki[t.off]=Si({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Ei({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ei({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ei({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ei({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),ki.deselect=ki.unselect,ki.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Ei({field:"active",on:"activate",off:"unactivate"}),Ei({field:"pannable",on:"panify",off:"unpanify"}),ki.inactive=function(){var t=this[0];if(t)return!t._private.active};var Ci={},Ti=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var u=a[s],l=u.source(),c=u.target();if(t.noIncomingEdges&&c===i&&l!==i||t.noOutgoingEdges&&l===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,!0).filter(e)}},Pi=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target();t.outgoing&&u===i?(n.push(s),n.push(l)):t.incoming&&l===i&&(n.push(s),n.push(u))}}return this.spawn(n,!0).filter(e)}},Ai=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return this.spawn(r,!0).filter(e)}};function Di(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,!0).filter(e)}}function Oi(t){return function(e){var n=[],r=this._private.cy,i=t||{};b(e)&&(e=r.$(e));for(var o=0;o<e.length;o++)for(var a=e[o]._private.edges,s=0;s<a.length;s++){var u=a[s],l=u._private.data,c=this.hasElementWithId(l.source)&&e.hasElementWithId(l.target),h=e.hasElementWithId(l.source)&&this.hasElementWithId(l.target);if(c||h){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!h)continue}n.push(u)}}return this.spawn(n,!0)}}function Mi(t){return t=B({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,u=s._private.data.id,l=a.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],f=d._private.data,p=f.target,v=f.source,g=p===l&&v===u;(i.codirected&&g||!i.codirected&&(g||u===p&&l===v))&&n.push(d)}return this.spawn(n,!0).filter(e)}}Ci.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},B(Ci,{roots:Ti({noIncomingEdges:!0}),leaves:Ti({noOutgoingEdges:!0}),outgoers:cr(Pi({outgoing:!0}),"outgoers"),successors:Ai({outgoing:!0}),incomers:cr(Pi({incoming:!0}),"incomers"),predecessors:Ai({incoming:!0})}),B(Ci,{neighborhood:cr(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Ci.neighbourhood=Ci.neighborhood,Ci.closedNeighbourhood=Ci.closedNeighborhood,Ci.openNeighbourhood=Ci.openNeighborhood,B(Ci,{source:cr(function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e},"source"),target:cr(function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e},"target"),sources:Di({attr:"source"}),targets:Di({attr:"target"})}),B(Ci,{edgesWith:cr(Oi(),"edgesWith"),edgesTo:cr(Oi({thisIsSrc:!0}),"edgesTo")}),B(Ci,{connectedEdges:cr(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++)e.push(i[o])}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:cr(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:cr(Mi(),"parallelEdges"),codirectedEdges:cr(Mi({codirected:!0}),"codirectedEdges")}),B(Ci,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),o=[];null!=t&&i.empty()&&(i=t.sources());var a=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var s=function(){var t=n.collection();o.push(t);var r=i[0];a(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return a(e,t)}}),t.forEach(function(n){n.connectedEdges().forEach(function(n){e.has(n)&&t.has(n.source())&&t.has(n.target())&&t.merge(n)})})};do{s()}while(i.length>0);return o},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Ci.componentsOf=Ci.components;var Ii=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==t){var r=new kt,i=!1;if(e){if(e.length>0&&x(e[0])&&!C(e[0])){i=!0;for(var o=[],a=new Et,s=0,u=e.length;s<u;s++){var l=e[s];null==l.data&&(l.data={});var c=l.data;if(null==c.id)c.id=vt();else if(t.hasElementWithId(c.id)||a.has(c.id))continue;var h=new Ct(t,l,!1);o.push(h),a.add(c.id)}e=o}}else e=[];this.length=0;for(var d=0,f=e.length;d<f;d++){var p=e[d][0];if(null!=p){var v=p._private.data.id;n&&r.has(v)||(n&&r.set(v,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(t){this.lazyMap=t},rebuildMap:function(){for(var t=this.lazyMap=new kt,e=this.eles,n=0;n<e.length;n++){var r=e[n];t.set(r.id(),{index:n,ele:r})}}},n&&(this._private.map=r),i&&this.restore()}else ht("A collection must have a reference to the core")},Li=Ct.prototype=Ii.prototype=Object.create(Array.prototype);Li.instanceString=function(){return"collection"},Li.spawn=function(t,e){return new Ii(this.cy(),t,e)},Li.spawnSelf=function(){return this.spawn(this)},Li.cy=function(){return this._private.cy},Li.renderer=function(){return this._private.cy.renderer()},Li.element=function(){return this[0]},Li.collection=function(){return T(this)?this:new Ii(this._private.cy,[this])},Li.unique=function(){return new Ii(this._private.cy,this,!0)},Li.hasElementWithId=function(t){return this._private.map.has(t=""+t)},Li.getElementById=function(t){var e=this._private.cy,n=this._private.map.get(t=""+t);return n?n.ele:new Ii(e)},Li.$id=Li.getElementById,Li.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Li.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},Li.indexOfId=function(t){return this._private.map.get(t=""+t).index},Li.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(x(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,u=t.data.target;null!=s&&s!=i.source&&(a.source=""+s,o=!0),null!=u&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l=t.data.parent;!("parent"in t.data)||null==l&&null==i.parent||l==i.parent||(void 0===l&&(l=null),null!=l&&(l=""+l),e=e.move({parent:l}))}}t.position&&e.position(t.position);var c=function(n,i,o){var a=t[n];null!=a&&a!==r[n]&&(a?e[i]():e[o]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var h={data:pt(r.data),position:pt(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};h.classes="";var d=0;return r.classes.forEach(function(t){return h.classes+=0==d++?t:" "+t}),h}}},Li.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Li.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Ct(t,r,!1);e.push(i)}return new Ii(t,e)},Li.copy=Li.clone,Li.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=i.cy(),a=o._private,s=[],u=[],l=0,c=i.length;l<c;l++){var h=i[l];r&&!h.removed()||(h.isNode()?s.push(h):u.push(h))}t=s.concat(u);var d=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var f=t[e],p=f._private,v=p.data;if(f.clearTraversalCache(),r||p.removed)if(void 0===v.id)v.id=vt();else if(k(v.id))v.id=""+v.id;else{if(D(v.id)||!b(v.id)){ht("Can not create element with invalid string ID `"+v.id+"`"),d();continue}if(o.hasElementWithId(v.id)){ht("Can not create second element with ID `"+v.id+"`"),d();continue}}var g=v.id;if(f.isNode()){var y=p.position;null==y.x&&(y.x=0),null==y.y&&(y.y=0)}if(f.isEdge()){for(var m=f,_=["source","target"],w=_.length,x=!1,S=0;S<w;S++){var E=_[S],C=v[E];k(C)&&(C=v[E]=""+v[E]),null==C||""===C?(ht("Can not create edge `"+g+"` with unspecified "+E),x=!0):o.hasElementWithId(C)||(ht("Can not create edge `"+g+"` with nonexistant "+E+" `"+C+"`"),x=!0)}if(x){d();continue}var T=o.getElementById(v.source),P=o.getElementById(v.target);T.same(P)?T._private.edges.push(m):(T._private.edges.push(m),P._private.edges.push(m)),m._private.source=T,m._private.target=P}p.map=new kt,p.map.set(g,{ele:f,index:0}),p.removed=!1,r&&o.addToPool(f)}for(var A=0;A<s.length;A++){var O=s[A],M=O._private.data;k(M.parent)&&(M.parent=""+M.parent);var I=M.parent,L=null!=I;if(L){var N=o.getElementById(I);if(N.empty())M.parent=void 0;else{for(var R=!1,F=N;!F.empty();){if(O.same(F)){R=!0,M.parent=void 0;break}F=F.parent()}R||(N[0]._private.children.push(O),O._private.parent=N[0],a.hasCompoundNodes=!0)}}}if(t.length>0){for(var j=t.length===i.length?i:new Ii(o,t),B=0;B<j.length;B++){var z=j[B];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}(a.hasCompoundNodes?o.collection().merge(j).merge(j.connectedNodes()).merge(j.parent()):j).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?j.emitAndNotify("add"):r&&j.emit("add")}return i},Li.removed=function(){var t=this[0];return t&&t._private.removed},Li.inside=function(){var t=this[0];return t&&!t._private.removed},Li.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},o=n._private.cy;function a(t){for(var e=t._private.edges,n=0;n<e.length;n++)u(e[n])}function s(t){for(var e=t._private.children,n=0;n<e.length;n++)u(e[n])}function u(t){var n=i[t.id()];e&&t.removed()||n||(i[t.id()]=!0,t.isNode()?(r.push(t),a(t),s(t)):r.unshift(t))}for(var l=0,c=n.length;l<c;l++){var h=n[l];u(h)}function d(t,e){bt(t._private.edges,e),t.clearTraversalCache()}function f(t){t.clearTraversalCache()}var p=[];function v(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();bt(n,e),e._private.parent=null,p.ids[r]||(p.ids[r]=!0,p.push(t))}p.ids={},n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var g=0;g<r.length;g++){var y=r[g];if(y.isEdge()){var m=y.source()[0],b=y.target()[0];d(m,y),d(b,y);for(var _=y.parallelEdges(),w=0;w<_.length;w++){var x=_[w];f(x),x.isBundledBezier()&&x.dirtyBoundingBoxCache()}}else{var k=y.parent();0!==k.length&&v(k,y)}e&&(y._private.removed=!0)}var S=o._private.elements;o._private.hasCompoundNodes=!1;for(var E=0;E<S.length;E++){var C=S[E];if(C.isParent()){o._private.hasCompoundNodes=!0;break}}var T=new Ii(this.cy(),r);T.size()>0&&(t?T.emitAndNotify("remove"):e&&T.emit("remove"));for(var P=0;P<p.length;P++){var A=p[P];e&&A.removed()||A.updateStyle()}return T},Li.move=function(t){var e=this._private.cy,n=this,r=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var i=r(t.source),o=r(t.target),a=null!=i&&e.hasElementWithId(i),s=null!=o&&e.hasElementWithId(o);(a||s)&&(e.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],r=e._private.data;e.isEdge()&&(a&&(r.source=i),s&&(r.target=o))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==t.parent){var u=r(t.parent);if(null===u||e.hasElementWithId(u)){var l=null===u?void 0:u;e.batch(function(){var t=n.remove(!1,!1);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var r=n[e],i=r._private.data;r.isNode()&&(i.parent=l)}t.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[In,Hn,qn,sr,hr,mr,br,Wr,ai,si,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},ci,di,gi,ki,Ci].forEach(function(t){B(Li,t)});var Ni={add:function(t){var e,n=this;if(E(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],o=0;o<r.length;o++)i.push(r[o].json());e=new Ii(n,i)}}else if(w(t))e=new Ii(n,t);else if(x(t)&&(w(t.nodes)||w(t.edges))){for(var a=t,s=[],u=["nodes","edges"],l=0,c=u.length;l<c;l++){var h=u[l],d=a[h];if(w(d))for(var f=0,p=d.length;f<p;f++){var v=B({group:h},d[f]);s.push(v)}}e=new Ii(n,s)}else e=new Ct(n,t).collection();return e},remove:function(t){return E(t)||b(t)&&(t=this.$(t)),t.remove()}},Ri=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+1/6*(i.dx+2*(o.dx+a.dx)+s.dx)*r,n.v=n.v+u*r,n}return function t(e,r,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,u.tension=e,u.friction=r,a=(o=null!==i)?(c=t(e,r))/i*.016:.016;s=n(s||u,a),l.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(t){return l[t*(l.length-1)|0]}:c}}(),Fi=function(t,e,n,r){var i=function(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var d=c?new Float32Array(u):new Array(u);function f(t,e){return 1-3*e+3*t}function p(t,e){return 3*e-6*t}function v(t){return 3*t}function g(t,e,n){return((f(e,n)*t+p(e,n))*t+v(e))*t}function y(t,e,n){return 3*f(e,n)*t*t+2*p(e,n)*t+v(e)}function m(e,r){for(var o=0;o<i;++o){var a=y(r,t,n);if(0===a)return r;r-=(g(r,t,n)-e)/a}return r}function b(){for(var e=0;e<u;++e)d[e]=g(e*l,t,n)}function _(e,r,i){var o,u,l=0;do{(o=g(u=r+(i-r)/2,t,n)-e)>0?i=u:r=u}while(Math.abs(o)>a&&++l<s);return u}function w(e){for(var r=0,i=1,a=u-1;i!==a&&d[i]<=e;++i)r+=l;--i;var s=r+(e-d[i])/(d[i+1]-d[i])*l,c=y(s,t,n);return c>=o?m(e,s):0===c?s:_(e,r,r+l)}var x=!1;function k(){x=!0,t===e&&n===r||b()}var S=function(i){return x||k(),t===e&&n===r?i:0===i?0:1===i?1:g(w(i),e,r)};S.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var E="generateBezier("+[t,e,n,r]+")";return S.toString=function(){return E},S}(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},ji={linear:function(t,e,n){return t+(e-t)*n},ease:Fi(.25,.1,.25,1),"ease-in":Fi(.42,0,1,1),"ease-out":Fi(0,0,.58,1),"ease-in-out":Fi(.42,0,.58,1),"ease-in-sine":Fi(.47,0,.745,.715),"ease-out-sine":Fi(.39,.575,.565,1),"ease-in-out-sine":Fi(.445,.05,.55,.95),"ease-in-quad":Fi(.55,.085,.68,.53),"ease-out-quad":Fi(.25,.46,.45,.94),"ease-in-out-quad":Fi(.455,.03,.515,.955),"ease-in-cubic":Fi(.55,.055,.675,.19),"ease-out-cubic":Fi(.215,.61,.355,1),"ease-in-out-cubic":Fi(.645,.045,.355,1),"ease-in-quart":Fi(.895,.03,.685,.22),"ease-out-quart":Fi(.165,.84,.44,1),"ease-in-out-quart":Fi(.77,0,.175,1),"ease-in-quint":Fi(.755,.05,.855,.06),"ease-out-quint":Fi(.23,1,.32,1),"ease-in-out-quint":Fi(.86,0,.07,1),"ease-in-expo":Fi(.95,.05,.795,.035),"ease-out-expo":Fi(.19,1,.22,1),"ease-in-out-expo":Fi(1,0,0,1),"ease-in-circ":Fi(.6,.04,.98,.335),"ease-out-circ":Fi(.075,.82,.165,1),"ease-in-out-circ":Fi(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return ji.linear;var r=Ri(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":Fi};function Bi(t,e,n,r,i){if(1===r)return n;if(e===n)return n;var o=i(e,n,r);return null==t||((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max))),o}function zi(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function Vi(t,e,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=zi(t,i),s=zi(e,i);if(k(a)&&k(s))return Bi(o,a,s,n,r);if(w(a)&&w(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],h=s[l];if(null!=c&&null!=h){var d=Bi(o,c,h,n,r);u.push(d)}else u.push(h)}return u}}function Gi(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,u=a.startTime,l=(r?t:t.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=ji.linear;else{var c,h,d;c=b(s)?l.parse("transition-timing-function",s).value:s,b(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map(function(t){return+t})),d.length>0?("spring"===h&&d.push(a.duration),a.easingImpl=ji[h].apply(null,d)):a.easingImpl=ji[h]}var f,p=a.easingImpl;if(f=0===a.duration?1:(n-u)/a.duration,a.applying&&(f=a.progress),f<0?f=0:f>1&&(f=1),null==a.delay){var v=a.startPosition,g=a.position;if(g&&i&&!t.locked()){var y={};Ui(v.x,g.x)&&(y.x=Vi(v.x,g.x,f,p)),Ui(v.y,g.y)&&(y.y=Vi(v.y,g.y,f,p)),t.position(y)}var m=a.startPan,_=a.pan,w=o.pan,x=null!=_&&r;x&&(Ui(m.x,_.x)&&(w.x=Vi(m.x,_.x,f,p)),Ui(m.y,_.y)&&(w.y=Vi(m.y,_.y,f,p)),t.emit("pan"));var k=a.startZoom,S=a.zoom,E=null!=S&&r;E&&(Ui(k,S)&&(o.zoom=Jt(o.minZoom,Vi(k,S,f,p),o.maxZoom)),t.emit("zoom")),(x||E)&&t.emit("viewport");var C=a.style;if(C&&C.length>0&&i){for(var T=0;T<C.length;T++){var P=C[T],A=P.name,D=a.startStyle[A],O=Vi(D,P,f,p,l.properties[D.name]);l.overrideBypass(t,A,O)}t.emit("style")}}return a.progress=f,f}function Ui(t,e){return!(null==t||null==e||!(k(t)&&k(e)||t&&e))}function Hi(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function qi(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,o=i.animation.current,a=i.animation.queue,s=!1;if(0===o.length){var u=a.shift();u&&o.push(u)}for(var l=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},c=o.length-1;c>=0;c--){var h=o[c],d=h._private;d.stopped?(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,l(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||Hi(0,h,t),Gi(e,h,t,n),d.applying&&(d.applying=!1),l(d.frames),null!=d.step&&d.step(t),h.completed()&&(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,l(d.completes)),s=!0)}return n||0!==o.length||0!==a.length||r.push(e),s}for(var o=!1,a=0;a<n.length;a++){var s=i(n[a]);o=o||s}var u=i(e,!0);(o||u)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var Wi={animate:Un.animate(),animation:Un.animation(),animated:Un.animated(),clearQueue:Un.clearQueue(),delay:Un.delay(),delayAnimation:Un.delayAnimation(),stop:Un.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender(function(e,n){qi(n,t)},e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&W(function(n){qi(n,t),e()})}()}}},Yi={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&C(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},Ki=function(t){return b(t)?new or(t):t},Xi={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new ti(Yi,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,Ki(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,Ki(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,Ki(e),n),this},once:function(t,e,n){return this.emitter().one(t,Ki(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};Un.eventAliasesOn(Xi);var Qi={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};Qi.jpeg=Qi.jpg;var Zi={layout:function(t){if(null!=t)if(null!=t.name){var e,n=t.name,r=this.extension("layout",n);if(null!=r)return e=b(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$(),new r(B({},t,{cy:this,eles:e}));ht("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else ht("A `name` must be specified to make a layout");else ht("Layout options must be specified to make a layout")}};Zi.createLayout=Zi.makeLayout=Zi.layout;var $i={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach(function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}})}},Ji=mt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),to={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);if(null!=e){void 0!==t.wheelSensitivity&&ft("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=Ji(t);n.cy=this,this._private.renderer=new e(n),this.notify("init")}else ht("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};to.invalidateDimensions=to.resize;var eo={collection:function(t,e){return b(t)?this.$(t):E(t)?t.collection():w(t)?new Ii(this,t,e):new Ii(this)},nodes:function(t){var e=this.$(function(t){return t.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(t){return t.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};eo.elements=eo.filter=eo.$;var no={apply:function(t){for(var e=this._private.cy.collection(),n=0;n<t.length;n++){var r=t[n],i=this.getContextMeta(r);if(!i.empty){var o=this.getContextStyle(i),a=this.applyContextStyle(i,o,r);r._private.appliedInitStyle?this.updateTransitions(r,a.diffProps):r._private.appliedInitStyle=!0,this.updateStyleHints(r)&&e.push(r)}}return e},getPropertiesDiff:function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var o=[],a={},s=0;s<this.length;s++){var u=this[s],l="t"===e[s],c="t"===t[s]!==l,h=u.mappedProperties.length>0;if(c||l&&h){var d=void 0;c&&h||c?d=u.properties:h&&(d=u.mappedProperties);for(var f=0;f<d.length;f++){for(var p=d[f],v=p.name,g=!1,y=s+1;y<this.length&&("t"!==e[y]||!(g=null!=this[y].properties[p.name]));y++);a[v]||g||(a[v]=!0,o.push(v))}}}return n[r]=o,o},getContextMeta:function(t){for(var e,n="",r=t._private.styleCxtKey||"",i=0;i<this.length;i++){var o=this[i];n+=o.selector&&o.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},getContextStyle:function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if("t"===e[i])for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[e]=r,r},applyContextStyle:function(t,e,n){for(var r=t.diffPropNames,i={},o=this.types,a=0;a<r.length;a++){var s=r[a],u=e[s],l=n.pstyle(s);if(!u){if(!l)continue;u=l.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(l!==u){if(u.mapped===o.fn&&null!=l&&null!=l.mapping&&l.mapping.value===u.value){var c=l.mapping;if((c.fnValue=u.value(n))===c.prevFnValue)continue}var h=i[s]={prev:l};this.applyParsedProperty(n,u),h.next=n.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(t){var e,n=t._private,r=this,i=r.propertyGroupKeys,o=function(t,e,n){return r.getPropertiesHash(t,e,n)},a=n.styleKey;if(t.removed())return!1;var s="nodes"===n.group,u=t._private.style;e=Object.keys(u);for(var l=0;l<i.length;l++)n.styleKeys[i[l]]=[9261,5381];for(var c,h=function(t,e){return n.styleKeys[e][0]=Q(t,n.styleKeys[e][0])},d=function(t,e){return n.styleKeys[e][1]=Z(t,n.styleKeys[e][1])},f=function(t,e){h(t,e),d(t,e)},p=function(t,e){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);h(r,e),d(r,e)}},v=0;v<e.length;v++){var g=e[v],y=u[g];if(null!=y){var m=this.properties[g],b=m.type,_=m.groupKey,w=void 0;null!=m.hashOverride?w=m.hashOverride(t,y):null!=y.pfValue&&(w=y.pfValue);var x=null==m.enums?y.value:null,k=null!=w,S=y.units;!b.number||!k&&null==x||b.multiple?p(y.strValue,_):(f(-128<(c=k?w:x)&&c<128&&Math.floor(c)!==c?2e9-(1024*c|0):c,_),k||null==S||p(S,_))}}for(var E=[9261,5381],C=0;C<i.length;C++){var T=n.styleKeys[i[C]];E[0]=Q(T[0],E[0]),E[1]=Z(T[1],E[1])}n.styleKey=2097152*E[0]+E[1];var P=n.styleKeys;n.labelDimsKey=$(P.labelDimensions);var A=o(t,["label"],P.labelDimensions);if(n.labelKey=$(A),n.labelStyleKey=$(J(P.commonLabel,A)),!s){var D=o(t,["source-label"],P.labelDimensions);n.sourceLabelKey=$(D),n.sourceLabelStyleKey=$(J(P.commonLabel,D));var O=o(t,["target-label"],P.labelDimensions);n.targetLabelKey=$(O),n.targetLabelStyleKey=$(J(P.commonLabel,O))}if(s){var M=n.styleKeys,I=M.pie,L=[M.nodeBody,M.nodeBorder,M.backgroundImage,M.compound,I].filter(function(t){return null!=t}).reduce(J,[9261,5381]);n.nodeKey=$(L),n.hasPie=null!=I&&9261!==I[0]&&5381!==I[1]}return a!==n.styleKey},clearStyleHints:function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},applyParsedProperty:function(t,e){var n,r=this,i=e,o=t._private.style,a=r.types,s=r.properties[i.name].type,u=i.bypass,l=o[i.name],c=l&&l.bypass,h=t._private,d=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},f=function(){var e=d(l),n=d(i);r.checkTriggers(t,i.name,e,n)};if(i&&"pie"===i.name.substr(0,3)&&ft("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",u)),i.delete)return o[i.name]=void 0,f(),!0;if(i.deleteBypassed)return l?!!l.bypass&&(l.bypassed=void 0,f(),!0):(f(),!0);if(i.deleteBypass)return l?!!l.bypass&&(o[i.name]=l.bypassed,f(),!0):(f(),!0);var p=function(){ft("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var v,g=i.field.split("."),y=h.data,m=0;m<g.length&&y;m++)y=y[g[m]];if(null==y)return p(),!1;if(!k(y))return ft("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((v=0===b?0:(y-i.fieldMin)/b)<0?v=0:v>1&&(v=1),s.color){var _=i.valueMin[0],w=i.valueMin[1],x=i.valueMax[1],S=i.valueMin[2],E=i.valueMax[2],C=null==i.valueMin[3]?1:i.valueMin[3],T=null==i.valueMax[3]?1:i.valueMax[3],P=[Math.round(_+(i.valueMax[0]-_)*v),Math.round(w+(x-w)*v),Math.round(S+(E-S)*v),Math.round(C+(T-C)*v)];n={bypass:i.bypass,name:i.name,value:P,strValue:"rgb("+P[0]+", "+P[1]+", "+P[2]+")"}}else{if(!s.number)return!1;n=this.parse(i.name,i.valueMin+(i.valueMax-i.valueMin)*v,i.bypass,"mapping")}if(!n)return p(),!1;n.mapping=i,i=n;break;case a.data:for(var A=i.field.split("."),D=h.data,O=0;O<A.length&&D;O++)D=D[A[O]];if(null!=D&&(n=this.parse(i.name,D,i.bypass,"mapping")),!n)return p(),!1;n.mapping=i,i=n;break;case a.fn:var M=null!=i.fnValue?i.fnValue:(0,i.value)(t);if(i.prevFnValue=M,null==M)return ft("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,M,i.bypass,"mapping")))return ft("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=pt(i),i=n;break;case void 0:break;default:return!1}return u?(i.bypassed=c?l.bypassed:l,o[i.name]=i):c?l.bypassed=i:o[i.name]=i,f(),!0},cleanElements:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];null!=u&&(u.bypass?u.bypassed=null:i[s]=null)}else r._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],h=t.pstyle(c),d=e[c];if(d){var f=d.prev,p=null!=d.next?d.next:h,v=!1,g=void 0;f&&(k(f.pfValue)&&k(p.pfValue)?g=f.pfValue+1e-6*(v=p.pfValue-f.pfValue):k(f.value)&&k(p.value)?g=f.value+1e-6*(v=p.value-f.value):w(f.value)&&w(p.value)&&(v=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],g=f.strValue),v&&(s[c]=p.strValue,this.applyBypass(t,c,g),u=!0))}}if(!u)return;r.transitioning=!0,new zn(function(e){a>0?t.delayAnimation(a).play().promise().then(e):e()}).then(function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},checkTrigger:function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);null!=s&&s(n,r)&&o(a)},checkZOrderTrigger:function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(t){return t.triggersZOrder},function(){i._private.cy.notify("zorder",t)})},checkBoundsTrigger:function(t,e,n,r){this.checkTrigger(t,e,n,r,function(t){return t.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"curve-style"!==e||"bezier"!==n&&"bezier"!==r||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach(function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()})})},checkTriggers:function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)}},ro={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var o=0;o<this.properties.length;o++){var a=this.parse(this.properties[o].name,n,!0);a&&i.push(a)}}else if(b(e)){var s=this.parse(e,n,!0);s&&i.push(s)}else{if(!x(e))return!1;var u=e;r=n;for(var l=Object.keys(u),c=0;c<l.length;c++){var h=l[c],d=u[h];if(void 0===d&&(d=u[L(h)]),void 0!==d){var f=this.parse(h,d,!0);f&&i.push(f)}}}if(0===i.length)return!1;for(var p=!1,v=0;v<t.length;v++){for(var g=t[v],y={},m=void 0,_=0;_<i.length;_++){var w=i[_];if(r){var k=g.pstyle(w.name);m=y[w.name]={prev:k}}p=this.applyParsedProperty(g,pt(w))||p,r&&(m.next=g.pstyle(w.name))}p&&this.updateStyleHints(g),r&&this.updateTransitions(g,y,!0)}return p},overrideBypass:function(t,e,n){e=I(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=s?"rgb("+n.join(",")+")":u?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,l,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],u=this.properties[s],l=i.pstyle(u.name);if(l&&l.bypass){var c=this.parse(s,"",!0),h=o[u.name]={prev:l};this.applyParsedProperty(i,c),h.next=i.pstyle(u.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}},io={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(d&&e&&d.getComputedStyle)return d.getComputedStyle(e).getPropertyValue(t)}},oo={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],o=this.getStylePropertyValue(t,i.name,e);null!=o&&(n[i.name]=o,n[L(i.name)]=o)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,o=t.pstyle(r.name);if(o){var a=o.value,s=o.units,u=o.strValue;if(n&&i.number&&null!=a&&k(a)){var l=t.cy().zoom(),c=function(t){return t*l},h=function(t,e){return c(t)+e},d=w(a);return(d?s.every(function(t){return null!=t}):null!=s)?d?a.map(function(t,e){return h(t,s[e])}).join(" "):h(a,s):d?a.map(function(t){return b(t)?t:""+c(t)}).join(" "):""+c(a)}if(null!=u)return u}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,o=t.pstyle(i);void 0!==o&&(o=x(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a],u=r[a]||r[I(a)],l=this.parse(u.name,s);l&&e.push(l)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,o,a,s,u=n.slice();for(a=0;a<e.length;a++)if(null!=(r=t.pstyle(e[a],!1)))if(null!=r.pfValue)u[0]=Q(o,u[0]),u[1]=Z(o,u[1]);else for(i=r.strValue,s=0;s<i.length;s++)o=i.charCodeAt(s),u[0]=Q(o,u[0]),u[1]=Z(o,u[1]);return u}};oo.getPropertiesHash=oo.getNonDefaultPropertiesHash;var ao={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,o=Object.keys(i);this.selector(r);for(var a=0;a<o.length;a++){var s=o[a];this.css(s,i[s])}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}},so={appendFromString:function(t){var e,n,r,i=""+t;function o(){i=i.length>e.length?i.substr(e.length):""}function a(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");!i.match(/^\s*$/);){var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){ft("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}e=s[0];var u=s[1];if("core"!==u&&new or(u).invalid)ft("Skipping parsing of block: Invalid selector found in string stylesheet: "+u),o();else{var l=s[2],c=!1;n=l;for(var h=[];!n.match(/^\s*$/);){var d=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!d){ft("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+l),c=!0;break}r=d[0];var f=d[1],p=d[2];this.properties[f]?this.parse(f,p)?(h.push({name:f,val:p}),a()):(ft("Skipping property: Invalid property definition in: "+r),a()):(ft("Skipping property: Invalid property name in: "+r),a())}if(c){o();break}this.selector(u);for(var v=0;v<h.length;v++){var g=h[v];this.css(g.name,g.val)}o()}}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},uo={};!function(){var t=F,e=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(e){var n=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+n+")\\s*\\,\\s*("+n+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];uo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return b(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var e=t.length;return 1===e||2===e||4===e}}};var i={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||0==t&&0!=e||0!=t&&0==e},any:function(t,e){return t!=e},emptyNonEmpty:function(t,e){var n=D(t),r=D(e);return n&&!r||!n&&r}},o=uo.types,a=[{name:"label",type:o.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any}],s=[{name:"source-label",type:o.text,triggersBounds:i.any},{name:"source-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:o.size,triggersBounds:i.any}],u=[{name:"target-label",type:o.text,triggersBounds:i.any},{name:"target-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:o.size,triggersBounds:i.any}],l=[{name:"font-family",type:o.fontFamily,triggersBounds:i.any},{name:"font-style",type:o.fontStyle,triggersBounds:i.any},{name:"font-weight",type:o.fontWeight,triggersBounds:i.any},{name:"font-size",type:o.size,triggersBounds:i.any},{name:"text-transform",type:o.textTransform,triggersBounds:i.any},{name:"text-wrap",type:o.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:o.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:o.size,triggersBounds:i.any},{name:"text-outline-width",type:o.size,triggersBounds:i.any},{name:"line-height",type:o.positiveNumber,triggersBounds:i.any}],c=[{name:"text-valign",type:o.valign,triggersBounds:i.any},{name:"text-halign",type:o.halign,triggersBounds:i.any},{name:"color",type:o.color},{name:"text-outline-color",type:o.color},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-background-color",type:o.color},{name:"text-background-opacity",type:o.zeroOneNumber},{name:"text-background-padding",type:o.size,triggersBounds:i.any},{name:"text-border-opacity",type:o.zeroOneNumber},{name:"text-border-color",type:o.color},{name:"text-border-width",type:o.size,triggersBounds:i.any},{name:"text-border-style",type:o.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:o.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:o.justification}],h=[{name:"events",type:o.bool},{name:"text-events",type:o.bool}],d=[{name:"display",type:o.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:o.visibility,triggersZOrder:i.any},{name:"opacity",type:o.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:o.zeroOneNumber},{name:"min-zoomed-font-size",type:o.size},{name:"z-compound-depth",type:o.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:o.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:o.nonNegativeInt,triggersZOrder:i.any}],f=[{name:"overlay-padding",type:o.size,triggersBounds:i.any},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero}],p=[{name:"transition-property",type:o.propList},{name:"transition-duration",type:o.time},{name:"transition-delay",type:o.time},{name:"transition-timing-function",type:o.easing}],v=function(t,e){return"label"===e.value?-t.poolIndex():e.pfValue},g=[{name:"height",type:o.nodeSize,triggersBounds:i.any,hashOverride:v},{name:"width",type:o.nodeSize,triggersBounds:i.any,hashOverride:v},{name:"shape",type:o.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:o.polygonPointList,triggersBounds:i.any},{name:"background-color",type:o.color},{name:"background-fill",type:o.fill},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-blacken",type:o.nOneOneNumber},{name:"background-gradient-stop-colors",type:o.colors},{name:"background-gradient-stop-positions",type:o.percentages},{name:"background-gradient-direction",type:o.gradientDirection},{name:"padding",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:o.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:o.boundsExpansion,triggersBounds:i.any}],y=[{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size,triggersBounds:i.any},{name:"border-style",type:o.borderStyle}],m=[{name:"background-image",type:o.urls},{name:"background-image-crossorigin",type:o.bgCrossOrigin},{name:"background-image-opacity",type:o.zeroOneNumbers},{name:"background-image-containment",type:o.bgContainment},{name:"background-image-smoothing",type:o.bools},{name:"background-position-x",type:o.bgPos},{name:"background-position-y",type:o.bgPos},{name:"background-width-relative-to",type:o.bgRelativeTo},{name:"background-height-relative-to",type:o.bgRelativeTo},{name:"background-repeat",type:o.bgRepeat},{name:"background-fit",type:o.bgFit},{name:"background-clip",type:o.bgClip},{name:"background-width",type:o.bgWH},{name:"background-height",type:o.bgWH},{name:"background-offset-x",type:o.bgPos},{name:"background-offset-y",type:o.bgPos}],_=[{name:"position",type:o.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:o.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:o.size,triggersBounds:i.any},{name:"min-width-bias-left",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:o.size,triggersBounds:i.any},{name:"min-height-bias-top",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:o.sizeMaybePercent,triggersBounds:i.any}],w=[{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"line-fill",type:o.fill},{name:"line-cap",type:o.lineCap},{name:"line-opacity",type:o.zeroOneNumber},{name:"line-dash-pattern",type:o.numbers},{name:"line-dash-offset",type:o.number},{name:"line-gradient-stop-colors",type:o.colors},{name:"line-gradient-stop-positions",type:o.percentages},{name:"curve-style",type:o.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:o.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:o.size,triggersBounds:i.any},{name:"control-point-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:o.numbers,triggersBounds:i.any},{name:"taxi-turn",type:o.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:o.size,triggersBounds:i.any},{name:"taxi-direction",type:o.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:o.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:o.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:o.angle,triggersBounds:i.any},{name:"loop-sweep",type:o.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:o.size,triggersBounds:i.any},{name:"target-distance-from-node",type:o.size,triggersBounds:i.any}],x=[{name:"ghost",type:o.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:o.zeroOneNumber}],k=[{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size},{name:"outside-texture-bg-color",type:o.color},{name:"outside-texture-bg-opacity",type:o.zeroOneNumber}],S=[];uo.pieBackgroundN=16,S.push({name:"pie-size",type:o.sizeMaybePercent});for(var E=1;E<=uo.pieBackgroundN;E++)S.push({name:"pie-"+E+"-background-color",type:o.color}),S.push({name:"pie-"+E+"-background-size",type:o.percent}),S.push({name:"pie-"+E+"-background-opacity",type:o.zeroOneNumber});var C=[],T=uo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:o.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:o.color},{name:"arrow-fill",type:o.arrowFill}].forEach(function(t){T.forEach(function(e){C.push({name:e+"-"+t.name,type:t.type,triggersBounds:t.triggersBounds})})},{});var P=uo.properties=[].concat(h,p,d,f,x,c,l,a,s,u,g,y,m,S,_,w,C,k),A=uo.propertyGroups={behavior:h,transition:p,visibility:d,overlay:f,ghost:x,commonLabel:c,labelDimensions:l,mainLabel:a,sourceLabel:s,targetLabel:u,nodeBody:g,nodeBorder:y,backgroundImage:m,pie:S,compound:_,edgeLine:w,edgeArrow:C,core:k},O=uo.propertyGroupNames={};(uo.propertyGroupKeys=Object.keys(A)).forEach(function(t){O[t]=A[t].map(function(t){return t.name}),A[t].forEach(function(e){return e.groupKey=t})});var M=uo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];uo.propertyNames=P.map(function(t){return t.name});for(var I=0;I<P.length;I++){var L=P[I];P[L.name]=L}for(var N=0;N<M.length;N++){var R=M[N],j={name:R.name,alias:!0,pointsTo:P[R.pointsTo]};P.push(j),P[R.name]=j}}(),uo.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},uo.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=B({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(t,e){for(var n=1;n<=uo.pieBackgroundN;n++)t[e.name.replace("{{i}}",n)]=e.value;return t},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(t,e){return uo.arrowPrefixes.forEach(function(n){t[n+"-"+e.name]=e.value}),t},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=this.parse(o,e[o]);n[o]=a}}return t.defaultProperties=n,t.defaultProperties},uo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var lo={parse:function(t,e,n,r){if(_(e))return this.parseImplWarn(t,e,n,r);var i,o=et(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),a=this.propCache=this.propCache||[];return(i=a[o])||(i=a[o]=this.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(i=pt(i))&&(i.value=pt(i.value)),i},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||ft("The style property `".concat(t,": ").concat(e,"` is invalid")),!i||"width"!==i.name&&"height"!==i.name||"label"!==e||ft("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(t,e,n,r){t=I(t);var i=this.properties[t],o=e,a=this.types;if(!i)return null;if(void 0===e)return null;i.alias&&(t=(i=i.pointsTo).name);var s=b(e);s&&(e=e.trim());var u,l,c=i.type;if(!c)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(_(e))return{name:t,value:e,strValue:"fn",mapped:a.fn,bypass:n};if(!s||r||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(u=new RegExp(a.data.regex).exec(e)))return!n&&{name:t,value:u,strValue:""+e,mapped:a.data,field:u[1],bypass:n};if(e.length>=10&&"m"===e[0]&&(l=new RegExp(a.mapData.regex).exec(e))){if(n)return!1;if(c.multiple)return!1;var h=a.mapData;if(!c.color&&!c.number)return!1;var d=this.parse(t,l[4]);if(!d||d.mapped)return!1;var f=this.parse(t,l[5]);if(!f||f.mapped)return!1;if(d.pfValue===f.pfValue||d.strValue===f.strValue)return ft("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(c.color){var p=d.value,v=f.value;if(!(p[0]!==v[0]||p[1]!==v[1]||p[2]!==v[2]||p[3]!==v[3]&&(null!=p[3]&&1!==p[3]||null!=v[3]&&1!==v[3])))return!1}return{name:t,value:l,strValue:""+e,mapped:h,field:l[1],fieldMin:parseFloat(l[2]),fieldMax:parseFloat(l[3]),valueMin:d.value,valueMax:f.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var g;if(g=s?e.split(/\s+/):w(e)?e:[e],c.evenMultiple&&g.length%2!=0)return null;for(var y=[],m=[],x=[],S="",E=!1,C=0;C<g.length;C++){var T=this.parse(t,g[C],n,"multiple");E=E||b(T.value),y.push(T.value),x.push(null!=T.pfValue?T.pfValue:T.value),m.push(T.units),S+=(C>0?" ":"")+T.strValue}return c.validate&&!c.validate(y,m)?null:c.singleEnum&&E?1===y.length&&b(y[0])?{name:t,value:y[0],strValue:y[0],bypass:n}:null:{name:t,value:y,pfValue:x,strValue:S,bypass:n,units:m}}var P,A,D=function(){for(var r=0;r<c.enums.length;r++)if(c.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(c.number){var O,M="px";if(c.units&&(O=c.units),c.implicitUnits&&(M=c.implicitUnits),!c.unitless)if(s){var L="px|em"+(c.allowPercent?"|\\%":"");O&&(L=O);var N=e.match("^("+F+")("+L+")?$");N&&(e=N[1],O=N[2]||M)}else O&&!c.implicitUnits||(O=M);if(e=parseFloat(e),isNaN(e)&&void 0===c.enums)return null;if(isNaN(e)&&void 0!==c.enums)return e=o,D();if(c.integer&&(!k(P=e)||Math.floor(P)!==P))return null;if(void 0!==c.min&&(e<c.min||c.strictMin&&e===c.min)||void 0!==c.max&&(e>c.max||c.strictMax&&e===c.max))return null;var R={name:t,value:e,strValue:""+e+(O||""),units:O,bypass:n};return R.pfValue=c.unitless||"px"!==O&&"em"!==O?e:"px"!==O&&O?this.getEmSizeInPixels()*e:e,"ms"!==O&&"s"!==O||(R.pfValue="ms"===O?e:1e3*e),"deg"!==O&&"rad"!==O||(R.pfValue="rad"===O?e:Math.PI*e/180),"%"===O&&(R.pfValue=e/100),R}if(c.propList){var j=[],B=""+e;if("none"===B);else{for(var V=B.split(/\s*,\s*|\s+/),G=0;G<V.length;G++){var U=V[G].trim();this.properties[U]?j.push(U):ft("`"+U+"` is not a valid property name")}if(0===j.length)return null}return{name:t,value:j,strValue:0===j.length?"none":j.join(" "),bypass:n}}if(c.color){var H=(w(A=e)?A:null)||function(t){return z[t.toLowerCase()]}(A)||function(t){var e,n,r;if((4===t.length||7===t.length)&&"#"===t[0])return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}(A)||function(t){var e,n=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}if((r[1]||r[2]||r[3])&&!(r[1]&&r[2]&&r[3]))return;var a=n[4];if(void 0!==a){if((a=parseFloat(a))<0||a>1)return;e.push(a)}}return e}(A)||function(t){var e,n,r,i,o,a,s,u;function l(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var c=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=u=Math.round(255*i);else{var h=i<.5?i*(1+r):i+r-i*r,d=2*i-h;a=Math.round(255*l(d,h,n+1/3)),s=Math.round(255*l(d,h,n)),u=Math.round(255*l(d,h,n-1/3))}e=[a,s,u,o]}return e}(A);return H?{name:t,value:H,pfValue:H,strValue:"rgb("+H[0]+","+H[1]+","+H[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var q=D();if(q)return q}for(var W=c.regexes?c.regexes:[c.regex],Y=0;Y<W.length;Y++){var K=new RegExp(W[Y]).exec(e);if(K)return{name:t,value:c.singleRegexMatchValue?K[1]:K,strValue:""+e,bypass:n}}return null}return c.string?{name:t,value:""+e,strValue:""+e,bypass:n}:c.enums?D():null}},co=function t(e){if(!(this instanceof t))return new t(e);P(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):ht("A style must have a core reference")},ho=co.prototype;ho.instanceString=function(){return"style"},ho.clear=function(){for(var t=this._private,e=t.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach(function(t){var e=t[0]._private;e.styleDirty=!0,e.appliedInitStyle=!1}),this},ho.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ho.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},ho.selector=function(t){var e="core"===t?null:new or(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},ho.css=function(){var t=this,e=arguments;if(1===e.length)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],o=n[i.name];void 0===o&&(o=n[L(i.name)]),void 0!==o&&this.cssRule(i.name,o)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},ho.style=ho.css,ho.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},ho.append=function(t){return A(t)?t.appendToStyle(this):w(t)?this.appendFromJson(t):b(t)&&this.appendFromString(t),this},co.fromJson=function(t,e){var n=new co(t);return n.fromJson(e),n},co.fromString=function(t,e){return new co(t).fromString(e)},[no,ro,io,oo,ao,so,uo,lo].forEach(function(t){B(ho,t)}),co.types=ho.types,co.properties=ho.properties,co.propertyGroups=ho.propertyGroups,co.propertyGroupNames=ho.propertyGroupNames,co.propertyGroupKeys=ho.propertyGroupKeys;var fo={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return e.style=A(t)?t.generateStyle(this):w(t)?co.fromJson(this,t):b(t)?co.fromString(this,t):co(this),e.style},updateStyle:function(){this.mutableElements().updateStyle()}},po={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(b(o[0]))return a[t=o[0]];if(x(o[0])){if(!this._private.panningEnabled)return this;i=(n=o[0]).y,k(r=n.x)&&(a.x=r),k(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[1],"x"!==(t=o[0])&&"y"!==t||!k(e)||(a[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:x(t)&&(a=(i=s[0]).y,k(o=i.x)&&(u.x+=o),k(a)&&(u.y+=a),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!k(r)||(u[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){var n,r;if(k(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled&&(b(t)?t=this.$(t):x(r=t)&&k(r.x1)&&k(r.x2)&&k(r.y1)&&k(r.y2)?((n={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):E(t)||(t=this.mutableElements()),!E(t)||!t.empty())){n=n||t.boundingBox();var i,o=this.width(),a=this.height();if(e=k(e)?e:0,!isNaN(o)&&!isNaN(a)&&o>0&&a>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:i=(i=(i=Math.min((o-2*e)/n.w,(a-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i,pan:{x:(o-i*(n.x1+n.x2))/2,y:(a-i*(n.y1+n.y2))/2}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return k(t)&&k(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):k(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:k(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,o=r.zoom,a=!1;return r.zoomingEnabled||(a=!0),k(t)?n=t:x(t)&&(n=t.level,null!=t.position?e=Gt(t.position,o,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(a=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,!a&&k(n)&&n!==o&&(null==e||k(e.x)&&k(e.y))?null!=e?{zoomed:!0,panned:!0,zoom:n,pan:{x:-n/o*(e.x-i.x)+e.x,y:-n/o*(e.y-i.y)+e.y}}:{zoomed:!0,panned:!1,zoom:n,pan:i}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!t)return this;if(k(t.zoom)||(n=!1),x(t.pan)||(r=!1),!n&&!r)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=s,i.push("zoom"))}if(r&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var u=t.pan;k(u.x)&&(e.pan.x=u.x,a=!1),k(u.y)&&(e.pan.y=u.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(b(t)){var n=t;t=this.mutableElements().filter(n)}else E(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),o=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(o-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=d.getComputedStyle(r),{width:r.clientWidth-(e=function(e){return parseFloat(t.getPropertyValue(e))})("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};po.centre=po.center,po.autolockNodes=po.autolock,po.autoungrabifyNodes=po.autoungrabify;var vo={data:Un.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Un.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Un.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Un.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};vo.attr=vo.data,vo.removeAttr=vo.removeData;var go=function(t){var e=this,n=(t=B({},t)).container;n&&!S(n)&&S(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var o=void 0!==d&&void 0!==n&&!t.headless,a=t;a.layout=B({name:o?"grid":"null"},a.layout),a.renderer=B({name:o?"canvas":"null"},a.renderer);var s=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},u=this._private={container:n,ready:!1,options:a,elements:new Ii(this),listeners:[],aniEles:new Ii(this),data:a.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?o:a.styleEnabled,zoom:k(a.zoom)?a.zoom:1,pan:{x:x(a.pan)&&k(a.pan.x)?a.pan.x:0,y:x(a.pan)&&k(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom}),u.styleEnabled&&e.setStyle([]);var l=B({},a,a.renderer);e.initRenderer(l),function(t,e){if(t.some(O))return zn.all(t).then(e);e(t)}([a.style,a.elements],function(t){var n=t[0],o=t[1];u.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(x(t)||w(t))&&e.add(t),e.one("layoutready",function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")}).one("layoutstop",function(){e.one("done",r),e.emit("done")});var o=B({},e._private.options.layout);o.eles=e.elements(),e.layout(o).run()}(o,function(){e.startAnimationLoop(),u.ready=!0,_(a.ready)&&e.on("ready",a.ready);for(var t=0;t<i.length;t++)e.on("ready",i[t]);r&&(r.readies=[]),e.emit("ready")},a.done)})},yo=go.prototype;B(yo,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!S(t)&&S(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(B({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return pt(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(x(t)){if(e.startBatch(),t.elements){var i={},o=function(t,n){for(var r=[],o=[],a=0;a<t.length;a++){var s=t[a];if(s.data.id){var u=""+s.data.id,l=e.getElementById(u);i[u]=!0,0!==l.length?o.push({ele:l,json:s}):n?(s.group=n,r.push(s)):r.push(s)}else ft("cy.json() cannot handle elements without an ID attribute")}e.add(r);for(var c=0;c<o.length;c++){var h=o[c];h.ele.json(h.json)}};if(w(t.elements))o(t.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var u=a[s],l=t.elements[u];w(l)&&o(l,u)}var c=e.collection();r.filter(function(t){return!i[t.id()]}).forEach(function(t){t.isParent()?c.merge(t):t.remove()}),c.forEach(function(t){return t.children().move({parent:null})}),c.forEach(function(t){return function(t){return e.getElementById(t.id())}(t).remove()})}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],d=0;d<h.length;d++){var f=h[d];null!=t[f]&&e[f](t[f])}return e.endBatch(),this}var p={};t?p.elements=this.elements().map(function(t){return t.json()}):(p.elements={},r.forEach(function(t){var e=t.group();p.elements[e]||(p.elements[e]=[]),p.elements[e].push(t.json())})),this._private.styleEnabled&&(p.style=e.style().json()),p.data=pt(e.data());var v=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=pt(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=pt(v.renderer),p.hideEdgesOnViewport=v.hideEdgesOnViewport,p.textureOnViewport=v.textureOnViewport,p.wheelSensitivity=v.wheelSensitivity,p.motionBlur=v.motionBlur,p}}),yo.$id=yo.getElementById,[Ni,Wi,Xi,Qi,Zi,$i,to,eo,fo,po,vo].forEach(function(t){B(yo,t)});var mo={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},bo=function(t){return t.scratch("breadthfirst")},_o=function(t,e){return t.scratch("breadthfirst",e)};function wo(t){this.options=B({},mo,t)}wo.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().filter(function(t){return!t.isParent()}),a=i,s=n.directed,u=n.maximal||n.maximalAdjustments>0,l=te(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(E(n.roots))t=n.roots;else if(w(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var d=r.getElementById(n.roots[h]);c.push(d)}t=r.collection(c)}else if(b(n.roots))t=r.$(n.roots);else if(s)t=o.roots();else{var f=i.components();t=r.collection();for(var p=function(e){var n=f[e],r=n.maxDegree(!1),i=n.filter(function(t){return t.degree(!1)===r});t=t.add(i)},v=0;v<f.length;v++)p(v)}var g=[],y={},m=function(t,e){null==g[e]&&(g[e]=[]);var n=g[e].length;g[e].push(t),_o(t,{index:n,depth:e})};a.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=t[0],a=o.id();m(o,i),y[a]=!0}});for(var _=[],x=0;x<o.length;x++){var k=o[x];y[k.id()]||_.push(k)}var S=function(t){for(var e=g[t],n=0;n<e.length;n++){var r=e[n];null!=r?_o(r,{depth:t,index:n}):(e.splice(n,1),n--)}},C=function(){for(var t=0;t<g.length;t++)S(t)},T=function(t,e){for(var n=bo(t),r=t.incomers().filter(function(t){return t.isNode()&&i.has(t)}),o=-1,a=t.id(),s=0;s<r.length;s++){var u=bo(r[s]);o=Math.max(o,u.depth)}return n.depth<=o&&(e[a]?null:(function(t,e){var n=bo(t);g[n.depth][n.index]=null,m(t,e)}(t,o+1),e[a]=!0,!0))};if(s&&u){var P=[],A={},D=function(t){return P.push(t)};for(o.forEach(function(t){return P.push(t)});P.length>0;){var O=P.shift(),M=T(O,A);if(M)O.outgoers().filter(function(t){return t.isNode()&&i.has(t)}).forEach(D);else if(null===M){ft("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}C();var I=0;if(n.avoidOverlap)for(var L=0;L<o.length;L++){var N=o[L].layoutDimensions(n);I=Math.max(I,N.w,N.h)}for(var R={},F=function(t){if(R[t.id()])return R[t.id()];for(var e=bo(t).depth,n=t.neighborhood(),r=0,i=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var u=bo(s);if(null!=u){var l=u.index,c=u.depth;null!=l&&null!=c&&c<e&&(r+=l/g[c].length,i++)}}}return r/=i=Math.max(1,i),0===i&&(r=0),R[t.id()]=r,r},B=function(t,e){var n=F(t)-F(e);return 0===n?j(t.id(),e.id()):n},z=0;z<g.length;z++)g[z].sort(B),S(z);for(var V=[],G=0;G<_.length;G++)V.push(_[G]);g.unshift(V),C();for(var U=0,H=0;H<g.length;H++)U=Math.max(g[H].length,U);var q=l.x1+l.w/2,W=l.x1+l.h/2,Y=g.reduce(function(t,e){return Math.max(t,e.length)},0);return i.nodes().layoutPositions(this,n,function(t){var e=bo(t),r=e.depth,i=e.index,o=g[r].length,a=Math.max(l.w/((n.grid?Y:o)+1),I),s=Math.max(l.h/(g.length+1),I),u=Math.min(l.w/2/g.length,l.h/2/g.length);if(u=Math.max(u,I),n.circle){var c=u*r+u-(g.length>0&&g[0].length<=3?u/2:0),h=2*Math.PI/g[r].length*i;return 0===r&&1===g[0].length&&(c=1),{x:q+c*Math.cos(h),y:W+c*Math.sin(h)}}return{x:q+(i+1-(o+1)/2)*a,y:(r+1)*s}}),this};var xo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function ko(t){this.options=B({},xo,t)}ko.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a,s=te(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u=s.x1+s.w/2,l=s.y1+s.h/2,c=(void 0===e.sweep?2*Math.PI-2*Math.PI/o.length:e.sweep)/Math.max(1,o.length-1),h=0,d=0;d<o.length;d++){var f=o[d].layoutDimensions(e);h=Math.max(h,f.w,f.h)}if(a=k(e.radius)?e.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&e.avoidOverlap){h*=1.75;var p=Math.cos(c)-Math.cos(0),v=Math.sin(c)-Math.sin(0),g=Math.sqrt(h*h/(p*p+v*v));a=Math.max(g,a)}return r.nodes().layoutPositions(this,e,function(t,n){var r=e.startAngle+n*c*(i?1:-1),o=a*Math.cos(r),s=a*Math.sin(r);return{x:u+o,y:l+s}}),this};var So,Eo={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Co(t){this.options=B({},Eo,t)}Co.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),a=te(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s=a.x1+a.w/2,u=a.y1+a.h/2,l=[],c=0,h=0;h<o.length;h++){var d,f=o[h];d=e.concentric(f),l.push({value:d,node:f}),f._private.scratch.concentric=d}o.updateStyle();for(var p=0;p<o.length;p++){var v=o[p].layoutDimensions(e);c=Math.max(c,v.w,v.h)}l.sort(function(t,e){return e.value-t.value});for(var g=e.levelWidth(o),y=[[]],m=y[0],b=0;b<l.length;b++){var _=l[b];m.length>0&&Math.abs(m[0].value-_.value)>=g&&y.push(m=[]),m.push(_)}var w=c+e.minNodeSpacing;if(!e.avoidOverlap){var x=y.length>0&&y[0].length>1,k=Math.min(a.w,a.h)/2-w;w=Math.min(w,k/(y.length+x?1:0))}for(var S=0,E=0;E<y.length;E++){var C=y[E],T=void 0===e.sweep?2*Math.PI-2*Math.PI/C.length:e.sweep,P=C.dTheta=T/Math.max(1,C.length-1);if(C.length>1&&e.avoidOverlap){var A=Math.cos(P)-Math.cos(0),D=Math.sin(P)-Math.sin(0),O=Math.sqrt(w*w/(A*A+D*D));S=Math.max(O,S)}C.r=S,S+=w}if(e.equidistant){for(var M=0,I=0,L=0;L<y.length;L++)M=Math.max(M,y[L].r-I);I=0;for(var N=0;N<y.length;N++){var R=y[N];0===N&&(I=R.r),R.r=I,I+=M}}for(var F={},j=0;j<y.length;j++)for(var B=y[j],z=B.dTheta,V=B.r,G=0;G<B.length;G++){var U=B[G],H=e.startAngle+(n?1:-1)*z*G,q={x:s+V*Math.cos(H),y:u+V*Math.sin(H)};F[U.node.id()]=q}return i.nodes().layoutPositions(this,e,function(t){var e=t.id();return F[e]}),this};var To={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Po(t){this.options=B({},To,t),this.options.layout=this}Po.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),So=!0===t.debug;var r=Ao(e,n,t);So&&(void 0)(r),t.randomize&&Mo(r);var i=Y(),o=function(){Lo(r,e,t),!0===t.fit&&e.fit(t.padding)},a=function(e){return!(n.stopped||e>=t.numIter||(No(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(!0===t.animate||!1===t.animate)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var e=t.eles.nodes(),i=Io(r,t,e);e.layoutPositions(n,t,i)}},u=0,l=!0;if(!0===t.animate)!function e(){for(var n=0;l&&n<t.refresh;)l=a(u),u++,n++;l?(Y()-i>=t.animationThreshold&&o(),W(e)):(Yo(r,t),s())}();else{for(;l;)l=a(u),u++;Yo(r,t),s()}return this},Po.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Po.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Ao=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:te(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},a=n.eles.components(),s={},u=0;u<a.length;u++)for(var l=a[u],c=0;c<l.length;c++)s[l[c].id()]=u;for(u=0;u<o.nodeSize;u++){var h=(g=i[u]).layoutDimensions(n);(O={}).isLocked=g.locked(),O.id=g.data("id"),O.parentId=g.data("parent"),O.cmptId=s[g.id()],O.children=[],O.positionX=g.position("x"),O.positionY=g.position("y"),O.offsetX=0,O.offsetY=0,O.height=h.w,O.width=h.h,O.maxX=O.positionX+O.width/2,O.minX=O.positionX-O.width/2,O.maxY=O.positionY+O.height/2,O.minY=O.positionY-O.height/2,O.padLeft=parseFloat(g.style("padding")),O.padRight=parseFloat(g.style("padding")),O.padTop=parseFloat(g.style("padding")),O.padBottom=parseFloat(g.style("padding")),O.nodeRepulsion=_(n.nodeRepulsion)?n.nodeRepulsion(g):n.nodeRepulsion,o.layoutNodes.push(O),o.idToIndex[O.id]=u}var d=[],f=0,p=-1,v=[];for(u=0;u<o.nodeSize;u++){var g,y=(g=o.layoutNodes[u]).parentId;null!=y?o.layoutNodes[o.idToIndex[y]].children.push(g.id):(d[++p]=g.id,v.push(g.id))}for(o.graphSet.push(v);f<=p;){var m=d[f++],b=o.layoutNodes[o.idToIndex[m]].children;if(b.length>0)for(o.graphSet.push(b),u=0;u<b.length;u++)d[++p]=b[u]}for(u=0;u<o.graphSet.length;u++){var w=o.graphSet[u];for(c=0;c<w.length;c++)o.indexToGraph[o.idToIndex[w[c]]]=u}for(u=0;u<o.edgeSize;u++){var x=r[u],k={};k.id=x.data("id"),k.sourceId=x.data("source"),k.targetId=x.data("target");var S=_(n.idealEdgeLength)?n.idealEdgeLength(x):n.idealEdgeLength,E=_(n.edgeElasticity)?n.edgeElasticity(x):n.edgeElasticity,C=o.idToIndex[k.sourceId],T=o.idToIndex[k.targetId];if(o.indexToGraph[C]!=o.indexToGraph[T]){for(var P=Do(k.sourceId,k.targetId,o),A=o.graphSet[P],D=0,O=o.layoutNodes[C];-1===A.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],D++;for(O=o.layoutNodes[T];-1===A.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],D++;S*=D*n.nestingFactor}k.idealLength=S,k.elasticity=E,o.layoutEdges.push(k)}return o},Do=function(t,e,n){var r=Oo(t,e,0,n);return 2>r.count?0:r.graph},Oo=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var u=i.layoutNodes[i.idToIndex[o[s]]].children;if(0!==u.length){var l=t(e,n,i.indexToGraph[i.idToIndex[u[0]]],i);if(0!==l.count){if(1!==l.count)return l;if(2==++a)break}}}return{count:a,graph:r}},Mo=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},Io=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,o){var a=t.layoutNodes[t.idToIndex[n.data("id")]];return e.boundingBox?{x:r.x1+(a.positionX-i.x1)/i.w*r.w,y:r.y1+(a.positionY-i.y1)/i.h*r.h}:{x:a.positionX,y:a.positionY}}},Lo=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=Io(t,n,i);i.positions(o),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},No=function(t,e,n){Ro(t,e),Vo(t),Go(t,e),Uo(t),Ho(t)},Ro=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=t.layoutNodes[t.idToIndex[r[o]]],s=o+1;s<i;s++)jo(a,t.layoutNodes[t.idToIndex[r[s]]],t,e)},Fo=function(t){return-t+2*t*Math.random()},jo=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,o=e.positionY-t.positionY;0===i&&0===o&&(i=Fo(1),o=Fo(1));var a=Bo(t,e,i,o);if(a>0)var s=(l=r.nodeOverlap*a)*i/(v=Math.sqrt(i*i+o*o)),u=l*o/v;else{var l,c=zo(t,i,o),h=zo(e,-1*i,-1*o),d=h.x-c.x,f=h.y-c.y,p=d*d+f*f,v=Math.sqrt(p);s=(l=(t.nodeRepulsion+e.nodeRepulsion)/p)*d/v,u=l*f/v}t.isLocked||(t.offsetX-=s,t.offsetY-=u),e.isLocked||(e.offsetX+=s,e.offsetY+=u)}},Bo=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},zo=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,u=o/a,l={};return 0===e&&0<n||0===e&&0>n?(l.x=r,l.y=i+o/2,l):0<e&&-1*u<=s&&s<=u?(l.x=r+a/2,l.y=i+a*n/2/e,l):0>e&&-1*u<=s&&s<=u?(l.x=r-a/2,l.y=i-a*n/2/e,l):0<n&&(s<=-1*u||s>=u)?(l.x=r+o*e/2/n,l.y=i+o/2,l):0>n&&(s<=-1*u||s>=u)?(l.x=r-o*e/2/n,l.y=i-o/2,l):l},Vo=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.layoutNodes[t.idToIndex[r.sourceId]],o=t.layoutNodes[t.idToIndex[r.targetId]],a=o.positionX-i.positionX,s=o.positionY-i.positionY;if(0!==a||0!==s){var u=zo(i,a,s),l=zo(o,-1*a,-1*s),c=l.x-u.x,h=l.y-u.y,d=Math.sqrt(c*c+h*h),f=Math.pow(r.idealLength-d,2)/r.elasticity;if(0!==d)var p=f*c/d,v=f*h/d;else p=0,v=0;i.isLocked||(i.offsetX+=p,i.offsetY+=v),o.isLocked||(o.offsetX-=p,o.offsetY-=v)}}},Go=function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[r[0]]].parentId]];o=s.positionX,a=s.positionY}for(var u=0;u<i;u++){var l=t.layoutNodes[t.idToIndex[r[u]]];if(!l.isLocked){var c=o-l.positionX,h=a-l.positionY,d=Math.sqrt(c*c+h*h);if(d>1){var f=e.gravity*h/d;l.offsetX+=e.gravity*c/d,l.offsetY+=f}}}}},Uo=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.layoutNodes[t.idToIndex[o]],s=a.children;if(0<s.length&&!a.isLocked){for(var u=a.offsetX,l=a.offsetY,c=0;c<s.length;c++){var h=t.layoutNodes[t.idToIndex[s[c]]];h.offsetX+=u,h.offsetY+=l,n[++i]=s[c]}a.offsetX=0,a.offsetY=0}}},Ho=function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=qo(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Wo(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},qo=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},Wo=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o?t(i,n):void 0}},Yo=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var o=n[i],a=o.cmptId;(r[a]=r[a]||[]).push(o)}var s=0;for(i=0;i<r.length;i++)if(v=r[i]){v.x1=1/0,v.x2=-1/0,v.y1=1/0,v.y2=-1/0;for(var u=0;u<v.length;u++){var l=v[u];v.x1=Math.min(v.x1,l.positionX-l.width/2),v.x2=Math.max(v.x2,l.positionX+l.width/2),v.y1=Math.min(v.y1,l.positionY-l.height/2),v.y2=Math.max(v.y2,l.positionY+l.height/2)}v.w=v.x2-v.x1,v.h=v.y2-v.y1,s+=v.w*v.h}r.sort(function(t,e){return e.w*e.h-t.w*t.h});var c=0,h=0,d=0,f=0,p=Math.sqrt(s)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var v;if(v=r[i]){for(u=0;u<v.length;u++)(l=v[u]).isLocked||(l.positionX+=c-v.x1,l.positionY+=h-v.y1);c+=v.w+e.componentSpacing,d+=v.w+e.componentSpacing,f=Math.max(f,v.h),d>p&&(h+=f+e.componentSpacing,c=0,d=0,f=0)}}},Ko={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Xo(t){this.options=B({},Ko,t)}Xo.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=te(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)r.nodes().layoutPositions(this,e,function(t){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(t){if(null==t)return Math.min(u,l);Math.min(u,l)==u?u=t:l=t},h=function(t){if(null==t)return Math.max(u,l);Math.max(u,l)==u?u=t:l=t},d=e.rows,f=null!=e.cols?e.cols:e.columns;if(null!=d&&null!=f)u=d,l=f;else if(null!=d&&null==f)u=d,l=Math.ceil(a/u);else if(null==d&&null!=f)l=f,u=Math.ceil(a/l);else if(l*u>a){var p=c(),v=h();(p-1)*v>=a?c(p-1):(v-1)*p>=a&&h(v-1)}else for(;l*u<a;){var g=c(),y=h();(y+1)*g>=a?h(y+1):c(g+1)}var m=o.w/l,b=o.h/u;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var _=0;_<i.length;_++){var w=i[_],x=w._private.position;null!=x.x&&null!=x.y||(x.x=0,x.y=0);var k=w.layoutDimensions(e),S=e.avoidOverlapPadding,E=k.h+S;m=Math.max(m,k.w+S),b=Math.max(b,E)}for(var C={},T=function(t,e){return!!C["c-"+t+"-"+e]},P=function(t,e){C["c-"+t+"-"+e]=!0},A=0,D=0,O=function(){++D>=l&&(D=0,A++)},M={},I=0;I<i.length;I++){var L=i[I],N=e.position(L);if(N&&(void 0!==N.row||void 0!==N.col)){var R={row:N.row,col:N.col};if(void 0===R.col)for(R.col=0;T(R.row,R.col);)R.col++;else if(void 0===R.row)for(R.row=0;T(R.row,R.col);)R.row++;M[L.id()]=R,P(R.row,R.col)}}i.layoutPositions(this,e,function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var i=M[t.id()];if(i)n=i.col*m+m/2+o.x1,r=i.row*b+b/2+o.y1;else{for(;T(A,D);)O();n=D*m+m/2+o.x1,r=A*b+b/2+o.y1,P(A,D),O()}return{x:n,y:r}})}return this};var Qo={ready:function(){},stop:function(){}};function Zo(t){this.options=B({},Qo,t)}Zo.prototype.run=function(){var t=this.options,e=t.eles;return this.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},Zo.prototype.stop=function(){return this};var $o={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Jo(t){this.options=B({},$o,t)}Jo.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=_(t.positions);return e.layoutPositions(this,t,function(e,r){var i=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i}),this};var ta={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function ea(t){this.options=B({},ta,t)}ea.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=te(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.nodes().layoutPositions(this,t,function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var na=[{name:"breadthfirst",impl:wo},{name:"circle",impl:ko},{name:"concentric",impl:Co},{name:"cose",impl:Po},{name:"grid",impl:Xo},{name:"null",impl:Zo},{name:"preset",impl:Jo},{name:"random",impl:ea}];function ra(t){this.options=t,this.notifications=0}var ia=function(){},oa=function(){throw new Error("A headless instance can not render images")};ra.prototype={recalculateRenderedStyle:ia,notify:function(){this.notifications++},init:ia,isHeadless:function(){return!0},png:oa,jpg:oa};var aa={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,a){return i.x-n/2-a<=t&&t<=i.x+n/2+a&&i.y-n/2-a<=e&&e<=i.y+n/2+a},r=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=t*Math.sin(r)+e*Math.cos(r);return{x:o*n+i.x,y:a*n+i.y}},i=function(t,e,n,i){for(var o=[],a=0;a<t.length;a+=2)o.push(r(t[a],t[a+1],e,n,i));return o},o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},a=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},s=function(r,s){b(s)&&(s=t[s]),t[r]=B({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,a,s){var u=o(i(this.points,n+2*s,r,a));return fe(t,e,u)},roughCollide:n,draw:function(t,n,r,o){var a=i(this.points,n,r,o);e.arrowShapeImpl("polygon")(t,a)},spacing:function(t){return 0},gap:a},s)};s("none",{collide:ut,roughCollide:ut,draw:ct,spacing:lt,gap:lt}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,o,a,s){var u=i(this.points,n,o,a),l=this.controlPoint,c=r(l[0],l[1],n,o,a);e.arrowShapeImpl(this.name)(t,u,c)},gap:function(t){return.8*a(t)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,a,s,u){var l=o(i(this.points,n+2*u,r,a)),c=o(i(this.pointsTee,n+2*u,r,a));return fe(t,e,l)||fe(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),u=i(this.pointsTee,n,r,o);e.arrowShapeImpl(this.name)(t,s,u)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,e,n,r,a,s,u){var l=a,c=Math.pow(l.x-t,2)+Math.pow(l.y-e,2)<=Math.pow((n+2*u)*this.radius,2),h=o(i(this.points,n+2*u,r,a));return fe(t,e,h)||c},draw:function(t,n,r,o,a){var s=i(this.pointsTr,n,r,o);e.arrowShapeImpl(this.name)(t,s,o.x,o.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,r,a,s,u){var l=o(i(this.points,n+2*u,r,a)),c=o(i(this.crossLinePts(n,s),n+2*u,r,a));return fe(t,e,l)||fe(t,e,c)},draw:function(t,n,r,o,a){var s=i(this.points,n,r,o),u=i(this.crossLinePts(n,a),n,r,o);e.arrowShapeImpl(this.name)(t,s,u)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*a(t)}}),s("circle",{radius:.15,collide:function(t,e,n,r,i,o,a){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},sa={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),u=n.zoom();return[((t-i)/a-s.x)/u,((e-o)/a-s.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=d.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i=r("padding-left"),o=r("padding-right"),a=r("padding-top"),s=r("padding-bottom"),u=r("border-left-width"),l=r("border-right-width"),c=r("border-top-width"),h=(r("border-bottom-width"),t.clientWidth);return this.containerBB=[e.left+i+u,e.top+a+c,h-(i+o),t.clientHeight-(a+s),e.width/(h+(u+l))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,o,a=this,s=this,u=s.getCachedZSortedEles(),l=[],c=s.cy.zoom(),h=s.cy.hasCompoundNodes(),d=(r?24:8)/c,f=(r?8:2)/c,p=(r?8:2)/c,v=1/0;function g(t,e){if(t.isNode()){if(o)return;o=t,l.push(t)}if(t.isEdge()&&(null==e||e<v))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<l.length;n++)if(l[n].isEdge()){l[n]=t,i=t,v=null!=e?e:v;break}}else l.push(t),i=t,v=null!=e?e:v}function y(n){var r=n.outerWidth()+2*f,i=n.outerHeight()+2*f,o=r/2,u=i/2,l=n.position();if(l.x-o<=t&&t<=l.x+o&&l.y-u<=e&&e<=l.y+u&&s.nodeShapes[a.getNodeShape(n)].checkPoint(t,e,0,r,i,l.x,l.y))return g(n,0),!0}function m(n){var r,i=n._private,o=i.rscratch,u=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,f=u/2+d,p=f*f,v=2*f,m=i.source,b=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var _=o.allpts,w=0;w+3<_.length;w+=2)if(le(t,e,_[w],_[w+1],_[w+2],_[w+3],v)&&p>(r=de(t,e,_[w],_[w+1],_[w+2],_[w+3])))return g(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(_=o.allpts,w=0;w+5<o.allpts.length;w+=4)if(ce(t,e,_[w],_[w+1],_[w+2],_[w+3],_[w+4],_[w+5],v)&&p>(r=he(t,e,_[w],_[w+1],_[w+2],_[w+3],_[w+4],_[w+5])))return g(n,r),!0;m=m||i.source,b=b||i.target;var x=a.getArrowWidth(u,c),k=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(w=0;w<k.length;w++){var S=k[w],E=s.arrowShapes[n.pstyle(S.name+"-arrow-shape").value],C=n.pstyle("width").pfValue;if(E.roughCollide(t,e,x,S.angle,{x:S.x,y:S.y},C,d)&&E.collide(t,e,x,S.angle,{x:S.x,y:S.y},C,d))return g(n),!0}h&&l.length>0&&(y(m),y(b))}function b(t,e,n){return wt(t,e,n)}function _(n,r){var i,o=n._private,a=p;i=r?r+"-":"",n.boundingBox();var s=o.labelBounds[r||"main"],u=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&u){var l=b(o.rscratch,"labelX",r),c=b(o.rscratch,"labelY",r),h=b(o.rscratch,"labelAngle",r),d=n.pstyle(i+"text-margin-x").pfValue,f=n.pstyle(i+"text-margin-y").pfValue,v=s.x1-a-d,y=s.x2+a-d,m=s.y1-a-f,_=s.y2+a-f;if(h){var w=Math.cos(h),x=Math.sin(h),k=function(t,e){return{x:(t-=l)*w-(e-=c)*x+l,y:t*x+e*w+c}},S=k(v,m),E=k(v,_),C=k(y,m),T=k(y,_);if(fe(t,e,[S.x+d,S.y+f,C.x+d,C.y+f,T.x+d,T.y+f,E.x+d,E.y+f]))return g(n),!0}else if(ae(s,t,e))return g(n),!0}}n&&(u=u.interactive);for(var w=u.length-1;w>=0;w--){var x=u[w];x.isNode()?y(x)||_(x):m(x)||_(x)||_(x,"source")||_(x,"target")}return l},getAllInBox:function(t,e,n,r){for(var i,o=this.getCachedZSortedEles().interactive,a=[],s=Math.min(t,n),u=Math.max(t,n),l=Math.min(e,r),c=Math.max(e,r),h=te({x1:t=s,y1:e=l,x2:n=u,y2:r=c}),d=0;d<o.length;d++){var f=o[d];if(f.isNode()){var p=f,v=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});oe(h,v)&&!se(v,h)&&a.push(p)}else{var g=f,y=g._private,m=y.rscratch;if(null!=m.startX&&null!=m.startY&&!ae(h,m.startX,m.startY))continue;if(null!=m.endX&&null!=m.endY&&!ae(h,m.endX,m.endY))continue;if("bezier"===m.edgeType||"multibezier"===m.edgeType||"self"===m.edgeType||"compound"===m.edgeType||"segments"===m.edgeType||"haystack"===m.edgeType){for(var b=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,_=!0,w=0;w<b.length;w++)if(!ae(h,(i=b[w]).x,i.y)){_=!1;break}_&&a.push(g)}else"haystack"!==m.edgeType&&"straight"!==m.edgeType||a.push(g)}}return a}},ua={calculateArrowAngles:function(t){var e,n,r,i,o,a,s=t._private.rscratch,u="haystack"===s.edgeType,l="bezier"===s.edgeType,c="multibezier"===s.edgeType,h="segments"===s.edgeType,d="compound"===s.edgeType,f="self"===s.edgeType;u?(r=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),p=s.midX,v=s.midY,h?(e=r-s.segpts[0],n=i-s.segpts[1]):c||d||f||l?(e=r-Zt((C=s.allpts)[0],C[2],C[4],.1),n=i-Zt(C[1],C[3],C[5],.1)):(e=r-p,n=i-v),s.srcArrowAngle=qt(e,n);var p=s.midX,v=s.midY;if(u&&(p=(r+o)/2,v=(i+a)/2),e=o-r,n=a-i,h)if((C=s.allpts).length/2%2==0)e=C[g=C.length/2]-C[y=g-2],n=C[g+1]-C[y+1];else{var g,y,m=2+(g=C.length/2-1);e=C[g]-C[y=g-2],n=C[g+1]-C[y+1]}else if(c||d||f){var b,_,w,x,k,S,E,C=s.allpts;s.ctrlpts.length/2%2==0?(b=Zt(C[S=C.length/2-1],C[k=S+2],C[E=k+2],0),_=Zt(C[S+1],C[k+1],C[E+1],0),w=Zt(C[S],C[k],C[E],1e-4),x=Zt(C[S+1],C[k+1],C[E+1],1e-4)):(b=Zt(C[S=(k=C.length/2-1)-2],C[k],C[E=k+2],.4999),_=Zt(C[S+1],C[k+1],C[E+1],.4999),w=Zt(C[S],C[k],C[E],.5),x=Zt(C[S+1],C[k+1],C[E+1],.5)),e=w-b,n=x-_}if(s.midtgtArrowAngle=qt(e,n),s.midDispX=e,s.midDispY=n,e*=-1,n*=-1,h&&((C=s.allpts).length/2%2==0||(e=-(C[m=2+(g=C.length/2-1)]-C[g]),n=-(C[m+1]-C[g+1]))),s.midsrcArrowAngle=qt(e,n),h)e=o-s.segpts[s.segpts.length-2],n=a-s.segpts[s.segpts.length-1];else if(c||d||f||l){var T=(C=s.allpts).length;e=o-Zt(C[T-6],C[T-4],C[T-2],.9),n=a-Zt(C[T-5],C[T-3],C[T-1],.9)}else e=o-p,n=a-v;s.tgtArrowAngle=qt(e,n)}};ua.getArrowWidth=ua.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var la={};function ca(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2)e.push({x:t[n],y:t[n+1]});return e}}la.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,u=a.position(),l=s.position(),c=a.width(),h=s.width(),d=a.height(),f=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+u.x,i.source.y*d*p+u.y,i.target.x*h*p+l.x,i.target.y*f*p+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},la.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,o=e.vectorNormInverse,a=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),u=t.pstyle("segment-distances"),l=Math.min(s.pfValue.length,u.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<l;c++){var h=s.pfValue[c],d=u.pfValue[c],f=1-h,p="node-position"===a?r:i,v={x:p.x1*f+p.x2*h,y:p.y1*f+p.y2*h};n.segpts.push(v.x+o.x*d,v.y+o.y*d)}},la.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,f=h;r&&(d=0,f=u);var p=l-Math.PI/2,v=p-c/2,g=p+c/2,y=String(l+"_"+c);d=void 0===o[y]?o[y]=0:++o[y],i.ctrlpts=[a.x+1.4*Math.cos(v)*f*(d/3+1),a.y+1.4*Math.sin(v)*f*(d/3+1),a.x+1.4*Math.cos(g)*f*(d/3+1),a.y+1.4*Math.sin(g)*f*(d/3+1)]},la.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),f=n,p=h;r&&(f=0,p=d?d.pfValue[0]:void 0);var v={x:o.x-s/2,y:o.y-u/2},g={x:a.x-l/2,y:a.y-c/2},y={x:Math.min(v.x,g.x),y:Math.min(v.y,g.y)},m=Math.max(.5,Math.log(.01*s)),b=Math.max(.5,Math.log(.01*l));i.ctrlpts=[y.x,y.y-(1+Math.pow(50,1.12)/100)*p*(f/3+1)*m,y.x-(1+Math.pow(50,1.12)/100)*p*(f/3+1)*b,y.y]},la.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},la.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=e.vectorNormInverse,s=e.posPts,u=e.intersectionPts,l=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=t.pstyle("control-point-weights"),f=h&&d?Math.min(h.value.length,d.value.length):1,p=h?h.pfValue[0]:void 0,v=d.value[0],g=r;o.edgeType=g?"multibezier":"bezier",o.ctrlpts=[];for(var y=0;y<f;y++){var m,b=(.5-e.eles.length/2+n)*c*(i?-1:1),_=Yt(b);g&&(p=h?h.pfValue[y]:c,v=d.value[y]);var w=void 0!==(m=r?p:void 0!==p?_*p:void 0)?m:b,x=1-v,k="node-position"===l?s:u,S={x:k.x1*x+k.x2*v,y:k.y1*x+k.y2*v};o.ctrlpts.push(S.x+a.x*w,S.y+a.y*w)}},la.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r=e.posPts,i=e.srcW,o=e.srcH,a=e.tgtW,s=e.tgtH,u="node-position"!==t.pstyle("edge-distances").value,l=t.pstyle("taxi-direction").value,c=l,h=t.pstyle("taxi-turn"),d="%"===h.units,f=h.pfValue,p=f<0,v=t.pstyle("taxi-turn-min-distance").pfValue,g=u?(o+s)/2:0,y=r.x2-r.x1,m=r.y2-r.y1,b=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},_=b(y,u?(i+a)/2:0),w=b(m,g),x=!1;"auto"===c?l=Math.abs(_)>Math.abs(w)?"horizontal":"vertical":"upward"===c||"downward"===c?(l="vertical",x=!0):"leftward"!==c&&"rightward"!==c||(l="horizontal",x=!0);var k,S="vertical"===l,E=S?w:_,C=S?m:y,T=Yt(C),P=!1;x&&(d||p)||!("downward"===c&&C<0||"upward"===c&&C>0||"leftward"===c&&C>0||"rightward"===c&&C<0)||(E=(T*=-1)*Math.abs(E),P=!0);var A=function(t){return Math.abs(t)<v||Math.abs(t)>=Math.abs(E)},D=A(k=d?(f<0?1+f:f)*E:(f<0?E:0)+f*T),O=A(Math.abs(E)-Math.abs(k));if(!D&&!O||P)if(S){var M=r.y1+k+(u?o/2*T:0);n.segpts=[r.x1,M,r.x2,M]}else{var I=r.x1+k+(u?i/2*T:0);n.segpts=[I,r.y1,I,r.y2]}else if(S){var L=Math.abs(C)<=o/2,N=Math.abs(y)<=a/2;if(L){var R=(r.x1+r.x2)/2;n.segpts=[R,r.y1,R,r.y2]}else if(N){var F=(r.y1+r.y2)/2;n.segpts=[r.x1,F,r.x2,F]}else n.segpts=[r.x1,r.y2]}else{var j=Math.abs(C)<=i/2,B=Math.abs(m)<=s/2;if(j){var z=(r.y1+r.y2)/2;n.segpts=[r.x1,z,r.x2,z]}else if(B){var V=(r.x1+r.x2)/2;n.segpts=[V,r.y1,V,r.y2]}else n.segpts=[r.x2,r.y1]}},la.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,h=!k(n.startX)||!k(n.startY),d=!k(n.arrowStartX)||!k(n.arrowStartY),f=!k(n.endX)||!k(n.endY),p=!k(n.arrowEndX)||!k(n.arrowEndY),v=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,g=Kt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),y=g<v,m=Kt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=m<v,_=!1;if(h||d||y){_=!0;var w={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},x=Math.sqrt(w.x*w.x+w.y*w.y),S={x:w.x/x,y:w.y/x},E=Math.max(o,a),C={x:n.ctrlpts[0]+2*S.x*E,y:n.ctrlpts[1]+2*S.y*E},T=l.intersectLine(r.x,r.y,o,a,C.x,C.y,0);y?(n.ctrlpts[0]=n.ctrlpts[0]+S.x*(v-g),n.ctrlpts[1]=n.ctrlpts[1]+S.y*(v-g)):(n.ctrlpts[0]=T[0]+S.x*v,n.ctrlpts[1]=T[1]+S.y*v)}if(f||p||b){_=!0;var P={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},A=Math.sqrt(P.x*P.x+P.y*P.y),D={x:P.x/A,y:P.y/A},O=Math.max(o,a),M={x:n.ctrlpts[0]+2*D.x*O,y:n.ctrlpts[1]+2*D.y*O},I=c.intersectLine(i.x,i.y,s,u,M.x,M.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+D.x*(v-m),n.ctrlpts[1]=n.ctrlpts[1]+D.y*(v-m)):(n.ctrlpts[0]=I[0]+D.x*v,n.ctrlpts[1]=I[1]+D.y*v)}_&&this.findEndpoints(t)}},la.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(e.midX=e.allpts[r=e.allpts.length/2-1],e.midY=e.allpts[r+1]):(e.midX=Zt(e.allpts[r=e.allpts.length/2-3],e.allpts[r+2],e.allpts[r+4],.5),e.midY=Zt(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var a=e.segpts.length/2-1;e.midX=e.segpts[a],e.midY=e.segpts[a+1]}},la.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||k(e.startX)&&k(e.startY)&&k(e.endX)&&k(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,ft("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},la.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new kt,get:function(t){var e=this.map.get(t[0]);return null!=e?e.get(t[1]):null},set:function(t,e){var n=this.map.get(t[0]);null==n&&(n=new kt,this.map.set(t[0],n)),n.set(t[1],e)}},o=[],a=[],s=0;s<t.length;s++){var u=t[s],l=u._private,c=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace())if("haystack"!==c){var h="unbundled-bezier"===c||"segments"===c||"straight"===c||"taxi"===c,d="unbundled-bezier"===c||"bezier"===c,f=l.target,p=[l.source.poolIndex(),f.poolIndex()].sort(),v=i.get(p);null==v&&(i.set(p,v={eles:[]}),o.push(p)),v.eles.push(u),h&&(v.hasUnbundled=!0),d&&(v.hasBezier=!0)}else a.push(u)}for(var g=function(t){var a=i.get(o[t]),s=void 0;if(!a.hasUnbundled){var u=a.eles[0].parallelEdges().filter(function(t){return t.isBundledBezier()});_t(a.eles),u.forEach(function(t){return a.eles.push(t)}),a.eles.sort(function(t,e){return t.poolIndex()-e.poolIndex()})}var l=a.eles[0],c=l.source(),h=l.target();if(c.poolIndex()>h.poolIndex()){var d=c;c=h,h=d}var f=a.srcPos=c.position(),p=a.tgtPos=h.position(),v=a.srcW=c.outerWidth(),g=a.srcH=c.outerHeight(),y=a.tgtW=h.outerWidth(),m=a.tgtH=h.outerHeight(),b=a.srcShape=n.nodeShapes[e.getNodeShape(c)],_=a.tgtShape=n.nodeShapes[e.getNodeShape(h)];a.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var w=0;w<a.eles.length;w++){var x=a.eles[w],S=x[0]._private.rscratch,E=x.pstyle("curve-style").value,C="unbundled-bezier"===E||"segments"===E||"taxi"===E,T=!c.same(x.source());if(!a.calculatedIntersection&&c!==h&&(a.hasBezier||a.hasUnbundled)){a.calculatedIntersection=!0;var P=b.intersectLine(f.x,f.y,v,g,p.x,p.y,0),A=a.srcIntn=P,D=_.intersectLine(p.x,p.y,y,m,f.x,f.y,0),O=a.tgtIntn=D,M=a.intersectionPts={x1:P[0],x2:D[0],y1:P[1],y2:D[1]},I=a.posPts={x1:f.x,x2:p.x,y1:f.y,y2:p.y},L=D[1]-P[1],N=D[0]-P[0],R=Math.sqrt(N*N+L*L),F=a.vector={x:N,y:L},j=a.vectorNorm={x:F.x/R,y:F.y/R},B={x:-j.y,y:j.x};a.nodesOverlap=!k(R)||_.checkPoint(P[0],P[1],0,y,m,p.x,p.y)||b.checkPoint(D[0],D[1],0,v,g,f.x,f.y),a.vectorNormInverse=B,s={nodesOverlap:a.nodesOverlap,dirCounts:a.dirCounts,calculatedIntersection:!0,hasBezier:a.hasBezier,hasUnbundled:a.hasUnbundled,eles:a.eles,srcPos:p,tgtPos:f,srcW:y,srcH:m,tgtW:v,tgtH:g,srcIntn:O,tgtIntn:A,srcShape:_,tgtShape:b,posPts:{x1:I.x2,y1:I.y2,x2:I.x1,y2:I.y1},intersectionPts:{x1:M.x2,y1:M.y2,x2:M.x1,y2:M.y1},vector:{x:-F.x,y:-F.y},vectorNorm:{x:-j.x,y:-j.y},vectorNormInverse:{x:-B.x,y:-B.y}}}var z=T?s:a;S.nodesOverlap=z.nodesOverlap,S.srcIntn=z.srcIntn,S.tgtIntn=z.tgtIntn,r&&(c.isParent()||c.isChild()||h.isParent()||h.isChild())&&(c.parents().anySame(h)||h.parents().anySame(c)||c.same(h)&&c.isParent())?e.findCompoundLoopPoints(x,z,w,C):c===h?e.findLoopPoints(x,z,w,C):"segments"===E?e.findSegmentsPoints(x,z):"taxi"===E?e.findTaxiPoints(x,z):"straight"===E||!C&&a.eles.length%2==1&&w===Math.floor(a.eles.length/2)?e.findStraightEdgePoints(x):e.findBezierPoints(x,z,w,C,T),e.findEndpoints(x),e.tryToCorrectInvalidPoints(x,z),e.checkForInvalidEdgeWarning(x),e.storeAllpts(x),e.storeEdgeProjections(x),e.calculateArrowAngles(x),e.recalculateEdgeLabelProjections(x),e.calculateLabelAngles(x)}},y=0;y<o.length;y++)g(y);this.findHaystackPoints(a)}},la.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),ca(e.segpts)},la.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),ca(e.ctrlpts)},la.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var ha={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*r),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var a=e.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(r,i),u=[n.x+Math.cos(a)*s,n.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,u[0],u[1],0)},findEndpoints:function(t){var e,n,r,i,o,a=this,s=t.source()[0],u=t.target()[0],l=s.position(),c=u.position(),h=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,p=t.pstyle("source-distance-from-node").pfValue,v=t.pstyle("curve-style").value,g=t._private.rscratch,y=g.edgeType,m="self"===y||"compound"===y,b="bezier"===y||"multibezier"===y||m,_="bezier"!==y,w="straight"===y||"segments"===y,x="segments"===y,S=b||_||w,E=m||"taxi"===v,C=t.pstyle("source-endpoint"),T=E?"outside-to-node":C.value,P=t.pstyle("target-endpoint"),A=E?"outside-to-node":P.value;if(g.srcManEndpt=C,g.tgtManEndpt=P,b){var D=[g.ctrlpts[0],g.ctrlpts[1]];n=_?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:D,r=D}else if(w){var O=x?g.segpts.slice(0,2):[c.x,c.y];n=x?g.segpts.slice(g.segpts.length-2):[l.x,l.y],r=O}if("inside-to-node"===A)e=[c.x,c.y];else if(P.units)e=this.manualEndptToPx(u,P);else if("outside-to-line"===A)e=g.tgtIntn;else if("outside-to-node"===A||"outside-to-node-or-label"===A?i=n:"outside-to-line"!==A&&"outside-to-line-or-label"!==A||(i=[l.x,l.y]),e=a.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===A||"outside-to-line-or-label"===A){var M=u._private.rscratch,I=M.labelX,L=M.labelY,N=M.labelWidth/2,R=M.labelHeight/2,F=u.pstyle("text-valign").value;"top"===F?L-=R:"bottom"===F&&(L+=R);var j=u.pstyle("text-halign").value;"left"===j?I-=N:"right"===j&&(I+=N);var B=we(i[0],i[1],[I-N,L-R,I+N,L-R,I+N,L+R,I-N,L+R],c.x,c.y);if(B.length>0){var z=l,V=Xt(z,Ht(e)),G=Xt(z,Ht(B)),U=V;G<V&&(e=B,U=G),B.length>2&&Xt(z,{x:B[2],y:B[3]})<U&&(e=[B[2],B[3]])}}var H=xe(e,n,a.arrowShapes[h].spacing(t)+f),q=xe(e,n,a.arrowShapes[h].gap(t)+f);if(g.endX=q[0],g.endY=q[1],g.arrowEndX=H[0],g.arrowEndY=H[1],"inside-to-node"===T)e=[l.x,l.y];else if(C.units)e=this.manualEndptToPx(s,C);else if("outside-to-line"===T)e=g.srcIntn;else if("outside-to-node"===T||"outside-to-node-or-label"===T?o=r:"outside-to-line"!==T&&"outside-to-line-or-label"!==T||(o=[c.x,c.y]),e=a.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===T||"outside-to-line-or-label"===T){var W=s._private.rscratch,Y=W.labelX,K=W.labelY,X=W.labelWidth/2,Q=W.labelHeight/2,Z=s.pstyle("text-valign").value;"top"===Z?K-=Q:"bottom"===Z&&(K+=Q);var $=s.pstyle("text-halign").value;"left"===$?Y-=X:"right"===$&&(Y+=X);var J=we(o[0],o[1],[Y-X,K-Q,Y+X,K-Q,Y+X,K+Q,Y-X,K+Q],l.x,l.y);if(J.length>0){var tt=c,et=Xt(tt,Ht(e)),nt=Xt(tt,Ht(J)),rt=et;nt<et&&(e=[J[0],J[1]],rt=nt),J.length>2&&Xt(tt,{x:J[2],y:J[3]})<rt&&(e=[J[2],J[3]])}}var it=xe(e,r,a.arrowShapes[d].spacing(t)+p),ot=xe(e,r,a.arrowShapes[d].gap(t)+p);g.startX=ot[0],g.startY=ot[1],g.arrowStartX=it[0],g.arrowStartY=it[1],S&&(g.badLine=!(k(g.startX)&&k(g.startY)&&k(g.endX)&&k(g.endY)))},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}}},da={};function fa(t,e,n){for(var r=function(t,e,n,r){return Zt(t,e,n,r)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var a=t.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],a),y:r(n[1],n[3],n[5],a)})}}da.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)fa(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var o=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},da.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var pa={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!D(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(l){case"left":n=u.x-o/2-s;break;case"right":n=u.x+o/2+s;break;default:n=u.x}switch(c){case"top":r=u.y-a/2-s;break;case"bottom":r=u.y+a/2+s;break;default:r=u.y}h.labelX=n,h.labelY=r,d.labelX=n,d.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},va=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},ga=function(t,e){return va(e.x-t.x,e.y-t.y)};pa.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){var a=function(t,e,r){xt(n.rscratch,t,e,r),xt(n.rstyle,t,e,r)};a("labelX",null,(e={x:r.midX,y:r.midY}).x),a("labelY",null,e.y);var s=va(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var u=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<r.allpts.length;o+=4)e.push({p0:{x:r.allpts[o],y:r.allpts[o+1]},p1:{x:r.allpts[o+2],y:r.allpts[o+3]},p2:{x:r.allpts[o+4],y:r.allpts[o+5]},startDist:0,length:0,segments:[]});var a=n.rstyle.bezierPts,s=i.bezierProjPcts.length;function u(t,e,n,r,i){var o=Kt(e,n),a=t.segments[t.segments.length-1];t.segments.push({p0:e,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o}),t.length+=o}for(var l=0;l<e.length;l++){var c=e[l],h=e[l-1];h&&(c.startDist=h.startDist+h.length),u(c,c.p0,a[l*s],0,i.bezierProjPcts[0]);for(var d=0;d<s-1;d++)u(c,a[l*s+d],a[l*s+d+1],i.bezierProjPcts[d],i.bezierProjPcts[d+1]);u(c,a[l*s+s-1],c.p2,i.bezierProjPcts[s-1],1)}return t.cache=e},l=function(n){var i,s="source"===n;if(o[n]){var l=t.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=u(),d=0,f=0,p=0;p<h.length;p++){for(var v=h[s?p:h.length-1-p],g=0;g<v.segments.length;g++){var y=v.segments[s?g:v.segments.length-1-g];if(d=f,(f+=y.length)>=l||p===h.length-1&&g===v.segments.length-1){c={cp:v,segment:y};break}}if(c)break}var m=c.cp,b=c.segment,_=(l-d)/b.length,w=b.t1-b.t0,x=s?b.t0+w*_:b.t1-w*_;x=Jt(0,x,1),e=$t(m.p0,m.p1,m.p2,x),i=function(t,e,n,r){var i=Jt(0,r-.001,1),o=Jt(0,r+.001,1),a=$t(t,e,n,i),s=$t(t,e,n,o);return ga(a,s)}(m.p0,m.p1,m.p2,x);break;case"straight":case"segments":case"haystack":for(var k,S,E,C,T=0,P=r.allpts.length,A=0;A+3<P&&(s?(E={x:r.allpts[A],y:r.allpts[A+1]},C={x:r.allpts[A+2],y:r.allpts[A+3]}):(E={x:r.allpts[P-2-A],y:r.allpts[P-1-A]},C={x:r.allpts[P-4-A],y:r.allpts[P-3-A]}),S=T,!((T+=k=Kt(E,C))>=l));A+=2);var D=(l-S)/k;D=Jt(0,D,1),e=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Kt(t,e);return n=null==n?0:n,{x:t.x+i/a*(r=null!=r?r:n*a),y:t.y+o/a*r}}(E,C,D),i=ga(E,C)}a("labelX",n,e.x),a("labelY",n,e.y),a("labelAutoAngle",n,i)}};l("source"),l("target"),this.applyLabelDimensions(t)}},pa.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},pa.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),o=t.pstyle("line-height").pfValue,a=t.pstyle("text-wrap").strValue,s=wt(n.rscratch,"labelWrapCachedLines",e)||[],u="wrap"!==a?1:Math.max(s.length,1),l=i.height/u,c=l*o,h=i.width,d=i.height+(u-1)*(o-1)*l;xt(n.rstyle,"labelWidth",e,h),xt(n.rscratch,"labelWidth",e,h),xt(n.rstyle,"labelHeight",e,d),xt(n.rscratch,"labelHeight",e,d),xt(n.rscratch,"labelLineHeight",e,c)},pa.getLabelText=function(t,e){var n=t._private,r=t.pstyle((e?e+"-":"")+"label").strValue,i=t.pstyle("text-transform").value,o=function(t,r){return r?(xt(n.rscratch,t,e,r),r):wt(n.rscratch,t,e)};if(!r)return"";"none"==i||("uppercase"==i?r=r.toUpperCase():"lowercase"==i&&(r=r.toLowerCase()));var a=t.pstyle("text-wrap").value;if("wrap"===a){var s=o("labelKey");if(null!=s&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var u=r.split("\n"),l=t.pstyle("text-max-width").pfValue,c="anywhere"===t.pstyle("text-overflow-wrap").value,h=[],d=/[\s\u200b]+/,f=c?"":" ",p=0;p<u.length;p++){var v=u[p],g=this.calculateLabelDimensions(t,v).width;if(c){var y=v.split("").join("\u200b");v=y}if(g>l){for(var m=v.split(d),b="",_=0;_<m.length;_++){var w=m[_];this.calculateLabelDimensions(t,0===b.length?w:b+f+w).width<=l?b+=w+f:(b&&h.push(b),b=w+f)}b.match(/^[\s\u200b]+$/)||h.push(b)}else h.push(v)}o("labelWrapCachedLines",h),r=o("labelWrapCachedText",h.join("\n")),o("labelWrapKey",s)}else if("ellipsis"===a){var x=t.pstyle("text-max-width").pfValue,k="",S=!1;if(this.calculateLabelDimensions(t,r).width<x)return r;for(var E=0;E<r.length&&!(this.calculateLabelDimensions(t,k+r[E]+"\u2026").width>x);E++)k+=r[E],E===r.length-1&&(S=!0);return S||(k+="\u2026"),k}return r},pa.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},pa.calculateLabelDimensions=function(t,e){var n=tt(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var o=t.pstyle("font-style").strValue,a=t.pstyle("font-size").pfValue,s=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,l=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!l){l=this.labelCalcCanvas=document.createElement("canvas"),c=this.labelCalcCanvasContext=l.getContext("2d");var h=l.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}c.font="".concat(o," ").concat(u," ").concat(a,"px ").concat(s);for(var d=0,f=0,p=e.split("\n"),v=0;v<p.length;v++){var g=c.measureText(p[v]),y=Math.ceil(g.width),m=a;d=Math.max(y,d),f+=m}return r[n]={width:d+=0,height:f+=0}},pa.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=t.pstyle((e?e+"-":"")+"text-rotation"),o=i.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:i.pfValue},pa.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var ya={},ma=!1;ya.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return ma||(ft("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ma=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var ba={};[sa,ua,la,ha,da,pa,ya,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++){var i=t[r],o=i._private,a=o.rstyle;a.clean=!1,a.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(t){r(t.target)}).on("style.* background.*",function(t){r(t.target,!1)});var i=function(i){if(i){var o=n.onUpdateEleCalcsFns;e.cleanStyle();for(var a=0;a<e.length;a++){var s=e[a],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(o)for(var l=0;l<o.length;l++)(0,o[l])(i,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(t){return t._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var o=0;o<t.length;o++){var a=t[o],s=a._private,u=s.rstyle;!a.isEdge()||n(a.source())&&n(a.target())||(u.clean=!1),e&&u.clean||a.removed()||"none"!==a.pstyle("display").value&&("nodes"===s.group?i.push(a):r.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],h=c._private.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var p=r[f]._private,v=p.rstyle,g=p.rscratch;v.srcX=g.arrowStartX,v.srcY=g.arrowStartY,v.tgtX=g.arrowEndX,v.tgtY=g.arrowEndY,v.midX=g.midX,v.midY=g.midY,v.labelAngle=g.labelAngle,v.sourceLabelAngle=g.sourceLabelAngle,v.targetLabelAngle=g.targetLabelAngle}}}},{updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i;t.drag.push(i=e[n])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(li),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}}].forEach(function(t){B(ba,t)});var _a={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[t]=r[t]||{}).image=new Image;return o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0}),"data:"===t.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=e),o.src=t,o}},wa={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},binder:function(t){var e=this,n=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==e.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(a){}e.supportsPassiveEvents=r}var o=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=function(t){return t.selected()},n=function(e,n,r,i){null==e&&(e=t.cy);for(var o=0;o<n.length;o++)e.emit({originalEvent:r,type:n[o],position:i})},r=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},o=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.pannable()){for(var i=0;n&&i<n.length;i++)if((e=n[i]).isNode()&&e.isParent()&&!e.pannable()){r=!1;break}}else r=!0;return r},a=function(t){t[0]._private.rscratch.inDragLayer=!0},s=function(t){t[0]._private.rscratch.isGrabTarget=!0},u=function(t,e){var n=e.addToList;n.has(t)||(n.merge(t),function(t){t[0]._private.grabbed=!0}(t))},l=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(a),e.neighborhood().stdFilter(function(t){return!r||t.isEdge()}).forEach(a)),n.addToList&&e.forEach(function(t){u(t,n)}),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(a),n.connectedEdges().forEach(a)),e.addToList&&e.addToList.unmerge(n)}}(e,n),d(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},c=l,h=function(e){e&&(t.getCachedZSortedEles().forEach(function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)}),t.updateCachedGrabbedEles())},d=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(a),r.forEach(a)),e.addToList&&r.forEach(function(t){u(t,e)})}}},f=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},p="undefined"!=typeof MutationObserver,v="undefined"!=typeof ResizeObserver;p?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++)if(r[i]===t.container){t.destroy();break}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(e){t.destroy()});var g=i(function(){t.cy.resize()},100);p&&(t.styleObserver=new MutationObserver(g),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",g),v&&(t.resizeObserver=new ResizeObserver(g),t.resizeObserver.observe(t.container));var y=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,function(e){t.registerBinding(e,"transitionend",y),t.registerBinding(e,"animationend",y),t.registerBinding(e,"scroll",y)}),t.registerBinding(t.container,"contextmenu",function(t){t.preventDefault()});var m=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],u=!1,l=0;l<s.length;l++){var c=s[l];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){u=!0;break}}if(!u)return!1;for(var h=t.container,d=e.target.parentNode,f=!1;d;){if(d===h){f=!0;break}d=d.parentNode}return!!f};t.registerBinding(t.container,"mousedown",function(e){if(m(e)){e.preventDefault(),f(),t.hoverData.capture=!0,t.hoverData.which=e.which;var r=t.cy,i=[e.clientX,e.clientY],o=t.projectIntoViewport(i[0],i[1]),a=t.selection,u=t.findNearestElements(o[0],o[1],!0,!1),h=u[0],d=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i,3==e.which){t.hoverData.cxtStarted=!0;var p={originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}};h?(h.activate(),h.emit(p),t.hoverData.down=h):r.emit(p),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(h&&h.activate(),null!=h&&t.nodeIsGrabbable(h)){var v=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(s(h),h.selected()){d=t.dragData.possibleDragElements=r.collection();var g=r.$(function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)});l(g,{addToList:d}),h.emit(v("grabon")),g.forEach(function(t){t.emit(v("grab"))})}else d=t.dragData.possibleDragElements=r.collection(),c(h,{addToList:d}),h.emit(v("grabon")).emit(v("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=h,t.hoverData.downs=u,t.hoverData.downTime=(new Date).getTime(),n(h,["mousedown","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==h?(a[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):h.pannable()&&(a[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}})}},t.tapholdDuration)}a[0]=a[2]=o[0],a[1]=a[3]=o[1]}},!1),t.registerBinding(window,"mousemove",function(e){if(t.hoverData.capture||m(e)){var i=!1,a=t.cy,s=a.zoom(),u=[e.clientX,e.clientY],c=t.projectIntoViewport(u[0],u[1]),d=t.hoverData.mdownPos,f=t.hoverData.mdownGPos,p=t.selection,v=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(v=t.findNearestElement(c[0],c[1],!0,!1));var g,y=t.hoverData.last,b=t.hoverData.down,_=[c[0]-p[2],c[1]-p[3]],w=t.dragData.possibleDragElements;if(f){var x=u[0]-f[0],S=u[1]-f[1];t.hoverData.isOverThresholdDrag=g=x*x+S*S>=t.desktopTapThreshold2}var E=r(e);g&&(t.hoverData.tapholdCancelled=!0),i=!0,n(v,["mousemove","vmousemove","tapdrag"],e,{x:c[0],y:c[1]});var C=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:c[0],y:c[1]}}),p[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(g){var T={originalEvent:e,type:"cxtdrag",position:{x:c[0],y:c[1]}};b?b.emit(T):a.emit(T),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&v===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:c[0],y:c[1]}}),t.hoverData.cxtOver=v,v&&v.emit({originalEvent:e,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(t.hoverData.dragging){if(i=!0,a.panningEnabled()&&a.userPanningEnabled()){var P;if(t.hoverData.justStartedPan){var A=t.hoverData.mdownPos;P={x:(c[0]-A[0])*s,y:(c[1]-A[1])*s},t.hoverData.justStartedPan=!1}else P={x:_[0]*s,y:_[1]*s};a.panBy(P),a.emit("dragpan"),t.hoverData.dragged=!0}c=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=p[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||v==y||(y&&n(y,["mouseout","tapdragout"],e,{x:c[0],y:c[1]}),v&&n(v,["mouseover","tapdragover"],e,{x:c[0],y:c[1]}),t.hoverData.last=v),b)if(g){if(a.boxSelectionEnabled()&&E)b&&b.grabbed()&&(h(w),b.emit("freeon"),w.emit("free"),t.dragData.didDrag&&(b.emit("dragfreeon"),w.emit("dragfree"))),C();else if(b&&b.grabbed()&&t.nodeIsDraggable(b)){var D=!t.dragData.didDrag;D&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var O=a.collection();t.hoverData.draggingEles||l(w,{inDragLayer:!0});var M={x:0,y:0};if(k(_[0])&&k(_[1])&&(M.x+=_[0],M.y+=_[1],D)){var I=t.hoverData.dragDelta;I&&k(I[0])&&k(I[1])&&(M.x+=I[0],M.y+=I[1])}for(var L=0;L<w.length;L++){var N=w[L];t.nodeIsDraggable(N)&&N.grabbed()&&O.push(N)}t.hoverData.draggingEles=!0,O.silentShift(M).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(_[0]),e.push(_[1])):(e[0]+=_[0],e[1]+=_[1])}();i=!0}else g&&(t.hoverData.dragging||!a.boxSelectionEnabled()||!E&&a.panningEnabled()&&a.userPanningEnabled()?!t.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()&&o(b,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,p[4]=0,t.data.bgActivePosistion=Ht(d),t.redrawHint("select",!0),t.redraw()):C(),b&&b.pannable()&&b.active()&&b.unactivate());return p[2]=c[0],p[3]=c[1],i?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}},!1),t.registerBinding(window,"mouseup",function(i){if(t.hoverData.capture){t.hoverData.capture=!1;var o=t.cy,a=t.projectIntoViewport(i.clientX,i.clientY),s=t.selection,u=t.findNearestElement(a[0],a[1],!0,!1),l=t.dragData.possibleDragElements,c=t.hoverData.down,d=r(i);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,c&&c.unactivate(),3===t.hoverData.which){var f={originalEvent:i,type:"cxttapend",position:{x:a[0],y:a[1]}};if(c?c.emit(f):o.emit(f),!t.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:a[0],y:a[1]}};c?c.emit(p):o.emit(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(u,["mouseup","tapend","vmouseup"],i,{x:a[0],y:a[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||n(c,["click","tap","vclick"],i,{x:a[0],y:a[1]}),null!=c||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(i)||(o.$(e).unselect(["tapunselect"]),l.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=l=o.collection()),u!=c||t.dragData.didDrag||t.hoverData.selecting||null!=u&&u._private.selectable&&(t.hoverData.dragging||("additive"===o.selectionType()||d?u.selected()?u.unselect(["tapunselect"]):u.select(["tapselect"]):d||(o.$(e).unmerge(u).unselect(["tapunselect"]),u.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var v=o.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),v.length>0&&t.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:i,position:{x:a[0],y:a[1]}}),"additive"===o.selectionType()||d||o.$(e).unmerge(v).unselect(),v.emit("box").stdFilter(function(t){return t.selectable()&&!t.selected()}).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var g=c&&c.grabbed();h(l),g&&(c.emit("freeon"),l.emit("free"),t.dragData.didDrag&&(c.emit("dragfreeon"),l.emit("dragfree")))}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var b,_,w,x,S,E,C,T,P,A,D,O,M,I=function(e){if(!t.scrollingPage){var n=t.cy,r=n.zoom(),i=n.pan(),o=t.projectIntoViewport(e.clientX,e.clientY),a=[o[0]*r+i.x,o[1]*r+i.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])e.preventDefault();else if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){var s;e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),s=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,s*=t.wheelSensitivity,1===e.deltaMode&&(s*=33);var u=n.zoom()*Math.pow(10,s);"gesturechange"===e.type&&(u=t.gestureStartZoom*e.scale),n.zoom({level:u,renderedPosition:{x:a[0],y:a[1]}}),n.emit("gesturechange"===e.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",I,!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(e){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||e.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(e){t.hasTouchStarted||I(e)},!0),t.registerBinding(t.container,"mouseout",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),t.registerBinding(t.container,"mouseover",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var L,N,R,F,j=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},B=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",L=function(e){if(t.hasTouchStarted=!0,m(e)){f(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(e.touches[0]){var a=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=a[0],i[1]=a[1]}if(e.touches[1]&&(a=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),i[2]=a[0],i[3]=a[1]),e.touches[2]&&(a=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),i[4]=a[0],i[5]=a[1]),e.touches[1]){t.touchData.singleTouchMoved=!0,h(t.dragData.touchDragEles);var u=t.findContainerClientCoords();D=u[2],O=u[3],_=e.touches[0].clientY-(A=u[1]),w=e.touches[1].clientX-(P=u[0]),x=e.touches[1].clientY-A,M=0<=(b=e.touches[0].clientX-P)&&b<=D&&0<=w&&w<=D&&0<=_&&_<=O&&0<=x&&x<=O;var d=r.pan(),p=r.zoom();if(S=j(b,_,w,x),E=B(b,_,w,x),T=[((C=[(b+w)/2,(_+x)/2])[0]-d.x)/p,(C[1]-d.y)/p],E<4e4&&!e.touches[2]){var v=t.findNearestElement(i[0],i[1],!0,!0),g=t.findNearestElement(i[2],i[3],!0,!0);return v&&v.isNode()?(v.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=v):g&&g.isNode()?(g.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):r.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2])r.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var y=t.findNearestElements(i[0],i[1],!0,!0),k=y[0];if(null!=k&&(k.activate(),t.touchData.start=k,t.touchData.starts=y,t.nodeIsGrabbable(k))){var I=t.dragData.touchDragEles=r.collection(),L=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),k.selected()?(L=r.$(function(e){return e.selected()&&t.nodeIsGrabbable(e)}),l(L,{addToList:I})):c(k,{addToList:I}),s(k);var N=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};k.emit(N("grabon")),L?L.forEach(function(t){t.emit(N("grab"))}):k.emit(N("grab"))}n(k,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==k&&(t.data.bgActivePosistion={x:a[0],y:a[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})},t.tapholdDuration)}if(e.touches.length>=1){for(var R=t.touchData.startPosition=[],F=0;F<i.length;F++)R[F]=o[F]=i[F];var z=e.touches[0];t.touchData.startGPosition=[z.clientX,z.clientY]}}},!1),t.registerBinding(window,"touchmove",N=function(e){var r=t.touchData.capture;if(r||m(e)){var i=t.selection,a=t.cy,s=t.touchData.now,u=t.touchData.earlier,c=a.zoom();if(e.touches[0]){var d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=d[0],s[1]=d[1]}e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=d[0],s[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=d[0],s[5]=d[1]);var f,p=t.touchData.startGPosition;if(r&&e.touches[0]&&p){for(var v=[],g=0;g<s.length;g++)v[g]=s[g]-u[g];var y=e.touches[0].clientX-p[0],C=e.touches[0].clientY-p[1];f=y*y+C*C>=t.touchTapThreshold2}if(r&&t.touchData.cxt){e.preventDefault();var D=B(R=e.touches[0].clientX-P,F=e.touches[0].clientY-A,z=e.touches[1].clientX-P,V=e.touches[1].clientY-A);if(D/E>=2.25||D>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var O={originalEvent:e,type:"cxttapend",position:{x:s[0],y:s[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(O),t.touchData.start=null):a.emit(O)}}if(r&&t.touchData.cxt){O={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(O):a.emit(O),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var I=t.findNearestElement(s[0],s[1],!0,!0);t.touchData.cxtOver&&I===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),t.touchData.cxtOver=I,I&&I.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&e.touches[2]&&a.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||a.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(s[0]+s[2]+s[4])/3,i[3]=(s[1]+s[3]+s[5])/3):(i[0]=(s[0]+s[2]+s[4])/3,i[1]=(s[1]+s[3]+s[5])/3,i[2]=(s[0]+s[2]+s[4])/3+1,i[3]=(s[1]+s[3]+s[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(r&&e.touches[1]&&!t.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),et=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var L=0;L<et.length;L++){var N=et[L]._private;N.grabbed=!1,N.rscratch.inDragLayer=!1}}var R,F,z,V,G=t.touchData.start,U=j(R=e.touches[0].clientX-P,F=e.touches[0].clientY-A,z=e.touches[1].clientX-P,V=e.touches[1].clientY-A),H=U/S;if(M){var q=(R-b+(z-w))/2,W=(F-_+(V-x))/2,Y=a.zoom(),K=Y*H,X=a.pan(),Q=T[0]*Y+X.x,Z=T[1]*Y+X.y,$={x:-K/Y*(Q-X.x-q)+Q,y:-K/Y*(Z-X.y-W)+Z};G&&G.active()&&(h(et=t.dragData.touchDragEles),t.redrawHint("drag",!0),t.redrawHint("eles",!0),G.unactivate().emit("freeon"),et.emit("free"),t.dragData.didDrag&&(G.emit("dragfreeon"),et.emit("dragfree"))),a.viewport({zoom:K,pan:$,cancelOnFailedZoom:!0}),a.emit("pinchzoom"),S=U,b=R,_=F,w=z,x=V,t.pinching=!0}e.touches[0]&&(d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=d[0],s[1]=d[1]),e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=d[0],s[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=d[0],s[5]=d[1])}else if(e.touches[0]&&!t.touchData.didSelect){var J=t.touchData.start,tt=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(I=t.findNearestElement(s[0],s[1],!0,!0)),r&&null!=J&&e.preventDefault(),r&&null!=J&&t.nodeIsDraggable(J))if(f){var et=t.dragData.touchDragEles,nt=!t.dragData.didDrag;nt&&l(et,{inDragLayer:!0}),t.dragData.didDrag=!0;var rt={x:0,y:0};k(v[0])&&k(v[1])&&(rt.x+=v[0],rt.y+=v[1],nt&&(t.redrawHint("eles",!0),(it=t.touchData.dragDelta)&&k(it[0])&&k(it[1])&&(rt.x+=it[0],rt.y+=it[1]))),t.hoverData.draggingEles=!0,et.silentShift(rt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==u[0]&&t.touchData.startPosition[1]==u[1]&&t.redrawHint("eles",!0),t.redraw()}else{var it;0===(it=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(it.push(v[0]),it.push(v[1])):(it[0]+=v[0],it[1]+=v[1])}if(n(J||I,["touchmove","tapdrag","vmousemove"],e,{x:s[0],y:s[1]}),J&&J.grabbed()||I==tt||(tt&&tt.emit({originalEvent:e,type:"tapdragout",position:{x:s[0],y:s[1]}}),I&&I.emit({originalEvent:e,type:"tapdragover",position:{x:s[0],y:s[1]}})),t.touchData.last=I,r)for(L=0;L<s.length;L++)s[L]&&t.touchData.startPosition[L]&&f&&(t.touchData.singleTouchMoved=!0);r&&(null==J||J.pannable())&&a.panningEnabled()&&a.userPanningEnabled()&&(o(J,t.touchData.starts)&&(e.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Ht(t.touchData.startPosition)),t.swipePanning?(a.panBy({x:v[0]*c,y:v[1]*c}),a.emit("dragpan")):f&&(t.swipePanning=!0,a.panBy({x:y*c,y:C*c}),a.emit("dragpan"),J&&(J.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=d[0],s[1]=d[1])}for(g=0;g<s.length;g++)u[g]=s[g];r&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",R=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",F=function(r){var i=t.touchData.start;if(t.touchData.capture){0===r.touches.length&&(t.touchData.capture=!1),r.preventDefault();var o=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var a,s=t.cy,u=s.zoom(),l=t.touchData.now,c=t.touchData.earlier;if(r.touches[0]){var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=d[0],l[1]=d[1]}if(r.touches[1]&&(d=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),l[2]=d[0],l[3]=d[1]),r.touches[2]&&(d=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),l[4]=d[0],l[5]=d[1]),i&&i.unactivate(),t.touchData.cxt){if(a={originalEvent:r,type:"cxttapend",position:{x:l[0],y:l[1]}},i?i.emit(a):s.emit(a),!t.touchData.cxtDragged){var f={originalEvent:r,type:"cxttap",position:{x:l[0],y:l[1]}};i?i.emit(f):s.emit(f)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=s.collection(t.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,t.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:l[0],y:l[1]}}),p.emit("box").stdFilter(function(t){return t.selectable()&&!t.selected()}).select().emit("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),r.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var v=t.dragData.touchDragEles;if(null!=i){var g=i._private.grabbed;h(v),t.redrawHint("drag",!0),t.redrawHint("eles",!0),g&&(i.emit("freeon"),v.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),v.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]}),i.unactivate(),t.touchData.start=null}else{var y=t.findNearestElement(l[0],l[1],!0,!0);n(y,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]})}var m=t.touchData.startPosition[0]-l[0],b=t.touchData.startPosition[1]-l[1],_=(m*m+b*b)*u*u;t.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:l[0],y:l[1]})),null!=i&&!t.dragData.didDrag&&i._private.selectable&&_<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(e).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var w=0;w<l.length;w++)c[w]=l[w];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),r.touches.length<2&&(1===r.touches.length&&(t.touchData.startGPosition=[r.touches[0].clientX,r.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var z=[],V=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},G=function(t){for(var e=0;e<z.length;e++)if(z[e].event.pointerId===t.pointerId)return void z.splice(e,1)},U=function(t){t.touches=z.map(function(t){return t.touch})},H=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",function(t){H(t)||(t.preventDefault(),function(t){z.push(function(t){return{event:t,touch:V(t)}}(t))}(t),U(t),L(t))}),t.registerBinding(t.container,"pointerup",function(t){H(t)||(G(t),U(t),F(t))}),t.registerBinding(t.container,"pointercancel",function(t){H(t)||(G(t),U(t),R())}),t.registerBinding(t.container,"pointermove",function(t){H(t)||(t.preventDefault(),function(t){var e=z.filter(function(e){return e.event.pointerId===t.pointerId})[0];e.event=t,e.touch=V(t)}(t),U(t),N(t))})}}},xa={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return we(i,o,this.points,t,e,n/2,r/2,a)},checkPoint:function(t,e,n,r,i,o,a){return pe(t,e,this.points,o,a,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(l<0)return[];var c=l/u;return[(n-t)*c+t,(r-e)*c+e]}(i,o,t,e,n/2+a,r/2+a)},checkPoint:function(t,e,n,r,i,o,a){return ye(t,e,r,i,o,a,n)}}},generateRoundPolygon:function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var i,o=2*r;i=r<e.length/2-1?2*(r+1):0,n[4*r]=e[o],n[4*r+1]=e[o+1];var a=e[i]-e[o],s=e[i+1]-e[o+1],u=Math.sqrt(a*a+s*s);n[4*r+2]=a/u,n[4*r+3]=s/u}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("round-polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o,a,s){for(var u,l=[],c=new Array(n.length),h=o/2,d=a/2,f=Te(o,a),p=0;p<n.length/4;p++){var v,g;g=0===p?n.length-2:4*p-2,v=4*p+2;var y=r+h*n[4*p],m=i+d*n[4*p+1],b=f/Math.tan(Math.acos(-n[g]*n[v]-n[g+1]*n[v+1])/2),_=y-b*n[g],w=m-b*n[g+1],x=y+b*n[v],k=m+b*n[v+1];0===p?(c[n.length-2]=_,c[n.length-1]=w):(c[4*p-2]=_,c[4*p-1]=w),c[4*p]=x,c[4*p+1]=k;var S=n[g+1],E=-n[g];S*n[v]+E*n[v+1]<0&&(S*=-1,E*=-1),0!==(u=me(t,e,r,i,_+S*f,w+E*f,f)).length&&l.push(u[0],u[1])}for(var C=0;C<c.length/4;C++)0!==(u=_e(t,e,r,i,c[4*C],c[4*C+1],c[4*C+2],c[4*C+3],!1)).length&&l.push(u[0],u[1]);if(l.length>2){for(var T=[l[0],l[1]],P=Math.pow(T[0]-t,2)+Math.pow(T[1]-e,2),A=1;A<l.length/2;A++){var D=Math.pow(l[2*A]-t,2)+Math.pow(l[2*A+1]-e,2);D<=P&&(T[0]=l[2*A],T[1]=l[2*A+1],P=D)}return T}return l}(i,o,this.points,t,e,n,r)},checkPoint:function(t,e,n,r,i,o,a){return function(t,e,n,r,i,o,a){for(var s=new Array(n.length),u=o/2,l=a/2,c=Te(o,a),h=c*c,d=0;d<n.length/4;d++){var f,p;p=0===d?n.length-2:4*d-2,f=4*d+2;var v=r+u*n[4*d],g=i+l*n[4*d+1],y=c/Math.tan(Math.acos(-n[p]*n[f]-n[p+1]*n[f+1])/2),m=v-y*n[p],b=g-y*n[p+1],_=v+y*n[f],w=g+y*n[f+1];s[4*d]=m,s[4*d+1]=b,s[4*d+2]=_,s[4*d+3]=w;var x=n[p+1],k=-n[p];x*n[f]+k*n[f+1]<0&&(x*=-1,k*=-1);var S=b+k*c;if(Math.pow(m+x*c-t,2)+Math.pow(S-e,2)<=h)return!0}return fe(t,e,s)}(t,e,this.points,o,a,r,i)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:ke(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){return ue(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Ce(r,i),u=2*s;return!!(pe(t,e,this.points,o,a,r,i-u,[0,-1],n)||pe(t,e,this.points,o,a,r-u,i,[0,-1],n)||ye(t,e,u,u,o-r/2+s,a-i/2+s,n)||ye(t,e,u,u,o+r/2-s,a-i/2+s,n)||ye(t,e,u,u,o+r/2-s,a+i/2-s,n)||ye(t,e,u,u,o-r/2+s,a+i/2-s,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:ke(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,a=t/2,s=n-a,u=n+a,l=r-o,c=r+o;return{topLeft:[s,l+i,s+i,l,s+i,l+i],topRight:[u-i,l,u,l+i,u-i,l+i],bottomRight:[u,c-i,u-i,c,u-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateCutTrianglePts(n+2*a,r+2*a,t,e),u=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return we(i,o,u,t,e)},checkPoint:function(t,e,n,r,i,o,a){if(pe(t,e,this.points,o,a,r,i-2*this.cornerLength,[0,-1],n))return!0;if(pe(t,e,this.points,o,a,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,o,a);return fe(t,e,s.topLeft)||fe(t,e,s.topRight)||fe(t,e,s.bottomRight)||fe(t,e,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:ke(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=this.generateBarrelBezierPts(n+2*a,r+2*a,t,e),u=function(t){var e=$t({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=$t({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),r=$t({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},l=[].concat(u(s.topLeft),u(s.topRight),u(s.bottomRight),u(s.bottomLeft));return we(i,o,l,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,o=t/2,a=n-o,s=n+o,u=r-i,l=r+i,c=Pe(t,e),h=c.heightOffset,d=c.widthOffset,f=c.ctrlPtOffsetPct*t,p={topLeft:[a,u+h,a+f,u,a+d,u],topRight:[s-d,u,s-f,u,s,u+h],bottomRight:[s,l-h,s-f,l,s-d,l],bottomLeft:[a+d,l,a+f,l,a,l-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(t,e,n,r,i,o,a){var s=Pe(r,i),u=s.widthOffset;if(pe(t,e,this.points,o,a,r,i-2*s.heightOffset,[0,-1],n))return!0;if(pe(t,e,this.points,o,a,r-2*u,i,[0,-1],n))return!0;for(var l=this.generateBarrelBezierPts(r,i,o,a),c=function(t,e,n){var r,i,o=n[4],a=n[2],s=n[0],u=n[5],l=n[1],c=Math.min(o,s),h=Math.max(o,s),d=Math.min(u,l),f=Math.max(u,l);if(c<=t&&t<=h&&d<=e&&e<=f){var p=[(r=o)-2*(i=a)+s,2*(i-r),r],v=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*t;return[(-e+o)/a,(-e-o)/a]}(p[0],p[1],p[2],t).filter(function(t){return 0<=t&&t<=1});if(v.length>0)return v[0]}return null},h=Object.keys(l),d=0;d<h.length;d++){var f=l[h[d]],p=c(t,e,f);if(null!=p){var v=Zt(f[5],f[3],f[1],p);if(f.isTop&&v<=e)return!0;if(f.isBottom&&e<=v)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:ke(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,a){var s=e-(r/2+a),u=_e(i,o,t,e,t-(n/2+a),s,t+(n/2+a),s,!1);return u.length>0?u:ue(i,o,t,e,n,r,a)},checkPoint:function(t,e,n,r,i,o,a){var s=Ce(r,i),u=2*s;if(pe(t,e,this.points,o,a,r,i-u,[0,-1],n))return!0;if(pe(t,e,this.points,o,a,r-u,i,[0,-1],n))return!0;var l=r/2+2*n,c=i/2+2*n;return!!fe(t,e,[o-l,a-c,o-l,a,o+l,a,o+l,a-c])||!!ye(t,e,u,u,o+r/2-s,a+i/2-s,n)||!!ye(t,e,u,u,o-r/2+s,a+i/2-s,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",ke(3,0)),this.generateRoundPolygon("round-triangle",ke(3,0)),this.generatePolygon("rectangle",ke(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",ke(5,0)),this.generateRoundPolygon("round-pentagon",ke(5,0)),this.generatePolygon("hexagon",ke(6,0)),this.generateRoundPolygon("round-hexagon",ke(6,0)),this.generatePolygon("heptagon",ke(7,0)),this.generateRoundPolygon("round-heptagon",ke(7,0)),this.generatePolygon("octagon",ke(8,0)),this.generateRoundPolygon("round-octagon",ke(8,0));var r=new Array(20),i=Ee(5,0),o=Ee(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=o[2*s],r[4*s+3]=o[2*s+1];r=Se(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}},ka={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||yt();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&ht("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(t,e){return e.priority-t.priority})}}},Sa=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};ka.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,W(function n(r){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){Sa(t,!0,r);var i=Y();t.render(t.renderOptions);var o=t.lastDrawTime=Y();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var a=o-i;t.redrawTotalTime+=a,t.lastRedrawTime=a,t.averageRedrawTime=t.averageRedrawTime/2+a/2,t.requestedFrame=!1}else Sa(t,!1,r);t.skipFrame=!1,W(n)}}))};var Ea=function(t){this.init(t)},Ca=Ea.prototype;Ca.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Ca.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(d){var r=d.document,i=r.head,o="__________cytoscape_container",a=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(o)<0&&(n.className=(n.className||"")+" "+o),!a){var s=r.createElement("style");s.id="__________cytoscape_stylesheet",s.innerHTML="."+o+" { position: relative; }",i.insertBefore(s,i.children[0])}"static"===d.getComputedStyle(n).getPropertyValue("position")&&ft("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=k(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Ca.notify=function(t,e){var n=this;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&n.cy.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},Ca.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(i){}},Ca.isHeadless=function(){return!1},[aa,ba,_a,wa,xa,ka].forEach(function(t){B(Ca,t)});var Ta=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=i(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold);n.beforeRender(function(i,o){var a=Y(),s=n.averageRedrawTime,u=n.lastRedrawTime,l=[],c=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=Y(),f=d-a,p=d-o;if(u<16.666666666666668){if(p>=t.deqFastCost*(16.666666666666668-(i?s:0)))break}else if(i){if(f>=t.deqCost*u||f>=t.deqAvgCost*s)break}else if(p>=16.666666666666668*t.deqNoDrawCost)break;var v=t.deq(e,h,c);if(!(v.length>0))break;for(var g=0;g<v.length;g++)l.push(v[g])}l.length>0&&(t.onDeqd(e,l),!i&&t.shouldRedraw(e,l,h,c)&&r())},(t.priority||ct)(e))}}},Pa=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;s(this,t),this.idsByKey=new kt,this.keyForId=new kt,this.cachesByLvl=new kt,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return l(t,[{key:"getIdsFor",value:function(t){null==t&&ht("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new Et,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new kt,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach(function(n){return e.deleteCache(t,n)})}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),Aa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Da=mt({getKey:null,doesEleInvalidateKey:ut,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:st,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Oa=function(t,e){this.renderer=t,this.onDequeues=[];var n=Da(e);B(this,n),this.lookup=new Pa(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},Ma=Oa.prototype;Ma.reasons=Aa,Ma.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},Ma.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},Ma.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new o(function(t,e){return e.reqs-t.reqs})},Ma.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Ma.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed())return null;if(!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(Wt(s*n))),r<-4)r=-4;else if(s>=7.99||r>3)return null;var l=Math.pow(2,r),c=e.h*l,h=e.w*l,d=a.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,d))return null;var f,p=u.get(t,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(f=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||h>1024)return null;var v=o.getTextureQueue(f),g=v[v.length-2],y=function(){return o.recycleTexture(f,h)||o.addTexture(f,h)};g||(g=v[v.length-1]),g||(g=y()),g.width-g.usedWidth<h&&(g=y());for(var m,b=function(t){return t&&t.scaledLabelShown===d},_=i&&i===Aa.dequeue,w=i&&i===Aa.highQuality,x=i&&i===Aa.downscale,k=r+1;k<=3;k++){var S=u.get(t,k);if(S){m=S;break}}var E=m&&m.level===r+1?m:null,C=function(){g.context.drawImage(E.texture.canvas,E.x,0,E.width,E.height,g.usedWidth,0,h,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,h,f),b(E))C();else if(b(m)){if(!w)return o.queueElement(t,m.level-1),m;for(var T=m.level;T>r;T--)E=o.getElement(t,e,n,T,Aa.downscale);C()}else{var P;if(!_&&!w&&!x)for(var A=r-1;A>=-4;A--){var D=u.get(t,A);if(D){P=D;break}}if(b(P))return o.queueElement(t,r),P;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,t,e,d,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return p={x:g.usedWidth,texture:g,level:r,scale:l,width:h,height:c,scaledLabelShown:d},g.usedWidth+=Math.ceil(h+8),g.eleCaches.push(p),u.set(t,r,p),o.checkTextureFullness(g),p},Ma.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},Ma.invalidateElement=function(t){var e=this.lookup,n=[];if(e.isInvalid(t)){for(var r=-4;r<=3;r++){var i=e.getForCachedKey(t,r);i&&n.push(i)}if(e.invalidate(t))for(var o=0;o<n.length;o++){var a=n[o],s=a.texture;s.invalidatedWidth+=a.width,a.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(t)}},Ma.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},Ma.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?bt(e,t):t.fullnessChecks++},Ma.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;bt(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var a=i[o];r.deleteCache(a.key,a.level)}_t(i),this.getRetiredTextureQueue(e).push(t)},Ma.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},Ma.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var o=r[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,_t(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),bt(r,o),n.push(o),o}},Ma.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),o=r[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var a={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(a),r[i]=a}},Ma.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,o=0;o<1&&e.size()>0;o++){var a=e.pop(),s=a.key,u=a.eles[0],l=i.hasCache(u,a.level);if(n[s]=null,!l){r.push(a);var c=this.getBoundingBox(u);this.getElement(u,c,t,a.level,Aa.dequeue)}}return r},Ma.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=at,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},Ma.onDequeue=function(t){this.onDequeues.push(t)},Ma.offDequeue=function(t){bt(this.onDequeues,t)},Ma.setupDequeueing=Ta({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var o=e[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(oe(s,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var Ia=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=Y()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=i(function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)},50),n.beforeRender(function(t,n){e.skipping=n-e.lastInvalidationTime<=250},n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new o(function(t,e){return e.reqs-t.reqs}),e.setupDequeueing()},La=Ia.prototype,Na=0,Ra=Math.pow(2,53)-1;La.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:Na=++Na%Ra,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a},La.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(Wt(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var a,s,u=r.layersByLevel,l=Math.pow(2,n),c=u[n]=u[n]||[];if(r.levelIsComplete(n,t))return c;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return s=u[e],!0},i=function(t){if(!s)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var a=c[o];a.invalid&&bt(c,a)}}();var h=function(e){var i=(e=e||{}).after;if(function(){if(!a){a=te();for(var e=0;e<t.length;e++)n=a,r=t[e].boundingBox(),n.x1=Math.min(n.x1,r.x1),n.x2=Math.max(n.x2,r.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,r.y1),n.y2=Math.max(n.y2,r.y2),n.h=n.y2-n.y1}var n,r}(),a.w*l*(a.h*l)>16e6)return null;var o=r.makeLayer(a,n);if(null!=i){var s=c.indexOf(i)+1;c.splice(s,0,o)}else(void 0===e.insert||e.insert)&&c.unshift(o);return o};if(r.skipping&&!o)return null;for(var d=null,f=t.length/1,p=!o,v=0;v<t.length;v++){var g=t[v],y=g._private.rscratch,m=y.imgLayerCaches=y.imgLayerCaches||{},b=m[n];if(b)d=b;else{if((!d||d.eles.length>=f||!se(d.bb,g.boundingBox()))&&!(d=h({insert:!0,after:d})))return null;s||p?r.queueLayer(d,g):r.drawEleInLayer(d,g,n,e),d.eles.push(g),m[n]=d}}return s||(p?null:c)},La.getEleLevelForLayerLevel=function(t,e){return t},La.drawEleInLayer=function(t,e,n,r){var i=this.renderer,o=t.context,a=e.boundingBox();0!==a.w&&0!==a.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,n,!0),i.setImgSmoothing(o,!0))},La.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===e.length},La.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}}},La.updateElementsInLayers=function(t,e){for(var n=C(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],o=n?t[r]:t[r].ele,a=o._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},u=-4;u<=2;u++){var l=s[u];l&&(i&&this.getEleLevelForLayerLevel(l.level)!==i.level||e(l,o,i))}},La.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},La.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=Y(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(t,n,r){e.invalidateLayer(t)}))},La.invalidateLayer=function(t){if(this.lastInvalidationTime=Y(),!t.invalid){var e=t.level,n=t.eles;bt(this.layersByLevel[e],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var r=0;r<n.length;r++){var i=n[r]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}},La.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])})},La.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},La.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},La.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},La.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[t.level]=t)}this.requestRedraw()}},La.requestRedraw=i(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),La.setupDequeueing=Ta({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:ct,shouldRedraw:st,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var Fa,ja={};function Ba(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function za(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Va(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++)t.lineTo((s=r[i]).x,s.y);var o=n,a=n[0];for(t.moveTo(a.x,a.y),i=1;i<o.length;i++){var s;t.lineTo((s=o[i]).x,s.y)}t.closePath&&t.closePath()}function Ga(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var o=e,a=o[0];t.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function Ua(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}ja.arrowShapeImpl=function(t){return(Fa||(Fa={polygon:Ba,"triangle-backcurve":za,"triangle-tee":Va,"circle-triangle":Ga,"triangle-cross":Va,circle:Ua}))[t]};var Ha={drawElement:function(t,e,n,r,i,o){e.isNode()?this.drawNode(t,e,n,r,i,o):this.drawEdge(t,e,n,r,i,o)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,o,a,s){var u=this,l=n.getBoundingBox(e);if(0!==l.w&&0!==l.h){var c=n.getElement(e,l,r,i,o);if(null!=c){var h=s(u,e);if(0===h)return;var d,f,p,v,g,y,m=a(u,e),b=l.x1,_=l.y1,w=l.w,x=l.h;if(0!==m){var k=n.getRotationPoint(e);t.translate(p=k.x,v=k.y),t.rotate(m),(g=u.getImgSmoothing(t))||u.setImgSmoothing(t,!0);var S=n.getRotationOffset(e);d=S.x,f=S.y}else d=b,f=_;1!==h&&(t.globalAlpha=(y=t.globalAlpha)*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,f,w,x),1!==h&&(t.globalAlpha=y),0!==m&&(t.rotate(-m),t.translate(-p,-v),g||u.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},qa=function(){return 0},Wa=function(t,e){return t.getTextAngle(e,null)},Ya=function(t,e){return t.getTextAngle(e,"source")},Ka=function(t,e){return t.getTextAngle(e,"target")},Xa=function(t,e){return e.effectiveOpacity()},Qa=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};Ha.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,d=e.boundingBox(),f=!0===o?u.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&e.visible()&&(!r||oe(d,r))){var p=e.isEdge(),v=e.element()._private.rscratch.badLine;a.drawCachedElementPortion(t,e,u,n,i,f,qa,Xa),p&&v||a.drawCachedElementPortion(t,e,l,n,i,f,Wa,Qa),p&&!v&&(a.drawCachedElementPortion(t,e,c,n,i,f,Ya,Qa),a.drawCachedElementPortion(t,e,h,n,i,f,Ka,Qa)),a.drawElementOverlay(t,e)}},Ha.drawElements=function(t,e){for(var n=0;n<e.length;n++)this.drawElement(t,e[n])},Ha.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++)this.drawCachedElement(t,e[i],n,r)},Ha.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,n,r)}},Ha.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&t.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(t,e,n,r)};var Za={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=e._private.rscratch;if((!o||e.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var u;n&&t.translate(-(u=n).x1,-u.y1);var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,f=e.pstyle("line-cap").value,p=l*c,v=l*c,g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;t.lineWidth=d,t.lineCap=f,a.eleStrokeStyle(t,e,n),a.drawEdgePath(e,t,s.allpts,h),t.lineCap="butt"},y=function(){i&&a.drawEdgeOverlay(t,e)},m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;a.drawArrowheads(t,e,n)},b=function(){a.drawElementText(t,e,null,r)};t.lineJoin="round";var _="yes"===e.pstyle("ghost").value;if(_){var w=e.pstyle("ghost-offset-x").pfValue,x=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,S=p*k;t.translate(w,x),g(S),m(S),t.translate(-w,-x)}g(),m(),y(),b(),n&&t.translate(u.x1,u.y1)}},drawEdgeOverlay:function(t,e){if(e.visible()){var n=e.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),o=e._private.rscratch,a=2*e.pstyle("overlay-padding").pfValue,s=e.pstyle("overlay-color").value;t.lineWidth=a,t.lineCap="self"!==o.edgeType||i?"round":"butt",r.colorStrokeStyle(t,s[0],s[1],s[2],n),r.drawEdgePath(e,t,o.allpts,"solid")}}},drawEdgePath:function(t,e,n,r){var i,o=t._private.rscratch,a=e,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var h=n.join("$");o.pathCacheKey&&o.pathCacheKey===h?(i=e=o.pathCache,s=!0):(i=e=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)e.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)e.lineTo(n[f],n[f+1])}e=a,u?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(t,e,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=e.pstyle(n+"-arrow-shape").value;if("none"!==s){var u="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",l=e.pstyle(n+"-arrow-fill").value,c=e.pstyle("width").pfValue,h=e.pstyle("opacity").value;void 0===a&&(a=h);var d=t.globalCompositeOperation;1===a&&"hollow"!==l||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(e,t,u,c,s,r,i,o),t.globalCompositeOperation=d);var f=e.pstyle(n+"-arrow-color").value;this.colorFillStyle(t,f[0],f[1],f[2],a),this.colorStrokeStyle(t,f[0],f[1],f[2],a),this.drawArrowShape(e,t,l,c,s,r,i,o)}}},drawArrowShape:function(t,e,n,r,i,o,a,s){var u,l=this,c=this.usePaths()&&"triangle-cross"!==i,h=!1,d=e,f={x:o,y:a},p=t.pstyle("arrow-scale").value,v=this.getArrowWidth(r,p),g=l.arrowShapes[i];if(c){var y=l.arrowPathCache=l.arrowPathCache||[],m=tt(i),b=y[m];null!=b?(u=e=b,h=!0):(u=e=new Path2D,y[m]=u)}h||(e.beginPath&&e.beginPath(),c?g.draw(e,1,0,{x:0,y:0},1):g.draw(e,v,s,f,r),e.closePath&&e.closePath()),e=d,c&&(e.translate(o,a),e.rotate(s),e.scale(v,v)),"filled"!==n&&"both"!==n||(c?e.fill(u):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(g.matchEdgeWidth?r:1)/(c?v:1),e.lineJoin="miter",c?e.stroke(u):e.stroke()),c&&(e.scale(1/v,1/v),e.rotate(-s),e.translate(-o,-a))}},$a={safeDrawImage:function(t,e,n,r,i,o,a,s,u,l){i<=0||o<=0||u<=0||l<=0||t.drawImage(e,n,r,i,o,a,s,u,l)},drawInscribedImage:function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,u=a.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),h=c(n,"background-fit","value",r),d=c(n,"background-repeat","value",r),f=n.width(),p=n.height(),v=2*n.padding(),g=f+("inner"===c(n,"background-width-relative-to","value",r)?0:v),y=p+("inner"===c(n,"background-height-relative-to","value",r)?0:v),m=n._private.rscratch,b="node"===c(n,"background-clip","value",r),_=c(n,"background-image-opacity","value",r)*i,w=c(n,"background-image-smoothing","value",r),x=e.width||e.cachedW,k=e.height||e.cachedH;null!=x&&null!=k||(document.body.appendChild(e),x=e.cachedW=e.width||e.offsetWidth,k=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var S=x,E=k;if("auto"!==c(n,"background-width","value",r)&&(S="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*g:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(E="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*y:c(n,"background-height","pfValue",r)),0!==S&&0!==E){if("contain"===h)S*=C=Math.min(g/S,y/E),E*=C;else if("cover"===h){var C;S*=C=Math.max(g/S,y/E),E*=C}var T=s-g/2,P=c(n,"background-position-x","units",r),A=c(n,"background-position-x","pfValue",r);T+="%"===P?(g-S)*A:A;var D=c(n,"background-offset-x","units",r),O=c(n,"background-offset-x","pfValue",r);T+="%"===D?(g-S)*O:O;var M=u-y/2,I=c(n,"background-position-y","units",r),L=c(n,"background-position-y","pfValue",r);M+="%"===I?(y-E)*L:L;var N=c(n,"background-offset-y","units",r),R=c(n,"background-offset-y","pfValue",r);M+="%"===N?(y-E)*R:R,m.pathCache&&(T-=s,M-=u,s=0,u=0);var F=t.globalAlpha;t.globalAlpha=_;var j=o.getImgSmoothing(t),B=!1;if("no"===w&&j?(o.setImgSmoothing(t,!1),B=!0):"yes"!==w||j||(o.setImgSmoothing(t,!0),B=!0),"no-repeat"===d)b&&(t.save(),m.pathCache?t.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,y),t.clip())),o.safeDrawImage(t,e,0,0,x,k,T,M,S,E),b&&t.restore();else{var z=t.createPattern(e,d);t.fillStyle=z,o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,y),t.translate(T,M),t.fill(),t.translate(-T,-M)}t.globalAlpha=F,B&&o.setImgSmoothing(t,j)}}},Ja={};function ts(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}Ja.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(Wt(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},Ja.drawElementText=function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(o&&!a.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!c||!c.value)&&(!h||!h.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var f,p=!n;n&&t.translate(-(f=n).x1,-f.y1),null==i?(a.drawText(t,e,null,p,o),e.isEdge()&&(a.drawText(t,e,"source",p,o),a.drawText(t,e,"target",p,o))):a.drawText(t,e,i,p,o),n&&t.translate(f.x1,f.y1)},Ja.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return this.fontCaches.push(e={context:t}),e},Ja.setupTextStyle=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)},Ja.getTextAngle=function(t,e){var n=t._private.rscratch,r=t.pstyle((e?e+"-":"")+"text-rotation"),i=wt(n,"labelAngle",e);return"autorotate"===r.strValue?t.isEdge()?i:0:"none"===r.strValue?0:r.pfValue},Ja.drawText=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!i||0!==s&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var u,l,c=wt(a,"labelX",n),h=wt(a,"labelY",n),d=this.getLabelText(e,n);if(null!=d&&""!==d&&!isNaN(c)&&!isNaN(h)){this.setupTextStyle(t,e,i);var f,p=n?n+"-":"",v=wt(a,"labelWidth",n),g=wt(a,"labelHeight",n),y=e.pstyle(p+"text-margin-x").pfValue,m=e.pstyle(p+"text-margin-y").pfValue,b=e.isEdge(),_=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;switch(b&&(_="center",w="center"),c+=y,h+=m,0!==(f=r?this.getTextAngle(e,n):0)&&(t.translate(u=c,l=h),t.rotate(f),c=0,h=0),w){case"top":break;case"center":h+=g/2;break;case"bottom":h+=g}var x=e.pstyle("text-background-opacity").value,k=e.pstyle("text-border-opacity").value,S=e.pstyle("text-border-width").pfValue,E=e.pstyle("text-background-padding").pfValue;if(x>0||S>0&&k>0){var C=c-E;switch(_){case"left":C-=v;break;case"center":C-=v/2}var T=h-g-E,P=v+2*E,A=g+2*E;if(x>0){var D=t.fillStyle,O=e.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+x*s+")";var M=e.pstyle("text-background-shape").strValue;0===M.indexOf("round")?ts(t,C,T,P,A,2):t.fillRect(C,T,P,A),t.fillStyle=D}if(S>0&&k>0){var I=t.strokeStyle,L=t.lineWidth,N=e.pstyle("text-border-color").value,R=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+k*s+")",t.lineWidth=S,t.setLineDash)switch(R){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=S/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(C,T,P,A),"double"===R){var F=S/2;t.strokeRect(C+F,T+F,P-2*F,A-2*F)}t.setLineDash&&t.setLineDash([]),t.lineWidth=L,t.strokeStyle=I}}var j=2*e.pstyle("text-outline-width").pfValue;if(j>0&&(t.lineWidth=j),"wrap"===e.pstyle("text-wrap").value){var B=wt(a,"labelWrapCachedLines",n),z=wt(a,"labelLineHeight",n),V=v/2,G=this.getLabelJustification(e);switch("auto"===G||("left"===_?"left"===G?c+=-v:"center"===G&&(c+=-V):"center"===_?"left"===G?c+=-V:"right"===G&&(c+=V):"right"===_&&("center"===G?c+=V:"right"===G&&(c+=v))),w){case"top":h-=(B.length-1)*z;break;case"center":case"bottom":h-=(B.length-1)*z}for(var U=0;U<B.length;U++)j>0&&t.strokeText(B[U],c,h),t.fillText(B[U],c,h),h+=z}else j>0&&t.strokeText(d,c,h),t.fillText(d,c,h);0!==f&&(t.rotate(-f),t.translate(-u,-l))}}};for(var es={drawNode:function(t,e,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this,l=e._private,c=l.rscratch,h=e.position();if(k(h.x)&&k(h.y)&&(!s||e.visible())){var d,f,p=s?e.effectiveOpacity():1,v=u.usePaths(),g=!1,y=e.padding();r=e.width()+2*y,i=e.height()+2*y,n&&t.translate(-(f=n).x1,-f.y1);for(var m=e.pstyle("background-image"),b=m.value,_=new Array(b.length),w=new Array(b.length),x=0,S=0;S<b.length;S++){var E=b[S],C=_[S]=null!=E&&"none"!==E;if(C){var T=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",S);x++,w[S]=u.getCachedImage(E,T,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var P=e.pstyle("background-blacken").value,A=e.pstyle("border-width").pfValue,D=e.pstyle("background-opacity").value*p,O=e.pstyle("border-color").value,M=e.pstyle("border-style").value,I=e.pstyle("border-opacity").value*p;t.lineJoin="miter";var L=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;u.eleFillStyle(t,e,n)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;u.colorStrokeStyle(t,O[0],O[1],O[2],e)},R=e.pstyle("shape").strValue,F=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(h.x,h.y);var j=u.nodePathCache=u.nodePathCache||[],B=et("polygon"===R?R+","+F.join(","):R,""+i,""+r),z=j[B];null!=z?(g=!0,c.pathCache=d=z):(d=new Path2D,j[B]=c.pathCache=d)}var V=function(){if(!g){var n=h;v&&(n={x:0,y:0}),u.nodeShapes[u.getNodeShape(e)].draw(d||t,n.x,n.y,r,i)}v?t.fill(d):t.fill()},G=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=l.backgrounding,o=0,a=0;a<w.length;a++){var s=e.cy().style().getIndexedStyle(e,"background-image-containment","value",a);r&&"over"===s||!r&&"inside"===s?o++:_[a]&&w[a].complete&&!w[a].error&&(o++,u.drawInscribedImage(t,w[a],e,a,n))}l.backgrounding=!(o===x),i!==l.backgrounding&&e.updateStyle(!1)},U=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;u.hasPie(e)&&(u.drawPie(t,e,o),n&&(v||u.nodeShapes[u.getNodeShape(e)].draw(t,h.x,h.y,r,i)))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=(P>0?P:-P)*e,r=P>0?0:255;0!==P&&(u.colorFillStyle(t,r,r,r,n),v?t.fill(d):t.fill())},q=function(){if(A>0){if(t.lineWidth=A,t.lineCap="butt",t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(v?t.stroke(d):t.stroke(),"double"===M){t.lineWidth=A/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(d):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}},W=function(){a&&u.drawNodeOverlay(t,e,h,r,i)},Y=function(){u.drawElementText(t,e,null,o)},K="yes"===e.pstyle("ghost").value;if(K){var X=e.pstyle("ghost-offset-x").pfValue,Q=e.pstyle("ghost-offset-y").pfValue,Z=e.pstyle("ghost-opacity").value,$=Z*p;t.translate(X,Q),L(Z*D),V(),G($,!0),N(Z*I),q(),U(0!==P||0!==A),G($,!1),H($),t.translate(-X,-Q)}L(),V(),G(p,!0),N(),q(),U(0!==P||0!==A),G(p,!1),H(),v&&t.translate(-h.x,-h.y),Y(),W(),n&&t.translate(f.x1,f.y1)}},drawNodeOverlay:function(t,e,n,r,i){if(e.visible()){var o=e.pstyle("overlay-padding").pfValue,a=e.pstyle("overlay-opacity").value,s=e.pstyle("overlay-color").value;if(a>0){if(n=n||e.position(),null==r||null==i){var u=e.padding();r=e.width()+2*u,i=e.height()+2*u}this.colorFillStyle(t,s[0],s[1],s[2],a),this.nodeShapes.roundrectangle.draw(t,n.x,n.y,r+2*o,i+2*o),t.fill()}}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,h=0;this.usePaths()&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var f=e.pstyle("pie-"+d+"-background-size").value,p=e.pstyle("pie-"+d+"-background-color").value,v=e.pstyle("pie-"+d+"-background-opacity").value*n,g=f/100;g+h>1&&(g=1-h);var y=1.5*Math.PI+2*Math.PI*h,m=y+2*Math.PI*g;0===f||h>=1||h+g>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,c,y,m),t.closePath(),this.colorFillStyle(t,p[0],p[1],p[2],v),t.fill(),h+=g)}}},ns={getPixelRatio:function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&n.push(e={context:t}),e},createGradientStyleFor:function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,u=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),d=Kt(l,h),f=Kt(c,h);o=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,f))}else{var p=a?{x:0,y:0}:n.position(),v=n.paddedWidth(),g=n.paddedHeight();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(v,g))}else if(n.isEdge()){var y=n.sourceEndpoint(),m=n.targetEndpoint();o=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=a?{x:0,y:0}:n.position(),_=n.paddedWidth()/2,w=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=t.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":o=t.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":o=t.createLinearGradient(b.x+_,b.y,b.x-_,b.y);break;case"to-right":o=t.createLinearGradient(b.x-_,b.y,b.x+_,b.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(b.x-_,b.y-w,b.x+_,b.y+w);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(b.x-_,b.y+w,b.x+_,b.y-w);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(b.x+_,b.y-w,b.x-_,b.y+w);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(b.x+_,b.y+w,b.x-_,b.y-w)}}if(!o)return null;for(var x=u.length===s.length,k=s.length,S=0;S<k;S++)o.addColorStop(x?u[S]:S/(k-1),"rgba("+s[S][0]+","+s[S][1]+","+s[S][2]+","+i+")");return o},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio();t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=e.motionBlurPxRatio);var s,u=i*a,l=o*a;if(u!==e.canvasWidth||l!==e.canvasHeight){e.fontCaches=null;var c=n.canvasContainer;c.style.width=i+"px",c.style.height=o+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)(s=n.canvases[h]).width=u,s.height=l,s.style.width=i+"px",s.style.height=o+"px";for(h=0;h<e.BUFFER_COUNT;h++)(s=n.bufferCanvases[h]).width=u,s.height=l,s.style.width=i+"px",s.style.height=o+"px";e.textureMult=1,a<=1&&(s=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,s.width=u*e.textureMult,s.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||yt()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,a=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,u=a.cy,l=a.data,c=l.canvasNeedsRedraw,h=a.textureOnViewport&&!e&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),d=void 0!==t.motionBlur?t.motionBlur:a.motionBlur,f=a.motionBlurPxRatio,p=u.hasCompoundNodes(),v=a.hoverData.draggingEles,g=d=d&&!e&&a.motionBlurEnabled&&!(a.hoverData.selecting||a.touchData.selecting);e||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!e&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),d&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(g=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!h&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var y=u.style(),m=u.zoom(),b=void 0!==i?i:m,_=u.pan(),w={x:_.x,y:_.y},x={zoom:m,pan:{x:_.x,y:_.y}},k=a.prevViewport;void 0===k||x.zoom!==k.zoom||x.pan.x!==k.pan.x||x.pan.y!==k.pan.y||v&&!p||(a.motionBlurPxRatio=1),o&&(w=o),b*=s,w.x*=s,w.y*=s;var S=a.getCachedZSortedEles();function E(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",a.colorFillStyle(t,255,255,255,a.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function C(t,r){var s,u,c,h;a.clearingMotionBlur||t!==l.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&t!==l.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=w,u=b,c=a.canvasWidth,h=a.canvasHeight):(s={x:_.x*f,y:_.y*f},u=m*f,c=a.canvasWidth*f,h=a.canvasHeight*f),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?E(t,0,0,c,h):e||void 0!==r&&!r||t.clearRect(0,0,c,h),n||(t.translate(s.x,s.y),t.scale(u,u)),o&&t.translate(o.x,o.y),i&&t.scale(i,i)}if(h||(a.textureDrawLastFrame=!1),h){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=u.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var T=a.data.bufferContexts[a.TEXTURE_BUFFER];T.setTransform(1,0,0,1,0,0),T.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:T,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(x=a.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var P=a.textureCache.texture;x=a.textureCache.viewport,(R=l.contexts[a.NODE]).setTransform(1,0,0,1,0,0),d?E(R,0,0,x.width,x.height):R.clearRect(0,0,x.width,x.height);var A=y.core("outside-texture-bg-color").value,D=y.core("outside-texture-bg-opacity").value;a.colorFillStyle(R,A[0],A[1],A[2],D),R.fillRect(0,0,x.width,x.height),m=u.zoom(),C(R,!1),R.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s),R.drawImage(P,x.mpan.x,x.mpan.y,x.width/x.zoom/s,x.height/x.zoom/s)}else a.textureOnViewport&&!e&&(a.textureCache=null);var O=u.extent(),M=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),I=a.hideEdgesOnViewport&&M,L=[];if(L[a.NODE]=!c[a.NODE]&&d&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,L[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),L[a.DRAG]=!c[a.DRAG]&&d&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,L[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||n||r||L[a.NODE]){var N=d&&!L[a.NODE]&&1!==f;C(R=e||(N?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:l.contexts[a.NODE]),d&&!N?"motionBlur":void 0),I?a.drawCachedNodes(R,S.nondrag,s,O):a.drawLayeredElements(R,S.nondrag,s,O),a.debug&&a.drawDebugPoints(R,S.nondrag),n||d||(c[a.NODE]=!1)}if(!r&&(c[a.DRAG]||n||L[a.DRAG])&&(N=d&&!L[a.DRAG]&&1!==f,C(R=e||(N?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:l.contexts[a.DRAG]),d&&!N?"motionBlur":void 0),I?a.drawCachedNodes(R,S.drag,s,O):a.drawCachedElements(R,S.drag,s,O),a.debug&&a.drawDebugPoints(R,S.drag),n||d||(c[a.DRAG]=!1)),a.showFps||!r&&c[a.SELECT_BOX]&&!n){var R;if(C(R=e||l.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){m=a.cy.zoom();var F=y.core("selection-box-border-width").value/m;R.lineWidth=F,R.fillStyle="rgba("+y.core("selection-box-color").value[0]+","+y.core("selection-box-color").value[1]+","+y.core("selection-box-color").value[2]+","+y.core("selection-box-opacity").value+")",R.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),F>0&&(R.strokeStyle="rgba("+y.core("selection-box-border-color").value[0]+","+y.core("selection-box-border-color").value[1]+","+y.core("selection-box-border-color").value[2]+","+y.core("selection-box-opacity").value+")",R.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(l.bgActivePosistion&&!a.hoverData.selecting){m=a.cy.zoom();var j=l.bgActivePosistion;R.fillStyle="rgba("+y.core("active-bg-color").value[0]+","+y.core("active-bg-color").value[1]+","+y.core("active-bg-color").value[2]+","+y.core("active-bg-opacity").value+")",R.beginPath(),R.arc(j.x,j.y,y.core("active-bg-size").pfValue/m,0,2*Math.PI),R.fill()}var B=a.lastRedrawTime;if(a.showFps&&B){B=Math.round(B);var z=Math.round(1e3/B);R.setTransform(1,0,0,1,0,0),R.fillStyle="rgba(255, 0, 0, 0.75)",R.strokeStyle="rgba(255, 0, 0, 0.75)",R.lineWidth=1,R.fillText("1 frame = "+B+" ms = "+z+" fps",0,20),R.strokeRect(0,30,250,20),R.fillRect(0,30,250*Math.min(z/60,1),20)}n||(c[a.SELECT_BOX]=!1)}if(d&&1!==f){var V=l.contexts[a.DRAG],G=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],U=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!g?t.clearRect(0,0,a.canvasWidth,a.canvasHeight):E(t,0,0,a.canvasWidth,a.canvasHeight),t.drawImage(e,0,0,a.canvasWidth*f,a.canvasHeight*f,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||L[a.NODE])&&(U(l.contexts[a.NODE],a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],L[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||L[a.DRAG])&&(U(V,G,L[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=x,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),d&&(a.motionBlurTimeout=setTimeout(function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!h,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()},100)),e||u.emit("render")}},rs={drawPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[2*u],n+s*o[2*u+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2,u=Te(r,i);t.beginPath&&t.beginPath();for(var l=0;l<o.length/4;l++){var c,h;h=0===l?o.length-2:4*l-2,c=4*l+2;var d=e+a*o[4*l],f=n+s*o[4*l+1],p=u/Math.tan(Math.acos(-o[h]*o[c]-o[h+1]*o[c+1])/2),v=d-p*o[h],g=f-p*o[h+1],y=d+p*o[c],m=f+p*o[c+1];0===l?t.moveTo(v,g):t.lineTo(v,g),t.arcTo(d,f,y,m,u)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Ce(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.arcTo(e+o,n-a,e+o,n,s),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.arcTo(e-o,n-a,e,n-a,s),t.lineTo(e,n-a),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2,s=Ce(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-a),t.lineTo(e+o,n-a),t.lineTo(e+o,n),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e-o,n+a,e-o,n,s),t.lineTo(e-o,n-a),t.lineTo(e,n-a),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var o=r/2,a=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-o+8,n-a),t.lineTo(e+o-8,n-a),t.lineTo(e+o,n-a+8),t.lineTo(e+o,n+a-8),t.lineTo(e+o-8,n+a),t.lineTo(e-o+8,n+a),t.lineTo(e-o,n+a-8),t.lineTo(e-o,n-a+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,u=e+o,l=n-a,c=n+a,h=Pe(r,i),d=h.widthOffset,f=h.heightOffset,p=h.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,l+f),t.lineTo(s,c-f),t.quadraticCurveTo(s+p,c,s+d,c),t.lineTo(u-d,c),t.quadraticCurveTo(u-p,c,u,c-f),t.lineTo(u,l+f),t.quadraticCurveTo(u-p,l,u-d,l),t.lineTo(s+d,l),t.quadraticCurveTo(s+p,l,s,l+f),t.closePath()}},is=Math.sin(0),os=Math.cos(0),as={},ss={},us=Math.PI/40,ls=0*Math.PI;ls<2*Math.PI;ls+=us)as[ls]=Math.sin(ls),ss[ls]=Math.cos(ls);rs.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=us)o=e-s*as[l]*is+s*ss[l]*os,a=n+u*ss[l]*is+u*as[l]*os,0===l?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var cs={};function hs(t){var e=t.indexOf(",");return t.substr(e+1)}function ds(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new zn(function(r,i){try{e.toBlob(function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(o){i(o)}});case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}(hs(r()),n);case"base64":return hs(r());case"base64uri":default:return r()}}cs.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},cs.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],o=t.full?Math.ceil(n.h):r[3],a=k(t.maxWidth)||k(t.maxHeight),s=this.getPixelRatio(),u=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,u=t.scale;else if(a){var l=1/0,c=1/0;k(t.maxWidth)&&(l=u*t.maxWidth/i),k(t.maxHeight)&&(c=u*t.maxHeight/o),i*=u=Math.min(l,c),o*=u}a||(i*=s,o*=s,u*=s);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var d=h.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*u,-n.y1*u),d.scale(u,u),this.drawElements(d,f),d.scale(1/u,1/u),d.translate(n.x1*u,n.y1*u);else{var p=e.pan(),v={x:p.x*u,y:p.y*u};u*=e.zoom(),d.translate(v.x,v.y),d.scale(u,u),this.drawElements(d,f),d.scale(1/u,1/u),d.translate(-v.x,-v.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,o),d.fill())}return h},cs.png=function(t){return ds(t,this.bufferCanvasImage(t),"image/png")},cs.jpg=function(t){return ds(t,this.bufferCanvasImage(t),"image/jpeg")};var fs=vs,ps=vs.prototype;function vs(t){var e=this;e.data={canvases:new Array(ps.CANVAS_LAYERS),contexts:new Array(ps.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ps.CANVAS_LAYERS),bufferCanvases:new Array(ps.BUFFER_COUNT),bufferContexts:new Array(ps.CANVAS_LAYERS)},e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};f&&f.userAgent.match(/msie|trident|edge/i)&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var o=0;o<ps.CANVAS_LAYERS;o++){var a=e.data.canvases[o]=document.createElement("canvas");e.data.contexts[o]=a.getContext("2d"),Object.keys(i).forEach(function(t){a.style[t]=i[t]}),a.style.position="absolute",a.setAttribute("data-id","layer"+o),a.style.zIndex=String(ps.CANVAS_LAYERS-o),e.data.canvasContainer.appendChild(a),e.data.canvasNeedsRedraw[o]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[ps.NODE].setAttribute("data-id","layer"+ps.NODE+"-node"),e.data.canvases[ps.SELECT_BOX].setAttribute("data-id","layer"+ps.SELECT_BOX+"-selectbox"),e.data.canvases[ps.DRAG].setAttribute("data-id","layer"+ps.DRAG+"-drag"),o=0;o<ps.BUFFER_COUNT;o++)e.data.bufferCanvases[o]=document.createElement("canvas"),e.data.bufferContexts[o]=e.data.bufferCanvases[o].getContext("2d"),e.data.bufferCanvases[o].style.position="absolute",e.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),e.data.bufferCanvases[o].style.zIndex=String(-o-1),e.data.bufferCanvases[o].style.visibility="hidden";e.pathsEnabled=!0;var s=te(),u=function(t){return{x:-t.w/2,y:-t.h/2}},l=function(t){return t.boundingBox(),t[0]._private.bodyBounds},c=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||s},h=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||s},d=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||s},p=function(t,e){return e},v=function(t,e,n){var r=t?t+"-":"";return{x:e.x+n.pstyle(r+"text-margin-x").pfValue,y:e.y+n.pstyle(r+"text-margin-y").pfValue}},g=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},y=e.data.eleTxrCache=new Oa(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,n,r,i,o){return e.drawElement(t,n,r,!1,!1,o)},getBoundingBox:l,getRotationPoint:function(t){return{x:((e=l(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return u(l(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),m=e.data.lblTxrCache=new Oa(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"main",o)},getBoundingBox:c,getRotationPoint:function(t){return v("",g(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=c(t),n=u(c(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},isVisible:p}),b=e.data.slbTxrCache=new Oa(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"source",o)},getBoundingBox:h,getRotationPoint:function(t){return v("source",g(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return u(h(t))},isVisible:p}),_=e.data.tlbTxrCache=new Oa(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"target",o)},getBoundingBox:d,getRotationPoint:function(t){return v("target",g(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return u(d(t))},isVisible:p}),w=e.data.lyrTxrCache=new Ia(e);e.onUpdateEleCalcs(function(t,e){y.invalidateElements(e),m.invalidateElements(e),b.invalidateElements(e),_.invalidateElements(e),w.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var x=function(t){for(var e=0;e<t.length;e++)w.enqueueElementRefinement(t[e].ele)};y.onDequeue(x),m.onDequeue(x),b.onDequeue(x),_.onDequeue(x)}ps.CANVAS_LAYERS=3,ps.SELECT_BOX=0,ps.DRAG=1,ps.NODE=2,ps.BUFFER_COUNT=3,ps.TEXTURE_BUFFER=0,ps.MOTIONBLUR_BUFFER_NODE=1,ps.MOTIONBLUR_BUFFER_DRAG=2,ps.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[ps.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[ps.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[ps.SELECT_BOX]=e}};var gs="undefined"!=typeof Path2D;ps.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},ps.usePaths=function(){return gs&&this.pathsEnabled},ps.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},ps.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},ps.makeOffscreenCanvas=function(t,e){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":a(OffscreenCanvas))?n=new OffscreenCanvas(t,e):((n=document.createElement("canvas")).width=t,n.height=e),n},[ja,Ha,Za,$a,Ja,es,ns,rs,cs,{nodeShapeImpl:function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}}].forEach(function(t){B(ps,t)});var ys=[{type:"layout",extensions:na},{type:"renderer",extensions:[{name:"null",impl:ra},{name:"base",impl:Ea},{name:"canvas",impl:fs}]}],ms={},bs={};function _s(t,e,n){var r=n,i=function(n){ht("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(go.prototype[e])return i(e);go.prototype[e]=n}else if("collection"===t){if(Ii.prototype[e])return i(e);Ii.prototype[e]=n}else if("layout"===t){for(var o=function(t){this.options=t,n.call(this,t),x(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(t){return t._private.cy},d={addEventFields:function(t,e){e.layout=t,e.cy=h(t),e.target=t},bubble:function(){return!0},parent:function(t){return h(t)}};B(a,{createEmitter:function(){return this._private.emitter=new ti(d,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),Un.eventAliasesOn(a),r=o}else if("renderer"===t&&"null"!==e&&"base"!==e){var f=ws("renderer","base"),p=f.prototype,v=n,g=n.prototype,y=function(){f.apply(this,arguments),v.apply(this,arguments)},m=y.prototype;for(var b in p){var _=p[b];if(null!=g[b])return i(b);m[b]=_}for(var w in g)m[w]=g[w];p.clientFunctions.forEach(function(t){m[t]=m[t]||function(){ht("Renderer does not implement `renderer."+t+"()` on its prototype")}}),r=y}return V({map:ms,keys:[t,e],value:r})}function ws(t,e){return G({map:ms,keys:[t,e]})}function xs(t,e,n,r,i){return V({map:bs,keys:[t,e,n,r],value:i})}function ks(t,e,n,r){return G({map:bs,keys:[t,e,n,r]})}var Ss=function(){return 2===arguments.length?ws.apply(null,arguments):3===arguments.length?_s.apply(null,arguments):4===arguments.length?ks.apply(null,arguments):5===arguments.length?xs.apply(null,arguments):void ht("Invalid extension access syntax")};go.prototype.extension=Ss,ys.forEach(function(t){t.extensions.forEach(function(e){_s(t.type,e.name,e.impl)})});var Es=function t(){if(!(this instanceof t))return new t;this.length=0},Cs=Es.prototype;Cs.instanceString=function(){return"stylesheet"},Cs.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Cs.css=function(t,e){var n=this.length-1;if(b(t))this[n].properties.push({name:t,value:e});else if(x(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var u=co.properties[a]||co.properties[L(a)];null!=u&&this[n].properties.push({name:u.name,value:s})}}return this},Cs.style=Cs.css,Cs.generateStyle=function(t){var e=new co(t);return this.appendToStyle(e)},Cs.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.properties;t.selector(n.selector);for(var i=0;i<r.length;i++){var o=r[i];t.css(o.name,o.value)}}return t};var Ts=function(t){return void 0===t&&(t={}),x(t)?new go(t):b(t)?Ss.apply(Ss,arguments):void 0};Ts.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Ts),t.apply(null,e),this},Ts.warnings=function(t){return dt(t)},Ts.version="3.19.0",Ts.stylesheet=Ts.Stylesheet=Es,t.exports=Ts},6620:function(t){"use strict";function e(t,e,n,r,i,o){this._color=t,this.key=e,this.value=n,this.left=r,this.right=i,this._count=o}function n(t){return new e(t._color,t.key,t.value,t.left,t.right,t._count)}function r(t,n){return new e(t,n.key,n.value,n.left,n.right,n._count)}function i(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function o(t,e){this._compare=t,this.root=e}t.exports=function(t){return new o(t||f,null)};var a=o.prototype;function s(t,e){var n;return e.left&&(n=s(t,e.left))?n:(n=t(e.key,e.value))||(e.right?s(t,e.right):void 0)}function u(t,e,n,r){if(e(t,r.key)<=0){var i;if(r.left&&(i=u(t,e,n,r.left)))return i;if(i=n(r.key,r.value))return i}if(r.right)return u(t,e,n,r.right)}function l(t,e,n,r,i){var o,a=n(t,i.key),s=n(e,i.key);if(a<=0){if(i.left&&(o=l(t,e,n,r,i.left)))return o;if(s>0&&(o=r(i.key,i.value)))return o}if(s>0&&i.right)return l(t,e,n,r,i.right)}function c(t,e){this.tree=t,this._stack=e}Object.defineProperty(a,"keys",{get:function(){var t=[];return this.forEach(function(e,n){t.push(e)}),t}}),Object.defineProperty(a,"values",{get:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(t,n){for(var a=this._compare,s=this.root,u=[],l=[];s;){var c=a(t,s.key);u.push(s),l.push(c),s=c<=0?s.left:s.right}u.push(new e(0,t,n,null,null,1));for(var h=u.length-2;h>=0;--h)s=u[h],u[h]=l[h]<=0?new e(s._color,s.key,s.value,u[h+1],s.right,s._count+1):new e(s._color,s.key,s.value,s.left,u[h+1],s._count+1);for(h=u.length-1;h>1;--h){var d=u[h-1];if(s=u[h],1===d._color||1===s._color)break;var f=u[h-2];if(f.left===d)if(d.left===s){if(!(p=f.right)||0!==p._color){f._color=0,f.left=d.right,d._color=1,d.right=f,u[h-2]=d,u[h-1]=s,i(f),i(d),h>=3&&((v=u[h-3]).left===f?v.left=d:v.right=d);break}d._color=1,f.right=r(1,p),f._color=0,h-=1}else{if(!(p=f.right)||0!==p._color){d.right=s.left,f._color=0,f.left=s.right,s._color=1,s.left=d,s.right=f,u[h-2]=s,u[h-1]=d,i(f),i(d),i(s),h>=3&&((v=u[h-3]).left===f?v.left=s:v.right=s);break}d._color=1,f.right=r(1,p),f._color=0,h-=1}else if(d.right===s){if(!(p=f.left)||0!==p._color){f._color=0,f.right=d.left,d._color=1,d.left=f,u[h-2]=d,u[h-1]=s,i(f),i(d),h>=3&&((v=u[h-3]).right===f?v.right=d:v.left=d);break}d._color=1,f.left=r(1,p),f._color=0,h-=1}else{var p;if(!(p=f.left)||0!==p._color){var v;d.left=s.right,f._color=0,f.right=s.left,s._color=1,s.right=d,s.left=f,u[h-2]=s,u[h-1]=d,i(f),i(d),i(s),h>=3&&((v=u[h-3]).right===f?v.right=s:v.left=s);break}d._color=1,f.left=r(1,p),f._color=0,h-=1}}return u[0]._color=1,new o(a,u[0])},a.forEach=function(t,e,n){if(this.root)switch(arguments.length){case 1:return s(t,this.root);case 2:return u(e,this._compare,t,this.root);case 3:if(this._compare(e,n)>=0)return;return l(e,n,this._compare,t,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new c(this,t)}}),Object.defineProperty(a,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new c(this,t)}}),a.at=function(t){if(t<0)return new c(this,[]);for(var e=this.root,n=[];;){if(n.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new c(this,n);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new c(this,[])},a.ge=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o<=0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new c(this,r)},a.gt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o<0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new c(this,r)},a.lt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o>0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new c(this,r)},a.le=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o>=0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new c(this,r)},a.find=function(t){for(var e=this._compare,n=this.root,r=[];n;){var i=e(t,n.key);if(r.push(n),0===i)return new c(this,r);n=i<=0?n.left:n.right}return new c(this,[])},a.remove=function(t){var e=this.find(t);return e?e.remove():this},a.get=function(t){for(var e=this._compare,n=this.root;n;){var r=e(t,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var h=c.prototype;function d(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function f(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new c(this.tree,this._stack.slice())},h.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var a=new Array(t.length);a[a.length-1]=new e((u=t[t.length-1])._color,u.key,u.value,u.left,u.right,u._count);for(var s=t.length-2;s>=0;--s){var u;a[s]=(u=t[s]).left===t[s+1]?new e(u._color,u.key,u.value,a[s+1],u.right,u._count):new e(u._color,u.key,u.value,u.left,a[s+1],u._count)}if((u=a[a.length-1]).left&&u.right){var l=a.length;for(u=u.left;u.right;)a.push(u),u=u.right;var c=a[l-1];for(a.push(new e(u._color,c.key,c.value,u.left,u.right,u._count)),a[l-1].key=u.key,a[l-1].value=u.value,s=a.length-2;s>=l;--s)a[s]=new e((u=a[s])._color,u.key,u.value,u.left,a[s+1],u._count);a[l-1].left=a[l]}if(0===(u=a[a.length-1])._color){var h=a[a.length-2];for(h.left===u?h.left=null:h.right===u&&(h.right=null),a.pop(),s=0;s<a.length;++s)a[s]._count--;return new o(this.tree._compare,a[0])}if(u.left||u.right){for(u.left?d(u,u.left):u.right&&d(u,u.right),u._color=1,s=0;s<a.length-1;++s)a[s]._count--;return new o(this.tree._compare,a[0])}if(1===a.length)return new o(this.tree._compare,null);for(s=0;s<a.length;++s)a[s]._count--;var f=a[a.length-2];return function(t){for(var e,o,a,s,u=t.length-1;u>=0;--u){if(e=t[u],0===u)return void(e._color=1);if((o=t[u-1]).left===e){if((a=o.right).right&&0===a.right._color)return s=(a=o.right=n(a)).right=n(a.right),o.right=a.left,a.left=o,a.right=s,a._color=o._color,e._color=1,o._color=1,s._color=1,i(o),i(a),u>1&&((l=t[u-2]).left===o?l.left=a:l.right=a),void(t[u-1]=a);if(a.left&&0===a.left._color)return s=(a=o.right=n(a)).left=n(a.left),o.right=s.left,a.left=s.right,s.left=o,s.right=a,s._color=o._color,o._color=1,a._color=1,e._color=1,i(o),i(a),i(s),u>1&&((l=t[u-2]).left===o?l.left=s:l.right=s),void(t[u-1]=s);if(1===a._color){if(0===o._color)return o._color=1,void(o.right=r(0,a));o.right=r(0,a);continue}a=n(a),o.right=a.left,a.left=o,a._color=o._color,o._color=0,i(o),i(a),u>1&&((l=t[u-2]).left===o?l.left=a:l.right=a),t[u-1]=a,t[u]=o,u+1<t.length?t[u+1]=e:t.push(e),u+=2}else{if((a=o.left).left&&0===a.left._color)return s=(a=o.left=n(a)).left=n(a.left),o.left=a.right,a.right=o,a.left=s,a._color=o._color,e._color=1,o._color=1,s._color=1,i(o),i(a),u>1&&((l=t[u-2]).right===o?l.right=a:l.left=a),void(t[u-1]=a);if(a.right&&0===a.right._color)return s=(a=o.left=n(a)).right=n(a.right),o.left=s.right,a.right=s.left,s.right=o,s.left=a,s._color=o._color,o._color=1,a._color=1,e._color=1,i(o),i(a),i(s),u>1&&((l=t[u-2]).right===o?l.right=s:l.left=s),void(t[u-1]=s);if(1===a._color){if(0===o._color)return o._color=1,void(o.left=r(0,a));o.left=r(0,a);continue}var l;a=n(a),o.left=a.right,a.right=o,a._color=o._color,o._color=0,i(o),i(a),u>1&&((l=t[u-2]).right===o?l.right=a:l.left=a),t[u-1]=a,t[u]=o,u+1<t.length?t[u+1]=e:t.push(e),u+=2}}}(a),f.left===u?f.left=null:f.right=null,new o(this.tree._compare,a[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var n=this.tree.root;return n?n._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var r=e.length-2;r>=0;--r)e[r+1]===e[r].right&&(++t,e[r].left&&(t+=e[r].left._count));return t},enumerable:!0}),h.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),h.update=function(t){var n=this._stack;if(0===n.length)throw new Error("Can't update empty node!");var r=new Array(n.length),i=n[n.length-1];r[r.length-1]=new e(i._color,i.key,t,i.left,i.right,i._count);for(var a=n.length-2;a>=0;--a)r[a]=(i=n[a]).left===n[a+1]?new e(i._color,i.key,i.value,r[a+1],i.right,i._count):new e(i._color,i.key,i.value,i.left,r[a+1],i._count);return new o(this.tree._compare,r[0])},h.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},7889:function(t,e,n){t.exports=n(1396)},1396:function(t,e){var n,r,i;(function(){var o,a,s,u,l,c,h,d,f,p,v,g,y,m,b;s=Math.floor,p=Math.min,a=function(t,e){return t<e?-1:t>e?1:0},f=function(t,e,n,r,i){var o;if(null==n&&(n=0),null==i&&(i=a),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)i(e,t[o=s((n+r)/2)])<0?r=o:n=o+1;return[].splice.apply(t,[n,n-n].concat(e)),e},c=function(t,e,n){return null==n&&(n=a),t.push(e),m(t,0,t.length-1,n)},l=function(t,e){var n,r;return null==e&&(e=a),n=t.pop(),t.length?(r=t[0],t[0]=n,b(t,0,e)):r=n,r},d=function(t,e,n){var r;return null==n&&(n=a),r=t[0],t[0]=e,b(t,0,n),r},h=function(t,e,n){var r;return null==n&&(n=a),t.length&&n(t[0],e)<0&&(e=(r=[t[0],e])[0],t[0]=r[1],b(t,0,n)),e},u=function(t,e){var n,r,i,o,u;for(null==e&&(e=a),o=[],n=0,r=(i=(function(){u=[];for(var e=0,n=s(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)u.push(e);return u}).apply(this).reverse()).length;n<r;n++)o.push(b(t,i[n],e));return o},y=function(t,e,n){var r;if(null==n&&(n=a),-1!==(r=t.indexOf(e)))return m(t,0,r,n),b(t,r,n)},v=function(t,e,n){var r,i,o,s;if(null==n&&(n=a),!(r=t.slice(0,e)).length)return r;for(u(r,n),i=0,o=(s=t.slice(e)).length;i<o;i++)h(r,s[i],n);return r.sort(n).reverse()},g=function(t,e,n){var r,i,o,s,c,h,d,v,g;if(null==n&&(n=a),10*e<=t.length){if(!(o=t.slice(0,e).sort(n)).length)return o;for(i=o[o.length-1],s=0,h=(d=t.slice(e)).length;s<h;s++)n(r=d[s],i)<0&&(f(o,r,0,null,n),o.pop(),i=o[o.length-1]);return o}for(u(t,n),g=[],c=0,v=p(e,t.length);0<=v?c<v:c>v;0<=v?++c:--c)g.push(l(t,n));return g},m=function(t,e,n,r){var i,o,s;for(null==r&&(r=a),i=t[n];n>e&&r(i,o=t[s=n-1>>1])<0;)t[n]=o,n=s;return t[n]=i},b=function(t,e,n){var r,i,o,s,u;for(null==n&&(n=a),i=t.length,u=e,o=t[e],r=2*e+1;r<i;)(s=r+1)<i&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],r=2*(e=r)+1;return t[e]=o,m(t,u,e,n)},o=function(){function t(t){this.cmp=null!=t?t:a,this.nodes=[]}return t.push=c,t.pop=l,t.replace=d,t.pushpop=h,t.heapify=u,t.updateItem=y,t.nlargest=v,t.nsmallest=g,t.prototype.push=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pop=function(){return l(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return d(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return h(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return u(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return y(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),r=[],void 0===(i="function"==typeof(n=function(){return o})?n.apply(e,r):n)||(t.exports=i)}).call(this)},4173:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},l=o.push,c=o.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,v=p.call(Object),g={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},m=function(t){return null!=t&&t===t.window},b=r.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in _)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var k=function t(e,n){return new t.fn.init(e,n)};function S(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!y(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}k.fn=k.prototype={jquery:"3.6.0",constructor:k,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=k.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return k.each(this,t)},map:function(t){return this.pushStack(k.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(k.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[e]=k.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},k.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t)||(e=a(t))&&("function"!=typeof(n=f.call(e,"constructor")&&e.constructor)||p.call(n)!==v))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(S(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?k.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(S(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return u(a)},guid:1,support:g}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){h["[object "+e+"]"]=e.toLowerCase()});var E=function(t){var e,n,r,i,o,a,s,u,l,c,h,d,f,p,v,g,y,m,b,_="sizzle"+1*new Date,w=t.document,x=0,k=0,S=ut(),E=ut(),C=ut(),T=ut(),P=function(t,e){return t===e&&(h=!0),0},A={}.hasOwnProperty,D=[],O=D.pop,M=D.push,I=D.push,L=D.slice,N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\[[\\x20\\t\\r\\n\\f]*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",z=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),q=new RegExp(F+"|>"),W=new RegExp(z),Y=new RegExp("^"+j+"$"),K={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){d()},at=_t(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(D=L.call(w.childNodes),w.childNodes)}catch(Et){I={apply:D.length?function(t,e){M.apply(t,L.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function st(t,e,r,i){var o,s,l,c,h,p,y,m=e&&e.ownerDocument,w=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return r;if(!i&&(d(e),e=e||f,v)){if(11!==w&&(h=J.exec(t)))if(o=h[1]){if(9===w){if(!(l=e.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&b(e,l)&&l.id===o)return r.push(l),r}else{if(h[2])return I.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return I.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!T[t+" "]&&(!g||!g.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(y=t,m=e,1===w&&(q.test(t)||H.test(t))){for((m=tt.test(t)&&yt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=_)),s=(p=a(t)).length;s--;)p[s]=(c?"#"+c:":scope")+" "+bt(p[s]);y=p.join(",")}try{return I.apply(r,m.querySelectorAll(y)),r}catch(x){T(t,!0)}finally{c===_&&e.removeAttribute("id")}}}return u(t.replace(G,"$1"),e,r,i)}function ut(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function lt(t){return t[_]=!0,t}function ct(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(Et){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function dt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function vt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return lt(function(e){return e=+e,lt(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!X.test(t&&t.namespaceURI||e&&e.nodeName||"HTML")},d=st.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:w;return a!=f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,v=!o(f),w!=f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.scope=ct(function(t){return p.appendChild(t).appendChild(f.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),n.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ct(function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=$.test(f.getElementsByClassName),n.getById=ct(function(t){return p.appendChild(t).id=_,!f.getElementsByName||!f.getElementsByName(_).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&v){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&v)return e.getElementsByClassName(t)},y=[],g=[],(n.qsa=$.test(f.querySelectorAll))&&(ct(function(t){var e;p.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+R+")"),t.querySelectorAll("[id~="+_+"-]").length||g.push("~="),(e=f.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=$.test(m=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ct(function(t){n.disconnectedMatch=m.call(t,"*"),m.call(t,"[s!='']:x"),y.push("!=",z)}),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),e=$.test(p.compareDocumentPosition),b=e||$.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==f||t.ownerDocument==w&&b(w,t)?-1:e==f||e.ownerDocument==w&&b(w,e)?1:c?N(c,t)-N(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t==f?-1:e==f?1:i?-1:o?1:c?N(c,t)-N(c,e):0;if(i===o)return dt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?dt(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},f):f},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&v&&!T[e+" "]&&(!y||!y.test(e))&&(!g||!g.test(e)))try{var r=m.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(Et){T(e,!0)}return st(e,f,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=f&&d(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=f&&d(t);var i=r.attrHandle[e.toLowerCase()],o=i&&A.call(r.attrHandle,e.toLowerCase())?i(t,e,!v):void 0;return void 0!==o?o:n.attributes||!v?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(rt,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(P),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return c=null,t},i=st.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=st.selectors={cacheLength:50,createPseudo:lt,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+F+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(V," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,d,f,p,v=o!==a?"nextSibling":"previousSibling",g=e.parentNode,y=s&&e.nodeName.toLowerCase(),m=!u&&!s,b=!1;if(g){if(o){for(;v;){for(d=e;d=d[v];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;p=v="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&m){for(b=(f=(l=(c=(h=(d=g)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1])&&l[2],d=f&&g.childNodes[f];d=++f&&d&&d[v]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){c[t]=[x,f,b];break}}else if(m&&(b=f=(l=(c=(h=(d=e)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1]),!1===b)for(;(d=++f&&d&&d[v]||(b=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(m&&((c=(h=d[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[x,b]),d!==e)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return i[_]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?lt(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=N(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:lt(function(t){var e=[],n=[],r=s(t.replace(G,"$1"));return r[_]?lt(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:lt(function(t){return function(e){return st(t,e).length>0}}),contains:lt(function(t){return t=t.replace(et,nt),function(e){return(e.textContent||i(e)).indexOf(t)>-1}}),lang:lt(function(t){return Y.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=v?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:vt(!1),disabled:vt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t}),gt:gt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function mt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function _t(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=k++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var l,c,h,d=[x,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(c=(h=e[_]||(e[_]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((l=c[o])&&l[0]===x&&l[1]===s)return d[2]=l[2];if(c[o]=d,d[2]=t(e,n,u))return!0}return!1}}function wt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function xt(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),l&&e.push(s)));return a}function kt(t,e,n,r,i,o){return r&&!r[_]&&(r=kt(r)),i&&!i[_]&&(i=kt(i,o)),lt(function(o,a,s,u){var l,c,h,d=[],f=[],p=a.length,v=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)st(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),g=!t||!o&&e?v:xt(v,d,t,s,u),y=n?i||(o?t:p||r)?[]:a:g;if(n&&n(g,y,s,u),r)for(l=xt(y,f),r(l,[],s,u),c=l.length;c--;)(h=l[c])&&(y[f[c]]=!(g[f[c]]=h));if(o){if(i||t){if(i){for(l=[],c=y.length;c--;)(h=y[c])&&l.push(g[c]=h);i(null,y=[],l,u)}for(c=y.length;c--;)(h=y[c])&&(l=i?N(o,h):d[c])>-1&&(o[l]=!(a[l]=h))}}else y=xt(y===a?y.splice(p,y.length):y),i?i(null,a,y,u):I.apply(a,y)})}function St(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],u=a?1:0,c=_t(function(t){return t===e},s,!0),h=_t(function(t){return N(e,t)>-1},s,!0),d=[function(t,n,r){var i=!a&&(r||n!==l)||((e=n).nodeType?c(t,n,r):h(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])d=[_t(wt(d),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[_]){for(i=++u;i<o&&!r.relative[t[i].type];i++);return kt(u>1&&wt(d),u>1&&bt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(G,"$1"),n,u<i&&St(t.slice(u,i)),i<o&&St(t=t.slice(i)),i<o&&bt(t))}d.push(n)}return wt(d)}return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,a=st.tokenize=function(t,e){var n,i,o,a,s,u,l,c=E[t+" "];if(c)return e?0:c.slice(0);for(s=t,u=[],l=r.preFilter;s;){for(a in n&&!(i=U.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(G," ")}),s=s.slice(n.length)),r.filter)!(i=K[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):E(t,u).slice(0)},s=st.compile=function(t,e){var n,i=[],o=[],s=C[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=St(e[n]))[_]?i.push(s):o.push(s);(s=C(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,u,c){var h,p,g,y=0,m="0",b=o&&[],_=[],w=l,k=o||i&&r.find.TAG("*",c),S=x+=null==w?1:Math.random()||.1,E=k.length;for(c&&(l=a==f||a||c);m!==E&&null!=(h=k[m]);m++){if(i&&h){for(p=0,a||h.ownerDocument==f||(d(h),s=!v);g=t[p++];)if(g(h,a||f,s)){u.push(h);break}c&&(x=S)}n&&((h=!g&&h)&&y--,o&&b.push(h))}if(y+=m,n&&m!==y){for(p=0;g=e[p++];)g(b,_,a,s);if(o){if(y>0)for(;m--;)b[m]||_[m]||(_[m]=O.call(u));_=xt(_)}I.apply(u,_),c&&!o&&_.length>0&&y+e.length>1&&st.uniqueSort(u)}return c&&(x=S,l=w),b};return n?lt(o):o}(o,i))).selector=t}return s},u=st.select=function(t,e,n,i){var o,u,l,c,h,d="function"==typeof t&&t,f=!i&&a(t=d.selector||t);if(n=n||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&v&&r.relative[u[1].type]){if(!(e=(r.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=K.needsContext.test(t)?0:u.length;o--&&!r.relative[c=(l=u[o]).type];)if((h=r.find[c])&&(i=h(l.matches[0].replace(et,nt),tt.test(u[0].type)&&yt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&bt(u)))return I.apply(n,i),n;break}}return(d||s(t,f))(i,e,!v,n,!e||tt.test(t)&&yt(e.parentNode)||e),n},n.sortStable=_.split("").sort(P).join("")===_,n.detectDuplicates=!!h,d(),n.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ht(R,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),st}(r);k.find=E,(k.expr=E.selectors)[":"]=k.expr.pseudos,k.uniqueSort=k.unique=E.uniqueSort,k.text=E.getText,k.isXMLDoc=E.isXML,k.contains=E.contains,k.escapeSelector=E.escape;var C=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&k(t).is(n))break;r.push(t)}return r},T=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},P=k.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,n){return y(e)?k.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?k.grep(t,function(t){return t===e!==n}):"string"!=typeof e?k.grep(t,function(t){return c.call(e,t)>-1!==n}):k.filter(e,t,n)}k.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?k.find.matchesSelector(r,t)?[r]:[]:k.find.matches(t,k.grep(e,function(t){return 1===t.nodeType}))},k.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(k(t).filter(function(){for(e=0;e<r;e++)if(k.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)k.find(t,i[e],n);return r>1?k.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&P.test(t)?k(t):t||[],!1).length}});var M,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:I.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(k.merge(this,k.parseHTML(r[1],(e=e instanceof k?e[0]:e)&&e.nodeType?e.ownerDocument||e:b,!0)),D.test(r[1])&&k.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(k):k.makeArray(t,this)}).prototype=k.fn,M=k(b);var L=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}k.fn.extend({has:function(t){var e=k(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(k.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&k(t);if(!P.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(k(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),k.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,n){return C(t,"parentNode",n)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,n){return C(t,"nextSibling",n)},prevUntil:function(t,e,n){return C(t,"previousSibling",n)},siblings:function(t){return T((t.parentNode||{}).firstChild,t)},children:function(t){return T(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(A(t,"template")&&(t=t.content||t),k.merge([],t.childNodes))}},function(t,e){k.fn[t]=function(n,r){var i=k.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=k.filter(r,i)),this.length>1&&(N[t]||k.uniqueSort(i),L.test(t)&&i.reverse()),this.pushStack(i)}});var F=/[^\x20\t\r\n\f]+/g;function j(t){return t}function B(t){throw t}function z(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}k.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return k.each(t.match(F)||[],function(t,n){e[n]=!0}),e}(t):k.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){k.each(n,function(n,r){y(r)?t.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return k.each(arguments,function(t,e){for(var n;(n=k.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?k.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},k.extend({Deferred:function(t){var e=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return k.Deferred(function(n){k.each(e,function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,n,i){var o=0;function a(t,e,n,i){return function(){var s=this,u=arguments,l=function(){var r,l;if(!(t<o)){if((r=n.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");y(l=r&&("object"==typeof r||"function"==typeof r)&&r.then)?i?l.call(r,a(o,e,j,i),a(o,e,B,i)):(o++,l.call(r,a(o,e,j,i),a(o,e,B,i),a(o,e,j,e.notifyWith))):(n!==j&&(s=void 0,u=[r]),(i||e.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(r){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(r,c.stackTrace),t+1>=o&&(n!==B&&(s=void 0,u=[r]),e.rejectWith(s,u))}};t?c():(k.Deferred.getStackHook&&(c.stackTrace=k.Deferred.getStackHook()),r.setTimeout(c))}}return k.Deferred(function(r){e[0][3].add(a(0,r,y(i)?i:j,r.notifyWith)),e[1][3].add(a(0,r,y(t)?t:j)),e[2][3].add(a(0,r,y(n)?n:B))}).promise()},promise:function(t){return null!=t?k.extend(t,i):i}},o={};return k.each(e,function(t,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add(function(){n=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(z(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)z(i[n],a(n),o.reject);return o.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&V.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},k.readyException=function(t){r.setTimeout(function(){throw t})};var G=k.Deferred();function U(){b.removeEventListener("DOMContentLoaded",U),r.removeEventListener("load",U),k.ready()}k.fn.ready=function(t){return G.then(t).catch(function(t){k.readyException(t)}),this},k.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==t&&--k.readyWait>0||G.resolveWith(b,[k]))}}),k.ready.then=G.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(k.ready):(b.addEventListener("DOMContentLoaded",U),r.addEventListener("load",U));var H=function t(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===x(r))for(u in o=!0,r)t(e,n,u,r[u],!0,a,s);else if(void 0!==i&&(o=!0,y(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(t,e,n){return c.call(k(t),n)})),n))for(;u<l;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},q=/^-ms-/,W=/-([a-z])/g;function Y(t,e){return e.toUpperCase()}function K(t){return t.replace(q,"ms-").replace(W,Y)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=k.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(F)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||k.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!k.isEmptyObject(e)}};var Z=new Q,$=new Q,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(n)}catch(i){}$.set(t,e,n)}else n=void 0;return n}k.extend({hasData:function(t){return $.hasData(t)||Z.hasData(t)},data:function(t,e,n){return $.access(t,e,n)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,n){return Z.access(t,e,n)},_removeData:function(t,e){Z.remove(t,e)}}),k.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=$.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),et(o,r,i[r]));Z.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){$.set(this,t)}):H(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=$.get(o,t))||void 0!==(n=et(o,t))?n:void 0;this.each(function(){$.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){$.remove(this,t)})}}),k.extend({queue:function(t,e,n){var r;if(t)return r=Z.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=Z.access(t,e,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=k.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=k._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){k.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Z.get(t,n)||Z.access(t,n,{empty:k.Callbacks("once memory").add(function(){Z.remove(t,[e+"queue",n])})})}}),k.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?k.queue(this[0],t):void 0===e?this:this.each(function(){var n=k.queue(this,t,e);k._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&k.dequeue(this,t)})},dequeue:function(t){return this.each(function(){k.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Z.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],ot=b.documentElement,at=function(t){return k.contains(t.ownerDocument,t)},st={composed:!0};ot.getRootNode&&(at=function(t){return k.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===k.css(t,"display")};function lt(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(t,e,"")},u=s(),l=n&&n[3]||(k.cssNumber[e]?"":"px"),c=t.nodeType&&(k.cssNumber[e]||"px"!==l&&+u)&&rt.exec(k.css(t,e));if(c&&c[3]!==l){for(l=l||c[3],c=+(u/=2)||1;a--;)k.style(t,e,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;k.style(t,e,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ct={};function ht(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=k.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function dt(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=Z.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ut(r)&&(i[o]=ht(r))):"none"!==n&&(i[o]="none",Z.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}k.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ut(this)?k(this).show():k(this).hide()})}});var ft,pt,vt=/^(?:checkbox|radio)$/i,gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i;ft=b.createDocumentFragment().appendChild(b.createElement("div")),(pt=b.createElement("input")).setAttribute("type","radio"),pt.setAttribute("checked","checked"),pt.setAttribute("name","t"),ft.appendChild(pt),g.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue,ft.innerHTML="<option></option>",g.option=!!ft.lastChild;var mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?k.merge([t],n):n}function _t(t,e){for(var n=0,r=t.length;n<r;n++)Z.set(t[n],"globalEval",!e||Z.get(e[n],"globalEval"))}mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td,g.option||(mt.optgroup=mt.option=[1,"<select multiple='multiple'>","</select>"]);var wt=/<|&#?\w+;/;function xt(t,e,n,r,i){for(var o,a,s,u,l,c,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===x(o))k.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(gt.exec(o)||["",""])[1].toLowerCase(),a.innerHTML=(u=mt[s]||mt._default)[1]+k.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;k.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(r&&k.inArray(o,r)>-1)i&&i.push(o);else if(l=at(o),a=bt(h.appendChild(o),"script"),l&&_t(a),n)for(c=0;o=a[c++];)yt.test(o.type||"")&&n.push(o);return h}var kt=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function Et(){return!1}function Ct(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function Tt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Tt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Et;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return k().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),t.each(function(){k.event.add(this,e,i,r,n)})}function Pt(t,e,n){n?(Z.set(t,e,!1),k.event.add(t,e,{namespace:!1,handler:function(t){var r,i,o=Z.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(k.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=s.call(arguments),Z.set(this,e,o),r=n(this,e),this[e](),o!==(i=Z.get(this,e))||r?Z.set(this,e,!1):i={},o!==i)return t.stopImmediatePropagation(),t.preventDefault(),i&&i.value}else o.length&&(Z.set(this,e,{value:k.event.trigger(k.extend(o[0],k.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Z.get(t,e)&&k.event.add(t,e,St)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,h,d,f,p,v,g=Z.get(t);if(X(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ot,i),n.guid||(n.guid=k.guid++),(u=g.events)||(u=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(e){return void 0!==k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(F)||[""]).length;l--;)f=v=(s=kt.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=k.event.special[f]||{},h=k.event.special[f=(i?h.delegateType:h.bindType)||f]||{},c=k.extend({type:f,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[f])||((d=u[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(f,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),k.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,h,d,f,p,v,g=Z.hasData(t)&&Z.get(t);if(g&&(u=g.events)){for(l=(e=(e||"").match(F)||[""]).length;l--;)if(f=v=(s=kt.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=k.event.special[f]||{},d=u[f=(r?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&v!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||k.removeEvent(t,f,g.handle),delete u[f])}else for(f in u)k.event.remove(t,f+e[l],n,r,!0);k.isEmptyObject(u)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),u=k.event.fix(t),l=(Z.get(this,"events")||Object.create(null))[u.type]||[],c=k.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=k.event.handlers.call(this,u,l),e=0;(i=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?k(i,this).index(l)>-1:k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<e.length&&s.push({elem:l,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[k.expando]?t:new k.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return vt.test(e.type)&&e.click&&A(e,"input")&&Pt(e,"click",St),!1},trigger:function(t){var e=this||t;return vt.test(e.type)&&e.click&&A(e,"input")&&Pt(e,"click"),!0},_default:function(t){var e=t.target;return vt.test(e.type)&&e.click&&A(e,"input")&&Z.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},k.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},(k.Event=function(t,e){if(!(this instanceof k.Event))return new k.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:Et,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&k.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[k.expando]=!0}).prototype={constructor:k.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(t,e){k.event.special[t]={setup:function(){return Pt(this,t,Ct),!1},trigger:function(){return Pt(this,t),!0},_default:function(){return!0},delegateType:e}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){k.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||k.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),k.fn.extend({on:function(t,e,n,r){return Tt(this,t,e,n,r)},one:function(t,e,n,r){return Tt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,k(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Et),this.each(function(){k.event.remove(this,t,n,e)})}});var At=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&k(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Nt(t,e){var n,r,i,o,a,s;if(1===e.nodeType){if(Z.hasData(t)&&(s=Z.get(t).events))for(i in Z.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)k.event.add(e,i,s[i][n]);$.hasData(t)&&(o=$.access(t),a=k.extend({},o),$.set(e,a))}}function Rt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&vt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ft(t,e,n,r){e=u(e);var i,o,a,s,l,c,h=0,d=t.length,f=d-1,p=e[0],v=y(p);if(v||d>1&&"string"==typeof p&&!g.checkClone&&Dt.test(p))return t.each(function(i){var o=t.eq(i);v&&(e[0]=p.call(this,i,o.html())),Ft(o,e,n,r)});if(d&&(o=(i=xt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=k.map(bt(i,"script"),It)).length;h<d;h++)l=i,h!==f&&(l=k.clone(l,!0,!0),s&&k.merge(a,bt(l,"script"))),n.call(t[h],l,h);if(s)for(c=a[a.length-1].ownerDocument,k.map(a,Lt),h=0;h<s;h++)yt.test((l=a[h]).type||"")&&!Z.access(l,"globalEval")&&k.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?k._evalUrl&&!l.noModule&&k._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):w(l.textContent.replace(Ot,""),l,c))}return t}function jt(t,e,n){for(var r,i=e?k.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(bt(r)),r.parentNode&&(n&&at(r)&&_t(bt(r,"script")),r.parentNode.removeChild(r));return t}k.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=at(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||k.isXMLDoc(t)))for(a=bt(s),r=0,i=(o=bt(t)).length;r<i;r++)Rt(o[r],a[r]);if(e)if(n)for(o=o||bt(t),a=a||bt(s),r=0,i=o.length;r<i;r++)Nt(o[r],a[r]);else Nt(t,s);return(a=bt(s,"script")).length>0&&_t(a,!u&&bt(t,"script")),s},cleanData:function(t){for(var e,n,r,i=k.event.special,o=0;void 0!==(n=t[o]);o++)if(X(n)){if(e=n[Z.expando]){if(e.events)for(r in e.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,e.handle);n[Z.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),k.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return H(this,function(t){return void 0===t?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ft(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)})},prepend:function(){return Ft(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(k.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return k.clone(this,t,e)})},html:function(t){return H(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!mt[(gt.exec(t)||["",""])[1].toLowerCase()]){t=k.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(k.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,function(e){var n=this.parentNode;k.inArray(this,t)<0&&(k.cleanData(bt(this)),n&&n.replaceChild(e,this))},t)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){k.fn[t]=function(t){for(var n,r=[],i=k(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),k(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}});var Bt=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Vt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Gt=new RegExp(it.join("|"),"i");function Ut(t,e,n){var r,i,o,a,s=t.style;return(n=n||zt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||at(t)||(a=k.style(t,e)),!g.pixelBoxStyles()&&Bt.test(a)&&Gt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Ht(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(l).appendChild(c);var t=r.getComputedStyle(c);n="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),i=36===e(t.width),c.style.position="absolute",o=12===e(c.offsetWidth/3),ot.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,a,s,u,l=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,k.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==s&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",ot.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,ot.removeChild(t)),s}}))}();var qt=["Webkit","Moz","ms"],Wt=b.createElement("div").style,Yt={};function Kt(t){return k.cssProps[t]||Yt[t]||(t in Wt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=qt.length;n--;)if((t=qt[n]+e)in Wt)return t}(t)||t)}var Xt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Zt={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,n){var r=rt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function te(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(t,n+it[a],!0,i)),r?("content"===n&&(u-=k.css(t,"padding"+it[a],!0,i)),"margin"!==n&&(u-=k.css(t,"border"+it[a]+"Width",!0,i))):(u+=k.css(t,"padding"+it[a],!0,i),"padding"!==n?u+=k.css(t,"border"+it[a]+"Width",!0,i):s+=k.css(t,"border"+it[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))||0),u}function ee(t,e,n){var r=zt(t),i=(!g.boxSizingReliable()||n)&&"border-box"===k.css(t,"boxSizing",!1,r),o=i,a=Ut(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Bt.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&A(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===k.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===k.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+te(t,e,n||(i?"border":"content"),o,r,a)+"px"}function ne(t,e,n,r,i){return new ne.prototype.init(t,e,n,r,i)}k.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ut(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=K(e),u=Qt.test(e),l=t.style;if(u||(e=Kt(s)),a=k.cssHooks[e]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];"string"==(o=typeof n)&&(i=rt.exec(n))&&i[1]&&(n=lt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var i,o,a,s=K(e);return Qt.test(e)||(e=Kt(s)),(a=k.cssHooks[e]||k.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Ut(t,e,r)),"normal"===i&&e in $t&&(i=$t[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(t,e){k.cssHooks[e]={get:function(t,n,r){if(n)return!Xt.test(k.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ee(t,e,r):Vt(t,Zt,function(){return ee(t,e,r)})},set:function(t,n,r){var i,o=zt(t),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===k.css(t,"boxSizing",!1,o),u=r?te(t,e,r,s,o):0;return s&&a&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-te(t,e,"border",!1,o)-.5)),u&&(i=rt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=k.css(t,e)),Jt(0,n,u)}}}),k.cssHooks.marginLeft=Ht(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Ut(t,"marginLeft"))||t.getBoundingClientRect().left-Vt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(t,e){k.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+it[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(k.cssHooks[t+e].set=Jt)}),k.fn.extend({css:function(t,e){return H(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=zt(t),i=e.length;a<i;a++)o[e[a]]=k.css(t,e[a],!1,r);return o}return void 0!==n?k.style(t,e,n):k.css(t,e)},t,e,arguments.length>1)}}),k.Tween=ne,(ne.prototype={constructor:ne,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||k.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var t=ne.propHooks[this.prop];return t&&t.get?t.get(this):ne.propHooks._default.get(this)},run:function(t){var e,n=ne.propHooks[this.prop];return this.pos=e=this.options.duration?k.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ne.propHooks._default.set(this),this}}).init.prototype=ne.prototype,(ne.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=k.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){k.fx.step[t.prop]?k.fx.step[t.prop](t):1!==t.elem.nodeType||!k.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:k.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ne.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},k.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},(k.fx=ne.prototype.init).step={};var re,ie,oe=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function se(){ie&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(se):r.setTimeout(se,k.fx.interval),k.fx.tick())}function ue(){return r.setTimeout(function(){re=void 0}),re=Date.now()}function le(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=it[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ce(t,e,n){for(var r,i=(he.tweeners[e]||[]).concat(he.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function he(t,e,n){var r,i,o=0,a=he.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=re||ue(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(t,[l,r,n]),r<1&&a?n:(a||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||ue(),duration:n.duration,tweens:[],createTween:function(e,n){var r=k.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=K(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=he.prefilters[o].call(l,t,c,l.opts))return y(r.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return k.map(c,ce,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(F);for(var n,r=0,i=t.length;r<i;r++)(he.tweeners[n=t[r]]=he.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,l,c,h="width"in e||"height"in e,d=this,f={},p=t.style,v=t.nodeType&&ut(t),g=Z.get(t,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,k.queue(t,"fx").length||a.empty.fire()})})),e)if(oe.test(i=e[r])){if(delete e[r],o=o||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;v=!0}f[r]=g&&g[r]||k.style(t,r)}if((u=!k.isEmptyObject(e))||!k.isEmptyObject(f))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=Z.get(t,"display")),"none"===(c=k.css(t,"display"))&&(l?c=l:(dt([t],!0),l=t.style.display||l,c=k.css(t,"display"),dt([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(t,"float")&&(u||(d.done(function(){p.display=l}),null==l&&(l="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,f)u||(g?"hidden"in g&&(v=g.hidden):g=Z.access(t,"fxshow",{display:l}),o&&(g.hidden=!v),v&&dt([t],!0),d.done(function(){for(r in v||dt([t]),Z.remove(t,"fxshow"),f)k.style(t,r,f[r])})),u=ce(v?g[r]:0,r,d),r in g||(g[r]=u.start,v&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),k.speed=function(t,e,n){var r=t&&"object"==typeof t?k.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in k.fx.speeds?k.fx.speeds[r.duration]:k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=he(this,k.extend({},t),o);(i||Z.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=k.timers,a=Z.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ae.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||k.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Z.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=k.timers,a=r?r.length:0;for(n.finish=!0,k.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),k.each(["toggle","show","hide"],function(t,e){var n=k.fn[e];k.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(le(e,!0),t,r,i)}}),k.each({slideDown:le("show"),slideUp:le("hide"),slideToggle:le("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){k.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),k.timers=[],k.fx.tick=function(){var t,e=0,n=k.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||k.fx.stop(),re=void 0},k.fx.timer=function(t){k.timers.push(t),k.fx.start()},k.fx.interval=13,k.fx.start=function(){ie||(ie=!0,se())},k.fx.stop=function(){ie=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(t,e){return t=k.fx&&k.fx.speeds[t]||t,this.queue(e=e||"fx",function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}})},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var de,fe=k.expr.attrHandle;k.fn.extend({attr:function(t,e){return H(this,k.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){k.removeAttr(this,t)})}}),k.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?k.prop(t,e,n):(1===o&&k.isXMLDoc(t)||(i=k.attrHooks[e.toLowerCase()]||(k.expr.match.bool.test(e)?de:void 0)),void 0!==n?null===n?void k.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=k.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&A(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(F);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),de={set:function(t,e,n){return!1===e?k.removeAttr(t,n):t.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(t,e){var n=fe[e]||k.find.attr;fe[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=fe[a],fe[a]=i,i=null!=n(t,e,r)?a:null,fe[a]=o),i}});var pe=/^(?:input|select|textarea|button)$/i,ve=/^(?:a|area)$/i;function ge(t){return(t.match(F)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}k.fn.extend({prop:function(t,e){return H(this,k.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[k.propFix[t]||t]})}}),k.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(t)||(i=k.propHooks[e=k.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=k.find.attr(t,"tabindex");return e?parseInt(e,10):pe.test(t.nodeName)||ve.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(k.propHooks.selected={get:function(t){return null},set:function(t){}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each(function(e){k(this).addClass(t.call(this,e,ye(this)))});if((e=me(t)).length)for(;n=this[u++];)if(i=ye(n),r=1===n.nodeType&&" "+ge(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ge(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each(function(e){k(this).removeClass(t.call(this,e,ye(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;n=this[u++];)if(i=ye(n),r=1===n.nodeType&&" "+ge(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=ge(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):y(t)?this.each(function(n){k(this).toggleClass(t.call(this,n,ye(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=k(this),a=me(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ye(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ge(ye(n))+" ").indexOf(e)>-1)return!0;return!1}});var be=/\r/g;k.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,k(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,function(t){return null==t?"":t+""})),(e=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(be,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(t){var e=k.find.attr(t,"value");return null!=e?e:ge(k.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(e=k(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=k.makeArray(e),a=i.length;a--;)((r=i[a]).selected=k.inArray(k.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=k.inArray(k(t).val(),e)>-1}},g.checkOn||(k.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in r;var _e=/^(?:focusinfocus|focusoutblur)$/,we=function(t){t.stopPropagation()};k.extend(k.event,{trigger:function(t,e,n,i){var o,a,s,u,l,c,h,d,p=[n||b],v=f.call(t,"type")?t.type:t,g=f.call(t,"namespace")?t.namespace.split("."):[];if(a=d=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!_e.test(v+k.event.triggered)&&(v.indexOf(".")>-1&&(g=v.split("."),v=g.shift(),g.sort()),l=v.indexOf(":")<0&&"on"+v,(t=t[k.expando]?t:new k.Event(v,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:k.makeArray(e,[t]),h=k.event.special[v]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!m(n)){for(_e.test((u=h.delegateType||v)+v)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||b)&&p.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)d=a,t.type=o>1?u:h.bindType||v,(c=(Z.get(a,"events")||Object.create(null))[t.type]&&Z.get(a,"handle"))&&c.apply(a,e),(c=l&&a[l])&&c.apply&&X(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!X(n)||l&&y(n[v])&&!m(n)&&((s=n[l])&&(n[l]=null),k.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,we),n[v](),t.isPropagationStopped()&&d.removeEventListener(v,we),k.event.triggered=void 0,s&&(n[l]=s)),t.result}},simulate:function(t,e,n){var r=k.extend(new k.Event,n,{type:t,isSimulated:!0});k.event.trigger(r,null,e)}}),k.fn.extend({trigger:function(t,e){return this.each(function(){k.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return k.event.trigger(t,e,n,!0)}}),g.focusin||k.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){k.event.simulate(e,t.target,k.event.fix(t))};k.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=Z.access(r,e);i||r.addEventListener(t,n,!0),Z.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Z.access(r,e)-1;i?Z.access(r,e,i):(r.removeEventListener(t,n,!0),Z.remove(r,e))}}});var xe=r.location,ke={guid:Date.now()},Se=/\?/;k.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(i){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||k.error("Invalid XML: "+(n?k.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Ee=/\[\]$/,Ce=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function Ae(t,e,n,r){var i;if(Array.isArray(e))k.each(e,function(e,i){n||Ee.test(t)?r(t,i):Ae(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==x(e))r(t,e);else for(i in e)Ae(t+"["+i+"]",e[i],n,r)}k.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!k.isPlainObject(t))k.each(t,function(){i(this.name,this.value)});else for(n in t)Ae(n,t[n],e,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=k.prop(this,"elements");return t?k.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!k(this).is(":disabled")&&Pe.test(this.nodeName)&&!Te.test(t)&&(this.checked||!vt.test(t))}).map(function(t,e){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(t){return{name:e.name,value:t.replace(Ce,"\r\n")}}):{name:e.name,value:n.replace(Ce,"\r\n")}}).get()}});var De=/%20/g,Oe=/#.*$/,Me=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:GET|HEAD)$/,Ne=/^\/\//,Re={},Fe={},je="*/".concat("*"),Be=b.createElement("a");function ze(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(F)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ve(t,e,n,r){var i={},o=t===Fe;function a(s){var u;return i[s]=!0,k.each(t[s]||[],function(t,s){var l=s(e,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(e.dataTypes.unshift(l),a(l),!1)}),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Ge(t,e){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&k.extend(!0,t,r),t}Be.href=xe.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,k.ajaxSettings),e):Ge(k.ajaxSettings,t)},ajaxPrefilter:ze(Re),ajaxTransport:ze(Fe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var n,i,o,a,s,u,l,c,h,d,f=k.ajaxSetup({},e=e||{}),p=f.context||f,v=f.context&&(p.nodeType||p.jquery)?k(p):k.event,g=k.Deferred(),y=k.Callbacks("once memory"),m=f.statusCode||{},_={},w={},x="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(l){if(!a)for(a={};e=Ie.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==l&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)S.always(t[S.status]);else for(e in t)m[e]=[m[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),E(0,e),this}};if(g.promise(S),f.url=((t||f.url||xe.href)+"").replace(Ne,xe.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(F)||[""],null==f.crossDomain){u=b.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Be.protocol+"//"+Be.host!=u.protocol+"//"+u.host}catch(C){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=k.param(f.data,f.traditional)),Ve(Re,f,e,S),l)return S;for(h in(c=k.event&&f.global)&&0==k.active++&&k.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Le.test(f.type),i=f.url.replace(Oe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(De,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Se.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Me,"$1"),d=(Se.test(i)?"&":"?")+"_="+ke.guid+++d),f.url=i+d),f.ifModified&&(k.lastModified[i]&&S.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&S.setRequestHeader("If-None-Match",k.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+je+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,S,f)||l))return S.abort();if(x="abort",y.add(f.complete),S.done(f.success),S.fail(f.error),n=Ve(Fe,f,e,S)){if(S.readyState=1,c&&v.trigger("ajaxSend",[S,f]),l)return S;f.async&&f.timeout>0&&(s=r.setTimeout(function(){S.abort("timeout")},f.timeout));try{l=!1,n.send(_,E)}catch(C){if(l)throw C;E(-1,C)}}else E(-1,"No Transport");function E(t,e,a,u){var h,d,b,_,w,x=e;l||(l=!0,s&&r.clearTimeout(s),n=void 0,o=u||"",S.readyState=t>0?4:0,h=t>=200&&t<300||304===t,a&&(_=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(f,S,a)),!h&&k.inArray("script",f.dataTypes)>-1&&k.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),_=function(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(C){return{state:"parsererror",error:a?C:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(f,_,S,h),h?(f.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=w),(w=S.getResponseHeader("etag"))&&(k.etag[i]=w)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=_.state,d=_.data,h=!(b=_.error))):(b=x,!t&&x||(x="error",t<0&&(t=0))),S.status=t,S.statusText=(e||x)+"",h?g.resolveWith(p,[d,x,S]):g.rejectWith(p,[S,x,b]),S.statusCode(m),m=void 0,c&&v.trigger(h?"ajaxSuccess":"ajaxError",[S,f,h?d:b]),y.fireWith(p,[S,x]),c&&(v.trigger("ajaxComplete",[S,f]),--k.active||k.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return k.get(t,e,n,"json")},getScript:function(t,e){return k.get(t,void 0,e,"script")}}),k.each(["get","post"],function(t,e){k[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),k.ajax(k.extend({url:t,type:e,dataType:i,data:n,success:r},k.isPlainObject(t)&&t))}}),k.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),k._evalUrl=function(t,e,n){return k.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){k.globalEval(t,e,n)}})},k.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=k(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){k(this).wrapInner(t.call(this,e))}):this.each(function(){var e=k(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(n){k(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(t){return!k.expr.pseudos.visible(t)},k.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ue={0:200,1223:204},He=k.ajaxSettings.xhr();g.cors=!!He&&"withCredentials"in He,g.ajax=He=!!He,k.ajaxTransport(function(t){var e,n;if(g.cors||He&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ue[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout(function(){e&&n()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(u){if(e)throw u}},abort:function(){e&&e()}}}),k.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return k.globalEval(t),t}}}),k.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),k.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=k("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}});var qe,We=[],Ye=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||k.expando+"_"+ke.guid++;return this[t]=!0,t}}),k.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,a,s=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ye,"$1"+i):!1!==t.jsonp&&(t.url+=(Se.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||k.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always(function(){void 0===o?k(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,We.push(i)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=((qe=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),k.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=D.exec(t))?[e.createElement(i[1])]:(i=xt([t],e,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=ge(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&k.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?k("<div>").append(k.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l=k.css(t,"position"),c=k(t),h={};"static"===l&&(t.style.position="relative"),s=c.offset(),o=k.css(t,"top"),u=k.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,k.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):c.css(h)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===k.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=k(t).offset()).top+=k.css(t,"borderTopWidth",!0),i.left+=k.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-k.css(r,"marginTop",!0),left:e.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===k.css(t,"position");)t=t.offsetParent;return t||ot})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;k.fn[t]=function(r){return H(this,function(t,r,i){var o;if(m(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),k.each(["top","left"],function(t,e){k.cssHooks[e]=Ht(g.pixelPosition,function(t,n){if(n)return n=Ut(t,e),Bt.test(n)?k(t).position()[e]+"px":n})}),k.each({Height:"height",Width:"width"},function(t,e){k.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){k.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return H(this,function(e,n,i){var o;return m(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?k.css(e,n,s):k.style(e,n,i,s)},e,a?i:void 0,a)}})}),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){k.fn[e]=function(t){return this.on(e,t)}}),k.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){k.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});var Ke=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;k.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=s.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(s.call(arguments)))}).guid=t.guid=t.guid||k.guid++,i},k.holdReady=function(t){t?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=y,k.isWindow=m,k.camelCase=K,k.type=x,k.now=Date.now,k.isNumeric=function(t){var e=k.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},k.trim=function(t){return null==t?"":(t+"").replace(Ke,"")},void 0===(n=(function(){return k}).apply(e,[]))||(t.exports=n);var Xe=r.jQuery,Qe=r.$;return k.noConflict=function(t){return r.$===k&&(r.$=Qe),t&&r.jQuery===k&&(r.jQuery=Xe),k},void 0===i&&(r.jQuery=r.$=k),k})},5132:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var r=n(2458),i=r.glob.performance&&r.glob.performance.now?function(){return r.glob.performance.now()}:function(){return(new Date).getTime()};e.Animation=function(){function t(e,n){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=e,this.setLayers(n)}return t.prototype.setLayers=function(t){return this.layers=t?t.length>0?t:[t]:[],this},t.prototype.getLayers=function(){return this.layers},t.prototype.addLayer=function(t){var e,n=this.layers,r=n.length;for(e=0;e<r;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0},t.prototype.isRunning=function(){var e,n=t.animations,r=n.length;for(e=0;e<r;e++)if(n[e].id===this.id)return!0;return!1},t.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this),this},t.prototype.stop=function(){return t._removeAnimation(this),this},t.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,n=t.id,r=this.animations,i=r.length;for(e=0;e<i;e++)if(r[e].id===n){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,n,r,o,a,s,u,l={},c=this.animations;for(r=0;r<c.length;r++)if(e=(t=c[r]).layers,n=t.func,t._updateFrameObject(i()),a=e.length,!n||!1!==n.call(t,t.frame))for(o=0;o<a;o++)void 0!==(s=e[o])._id&&(l[s._id]=s);for(u in l)l.hasOwnProperty(u)&&l[u].draw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},t.animations=[],t.animIdCounter=0,t.animRunning=!1,t}()},3114:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;var o,a=n(9923),s=n(4138),u=n(2458),l=n(6207),c=n(8760),h=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||u.Konva.pixelRatio||function(){if(o)return o;var t=a.Util.createCanvasElement().getContext("2d");return o=(u.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return t.prototype.getContext=function(){return this.context},t.prototype.getPixelRatio=function(){return this.pixelRatio},t.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},t.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.setSize=function(t,e){this.setWidth(t||0),this.setHeight(e||0)},t.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(r){return a.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},t}();e.Canvas=h,l.Factory.addGetterSetter(h,"pixelRatio",void 0,c.getNumberValidator()),e.SceneCanvas=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.context=new s.SceneContext(n),n.setSize(e.width,e.height),n}return i(e,t),e}(h),e.HitCanvas=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.hitCanvas=!0,n.context=new s.HitContext(n),n.setSize(e.width,e.height),n}return i(e,t),e}(h)},687:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var o=n(9923),a=n(6207),s=n(6191),u=n(8760),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new o.Collection,e}return i(e,t),e.prototype.getChildren=function(t){if(!t)return this.children;var e=new o.Collection;return this.children.each(function(n){t(n)&&e.push(n)}),e},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new o.Collection,this},e.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new o.Collection,this},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var r=t[0];if(r.getParent())return r.moveTo(this),this;var i=this.children;return this._validateAdd(r),r._clearCaches(),r.index=i.length,r.parent=this,i.push(r),this._fire("add",{child:r}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return o.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},e.prototype._generalFind=function(t,e){var n=[];return this._descendants(function(r){var i=r._isMatch(t);return i&&n.push(r),!(!i||!e)}),o.Collection.toCollection(n)},e.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var n=this.children[e];if(t(n))return!0;if(n.hasChildren()&&n._descendants(t))return!0}return!1},e.prototype.toObject=function(){var t=s.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,r=0;r<n;r++)t.children.push(e[r].toObject());return t},e.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},e.prototype.clone=function(t){var e=s.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},e.prototype.getAllIntersections=function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},e.prototype._setChildrenIndices=function(){this.children.each(function(t,e){t.index=e})},e.prototype.drawScene=function(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas(),i=r&&r.getContext(),o=this._getCanvasCache(),a=o&&o.scene,s=r&&r.isCache;if(!this.isVisible()&&!s)return this;if(a){i.save();var u=this.getAbsoluteTransform(e).getMatrix();i.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(i),i.restore()}else this._drawChildren("drawScene",r,e);return this},e.prototype.drawHit=function(t,e){if(!this.shouldDrawHit(e))return this;var n=this.getLayer(),r=t||n&&n.hitCanvas,i=r&&r.getContext(),o=this._getCanvasCache();if(o&&o.hit){i.save();var a=this.getAbsoluteTransform(e).getMatrix();i.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",r,e);return this},e.prototype._drawChildren=function(t,e,n){var r=e&&e.getContext(),i=this.clipWidth(),o=this.clipHeight(),a=this.clipFunc(),s=i&&o||a,u=n===this;if(s){r.save();var l=this.getAbsoluteTransform(n),c=l.getMatrix();if(r.transform(c[0],c[1],c[2],c[3],c[4],c[5]),r.beginPath(),a)a.call(this,r,this);else{var h=this.clipX(),d=this.clipY();r.rect(h,d,i,o)}r.clip(),c=l.copy().invert().getMatrix(),r.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var f=!u&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;f&&(r.save(),r._applyGlobalCompositeOperation(this)),this.children.each(function(r){r[t](e,n)}),f&&r.restore(),s&&r.restore()},e.prototype.getClientRect=function(t){var e,n,r,i,o,a=(t=t||{}).skipTransform,s=t.relativeTo,u=this;this.children.each(function(o){if(o.visible()){var a=o.getClientRect({relativeTo:u,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===a.width&&0===a.height||(void 0===e?(e=a.x,n=a.y,r=a.x+a.width,i=a.y+a.height):(e=Math.min(e,a.x),n=Math.min(n,a.y),r=Math.max(r,a.x+a.width),i=Math.max(i,a.y+a.height)))}});for(var l=this.find("Shape"),c=!1,h=0;h<l.length;h++)if(l[h]._isVisible(this)){c=!0;break}return o=c&&void 0!==e?{x:e,y:n,width:r-e,height:i-n}:{x:0,y:0,width:0,height:0},a?o:this._transformedRect(o,s)},e}(s.Node);e.Container=l,a.Factory.addComponentsGetterSetter(l,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(l,"clipX",void 0,u.getNumberValidator()),a.Factory.addGetterSetter(l,"clipY",void 0,u.getNumberValidator()),a.Factory.addGetterSetter(l,"clipWidth",void 0,u.getNumberValidator()),a.Factory.addGetterSetter(l,"clipHeight",void 0,u.getNumberValidator()),a.Factory.addGetterSetter(l,"clipFunc"),o.Collection.mapMethods(l)},4138:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;var o=n(9923),a=n(2458),s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],u=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return t.prototype.fillShape=function(t){t.fillEnabled()&&this._fill(t)},t.prototype._fill=function(t){},t.prototype.strokeShape=function(t){t.hasStroke()&&this._stroke(t)},t.prototype._stroke=function(t){},t.prototype.fillStrokeShape=function(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))},t.prototype.getTrace=function(t){var e,n,r,i,a=this.traceArr,s=a.length,u="";for(e=0;e<s;e++)(r=(n=a[e]).method)?(i=n.args,u+=r,t?u+="()":o.Util._isArray(i[0])?u+="(["+i.join(",")+"])":u+="("+i.join(",")+")"):(u+=n.property,t||(u+="="+n.val)),u+=";";return u},t.prototype.clearTrace=function(){this.traceArr=[]},t.prototype._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},t.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},t.prototype._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},t.prototype._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},t.prototype._applyLineJoin=function(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)},t.prototype.setAttr=function(t,e){this._context[t]=e},t.prototype.arc=function(t,e,n,r,i,o){this._context.arc(t,e,n,r,i,o)},t.prototype.arcTo=function(t,e,n,r,i){this._context.arcTo(t,e,n,r,i)},t.prototype.beginPath=function(){this._context.beginPath()},t.prototype.bezierCurveTo=function(t,e,n,r,i,o){this._context.bezierCurveTo(t,e,n,r,i,o)},t.prototype.clearRect=function(t,e,n,r){this._context.clearRect(t,e,n,r)},t.prototype.clip=function(){this._context.clip()},t.prototype.closePath=function(){this._context.closePath()},t.prototype.createImageData=function(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0},t.prototype.createLinearGradient=function(t,e,n,r){return this._context.createLinearGradient(t,e,n,r)},t.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,r,i,o){return this._context.createRadialGradient(t,e,n,r,i,o)},t.prototype.drawImage=function(t,e,n,r,i,o,a,s,u){var l=arguments,c=this._context;3===l.length?c.drawImage(t,e,n):5===l.length?c.drawImage(t,e,n,r,i):9===l.length&&c.drawImage(t,e,n,r,i,o,a,s,u)},t.prototype.ellipse=function(t,e,n,r,i,o,a,s){this._context.ellipse(t,e,n,r,i,o,a,s)},t.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},t.prototype.fill=function(){this._context.fill()},t.prototype.fillRect=function(t,e,n,r){this._context.fillRect(t,e,n,r)},t.prototype.strokeRect=function(t,e,n,r){this._context.strokeRect(t,e,n,r)},t.prototype.fillText=function(t,e,n){this._context.fillText(t,e,n)},t.prototype.measureText=function(t){return this._context.measureText(t)},t.prototype.getImageData=function(t,e,n,r){return this._context.getImageData(t,e,n,r)},t.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},t.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},t.prototype.rect=function(t,e,n,r){this._context.rect(t,e,n,r)},t.prototype.putImageData=function(t,e,n){this._context.putImageData(t,e,n)},t.prototype.quadraticCurveTo=function(t,e,n,r){this._context.quadraticCurveTo(t,e,n,r)},t.prototype.restore=function(){this._context.restore()},t.prototype.rotate=function(t){this._context.rotate(t)},t.prototype.save=function(){this._context.save()},t.prototype.scale=function(t,e){this._context.scale(t,e)},t.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},t.prototype.getLineDash=function(){return this._context.getLineDash()},t.prototype.setTransform=function(t,e,n,r,i,o){this._context.setTransform(t,e,n,r,i,o)},t.prototype.stroke=function(){this._context.stroke()},t.prototype.strokeText=function(t,e,n,r){this._context.strokeText(t,e,n,r)},t.prototype.transform=function(t,e,n,r,i,o){this._context.transform(t,e,n,r,i,o)},t.prototype.translate=function(t,e){this._context.translate(t,e)},t.prototype._enableTrace=function(){var t,e,n=this,r=s.length,i=o.Util._simplifyArray,a=this.setAttr,u=function(t){var r,o=n[t];n[t]=function(){return e=i(Array.prototype.slice.call(arguments,0)),r=o.apply(n,arguments),n._trace({method:t,args:e}),r}};for(t=0;t<r;t++)u(s[t]);n.setAttr=function(){a.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}},t.prototype._applyGlobalCompositeOperation=function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)},t}();e.Context=u,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(t){Object.defineProperty(u.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}),e.SceneContext=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},e.prototype._fillPattern=function(t){var e=t.getFillPatternX(),n=t.getFillPatternY(),r=a.Konva.getAngle(t.getFillPatternRotation()),i=t.getFillPatternOffsetX(),o=t.getFillPatternOffsetY();t.getFillPatternScaleX(),t.getFillPatternScaleY(),(e||n)&&this.translate(e||0,n||0),r&&this.rotate(r),(i||o)&&this.translate(-1*i,-1*o),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fill=function(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var r=t.getFillPatternImage();if(r&&"pattern"===n)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}},e.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,n.x,n.y);if(r){for(var o=0;o<r.length;o+=2)i.addColorStop(r[o],r[o+1]);this.setAttr("strokeStyle",i)}},e.prototype._stroke=function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}},e.prototype._applyShadow=function(t){var e=o.Util,n=e.get(t.getShadowRGBA(),"black"),r=e.get(t.getShadowBlur(),5),i=e.get(t.getShadowOffset(),{x:0,y:0}),a=t.getAbsoluteScale(),s=this.canvas.getPixelRatio(),u=a.x*s,l=a.y*s;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",r*Math.min(Math.abs(u),Math.abs(l))),this.setAttr("shadowOffsetX",i.x*u),this.setAttr("shadowOffsetY",i.y*l)},e}(u),e.HitContext=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i="auto"===r?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(u)},2356:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;var r=n(2458),i=n(9923);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach(function(e){"dragging"===e.dragStatus&&(t=!0)}),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach(function(e){t=e.node}),t},_dragElements:new Map,_drag:function(t){var n=[];e.DD._dragElements.forEach(function(e,r){var o=e.node,a=o.getStage();a.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=i.Util._getFirstPointerId(t));var s=a._changedPointerPositions.find(function(t){return t.id===e.pointerId});if(s){if("dragging"!==e.dragStatus){var u=o.dragDistance();if(Math.max(Math.abs(s.x-e.startPointerPos.x),Math.abs(s.y-e.startPointerPos.y))<u)return;if(o.startDrag({evt:t}),!o.isDragging())return}o._setDragPosition(t,e),n.push(o)}}),n.forEach(function(e){e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)})},_endDragBefore:function(t){e.DD._dragElements.forEach(function(n,i){var o=n.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find(function(t){return t.id===n.pointerId})){"dragging"!==n.dragStatus&&"stopped"!==n.dragStatus||(e.DD.justDragged=!0,r.Konva.listenClickTap=!1,n.dragStatus="stopped");var a=n.node.getLayer()||n.node instanceof r.Konva.Stage&&n.node;a&&a.batchDraw()}})},_endDragAfter:function(t){e.DD._dragElements.forEach(function(n,r){"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(r)})}},r.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},6207:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;var r=n(9923),i=n(8760);e.Factory={addGetterSetter:function(t,n,r,i,o){e.Factory.addGetter(t,n,r),e.Factory.addSetter(t,n,i,o),e.Factory.addOverloadedGetterSetter(t,n)},addGetter:function(t,e,n){var i="get"+r.Util._capitalize(e);t.prototype[i]=t.prototype[i]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter:function(t,n,i,o){var a="set"+r.Util._capitalize(n);t.prototype[a]||e.Factory.overWriteSetter(t,n,i,o)},overWriteSetter:function(t,e,n,i){var o="set"+r.Util._capitalize(e);t.prototype[o]=function(t){return n&&null!=t&&(t=n.call(this,t,e)),this._setAttr(e,t),i&&i.call(this),this}},addComponentsGetterSetter:function(t,n,o,a,s){var u,l,c=o.length,h=r.Util._capitalize,d="get"+h(n),f="set"+h(n);t.prototype[d]=function(){var t={};for(u=0;u<c;u++)t[l=o[u]]=this.getAttr(n+h(l));return t};var p=i.getComponentValidator(o);t.prototype[f]=function(t){var e,r=this.attrs[n];for(e in a&&(t=a.call(this,t)),p&&p.call(this,t,n),t)t.hasOwnProperty(e)&&this._setAttr(n+h(e),t[e]);return this._fireChangeEvent(n,r,t),s&&s.call(this),this},e.Factory.addOverloadedGetterSetter(t,n)},addOverloadedGetterSetter:function(t,e){var n=r.Util._capitalize(e),i="set"+n,o="get"+n;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(t,n,i,o){r.Util.error("Adding deprecated "+n);var a="get"+r.Util._capitalize(n),s=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[a]=function(){r.Util.error(s);var t=this.attrs[n];return void 0===t?i:t},e.Factory.addSetter(t,n,o,function(){r.Util.error(s)}),e.Factory.addOverloadedGetterSetter(t,n)},backCompat:function(t,e){r.Util.each(e,function(e,n){var i=t.prototype[n],o="get"+r.Util._capitalize(e),a="set"+r.Util._capitalize(e);function s(){i.apply(this,arguments),r.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=s,t.prototype[o]=s,t.prototype[a]=s})},afterSetFilter:function(){this._filterUpToDate=!1}}},9725:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;var o=n(9923),a=n(8909),s=n(2458),u=function(t){function e(e){var n=t.call(this,e)||this;return n.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),n}return i(e,t),e}(a.Layer);e.FastLayer=u,u.prototype.nodeType="FastLayer",s._registerNode(u),o.Collection.mapMethods(u)},2458:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e._NODES_REGISTRY=e.Konva=e.glob=e._parseUA=void 0;var n=Math.PI/180,r=function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)};e._parseUA=function(t){var e=t.toLowerCase(),n=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),o=!!t.match(/IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",isIE:r(e),mobile:i,ieMobile:o}},e.glob="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"7.2.5",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*n:t},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},UA:e._parseUA(e.glob.navigator&&e.glob.navigator.userAgent||""),document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t},_parseUA:e._parseUA},e._NODES_REGISTRY={},e._registerNode=function(t){e._NODES_REGISTRY[t.prototype.getClassName()]=t,e.Konva[t.prototype.getClassName()]=t}},829:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var o=n(9923),a=n(687),s=n(2458),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to groups.")},e}(a.Container);e.Group=u,u.prototype.nodeType="Group",s._registerNode(u),o.Collection.mapMethods(u)},8909:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;var o=n(9923),a=n(687),s=n(6191),u=n(6207),l=n(3114),c=n(8760),h=n(535),d=n(2458),f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=f.length,v=function(t){function e(e){var n=t.call(this,e)||this;return n.canvas=new l.SceneCanvas,n.hitCanvas=new l.HitCanvas({pixelRatio:1}),n._waitingForDraw=!1,n.on("visibleChange.konva",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange.konva",n._setSmoothEnabled),n._setSmoothEnabled(),n}return i(e,t),e.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},e.prototype.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),e<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){s.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){if(!s.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.children.length-1?t.content.insertBefore(this.getCanvas()._canvas,t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas),!0)},e.prototype.moveDown=function(){if(s.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(s.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return s.Node.prototype.remove.call(this),t&&t.parentNode&&o.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var e=t.width,n=t.height;return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this},e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to a layer.")},e.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),s.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},e.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},e.prototype.getIntersection=function(t,e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(var i=0;i<p;i++){var o=f[i],a=this._getIntersection({x:t.x+o.x*n,y:t.y+o.y*n}),s=a.shape;if(s&&e)return s.findAncestor(e,!0);if(s)return s;if(r=!!a.antialiased,!a.antialiased)break}if(!r)return null;n+=1}},e.prototype._getIntersection=function(t){var e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(255===r){var i=o.Util._rgbToHex(n[0],n[1],n[2]),a=h.shapes["#"+i];return a?{shape:a}:{antialiased:!0}}return r>0?{antialiased:!0}:{}},e.prototype.drawScene=function(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),a.Container.prototype.drawScene.call(this,r,e),this._fire("draw",{node:this}),this},e.prototype.drawHit=function(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),a.Container.prototype.drawHit.call(this,r,e),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.setHitGraphEnabled=function(t){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},e.prototype.getHitGraphEnabled=function(t){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e}(a.Container);e.Layer=v,v.prototype.nodeType="Layer",d._registerNode(v),u.Factory.addGetterSetter(v,"imageSmoothingEnabled",!0),u.Factory.addGetterSetter(v,"clearBeforeDraw",!0),u.Factory.addGetterSetter(v,"hitGraphEnabled",!0,c.getBooleanValidator()),o.Collection.mapMethods(v)},6191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Node=e._removeName=e._addName=e._removeId=e.names=e.ids=void 0;var r=n(9923),i=n(6207),o=n(3114),a=n(2458),s=n(2356),u=n(8760);e.ids={},e.names={},e._removeId=function(t,n){t&&e.ids[t]===n&&delete e.ids[t]},e._addName=function(t,n){n&&(e.names[n]||(e.names[n]=[]),e.names[n].push(t))},e._removeName=function(t,n){if(t){var r=e.names[t];if(r){for(var i=0;i<r.length;i++)r[i]._id===n&&r.splice(i,1);0===r.length&&delete e.names[t]}}};var l=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),c=(["scaleXChange.konva","scaleYChange.konva"].join(" "),new r.Collection),h=1,d=function(){function t(t){this._id=h++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=c,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}return t.prototype.hasChildren=function(){return!1},t.prototype.getChildren=function(){return c},t.prototype._clearCache=function(t){"transform"!==t&&"absoluteTransform"!==t||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0},t.prototype._getCache=function(t,e){var n=this._cache.get(t);return(void 0===n||("transform"===t||"absoluteTransform"===t)&&!0===n.dirty)&&(n=e.call(this),this._cache.set(t,n)),n},t.prototype._calculate=function(t,e,n){var r=this;if(!this._attachedDepsListeners.get(t)){var i=e.map(function(t){return t+"Change.konva"}).join(" ");this.on(i,function(){r._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)},t.prototype._getCanvasCache=function(){return this._cache.get("canvas")},t.prototype._clearSelfAndDescendantCache=function(t,e){this._clearCache(t),e&&"absoluteTransform"===t&&this.fire("_clearTransformCache"),this.isCached()||this.children&&this.children.each(function(e){e._clearSelfAndDescendantCache(t,!0)})},t.prototype.clearCache=function(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this},t.prototype.cache=function(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(e.width||n.width),a=Math.ceil(e.height||n.height),s=e.pixelRatio,u=void 0===e.x?n.x:e.x,l=void 0===e.y?n.y:e.y,c=e.offset||0,h=e.drawBorder||!1;if(i&&a){u-=c,l-=c;var d=new o.SceneCanvas({pixelRatio:s,width:i+=2*c,height:a+=2*c}),f=new o.SceneCanvas({pixelRatio:s,width:0,height:0}),p=new o.HitCanvas({pixelRatio:1,width:i,height:a}),v=d.getContext(),g=p.getContext();return p.isCache=!0,d.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,f.getContext()._context.imageSmoothingEnabled=!1),v.save(),g.save(),v.translate(-u,-l),g.translate(-u,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this.drawScene(d,this),this.drawHit(p,this),this._isUnderCache=!1,v.restore(),g.restore(),h&&(v.save(),v.beginPath(),v.rect(0,0,i,a),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set("canvas",{scene:d,filter:f,hit:p,x:u,y:l}),this}r.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},t.prototype.isCached=function(){return this._cache.has("canvas")},t.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},t.prototype._transformedRect=function(t,e){var n,r,i,o,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return a.forEach(function(t){var e=s.point(t);void 0===n&&(n=i=e.x,r=o=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y)}),{x:n,y:r,width:i-n,height:o-r}},t.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/r,n.height/r),t.restore()},t.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0),t.restore()},t.prototype._getCachedSceneCanvas=function(){var t,e,n,i,o=this.filters(),a=this._getCanvasCache(),s=a.scene,u=a.filter,l=u.getContext();if(o){if(!this._filterUpToDate){var c=s.pixelRatio;u.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio);try{for(t=o.length,l.clear(),l.drawImage(s._canvas,0,0,s.getWidth()/c,s.getHeight()/c),e=l.getImageData(0,0,u.getWidth(),u.getHeight()),n=0;n<t;n++)"function"==typeof(i=o[n])?(i.call(this,e),l.putImageData(e,0,0)):r.Util.error("Filter should be type of function, but got "+typeof i+" instead. Please check correct filters")}catch(h){r.Util.error("Unable to apply filter. "+h.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return u}return s},t.prototype.on=function(t,e){if(this._cache&&this._cache.delete("allEventListeners"),3===arguments.length)return this._delegate.apply(this,arguments);var n,r,i,o,a=t.split(" "),s=a.length;for(n=0;n<s;n++)o=(r=a[n].split("."))[1]||"",this.eventListeners[i=r[0]]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:o,handler:e});return this},t.prototype.off=function(t,e){var n,r,i,o,a,s=(t||"").split(" "),u=s.length;if(this._cache&&this._cache.delete("allEventListeners"),!t)for(r in this.eventListeners)this._off(r);for(n=0;n<u;n++)if(a=(i=s[n].split("."))[1],o=i[0])this.eventListeners[o]&&this._off(o,a,e);else for(r in this.eventListeners)this._off(r,a,e);return this},t.prototype.dispatchEvent=function(t){return this.fire(t.type,{target:this,type:t.type,evt:t}),this},t.prototype.addEventListener=function(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this},t.prototype.removeEventListener=function(t){return this.off(t),this},t.prototype._delegate=function(t,e,n){var i=this;this.on(t,function(t){for(var o=t.target.findAncestors(e,!0,i),a=0;a<o.length;a++)(t=r.Util.cloneObject(t)).currentTarget=o[a],n.call(o[a],t)})},t.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this},t.prototype._clearCaches=function(){this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening")},t.prototype._remove=function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},t.prototype.destroy=function(){e._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),n=0;n<t.length;n++)e._removeName(t[n],this._id);return this.remove(),this},t.prototype.getAttr=function(t){var e="get"+r.Util._capitalize(t);return r.Util._isFunction(this[e])?this[e]():this.attrs[t]},t.prototype.getAncestors=function(){for(var t=this.getParent(),e=new r.Collection;t;)e.push(t),t=t.getParent();return e},t.prototype.getAttrs=function(){return this.attrs||{}},t.prototype.setAttrs=function(t){var e=this;return this._batchTransformChanges(function(){var n,i;if(!t)return e;for(n in t)"children"!==n&&(i="set"+r.Util._capitalize(n),r.Util._isFunction(e[i])?e[i](t[n]):e._setAttr(n,t[n]))}),this},t.prototype.isListening=function(){return this._getCache("listening",this._isListening)},t.prototype._isListening=function(t){if(!this.listening())return!1;var e=this.getParent();return!e||e===t||this===t||e._isListening(t)},t.prototype.isVisible=function(){return this._getCache("visible",this._isVisible)},t.prototype._isVisible=function(t){if(!this.visible())return!1;var e=this.getParent();return!e||e===t||this===t||e._isVisible(t)},t.prototype.shouldDrawHit=function(t,e){if(void 0===e&&(e=!1),t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),r=!1;s.DD._dragElements.forEach(function(t){"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===n)&&(r=!0)});var i=!e&&!a.Konva.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!i},t.prototype.show=function(){return this.visible(!0),this},t.prototype.hide=function(){return this.visible(!1),this},t.prototype.getZIndex=function(){return this.index||0},t.prototype.getAbsoluteZIndex=function(){var t,e,n,r,i=this.getDepth(),o=this,a=0;return"Stage"!==o.nodeType&&function s(u){for(t=[],e=u.length,n=0;n<e;n++)a++,"Shape"!==(r=u[n]).nodeType&&(t=t.concat(r.getChildren().toArray())),r._id===o._id&&(n=e);t.length>0&&t[0].getDepth()<=i&&s(t)}(o.getStage().getChildren()),a},t.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},t.prototype._batchTransformChanges=function(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform",!0)),this._needClearTransformCache=!1},t.prototype.setPosition=function(t){var e=this;return this._batchTransformChanges(function(){e.x(t.x),e.y(t.y)}),this},t.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},t.prototype.getAbsolutePosition=function(t){for(var e=!1,n=this.parent;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),o=new r.Transform,a=this.offset();return o.m=i.slice(),o.translate(a.x,a.y),o.getTranslation()},t.prototype.setAbsolutePosition=function(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache("transform");var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),this},t.prototype._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e]},t.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t},t.prototype.move=function(t){var e=t.x,n=t.y,r=this.x(),i=this.y();return void 0!==e&&(r+=e),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this},t.prototype._eachAncestorReverse=function(t,e){var n,r,i=[],o=this.getParent();if(!e||e._id!==this._id){for(i.unshift(this);o&&(!e||o._id!==e._id);)i.unshift(o),o=o.parent;for(n=i.length,r=0;r<n;r++)t(i[r])}},t.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},t.prototype.moveToTop=function(){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):(r.Util.warn("Node has no parent. moveToTop function is ignored."),!1)},t.prototype.moveUp=function(){if(!this.parent)return r.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveDown=function(){if(!this.parent)return r.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveToBottom=function(){if(!this.parent)return r.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},t.prototype.setZIndex=function(t){return this.parent?((t<0||t>=this.parent.children.length)&&r.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this):(r.Util.warn("Node has no parent. zIndex parameter is ignored."),this)},t.prototype.getAbsoluteOpacity=function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},t.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},t.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},t.prototype.toObject=function(){var t,e,n,i,o={},a=this.getAttrs();for(t in o.attrs={},a)r.Util.isObject(e=a[t])&&!r.Util._isPlainObject(e)&&!r.Util._isArray(e)||(n="function"==typeof this[t]&&this[t],delete a[t],i=n?n.call(this):null,a[t]=e,i!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),r.Util._prepareToStringify(o)},t.prototype.toJSON=function(){return JSON.stringify(this.toObject())},t.prototype.getParent=function(){return this.parent},t.prototype.findAncestors=function(t,e,n){var r=[];e&&this._isMatch(t)&&r.push(this);for(var i=this.parent;i;){if(i===n)return r;i._isMatch(t)&&r.push(i),i=i.parent}return r},t.prototype.isAncestorOf=function(t){return!1},t.prototype.findAncestor=function(t,e,n){return this.findAncestors(t,e,n)[0]},t.prototype._isMatch=function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,i=t.replace(/ /g,"").split(","),o=i.length;for(e=0;e<o;e++)if(r.Util.isValidSelector(n=i[e])||(r.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),r.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),r.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1},t.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},t.prototype.getStage=function(){return this._getCache("stage",this._getStage)},t.prototype._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},t.prototype.fire=function(t,e,n){return void 0===e&&(e={}),e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this},t.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache("absoluteTransform",this._getAbsoluteTransform)},t.prototype._getAbsoluteTransform=function(t){var e;if(t)return e=new r.Transform,this._eachAncestorReverse(function(t){var n=t.transformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},t),e;e=this._cache.get("absoluteTransform")||new r.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var n=this.transformsEnabled();return"all"===n?e.multiply(this.getTransform()):"position"===n&&e.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),e.dirty=!1,e},t.prototype.getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}},t.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},t.prototype.getTransform=function(){return this._getCache("transform",this._getTransform)},t.prototype._getTransform=function(){var t,e,n=this._cache.get("transform")||new r.Transform;n.reset();var i=this.x(),o=this.y(),s=a.Konva.getAngle(this.rotation()),u=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,l=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,c=this.attrs.skewX||0,h=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return 0===i&&0===o||n.translate(i,o),0!==s&&n.rotate(s),0===c&&0===h||n.skew(c,h),1===u&&1===l||n.scale(u,l),0===d&&0===f||n.translate(-1*d,-1*f),n.dirty=!1,n},t.prototype.clone=function(t){var e,n,i,o,a,s=r.Util.cloneObject(this.attrs);for(e in t)s[e]=t[e];var u=new this.constructor(s);for(e in this.eventListeners)for(i=(n=this.eventListeners[e]).length,o=0;o<i;o++)(a=n[o]).name.indexOf("konva")<0&&(u.eventListeners[e]||(u.eventListeners[e]=[]),u.eventListeners[e].push(a));return u},t.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),r=void 0!==t.x?t.x:e.x,i=void 0!==t.y?t.y:e.y,a=t.pixelRatio||1,s=new o.SceneCanvas({width:t.width||e.width||(n?n.width():0),height:t.height||e.height||(n?n.height():0),pixelRatio:a}),u=s.getContext();return u.save(),(r||i)&&u.translate(-1*r,-1*i),this.drawScene(s),u.restore(),s},t.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},t.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(r),r},t.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,r.Util._urlToImage(this.toDataURL(t),function(t){e(t)})},t.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},t.prototype.getSize=function(){return{width:this.width(),height:this.height()}},t.prototype.getClassName=function(){return this.className||this.nodeType},t.prototype.getType=function(){return this.nodeType},t.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance},t.prototype._off=function(t,e,n){var r,i,o=this.eventListeners[t];for(r=0;r<o.length;r++)if(!("konva"===(i=o[r].name)&&"konva"!==e||e&&i!==e||n&&n!==o[r].handler)){if(o.splice(r,1),0===o.length){delete this.eventListeners[t];break}r--}},t.prototype._fireChangeEvent=function(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})},t.prototype.setId=function(t){var n=this.id();return e._removeId(n,this),function(t,n){n&&(e.ids[n]=t)}(this,t),this._setAttr("id",t),this},t.prototype.setName=function(t){var n,r,i=(this.name()||"").split(/\s/g),o=(t||"").split(/\s/g);for(r=0;r<i.length;r++)-1===o.indexOf(n=i[r])&&n&&e._removeName(n,this._id);for(r=0;r<o.length;r++)-1===i.indexOf(n=o[r])&&n&&e._addName(this,n);return this._setAttr("name",t),this},t.prototype.addName=function(t){if(!this.hasName(t)){var e=this.name();this.setName(e?e+" "+t:t)}return this},t.prototype.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},t.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.setName(e.join(" "))),this},t.prototype.setAttr=function(t,e){var n=this["set"+r.Util._capitalize(t)];return r.Util._isFunction(n)?n.call(this,e):this._setAttr(t,e),this},t.prototype._setAttr=function(t,e,n){void 0===n&&(n=!1);var i=this.attrs[t];(i!==e||r.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e))},t.prototype._setComponentAttr=function(t,e,n){var r;void 0!==n&&((r=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,r,n))},t.prototype._fireAndBubble=function(t,e,n){if(e&&"Shape"===this.nodeType&&(e.target=this),"mouseenter"!==t&&"mouseleave"!==t||!(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n)){this._fire(t,e);var r=("mouseenter"===t||"mouseleave"===t)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}},t.prototype._getProtoListeners=function(t){var e=this._cache.get("allEventListeners");if(!e){e={};for(var n=Object.getPrototypeOf(this);n;)if(n.eventListeners){for(var r in n.eventListeners)e[r]=n.eventListeners[r].concat(e[r]||[]);n=Object.getPrototypeOf(n)}else n=Object.getPrototypeOf(n);this._cache.set("allEventListeners",e)}return e[t]},t.prototype._fire=function(t,e){(e=e||{}).currentTarget=this,e.type=t;var n=this._getProtoListeners(t);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,e);var i=this.eventListeners[t];if(i)for(r=0;r<i.length;r++)i[r].handler.call(this,e)},t.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},t.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition(),i=n._getPointerById(e)||n._changedPointerPositions[0]||r;s.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-r.x,y:i.y-r.y},dragStatus:"ready",pointerId:e})},t.prototype.startDrag=function(t,e){void 0===e&&(e=!0),s.DD._dragElements.has(this._id)||this._createDragElement(t),s.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)},t.prototype._setDragPosition=function(t,e){var n=this.getStage()._getPointerById(e.pointerId);if(n){var i={x:n.x-e.offset.x,y:n.y-e.offset.y},o=this.dragBoundFunc();if(void 0!==o){var a=o.call(this,i,t);a?i=a:r.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=i}},t.prototype.stopDrag=function(t){var e=s.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),s.DD._endDragBefore(t),s.DD._endDragAfter(t)},t.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},t.prototype.isDragging=function(){var t=s.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},t.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var e=this;if((void 0===t.evt.button||a.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var n=!1;s.DD._dragElements.forEach(function(t){e.isAncestorOf(t.node)&&(n=!0)}),n||this._createDragElement(t)}})},t.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;var t=s.DD._dragElements.get(this._id),e=t&&"ready"===t.dragStatus;t&&"dragging"===t.dragStatus?this.stopDrag():e&&s.DD._dragElements.delete(this._id)}},t.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},t.create=function(t,e){return r.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},t._createNode=function(e,n){var i,o,s,u=t.prototype.getClassName.call(e),l=e.children;if(n&&(e.attrs.container=n),a._NODES_REGISTRY[u]||(r.Util.warn('Can not find a node with class name "'+u+'". Fallback to "Shape".'),u="Shape"),i=new(0,a._NODES_REGISTRY[u])(e.attrs),l)for(o=l.length,s=0;s<o;s++)i.add(t._createNode(l[s]));return i},t}();e.Node=d,d.prototype.nodeType="Node",d.prototype._attrsAffectingSize=[],d.prototype.eventListeners={},d.prototype.on.call(d.prototype,l,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"))}),d.prototype.on.call(d.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache("visible")}),d.prototype.on.call(d.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache("listening")}),d.prototype.on.call(d.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache("absoluteOpacity")});var f=i.Factory.addGetterSetter;f(d,"zIndex"),f(d,"absolutePosition"),f(d,"position"),f(d,"x",0,u.getNumberValidator()),f(d,"y",0,u.getNumberValidator()),f(d,"globalCompositeOperation","source-over",u.getStringValidator()),f(d,"opacity",1,u.getNumberValidator()),f(d,"name","",u.getStringValidator()),f(d,"id","",u.getStringValidator()),f(d,"rotation",0,u.getNumberValidator()),i.Factory.addComponentsGetterSetter(d,"scale",["x","y"]),f(d,"scaleX",1,u.getNumberValidator()),f(d,"scaleY",1,u.getNumberValidator()),i.Factory.addComponentsGetterSetter(d,"skew",["x","y"]),f(d,"skewX",0,u.getNumberValidator()),f(d,"skewY",0,u.getNumberValidator()),i.Factory.addComponentsGetterSetter(d,"offset",["x","y"]),f(d,"offsetX",0,u.getNumberValidator()),f(d,"offsetY",0,u.getNumberValidator()),f(d,"dragDistance",null,u.getNumberValidator()),f(d,"width",0,u.getNumberValidator()),f(d,"height",0,u.getNumberValidator()),f(d,"listening",!0,u.getBooleanValidator()),f(d,"preventDefault",!0,u.getBooleanValidator()),f(d,"filters",null,function(t){return this._filterUpToDate=!1,t}),f(d,"visible",!0,u.getBooleanValidator()),f(d,"transformsEnabled","all",u.getStringValidator()),f(d,"size"),f(d,"dragBoundFunc"),f(d,"draggable",!1,u.getBooleanValidator()),i.Factory.backCompat(d,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),r.Collection.mapMethods(d)},2564:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.releaseCapture=e.setPointerCapture=e.hasPointerCapture=e.createEvent=e.getCapturedShape=void 0;var r=n(2458),i=new Map,o=void 0!==r.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){var n=i.get(t);n&&(n.getStage(),i.delete(t),o&&n._fire("lostpointercapture",a(new PointerEvent("lostpointercapture"))))}e.getCapturedShape=function(t){return i.get(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){s(t),e.getStage()&&(i.set(t,e),o&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},e.releaseCapture=s},535:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;var o,a=n(9923),s=n(6207),u=n(6191),l=n(8760),c=n(2458),h=n(2564);function d(){return o||(o=a.Util.createCanvasElement().getContext("2d"))}e.shapes={};var f=function(t){function n(n){for(var r,i=t.call(this,n)||this;!(r=a.Util.getRandomColor())||r in e.shapes;);return i.colorKey=r,e.shapes[r]=i,i}return i(n,t),n.prototype.getContext=function(){return this.getLayer().getContext()},n.prototype.getCanvas=function(){return this.getLayer().getCanvas()},n.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},n.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},n.prototype.hasShadow=function(){return this._getCache("hasShadow",this._hasShadow)},n.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},n.prototype._getFillPattern=function(){return this._getCache("patternImage",this.__getFillPattern)},n.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var t=d().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return t&&t.setTransform&&t.setTransform({a:this.fillPatternScaleX(),b:0,c:0,d:this.fillPatternScaleY(),e:0,f:0}),t}},n.prototype._getLinearGradient=function(){return this._getCache("linearGradient",this.__getLinearGradient)},n.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=d(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(n.x,n.y,r.x,r.y),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},n.prototype._getRadialGradient=function(){return this._getCache("radialGradient",this.__getRadialGradient)},n.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=d(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},n.prototype.getShadowRGBA=function(){return this._getCache("shadowRGBA",this._getShadowRGBA)},n.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=a.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},n.prototype.hasFill=function(){var t=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],function(){return t.fillEnabled()&&!!(t.fill()||t.fillPatternImage()||t.fillLinearGradientColorStops()||t.fillRadialGradientColorStops())})},n.prototype.hasStroke=function(){var t=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],function(){return t.strokeEnabled()&&t.strokeWidth()&&!(!t.stroke()&&!t.strokeLinearGradientColorStops())})},n.prototype.hasHitStroke=function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t},n.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},n.prototype.destroy=function(){return u.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this},n.prototype._useBufferCanvas=function(t){var e;if(!this.getStage())return!1;if(null!==(e=this.attrs.perfectDrawEnabled)&&void 0!==e&&!e)return!1;var n=t||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(n&&r&&i)return!0;var o=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(n&&r&&o&&a)},n.prototype.setStrokeHitEnabled=function(t){a.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(t?"auto":0)},n.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},n.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}},n.prototype.getClientRect=function(t){void 0===t&&(t={});var e=t.skipTransform,n=t.relativeTo,r=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+i,a=r.height+i,s=!t.skipShadow&&this.hasShadow(),u=s?this.shadowOffsetX():0,l=s?this.shadowOffsetY():0,c=o+Math.abs(u),h=a+Math.abs(l),d=s&&this.shadowBlur()||0,f=c+2*d,p=h+2*d,v=0;Math.round(i/2)!==i/2&&(v=1);var g={width:f+v,height:p+v,x:-Math.round(i/2+d)+Math.min(u,0)+r.x,y:-Math.round(i/2+d)+Math.min(l,0)+r.y};return e?g:this._transformedRect(g,n)},n.prototype.drawScene=function(t,e){var n,r,i=this.getLayer(),o=t||i.getCanvas(),a=o.getContext(),s=this._getCanvasCache(),u=this.getSceneFunc(),l=this.hasShadow(),c=o.isCache,h=o.isCache,d=e===this;if(!this.isVisible()&&!c)return this;if(s){a.save();var f=this.getAbsoluteTransform(e).getMatrix();return a.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!u)return this;if(a.save(),this._useBufferCanvas()&&!h){(r=(n=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this);var p=this.getAbsoluteTransform(e).getMatrix();r.transform(p[0],p[1],p[2],p[3],p[4],p[5]),u.call(this,r,this),r.restore();var v=n.pixelRatio;l&&a._applyShadow(this),a._applyOpacity(this),a._applyGlobalCompositeOperation(this),a.drawImage(n._canvas,0,0,n.width/v,n.height/v)}else a._applyLineJoin(this),d||(p=this.getAbsoluteTransform(e).getMatrix(),a.transform(p[0],p[1],p[2],p[3],p[4],p[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)),l&&a._applyShadow(this),u.call(this,a,this);return a.restore(),this},n.prototype.drawHit=function(t,e,n){if(void 0===n&&(n=!1),!this.shouldDrawHit(e,n))return this;var r=this.getLayer(),i=t||r.hitCanvas,o=i&&i.getContext(),s=this.hitFunc()||this.sceneFunc(),u=this._getCanvasCache(),l=u&&u.hit;if(this.colorKey||(console.log(this),a.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),l){o.save();var c=this.getAbsoluteTransform(e).getMatrix();return o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!s)return this;if(o.save(),o._applyLineJoin(this),this!==e){var h=this.getAbsoluteTransform(e).getMatrix();o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return s.call(this,o,this),o.restore(),this},n.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,n,r,i,o,s=this._getCanvasCache(),u=this._getCachedSceneCanvas(),l=s.hit,c=l.getContext(),h=l.getWidth(),d=l.getHeight();c.clear(),c.drawImage(u._canvas,0,0,h,d);try{for(r=(n=(e=c.getImageData(0,0,h,d)).data).length,i=a.Util._hexToRgb(this.colorKey),o=0;o<r;o+=4)n[o+3]>t?(n[o]=i.r,n[o+1]=i.g,n[o+2]=i.b,n[o+3]=255):n[o+3]=0;c.putImageData(e,0,0)}catch(f){a.Util.error("Unable to draw hit graph from cached scene canvas. "+f.message)}return this},n.prototype.hasPointerCapture=function(t){return h.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){h.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){h.releaseCapture(t,this)},n}(u.Node);e.Shape=f,f.prototype._fillFunc=function(t){t.fill()},f.prototype._strokeFunc=function(t){t.stroke()},f.prototype._fillFuncHit=function(t){t.fill()},f.prototype._strokeFuncHit=function(t){t.stroke()},f.prototype._centroid=!1,f.prototype.nodeType="Shape",c._registerNode(f),f.prototype.eventListeners={},f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache("hasShadow")}),f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache("shadowRGBA")}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",function(){this._clearCache("patternImage")}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache("linearGradient")}),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache("radialGradient")}),s.Factory.addGetterSetter(f,"stroke",void 0,l.getStringOrGradientValidator()),s.Factory.addGetterSetter(f,"strokeWidth",2,l.getNumberValidator()),s.Factory.addGetterSetter(f,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(f,"hitStrokeWidth","auto",l.getNumberOrAutoValidator()),s.Factory.addGetterSetter(f,"strokeHitEnabled",!0,l.getBooleanValidator()),s.Factory.addGetterSetter(f,"perfectDrawEnabled",!0,l.getBooleanValidator()),s.Factory.addGetterSetter(f,"shadowForStrokeEnabled",!0,l.getBooleanValidator()),s.Factory.addGetterSetter(f,"lineJoin"),s.Factory.addGetterSetter(f,"lineCap"),s.Factory.addGetterSetter(f,"sceneFunc"),s.Factory.addGetterSetter(f,"hitFunc"),s.Factory.addGetterSetter(f,"dash"),s.Factory.addGetterSetter(f,"dashOffset",0,l.getNumberValidator()),s.Factory.addGetterSetter(f,"shadowColor",void 0,l.getStringValidator()),s.Factory.addGetterSetter(f,"shadowBlur",0,l.getNumberValidator()),s.Factory.addGetterSetter(f,"shadowOpacity",1,l.getNumberValidator()),s.Factory.addComponentsGetterSetter(f,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(f,"shadowOffsetX",0,l.getNumberValidator()),s.Factory.addGetterSetter(f,"shadowOffsetY",0,l.getNumberValidator()),s.Factory.addGetterSetter(f,"fillPatternImage"),s.Factory.addGetterSetter(f,"fill",void 0,l.getStringOrGradientValidator()),s.Factory.addGetterSetter(f,"fillPatternX",0,l.getNumberValidator()),s.Factory.addGetterSetter(f,"fillPatternY",0,l.getNumberValidator()),s.Factory.addGetterSetter(f,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(f,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(f,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(f,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(f,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(f,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(f,"fillEnabled",!0),s.Factory.addGetterSetter(f,"strokeEnabled",!0),s.Factory.addGetterSetter(f,"shadowEnabled",!0),s.Factory.addGetterSetter(f,"dashEnabled",!0),s.Factory.addGetterSetter(f,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(f,"fillPriority","color"),s.Factory.addComponentsGetterSetter(f,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(f,"fillPatternOffsetX",0,l.getNumberValidator()),s.Factory.addGetterSetter(f,"fillPatternOffsetY",0,l.getNumberValidator()),s.Factory.addComponentsGetterSetter(f,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(f,"fillPatternScaleX",1,l.getNumberValidator()),s.Factory.addGetterSetter(f,"fillPatternScaleY",1,l.getNumberValidator()),s.Factory.addComponentsGetterSetter(f,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(f,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(f,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(f,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(f,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(f,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(f,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(f,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(f,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(f,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(f,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(f,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(f,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(f,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(f,"fillPatternRotation",0),s.Factory.backCompat(f,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),a.Collection.mapMethods(f)},8648:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;var o=n(9923),a=n(6207),s=n(687),u=n(2458),l=n(3114),c=n(2356),h=n(2458),d=n(2564),f=["mouseenter","mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend","mouseover","wheel","contextmenu","pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"],p=f.length;function v(t,e){t.content.addEventListener(e,function(n){t["_"+e](n)},!1)}function g(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&o.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var y=function(t){function n(n){var r=t.call(this,g(n))||this;return r._pointerPositions=[],r._changedPointerPositions=[],r._buildDOM(),r._bindContentEvents(),e.stages.push(r),r.on("widthChange.konva heightChange.konva",r._resizeDOM),r.on("visibleChange.konva",r._checkVisibility),r.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){g(r.attrs)}),r._checkVisibility(),r}return i(n,t),n.prototype._validateAdd=function(t){var e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||o.Util.throw("You may only add layers to the stage.")},n.prototype._checkVisibility=function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}},n.prototype.setContainer=function(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},n.prototype.shouldDrawHit=function(){return!0},n.prototype.clear=function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this},n.prototype.clone=function(t){return t||(t={}),t.container=document.createElement("div"),s.Container.prototype.clone.call(this,t)},n.prototype.destroy=function(){t.prototype.destroy.call(this);var n=this.content;n&&o.Util._isInDocument(n)&&this.container().removeChild(n);var r=e.stages.indexOf(this);return r>-1&&e.stages.splice(r,1),this},n.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(o.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},n.prototype._getPointerById=function(t){return this._pointerPositions.find(function(e){return e.id===t})},n.prototype.getPointersPositions=function(){return this._pointerPositions},n.prototype.getStage=function(){return this},n.prototype.getContent=function(){return this.content},n.prototype._toKonvaCanvas=function(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new l.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,r=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),r.each(function(e){if(e.isVisible()){var r=e._toKonvaCanvas(t);n.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}}),e},n.prototype.getIntersection=function(t,e){if(!t)return null;var n,r,i=this.children;for(n=i.length-1;n>=0;n--)if(r=i[n].getIntersection(t,e))return r;return null},n.prototype._resizeDOM=function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.each(function(n){n.setSize({width:t,height:e}),n.draw()})},n.prototype.add=function(e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}t.prototype.add.call(this,e);var r=this.children.length;return r>5&&o.Util.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),u.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this},n.prototype.getParent=function(){return null},n.prototype.getLayer=function(){return null},n.prototype.hasPointerCapture=function(t){return d.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){d.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){d.releaseCapture(t,this)},n.prototype.getLayers=function(){return this.getChildren()},n.prototype._bindContentEvents=function(){if(u.Konva.isBrowser)for(var t=0;t<p;t++)v(this,f[t])},n.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire("mouseenter",{evt:t,target:this,currentTarget:this})},n.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire("mouseover",{evt:t,target:this,currentTarget:this})},n.prototype._mouseleave=function(t){var e;this.setPointersPositions(t);var n=(null===(e=this.targetShape)||void 0===e?void 0:e.getStage())?this.targetShape:null,r=!c.DD.isDragging||u.Konva.hitOnDragEnabled;n&&r?(n._fireAndBubble("mouseout",{evt:t}),n._fireAndBubble("mouseleave",{evt:t}),this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this.targetShape=null):r&&(this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this._fire("mouseout",{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},n.prototype._mousemove=function(t){var e;if(u.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var n,r=o.Util._getFirstPointerId(t),i=(null===(e=this.targetShape)||void 0===e?void 0:e.getStage())?this.targetShape:null,a=!c.DD.isDragging||u.Konva.hitOnDragEnabled;a&&((n=this.getIntersection(this.getPointerPosition()))&&n.isListening()?a&&i!==n?(i&&(i._fireAndBubble("mouseout",{evt:t,pointerId:r},n),i._fireAndBubble("mouseleave",{evt:t,pointerId:r},n)),n._fireAndBubble("mouseover",{evt:t,pointerId:r},i),n._fireAndBubble("mouseenter",{evt:t,pointerId:r},i),n._fireAndBubble("mousemove",{evt:t,pointerId:r}),this.targetShape=n):n._fireAndBubble("mousemove",{evt:t,pointerId:r}):(i&&a&&(i._fireAndBubble("mouseout",{evt:t,pointerId:r}),i._fireAndBubble("mouseleave",{evt:t,pointerId:r}),this._fire("mouseover",{evt:t,target:this,currentTarget:this,pointerId:r}),this.targetShape=null),this._fire("mousemove",{evt:t,target:this,currentTarget:this,pointerId:r})),this._fire("contentMousemove",{evt:t})),t.cancelable&&t.preventDefault()},n.prototype._mousedown=function(t){if(u.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition());c.DD.justDragged=!1,u.Konva.listenClickTap=!0,n&&n.isListening()?(this.clickStartShape=n,n._fireAndBubble("mousedown",{evt:t,pointerId:e})):this._fire("mousedown",{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},n.prototype._mouseup=function(t){if(u.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition()),r=this.clickStartShape,i=this.clickEndShape,a=!1;u.Konva.inDblClickWindow?(a=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(u.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){u.Konva.inDblClickWindow=!1},u.Konva.dblClickWindow),n&&n.isListening()?(this.clickEndShape=n,n._fireAndBubble("mouseup",{evt:t,pointerId:e}),u.Konva.listenClickTap&&r&&r._id===n._id&&(n._fireAndBubble("click",{evt:t,pointerId:e}),a&&i&&i===n&&n._fireAndBubble("dblclick",{evt:t,pointerId:e}))):(this.clickEndShape=null,this._fire("mouseup",{evt:t,target:this,currentTarget:this,pointerId:e}),u.Konva.listenClickTap&&this._fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),a&&this._fire("dblclick",{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),u.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),a&&this._fire("contentDblclick",{evt:t})),u.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},n.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("contextmenu",{evt:t}):this._fire("contextmenu",{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},n.prototype._touchstart=function(t){var e=this;this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach(function(r){var i=e.getIntersection(r);u.Konva.listenClickTap=!0,c.DD.justDragged=!1,i&&i.isListening()&&(u.Konva.captureTouchEventsEnabled&&i.setPointerCapture(r.id),e.tapStartShape=i,i._fireAndBubble("touchstart",{evt:t,pointerId:r.id},e),n=!0,i.isListening()&&i.preventDefault()&&t.cancelable&&t.preventDefault())}),n||this._fire("touchstart",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:t})},n.prototype._touchmove=function(t){var e=this;if(this.setPointersPositions(t),!c.DD.isDragging||u.Konva.hitOnDragEnabled){var n=!1,r={};this._changedPointerPositions.forEach(function(i){var o=d.getCapturedShape(i.id)||e.getIntersection(i);o&&o.isListening()&&(r[o._id]||(r[o._id]=!0,o._fireAndBubble("touchmove",{evt:t,pointerId:i.id}),n=!0,o.isListening()&&o.preventDefault()&&t.cancelable&&t.preventDefault()))}),n||this._fire("touchmove",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:t})}c.DD.isDragging&&c.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},n.prototype._touchend=function(t){var e=this;this.setPointersPositions(t);var n=this.tapEndShape,r=!1;u.Konva.inDblClickWindow?(r=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(u.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){u.Konva.inDblClickWindow=!1},u.Konva.dblClickWindow);var i=!1,o={},a=!1,s=!1;this._changedPointerPositions.forEach(function(l){var c=d.getCapturedShape(l.id)||e.getIntersection(l);c&&c.releaseCapture(l.id),c&&c.isListening()&&(o[c._id]||(o[c._id]=!0,e.tapEndShape=c,c._fireAndBubble("touchend",{evt:t,pointerId:l.id}),i=!0,u.Konva.listenClickTap&&c===e.tapStartShape&&(a=!0,c._fireAndBubble("tap",{evt:t,pointerId:l.id}),r&&n&&n===c&&(s=!0,c._fireAndBubble("dbltap",{evt:t,pointerId:l.id}))),c.isListening()&&c.preventDefault()&&t.cancelable&&t.preventDefault()))}),i||this._fire("touchend",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),u.Konva.listenClickTap&&!a&&(this.tapEndShape=null,this._fire("tap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})),r&&!s&&this._fire("dbltap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:t}),u.Konva.listenClickTap&&(this._fire("contentTap",{evt:t}),r&&this._fire("contentDbltap",{evt:t})),this.preventDefault()&&t.cancelable&&t.preventDefault(),u.Konva.listenClickTap=!1},n.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("wheel",{evt:t}):this._fire("wheel",{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},n.prototype._pointerdown=function(t){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerdown",d.createEvent(t))}},n.prototype._pointermove=function(t){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointermove",d.createEvent(t))}},n.prototype._pointerup=function(t){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",d.createEvent(t)),d.releaseCapture(t.pointerId)}},n.prototype._pointercancel=function(t){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",d.createEvent(t)),d.releaseCapture(t.pointerId)}},n.prototype._lostpointercapture=function(t){d.releaseCapture(t.pointerId)},n.prototype.setPointersPositions=function(t){var e=this,n=this._getContentPosition(),r=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],o.Collection.prototype.each.call(t.touches,function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})}),o.Collection.prototype.each.call(t.changedTouches||t.touches,function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})})):(this.pointerPos={x:r=(t.clientX-n.left)/n.scaleX,y:i=(t.clientY-n.top)/n.scaleY},this._pointerPositions=[{x:r,y:i,id:o.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:i,id:o.Util._getFirstPointerId(t)}])},n.prototype._setPointerPosition=function(t){o.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},n.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},n.prototype._buildDOM=function(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),u.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},n.prototype.cache=function(){return o.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},n.prototype.clearCache=function(){return this},n.prototype.batchDraw=function(){return this.children.each(function(t){t.batchDraw()}),this},n}(s.Container);e.Stage=y,y.prototype.nodeType="Stage",h._registerNode(y),a.Factory.addGetterSetter(y,"container")},3760:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;var r=n(9923),i=n(5132),o=n(6191),a=n(2458),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},u=0,l=["fill","stroke","shadowColor"],c=function(){function t(t,e,n,r,i,o,a){this.prop=t,this.propFunc=e,this.begin=r,this._pos=r,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()}return t.prototype.fire=function(t){var e=this[t];e&&e()},t.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},t.prototype.getTime=function(){return this._time},t.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},t.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},t.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},t.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},t.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},t.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},t.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},t.prototype.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},t.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},t.prototype.pause=function(){this.state=1,this.fire("onPause")},t.prototype.getTimer=function(){return(new Date).getTime()},t}(),h=function(){function t(n){var o,l,h=this,d=n.node,f=d._id,p=n.easing||e.Easings.Linear,v=!!n.yoyo;o=void 0===n.duration?.3:0===n.duration?.001:n.duration,this.node=d,this._id=u++;var g=d.getLayer()||(d instanceof a.Konva.Stage?d.getLayers():null);for(l in g||r.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){h.tween.onEnterFrame()},g),this.tween=new c(l,function(t){h._tweenFunc(t)},p,0,1,1e3*o,v),this._addListeners(),t.attrs[f]||(t.attrs[f]={}),t.attrs[f][this._id]||(t.attrs[f][this._id]={}),t.tweens[f]||(t.tweens[f]={}),n)void 0===s[l]&&this._addAttr(l,n[l]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset,this.onUpdate=n.onUpdate}return t.prototype._addAttr=function(e,n){var i,o,a,s,u,c,h,d,f=this.node,p=f._id;if((a=t.tweens[p][e])&&delete t.attrs[p][a][e],i=f.getAttr(e),r.Util._isArray(n))if(o=[],u=Math.max(n.length,i.length),"points"===e&&n.length!==i.length&&(n.length>i.length?(h=i,i=r.Util._prepareArrayForTween(i,n,f.closed())):(c=n,n=r.Util._prepareArrayForTween(n,i,f.closed()))),0===e.indexOf("fill"))for(s=0;s<u;s++)if(s%2==0)o.push(n[s]-i[s]);else{var v=r.Util.colorToRGBA(i[s]);d=r.Util.colorToRGBA(n[s]),i[s]=v,o.push({r:d.r-v.r,g:d.g-v.g,b:d.b-v.b,a:d.a-v.a})}else for(s=0;s<u;s++)o.push(n[s]-i[s]);else-1!==l.indexOf(e)?(i=r.Util.colorToRGBA(i),o={r:(d=r.Util.colorToRGBA(n)).r-i.r,g:d.g-i.g,b:d.b-i.b,a:d.a-i.a}):o=n-i;t.attrs[p][this._id][e]={start:i,diff:o,end:n,trueEnd:c,trueStart:h},t.tweens[p][e]=this._id},t.prototype._tweenFunc=function(e){var n,i,o,a,s,u,c,h,d=this.node,f=t.attrs[d._id][this._id];for(n in f){if(a=(i=f[n]).diff,h=i.end,r.Util._isArray(o=i.start))if(s=[],c=Math.max(o.length,h.length),0===n.indexOf("fill"))for(u=0;u<c;u++)s.push(u%2==0?(o[u]||0)+a[u]*e:"rgba("+Math.round(o[u].r+a[u].r*e)+","+Math.round(o[u].g+a[u].g*e)+","+Math.round(o[u].b+a[u].b*e)+","+(o[u].a+a[u].a*e)+")");else for(u=0;u<c;u++)s.push((o[u]||0)+a[u]*e);else s=-1!==l.indexOf(n)?"rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":o+a*e;d.setAttr(n,s)}},t.prototype._addListeners=function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueEnd&&n.setAttr("points",r.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueStart&&n.points(r.points.trueStart),e.onReset&&e.onReset()},this.tween.onUpdate=function(){e.onUpdate&&e.onUpdate.call(e)}},t.prototype.play=function(){return this.tween.play(),this},t.prototype.reverse=function(){return this.tween.reverse(),this},t.prototype.reset=function(){return this.tween.reset(),this},t.prototype.seek=function(t){return this.tween.seek(1e3*t),this},t.prototype.pause=function(){return this.tween.pause(),this},t.prototype.finish=function(){return this.tween.finish(),this},t.prototype.destroy=function(){var e,n=this.node._id,r=this._id,i=t.tweens[n];for(e in this.pause(),i)delete t.tweens[n][e];delete t.attrs[n][r]},t.attrs={},t.tweens={},t}();e.Tween=h,o.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new h(t).play()},e.Easings={BackEaseIn:function(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn:function(t,e,n,r,i,o){var a=0;return 0===t?e:1==(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,n,r,i,o){var a=0;return 0===t?e:1==(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut:function(t,e,n,r,i,o){var a=0;return 0===t?e:2==(t/=r/2)?e+n:(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,n,r,i){return r-e.Easings.BounceEaseOut(i-t,0,r,i)+n},BounceEaseInOut:function(t,n,r,i){return t<i/2?.5*e.Easings.BounceEaseIn(2*t,0,r,i)+n:.5*e.Easings.BounceEaseOut(2*t-i,0,r,i)+.5*r+n},EaseIn:function(t,e,n,r){return n*(t/=r)*t+e},EaseOut:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,r){return n*t/r+e}}},9923:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=e.Collection=void 0;var r=n(2458),i=function(){function t(){}return t.toCollection=function(e){var n,r=new t,i=e.length;for(n=0;n<i;n++)r.push(e[n]);return r},t._mapMethod=function(e){t.prototype[e]=function(){var t,n=this.length,r=[].slice.call(arguments);for(t=0;t<n;t++)this[t][e].apply(this[t],r);return this}},t.mapMethods=function(e){var n=e.prototype;for(var r in n)t._mapMethod(r)},t}();e.Collection=i,i.prototype=[],i.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},i.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;t<n;t++)e.push(this[t]);return e};var o=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}return t.prototype.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},t.prototype.copy=function(){return new t(this.m)},t.prototype.copyInto=function(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]},t.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},t.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},t.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.m[1]*e+this.m[3]*n,i=this.m[0]*-n+this.m[2]*e,o=this.m[1]*-n+this.m[3]*e;return this.m[0]=this.m[0]*e+this.m[2]*n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this},t.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},t.prototype.skew=function(t,e){var n=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,i=this.m[3]+this.m[1]*t;return this.m[0]=this.m[0]+this.m[2]*e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this},t.prototype.multiply=function(t){var e=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],i=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=e,this.m[2]=n,this.m[3]=r,this.m[4]=i,this.m[5]=o,this},t.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=-this.m[1]*t,n=-this.m[2]*t,r=this.m[0]*t,i=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*t,this.m[1]=e,this.m[2]=n,this.m[3]=r,this.m[4]=i,this.m[5]=o,this},t.prototype.getMatrix=function(){return this.m},t.prototype.setAbsolutePosition=function(t,e){var n=this.m[0],r=this.m[1],i=this.m[2],o=this.m[4],a=(n*(e-this.m[5])-r*(t-o))/(n*this.m[3]-r*i);return this.translate((t-o-i*a)/n,a)},t.prototype.decompose=function(){var t=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],o=t*i-n*r,a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=n){var s=Math.sqrt(t*t+n*n);a.rotation=n>0?Math.acos(t/s):-Math.acos(t/s),a.scaleX=s,a.scaleY=o/s,a.skewX=(t*r+n*i)/o,a.skewY=0}else if(0!=r||0!=i){var u=Math.sqrt(r*r+i*i);a.rotation=Math.PI/2-(i>0?Math.acos(-r/u):-Math.acos(r/u)),a.scaleX=o/u,a.scaleY=u,a.skewX=0,a.skewY=(t*r+n*i)/o}return a.rotation=e.Util._getRotation(a.rotation),a},t}();e.Transform=o;var a=Math.PI/180,s=180/Math.PI,u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},l=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,c=[];e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t||t>0?1:-1},requestAnimFrame:function(t){c.push(t),1===c.length&&requestAnimationFrame(function(){var t=c;c=[],t.forEach(function(t){t()})})},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var n,r,i=[],o=t.length,a=e.Util;for(n=0;n<o;n++)a._isNumber(r=t[n])?r=Math.round(1e3*r)/1e3:a._isString(r)||(r=r.toString()),i.push(r);return i},_urlToImage:function(t,e){var n=new r.glob.Image;n.onload=function(){e(n)},n.src=t},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in u?{r:(e=u[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=l.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return e.Util._namedColorToRBA(t=t||"black")||e.Util._hex3ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=u[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e,n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t).slice(1),r=Number(n[0])/360,i=Number(n[1])/100,o=Number(n[2])/100,a=void 0,s=void 0;if(0===i)return s=255*o,{r:Math.round(s),g:Math.round(s),b:Math.round(s),a:1};for(var u=2*o-(e=o<.5?o*(1+i):o+i-o*i),l=[0,0,0],c=0;c<3;c++)(a=r+1/3*-(c-1))<0&&a++,a>1&&a--,l[c]=255*(s=6*a<1?u+6*(e-u)*a:2*a<1?e:3*a<2?u+(e-u)*(2/3-a)*6:u);return{r:Math.round(l[0]),g:Math.round(l[1]),b:Math.round(l[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var n in t)e[n]=this._isPlainObject(t[n])?this.cloneObject(t[n]):this._isArray(t[n])?this.cloneArray(t[n]):t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*a},_radToDeg:function(t){return t*s},_getRotation:function(t){return r.Konva.angleDeg?e.Util._radToDeg(t):t},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error("Konva error: "+t)},error:function(t){console.error("Konva error: "+t)},warn:function(t){r.Konva.showWarnings&&console.warn("Konva warning: "+t)},extend:function(t,e){function n(){this.constructor=t}n.prototype=e.prototype;var r=t.prototype;for(var i in t.prototype=new n,r)r.hasOwnProperty(i)&&(t.prototype[i]=r[i]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,n,r,i,o,a){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),u=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)),l=a*s/(s+u),c=a*u/(s+u);return[n-l*(i-t),r-l*(o-e),n+c*(i-t),r+c*(o-e)]},_expandPoints:function(t,n){var r,i,o=t.length,a=[];for(r=2;r<o-2;r+=2)i=e.Util._getControlPoints(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],n),isNaN(i[0])||(a.push(i[0]),a.push(i[1]),a.push(t[r]),a.push(t[r+1]),a.push(i[2]),a.push(i[3]));return a},each:function(t,e){for(var n in t)e(n,t[n])},_inRange:function(t,e,n){return e<=t&&t<n},_getProjectionToSegment:function(t,e,n,r,i,o){var a,s,u,l=(t-n)*(t-n)+(e-r)*(e-r);if(0==l)a=t,s=e,u=(i-n)*(i-n)+(o-r)*(o-r);else{var c=((i-t)*(n-t)+(o-e)*(r-e))/l;c<0?(a=t,s=e,u=(t-i)*(t-i)+(e-o)*(e-o)):c>1?(a=n,s=r,u=(n-i)*(n-i)+(r-o)*(r-o)):u=((a=t+c*(n-t))-i)*(a-i)+((s=e+c*(r-e))-o)*(s-o)}return[a,s,u]},_getProjectionToLine:function(t,n,r){var i=e.Util.cloneObject(t),o=Number.MAX_VALUE;return n.forEach(function(a,s){if(r||s!==n.length-1){var u=n[(s+1)%n.length],l=e.Util._getProjectionToSegment(a.x,a.y,u.x,u.y,t.x,t.y),c=l[1],h=l[2];h<o&&(i.x=l[0],i.y=c,o=h)}}),i},_prepareArrayForTween:function(t,n,r){var i,o=[],a=[];if(t.length>n.length){var s=n;n=t,t=s}for(i=0;i<t.length;i+=2)o.push({x:t[i],y:t[i+1]});for(i=0;i<n.length;i+=2)a.push({x:n[i],y:n[i+1]});var u=[];return a.forEach(function(t){var n=e.Util._getProjectionToLine(t,o,r);u.push(n.x),u.push(n.y)}),u},_prepareToStringify:function(t){var n;for(var r in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(r)&&t[r]&&"object"==typeof t[r])if(n=Object.getOwnPropertyDescriptor(t,r),t[r].visitedByCircularReferenceRemoval||e.Util._isElement(t[r])){if(!n.configurable)return null;delete t[r]}else if(null===e.Util._prepareToStringify(t[r])){if(!n.configurable)return null;delete t[r]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}},8760:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getComponentValidator=e.getBooleanValidator=e.getNumberArrayValidator=e.getFunctionValidator=e.getStringOrGradientValidator=e.getStringValidator=e.getNumberOrAutoValidator=e.getNumberOrArrayOfNumbersValidator=e.getNumberValidator=e.alphaComponent=e.RGBComponent=void 0;var r=n(2458),i=n(9923);function o(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrArrayOfNumbersValidator=function(t){if(r.Konva.isUnminified)return function(e,n){var r=i.Util._isNumber(e),a=i.Util._isArray(e)&&e.length==t;return r||a||i.Util.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}},e.getNumberOrAutoValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||"auto"===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isString(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getStringOrGradientValidator=function(){if(r.Konva.isUnminified)return function(t,e){var n=i.Util._isString(t),r="[object CanvasGradient]"===Object.prototype.toString.call(t);return n||r||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},e.getFunctionValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isFunction(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isArray(t)?t.forEach(function(t){i.Util._isNumber(t)||i.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},e.getBooleanValidator=function(){if(r.Konva.isUnminified)return function(t,e){return!0===t||!1===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(r.Konva.isUnminified)return function(e,n){return i.Util.isObject(e)||i.Util.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}},929:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var r=n(2458),i=n(9923),o=n(6191),a=n(687),s=n(8648),u=n(8909),l=n(9725),c=n(829),h=n(2356),d=n(535),f=n(5132),p=n(3760),v=n(4138),g=n(3114);e.Konva=i.Util._assign(r.Konva,{Collection:i.Collection,Util:i.Util,Transform:i.Transform,Node:o.Node,ids:o.ids,names:o.names,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:u.Layer,FastLayer:l.FastLayer,Group:c.Group,DD:h.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:p.Tween,Easings:p.Easings,Context:v.Context,Canvas:g.Canvas})},6496:function(t,e,n){"use strict";e.S=void 0;var r=n(929),i=n(1937),o=n(2099),a=n(1960),s=n(8237),u=n(1422),l=n(5694),c=n(2346),h=n(2747),d=n(576),f=n(3754),p=n(7025),v=n(5070),g=n(9896),y=n(6135),m=n(1794),b=n(1161),_=n(1353),w=n(732),x=n(2896),k=n(1088),S=n(4e3),E=n(2972),C=n(451),T=n(7513),P=n(9373),A=n(2483),D=n(4898),O=n(9797),M=n(7730),I=n(1106),L=n(4233),N=n(7984),R=n(5179),F=n(4423),j=n(2105),B=n(4170);e.S=r.Konva.Util._assign(r.Konva,{Arc:i.Arc,Arrow:o.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:u.Image,Label:l.Label,Tag:l.Tag,Line:c.Line,Path:h.Path,Rect:d.Rect,RegularPolygon:f.RegularPolygon,Ring:p.Ring,Sprite:v.Sprite,Star:g.Star,Text:y.Text,TextPath:m.TextPath,Transformer:b.Transformer,Wedge:_.Wedge,Filters:{Blur:w.Blur,Brighten:x.Brighten,Contrast:k.Contrast,Emboss:S.Emboss,Enhance:E.Enhance,Grayscale:C.Grayscale,HSL:T.HSL,HSV:P.HSV,Invert:A.Invert,Kaleidoscope:D.Kaleidoscope,Mask:O.Mask,Noise:M.Noise,Pixelate:I.Pixelate,Posterize:L.Posterize,RGB:N.RGB,RGBA:R.RGBA,Sepia:F.Sepia,Solarize:j.Solarize,Threshold:B.Threshold}})},732:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;var r=n(6207),i=n(6191),o=n(8760);function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,r,i,o,l,c,h,d,f,p,v,g,y,m,b,_,w,x,k,S,E,C,T,P,A=t.data,D=t.width,O=t.height,M=e+e+1,I=D-1,L=O-1,N=e+1,R=N*(N+1)/2,F=new a,j=null,B=F,z=null,V=null,G=s[e],U=u[e];for(i=1;i<M;i++)B=B.next=new a,i===N&&(j=B);for(B.next=F,h=c=0,r=0;r<O;r++){for(_=w=x=k=d=f=p=v=0,g=N*(S=A[c]),y=N*(E=A[c+1]),m=N*(C=A[c+2]),b=N*(T=A[c+3]),d+=R*S,f+=R*E,p+=R*C,v+=R*T,B=F,i=0;i<N;i++)B.r=S,B.g=E,B.b=C,B.a=T,B=B.next;for(i=1;i<N;i++)d+=(B.r=S=A[o=c+((I<i?I:i)<<2)])*(P=N-i),f+=(B.g=E=A[o+1])*P,p+=(B.b=C=A[o+2])*P,v+=(B.a=T=A[o+3])*P,_+=S,w+=E,x+=C,k+=T,B=B.next;for(z=F,V=j,n=0;n<D;n++)A[c+3]=T=v*G>>U,0!==T?(A[c]=(d*G>>U)*(T=255/T),A[c+1]=(f*G>>U)*T,A[c+2]=(p*G>>U)*T):A[c]=A[c+1]=A[c+2]=0,d-=g,f-=y,p-=m,v-=b,g-=z.r,y-=z.g,m-=z.b,b-=z.a,o=h+((o=n+e+1)<I?o:I)<<2,d+=_+=z.r=A[o],f+=w+=z.g=A[o+1],p+=x+=z.b=A[o+2],v+=k+=z.a=A[o+3],z=z.next,g+=S=V.r,y+=E=V.g,m+=C=V.b,b+=T=V.a,_-=S,w-=E,x-=C,k-=T,V=V.next,c+=4;h+=D}for(n=0;n<D;n++){for(w=x=k=_=f=p=v=d=0,g=N*(S=A[c=n<<2]),y=N*(E=A[c+1]),m=N*(C=A[c+2]),b=N*(T=A[c+3]),d+=R*S,f+=R*E,p+=R*C,v+=R*T,B=F,i=0;i<N;i++)B.r=S,B.g=E,B.b=C,B.a=T,B=B.next;for(l=D,i=1;i<=e;i++)d+=(B.r=S=A[c=l+n<<2])*(P=N-i),f+=(B.g=E=A[c+1])*P,p+=(B.b=C=A[c+2])*P,v+=(B.a=T=A[c+3])*P,_+=S,w+=E,x+=C,k+=T,B=B.next,i<L&&(l+=D);for(c=n,z=F,V=j,r=0;r<O;r++)A[3+(o=c<<2)]=T=v*G>>U,T>0?(A[o]=(d*G>>U)*(T=255/T),A[o+1]=(f*G>>U)*T,A[o+2]=(p*G>>U)*T):A[o]=A[o+1]=A[o+2]=0,d-=g,f-=y,p-=m,v-=b,g-=z.r,y-=z.g,m-=z.b,b-=z.a,o=n+((o=r+N)<L?o:L)*D<<2,d+=_+=z.r=A[o],f+=w+=z.g=A[o+1],p+=x+=z.b=A[o+2],v+=k+=z.a=A[o+3],z=z.next,g+=S=V.r,y+=E=V.g,m+=C=V.b,b+=T=V.a,_-=S,w-=E,x-=C,k-=T,V=V.next,c+=D}}(t,e)},r.Factory.addGetterSetter(i.Node,"blurRadius",0,o.getNumberValidator(),r.Factory.afterSetFilter)},2896:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Brighten=function(t){var e,n=255*this.brightness(),r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=n,r[e+1]+=n,r[e+2]+=n},r.Factory.addGetterSetter(i.Node,"brightness",0,o.getNumberValidator(),r.Factory.afterSetFilter)},1088:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Contrast=function(t){var e,n=Math.pow((this.contrast()+100)/100,2),r=t.data,i=r.length,o=150,a=150,s=150;for(e=0;e<i;e+=4)o=r[e],a=r[e+1],s=r[e+2],o/=255,o-=.5,o*=n,o+=.5,a/=255,a-=.5,a*=n,a+=.5,s/=255,s-=.5,s*=n,s+=.5,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,r[e]=o=(o*=255)<0?0:o>255?255:o,r[e+1]=a,r[e+2]=s},r.Factory.addGetterSetter(i.Node,"contrast",0,o.getNumberValidator(),r.Factory.afterSetFilter)},4e3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;var r=n(6207),i=n(6191),o=n(9923),a=n(8760);e.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),a=0,s=0,u=t.data,l=t.width,c=t.height,h=4*l,d=c;switch(r){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+r)}do{var f=(d-1)*h,p=a;d+p<1&&(p=0),d+p>c&&(p=0);var v=(d-1+p)*l*4,g=l;do{var y=f+4*(g-1),m=s;g+m<1&&(m=0),g+m>l&&(m=0);var b=v+4*(g-1+m),_=u[y+1]-u[b+1],w=u[y+2]-u[b+2],x=u[y]-u[b],k=x>0?x:-x;if((_>0?_:-_)>k&&(x=_),(w>0?w:-w)>k&&(x=w),x*=e,i){var S=u[y]+x,E=u[y+1]+x,C=u[y+2]+x;u[y]=S>255?255:S<0?0:S,u[y+1]=E>255?255:E<0?0:E,u[y+2]=C>255?255:C<0?0:C}else{var T=n-x;T<0?T=0:T>255&&(T=255),u[y]=u[y+1]=u[y+2]=T}}while(--g)}while(--d)},r.Factory.addGetterSetter(i.Node,"embossStrength",.5,a.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,a.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,r.Factory.afterSetFilter)},2972:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;var r=n(6207),i=n(6191),o=n(8760);function a(t,e,n,r,i){var o=n-e,a=i-r;return 0===o?r+a/2:0===a?r:a*((t-e)/o)+r}e.Enhance=function(t){var e,n,r,i,o=t.data,s=o.length,u=o[0],l=u,c=o[1],h=c,d=o[2],f=d,p=this.enhance();if(0!==p){for(i=0;i<s;i+=4)(e=o[i+0])<u?u=e:e>l&&(l=e),(n=o[i+1])<c?c=n:n>h&&(h=n),(r=o[i+2])<d?d=r:r>f&&(f=r);var v,g,y,m,b,_,w,x,k;for(l===u&&(l=255,u=0),h===c&&(h=255,c=0),f===d&&(f=255,d=0),p>0?(g=l+p*(255-l),y=u-p*(u-0),b=h+p*(255-h),_=c-p*(c-0),x=f+p*(255-f),k=d-p*(d-0)):(g=l+p*(l-(v=.5*(l+u))),y=u+p*(u-v),b=h+p*(h-(m=.5*(h+c))),_=c+p*(c-m),x=f+p*(f-(w=.5*(f+d))),k=d+p*(d-w)),i=0;i<s;i+=4)o[i+0]=a(o[i+0],u,l,y,g),o[i+1]=a(o[i+1],c,h,_,b),o[i+2]=a(o[i+2],d,f,k,x)}},r.Factory.addGetterSetter(i.Node,"enhance",0,o.getNumberValidator(),r.Factory.afterSetFilter)},451:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0,e.Grayscale=function(t){var e,n,r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]=n=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e+1]=n,r[e+2]=n}},7513:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0;var r=n(6207),i=n(6191),o=n(8760);r.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"luminance",0,o.getNumberValidator(),r.Factory.afterSetFilter),e.HSL=function(t){var e,n,r,i,o,a=t.data,s=a.length,u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=127*this.luminance(),h=1*u*Math.cos(l*Math.PI/180),d=1*u*Math.sin(l*Math.PI/180),f=.299+.701*h+.167*d,p=.587-.587*h+.33*d,v=.114-.114*h-.497*d,g=.299-.299*h-.328*d,y=.587+.413*h+.035*d,m=.114-.114*h+.293*d,b=.299-.3*h+1.25*d,_=.587-.586*h-1.05*d,w=.114+.886*h-.2*d;for(e=0;e<s;e+=4)o=a[e+3],a[e+0]=f*(n=a[e+0])+p*(r=a[e+1])+v*(i=a[e+2])+c,a[e+1]=g*n+y*r+m*i+c,a[e+2]=b*n+_*r+w*i+c,a[e+3]=o}},9373:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;var r=n(6207),i=n(6191),o=n(8760);e.HSV=function(t){var e,n,r,i,o,a=t.data,s=a.length,u=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=u*l*Math.cos(c*Math.PI/180),d=u*l*Math.sin(c*Math.PI/180),f=.299*u+.701*h+.167*d,p=.587*u-.587*h+.33*d,v=.114*u-.114*h-.497*d,g=.299*u-.299*h-.328*d,y=.587*u+.413*h+.035*d,m=.114*u-.114*h+.293*d,b=.299*u-.3*h+1.25*d,_=.587*u-.586*h-1.05*d,w=.114*u+.886*h-.2*d;for(e=0;e<s;e+=4)o=a[e+3],a[e+0]=f*(n=a[e+0])+p*(r=a[e+1])+v*(i=a[e+2]),a[e+1]=g*n+y*r+m*i,a[e+2]=b*n+_*r+w*i,a[e+3]=o},r.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"value",0,o.getNumberValidator(),r.Factory.afterSetFilter)},2483:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0,e.Invert=function(t){var e,n=t.data,r=n.length;for(e=0;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}},4898:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;var r=n(6207),i=n(6191),o=n(9923),a=n(8760);e.Kaleidoscope=function(t){var e,n,r,i,a,s,u,l,c,h=t.width,d=t.height,f=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),v=Math.floor(h*(p%360)/360);if(!(f<1)){var g=o.Util.createCanvasElement();g.width=h,g.height=d;var y=g.getContext("2d").getImageData(0,0,h,d);!function(t,e,n){var r,i,o,a,s=t.data,u=e.data,l=t.width,c=t.height,h=n.polarCenterX||l/2,d=n.polarCenterY||c/2,f=0,p=0,v=0,g=0,y=Math.sqrt(h*h+d*d);i=l-h,o=c-d,y=(a=Math.sqrt(i*i+o*o))>y?a:y;var m,b,_,w,x=c,k=l,S=360/k*Math.PI/180;for(b=0;b<k;b+=1)for(_=Math.sin(b*S),w=Math.cos(b*S),m=0;m<x;m+=1)i=Math.floor(h+y*m/x*w),f=s[0+(r=4*((o=Math.floor(d+y*m/x*_))*l+i))],p=s[r+1],v=s[r+2],g=s[r+3],u[0+(r=4*(b+m*l))]=f,u[r+1]=p,u[r+2]=v,u[r+3]=g}(t,y,{polarCenterX:h/2,polarCenterY:d/2});for(var m=h/Math.pow(2,f);m<=8;)m*=2,f-=1;var b=m=Math.ceil(m),_=0,w=b,x=1;for(v+m>h&&(_=b,w=0,x=-1),n=0;n<d;n+=1)for(e=_;e!==w;e+=x)r=Math.round(e+v)%h,a=y.data[1+(l=4*(h*n+r))],s=y.data[l+2],u=y.data[l+3],y.data[0+(c=4*(h*n+e))]=y.data[l+0],y.data[c+1]=a,y.data[c+2]=s,y.data[c+3]=u;for(n=0;n<d;n+=1)for(b=Math.floor(m),i=0;i<f;i+=1){for(e=0;e<b+1;e+=1)a=y.data[1+(l=4*(h*n+e))],s=y.data[l+2],u=y.data[l+3],y.data[0+(c=4*(h*n+2*b-e-1))]=y.data[l+0],y.data[c+1]=a,y.data[c+2]=s,y.data[c+3]=u;b*=2}!function(t,e,n){var r,i,o,a,s,u,l=t.data,c=e.data,h=t.width,d=t.height,f=n.polarCenterX||h/2,p=n.polarCenterY||d/2,v=0,g=0,y=0,m=0,b=Math.sqrt(f*f+p*p);i=h-f,o=d-p,b=(u=Math.sqrt(i*i+o*o))>b?u:b;var _,w,x,k=d,S=h,E=n.polarRotation||0;for(i=0;i<h;i+=1)for(o=0;o<d;o+=1)a=i-f,s=o-p,_=Math.sqrt(a*a+s*s)*k/b,w=(w=(180*Math.atan2(s,a)/Math.PI+360+E)%360)*S/360,x=Math.floor(w),v=l[0+(r=4*(Math.floor(_)*h+x))],g=l[r+1],y=l[r+2],m=l[r+3],c[0+(r=4*(o*h+i))]=v,c[r+1]=g,c[r+2]=y,c[r+3]=m}(y,t,{polarRotation:0})}},r.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,a.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,a.getNumberValidator(),r.Factory.afterSetFilter)},9797:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;var r=n(6207),i=n(6191),o=n(8760);function a(t,e,n){var r=4*(n*t.width+e),i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function s(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var n=a(t,0,0),r=a(t,t.width-1,0),i=a(t,0,t.height-1),o=a(t,t.width-1,t.height-1),u=e||10;if(s(n,r)<u&&s(r,o)<u&&s(o,i)<u&&s(i,n)<u){for(var l=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([r,n,o,i]),c=[],h=0;h<t.width*t.height;h++){var d=s(l,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);c[h]=d<u?0:255}return c}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var u=0;u<e;u++){for(var l=s*e+u,c=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-o,p=u+d-o;f>=0&&f<n&&p>=0&&p<e&&(c+=t[f*e+p]*r[h*i+d])}a[l]=c}return a}(e=function(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var u=0;u<e;u++){for(var l=s*e+u,c=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-o,p=u+d-o;f>=0&&f<n&&p>=0&&p<e&&(c+=t[f*e+p]*r[h*i+d])}a[l]=c>=1020?255:0}return a}(e=function(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var u=0;u<e;u++){for(var l=s*e+u,c=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-o,p=u+d-o;f>=0&&f<n&&p>=0&&p<e&&(c+=t[f*e+p]*r[h*i+d])}a[l]=2040===c?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},r.Factory.addGetterSetter(i.Node,"threshold",0,o.getNumberValidator(),r.Factory.afterSetFilter)},7730:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Noise=function(t){var e,n=255*this.noise(),r=t.data,i=r.length,o=n/2;for(e=0;e<i;e+=4)r[e+0]+=o-2*o*Math.random(),r[e+1]+=o-2*o*Math.random(),r[e+2]+=o-2*o*Math.random()},r.Factory.addGetterSetter(i.Node,"noise",.2,o.getNumberValidator(),r.Factory.afterSetFilter)},1106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;var r=n(6207),i=n(9923),o=n(6191),a=n(8760);e.Pixelate=function(t){var e,n,r,o,a,s,u,l,c,h,d,f,p,v,g=Math.ceil(this.pixelSize()),y=t.width,m=t.height,b=Math.ceil(y/g),_=Math.ceil(m/g),w=t.data;if(g<=0)i.Util.error("pixelSize value can not be <= 0");else for(f=0;f<b;f+=1)for(p=0;p<_;p+=1){for(o=0,a=0,s=0,u=0,c=(l=f*g)+g,d=(h=p*g)+g,v=0,e=l;e<c;e+=1)if(!(e>=y))for(n=h;n<d;n+=1)n>=m||(o+=w[0+(r=4*(y*n+e))],a+=w[r+1],s+=w[r+2],u+=w[r+3],v+=1);for(o/=v,a/=v,s/=v,u/=v,e=l;e<c;e+=1)if(!(e>=y))for(n=h;n<d;n+=1)n>=m||(w[0+(r=4*(y*n+e))]=o,w[r+1]=a,w[r+2]=s,w[r+3]=u)}},r.Factory.addGetterSetter(o.Node,"pixelSize",8,a.getNumberValidator(),r.Factory.afterSetFilter)},4233:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,r=t.data,i=r.length,o=255/n;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/o)*o},r.Factory.addGetterSetter(i.Node,"levels",.5,o.getNumberValidator(),r.Factory.afterSetFilter)},7984:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;var r=n(6207),i=n(6191),o=n(8760);e.RGB=function(t){var e,n,r=t.data,i=r.length,o=this.red(),a=this.green(),s=this.blue();for(e=0;e<i;e+=4)r[e]=(n=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255)*o,r[e+1]=n*a,r[e+2]=n*s,r[e+3]=r[e+3]},r.Factory.addGetterSetter(i.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,r.Factory.afterSetFilter)},5179:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;var r=n(6207),i=n(6191),o=n(8760);e.RGBA=function(t){var e,n,r=t.data,i=r.length,o=this.red(),a=this.green(),s=this.blue(),u=this.alpha();for(e=0;e<i;e+=4)r[e]=o*u+r[e]*(n=1-u),r[e+1]=a*u+r[e+1]*n,r[e+2]=s*u+r[e+2]*n},r.Factory.addGetterSetter(i.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})},4423:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0,e.Sepia=function(t){var e,n,r,i,o=t.data,a=o.length;for(e=0;e<a;e+=4)n=o[e+0],r=o[e+1],i=o[e+2],o[e+0]=Math.min(255,.393*n+.769*r+.189*i),o[e+1]=Math.min(255,.349*n+.686*r+.168*i),o[e+2]=Math.min(255,.272*n+.534*r+.131*i)}},2105:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0,e.Solarize=function(t){var e=t.data,n=t.width,r=4*n,i=t.height;do{var o=(i-1)*r,a=n;do{var s=o+4*(a-1),u=e[s],l=e[s+1],c=e[s+2];u>127&&(u=255-u),l>127&&(l=255-l),c>127&&(c=255-c),e[s]=u,e[s+1]=l,e[s+2]=c}while(--a)}while(--i)}},4170:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Threshold=function(t){var e,n=255*this.threshold(),r=t.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<n?0:255},r.Factory.addGetterSetter(i.Node,"threshold",.5,o.getNumberValidator(),r.Factory.afterSetFilter)},8429:function(t,e,n){var r=n(6496).S;r._injectGlobal(r),e.default=r,t.exports=e.default},1937:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(2458),l=n(8760),c=n(2458),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=u.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Arc=h,h.prototype._centroid=!0,h.prototype.className="Arc",h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(h),a.Factory.addGetterSetter(h,"innerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"outerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"angle",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"clockwise",!1,l.getBooleanValidator()),o.Collection.mapMethods(h)},2099:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;var o=n(9923),a=n(6207),s=n(2346),u=n(8760),l=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var n=2*Math.PI,r=this.points(),i=r,o=0!==this.tension()&&r.length>4;o&&(i=this.getTensionPoints());var a,s,u=r.length;o?(a=r[u-2]-(i[i.length-2]+i[i.length-4])/2,s=r[u-1]-(i[i.length-1]+i[i.length-3])/2):(a=r[u-2]-r[u-4],s=r[u-1]-r[u-3]);var l=(Math.atan2(s,a)+n)%n,c=this.pointerLength(),h=this.pointerWidth();e.save(),e.beginPath(),e.translate(r[u-2],r[u-1]),e.rotate(l),e.moveTo(0,0),e.lineTo(-c,h/2),e.lineTo(-c,-h/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(r[0],r[1]),o?(a=(i[0]+i[2])/2-r[0],s=(i[1]+i[3])/2-r[1]):(a=r[2]-r[0],s=r[3]-r[1]),e.rotate((Math.atan2(-s,-a)+n)%n),e.moveTo(0,0),e.lineTo(-c,h/2),e.lineTo(-c,-h/2),e.closePath(),e.restore());var d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var e=t.prototype.getSelfRect.call(this),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+2*n,height:e.height+2*n}},e}(s.Line);e.Arrow=c,c.prototype.className="Arrow",l._registerNode(c),a.Factory.addGetterSetter(c,"pointerLength",10,u.getNumberValidator()),a.Factory.addGetterSetter(c,"pointerWidth",10,u.getNumberValidator()),a.Factory.addGetterSetter(c,"pointerAtBeginning",!1),o.Collection.mapMethods(c)},1960:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(8760),l=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(s.Shape);e.Circle=c,c.prototype._centroid=!0,c.prototype.className="Circle",c.prototype._attrsAffectingSize=["radius"],l._registerNode(c),a.Factory.addGetterSetter(c,"radius",0,u.getNumberValidator()),o.Collection.mapMethods(c)},8237:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(8760),l=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radiusX()},e.prototype.getHeight=function(){return 2*this.radiusY()},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(s.Shape);e.Ellipse=c,c.prototype.className="Ellipse",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radiusX","radiusY"],l._registerNode(c),a.Factory.addComponentsGetterSetter(c,"radius",["x","y"]),a.Factory.addGetterSetter(c,"radiusX",0,u.getNumberValidator()),a.Factory.addGetterSetter(c,"radiusY",0,u.getNumberValidator()),o.Collection.mapMethods(c)},1422:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(8760),l=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._useBufferCanvas=function(){return t.prototype._useBufferCanvas.call(this,!0)},e.prototype._sceneFunc=function(t){var e,n=this.getWidth(),r=this.getHeight(),i=this.attrs.image;if(i){var o=this.attrs.cropWidth,a=this.attrs.cropHeight;e=o&&a?[i,this.cropX(),this.cropY(),o,a,0,0,n,r]:[i,0,0,n,r]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,e)},e.prototype._hitFunc=function(t){var e=this.width(),n=this.height();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:(null===(e=this.image())||void 0===e?void 0:e.width)||0},e.prototype.getHeight=function(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:(null===(e=this.image())||void 0===e?void 0:e.height)||0},e.fromURL=function(t,n){var r=o.Util.createImageElement();r.onload=function(){var t=new e({image:r});n(t)},r.crossOrigin="Anonymous",r.src=t},e}(s.Shape);e.Image=c,c.prototype.className="Image",l._registerNode(c),a.Factory.addGetterSetter(c,"image"),a.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),a.Factory.addGetterSetter(c,"cropX",0,u.getNumberValidator()),a.Factory.addGetterSetter(c,"cropY",0,u.getNumberValidator()),a.Factory.addGetterSetter(c,"cropWidth",0,u.getNumberValidator()),a.Factory.addGetterSetter(c,"cropHeight",0,u.getNumberValidator()),o.Collection.mapMethods(c)},5694:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(829),l=n(8760),c=n(2458),h=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],d=h.length,f=function(t){function e(e){var n=t.call(this,e)||this;return n.on("add.konva",function(t){this._addListeners(t.child),this._sync()}),n}return i(e,t),e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var e,n=this,r=function(){n._sync()};for(e=0;e<d;e++)t.on(h[e]+"Change.konva",r)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t,e,n,r,i,o,a,s=this.getText(),u=this.getTag();if(s&&u){switch(t=s.width(),e=s.height(),n=u.pointerDirection(),r=u.pointerWidth(),a=u.pointerHeight(),i=0,o=0,n){case"up":i=t/2,o=-1*a;break;case"right":i=t+r,o=e/2;break;case"down":i=t/2,o=e+a;break;case"left":i=-1*r,o=e/2}u.setAttrs({x:-1*i,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*i,y:-1*o})}},e}(u.Group);e.Label=f,f.prototype.className="Label",c._registerNode(f),o.Collection.mapMethods(f);var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.width(),n=this.height(),r=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius(),s=0,u=0,l=0,c=0;"number"==typeof a?s=u=l=c=Math.min(a,e/2,n/2):(s=Math.min(a[0]||0,e/2,n/2),u=Math.min(a[1]||0,e/2,n/2),c=Math.min(a[2]||0,e/2,n/2),l=Math.min(a[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(s,0),"up"===r&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+i)/2,0)),t.lineTo(e-u,0),t.arc(e-u,u,u,3*Math.PI/2,0,!1),"right"===r&&(t.lineTo(e,(n-o)/2),t.lineTo(e+i,n/2),t.lineTo(e,(n+o)/2)),t.lineTo(e,n-c),t.arc(e-c,n-c,c,0,Math.PI/2,!1),"down"===r&&(t.lineTo((e+i)/2,n),t.lineTo(e/2,n+o),t.lineTo((e-i)/2,n)),t.lineTo(l,n),t.arc(l,n-l,l,Math.PI/2,Math.PI,!1),"left"===r&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*i,n/2),t.lineTo(0,(n-o)/2)),t.lineTo(0,s),t.arc(s,s,s,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,e=0,n=this.pointerWidth(),r=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return"up"===i?(e-=r,a+=r):"down"===i?a+=r:"left"===i?(t-=1.5*n,o+=n):"right"===i&&(o+=1.5*n),{x:t,y:e,width:o,height:a}},e}(s.Shape);e.Tag=p,p.prototype.className="Tag",c._registerNode(p),a.Factory.addGetterSetter(p,"pointerDirection","none"),a.Factory.addGetterSetter(p,"pointerWidth",0,l.getNumberValidator()),a.Factory.addGetterSetter(p,"pointerHeight",0,l.getNumberValidator()),a.Factory.addGetterSetter(p,"cornerRadius",0,l.getNumberOrArrayOfNumbersValidator(4)),o.Collection.mapMethods(p)},2346:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var a=n(9923),s=n(6207),u=n(535),l=n(8760),c=n(2458),h=function(t){function e(e){var n=t.call(this,e)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),n}return i(e,t),e.prototype._sceneFunc=function(t){var e,n,r,i=this.points(),o=i.length,a=this.tension(),s=this.closed(),u=this.bezier();if(o){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==a&&o>4){for(n=(e=this.getTensionPoints()).length,r=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<n-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);s||t.quadraticCurveTo(e[n-2],e[n-1],i[o-2],i[o-1])}else if(u)for(r=2;r<o;)t.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);else for(r=2;r<o;r+=2)t.lineTo(i[r],i[r+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():a.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,n=this.tension(),r=a.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),i=a.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),o=a.Util._expandPoints(t,n);return[r[2],r[3]].concat(o).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],r[0],r[1],t[0],t[1]])},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,r=(t=0!==this.tension()?o([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):this.points())[0],i=t[0],a=t[1],s=t[1],u=0;u<t.length/2;u++)e=t[2*u],n=t[2*u+1],r=Math.min(r,e),i=Math.max(i,e),a=Math.min(a,n),s=Math.max(s,n);return{x:r,y:a,width:i-r,height:s-a}},e}(u.Shape);e.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],c._registerNode(h),s.Factory.addGetterSetter(h,"closed",!1),s.Factory.addGetterSetter(h,"bezier",!1),s.Factory.addGetterSetter(h,"tension",0,l.getNumberValidator()),s.Factory.addGetterSetter(h,"points",[],l.getNumberArrayValidator()),a.Collection.mapMethods(h)},2747:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(2458),l=function(t){function e(n){var r=t.call(this,n)||this;r.dataArray=[],r.pathLength=0,r.dataArray=e.parsePathData(r.data()),r.pathLength=0;for(var i=0;i<r.dataArray.length;++i)r.pathLength+=r.dataArray[i].pathLength;return r.on("dataChange.konva",function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength}),r}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var n=!1,r=0;r<e.length;r++){var i=e[r].points;switch(e[r].command){case"L":t.lineTo(i[0],i[1]);break;case"M":t.moveTo(i[0],i[1]);break;case"C":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"Q":t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"A":var o=i[0],a=i[1],s=i[2],u=i[3],l=i[4],c=i[5],h=i[6],d=i[7],f=s>u?s:u,p=s>u?1:s/u,v=s>u?u/s:1;t.translate(o,a),t.rotate(h),t.scale(p,v),t.arc(0,0,f,l,l+c,1-d),t.scale(1/p,1/v),t.rotate(-h),t.translate(-o,-a);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach(function(n){if("A"===n.command){var r=n.points[4],i=n.points[5],o=n.points[4]+i,a=Math.PI/180;if(Math.abs(r-o)<a&&(a=Math.abs(r-o)),i<0)for(var s=r-a;s>o;s-=a){var u=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],s,0);t.push(u.x,u.y)}else for(s=r+a;s<o;s+=a)u=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],s,0),t.push(u.x,u.y)}else if("C"===n.command)for(s=0;s<=1;s+=.01)u=e.getPointOnCubicBezier(s,n.start.x,n.start.y,n.points[0],n.points[1],n.points[2],n.points[3],n.points[4],n.points[5]),t.push(u.x,u.y);else t=t.concat(n.points)});for(var n,r,i=t[0],o=t[0],a=t[1],s=t[1],u=0;u<t.length/2;u++)n=t[2*u],r=t[2*u+1],isNaN(n)||(i=Math.min(i,n),o=Math.max(o,n)),isNaN(r)||(a=Math.min(a,r),s=Math.max(s,r));return{x:Math.round(i),y:Math.round(a),width:Math.round(o-i),height:Math.round(s-a)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&t>this.dataArray[r].pathLength;)t-=this.dataArray[r].pathLength,++r;if(r===i)return{x:(n=this.dataArray[r-1].points.slice(-2))[0],y:n[1]};if(t<.01)return{x:(n=this.dataArray[r].points.slice(0,2))[0],y:n[1]};var o=this.dataArray[r],a=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var s=a[4];return e.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],s+=a[5]*t/o.pathLength,a[6])}return null},e.getLineLength=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},e.getPointOnLine=function(t,e,n,r,i,o,a){void 0===o&&(o=e),void 0===a&&(a=n);var s=(i-n)/(r-e+1e-8),u=Math.sqrt(t*t/(1+s*s));r<e&&(u*=-1);var l,c=s*u;if(r===e)l={x:o,y:a+c};else if((a-n)/(o-e+1e-8)===s)l={x:o+u,y:a+c};else{var h,d,f=this.getLineLength(e,n,r,i),p=(o-e)*(r-e)+(a-n)*(i-n),v=this.getLineLength(o,a,h=e+(p/=f*f)*(r-e),d=n+p*(i-n)),g=Math.sqrt(t*t-v*v);u=Math.sqrt(g*g/(1+s*s)),r<e&&(u*=-1),l={x:h+u,y:d+(c=s*u)}}return l},e.getPointOnCubicBezier=function(t,e,n,r,i,o,a,s,u){function l(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:s*l(t)+o*c(t)+r*h(t)+e*d(t),y:u*l(t)+a*c(t)+i*h(t)+n*d(t)}},e.getPointOnQuadraticBezier=function(t,e,n,r,i,o,a){function s(t){return t*t}function u(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:o*s(t)+r*u(t)+e*l(t),y:a*s(t)+i*u(t)+n*l(t)}},e.getPointOnEllipticalArc=function(t,e,n,r,i,o){var a=Math.cos(o),s=Math.sin(o),u=n*Math.cos(i),l=r*Math.sin(i);return{x:t+(u*a-l*s),y:e+(u*s+l*a)}},e.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)e=e.replace(new RegExp(n[r],"g"),"|"+n[r]);var i,o=e.split("|"),a=[],s=[],u=0,l=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<o.length;r++){var h=o[r],d=h.charAt(0);for(h=h.slice(1),s.length=0;i=c.exec(h);)s.push(i[0]);for(var f=[],p=0,v=s.length;p<v;p++){var g=parseFloat(s[p]);isNaN(g)?f.push(0):f.push(g)}for(;f.length>0&&!isNaN(f[0]);){var y,m,b,_,w,x,k,S,E,C,T=null,P=[],A=u,D=l;switch(d){case"l":u+=f.shift(),l+=f.shift(),T="L",P.push(u,l);break;case"L":u=f.shift(),l=f.shift(),P.push(u,l);break;case"m":var O=f.shift(),M=f.shift();if(u+=O,l+=M,T="M",a.length>2&&"z"===a[a.length-1].command)for(var I=a.length-2;I>=0;I--)if("M"===a[I].command){u=a[I].points[0]+O,l=a[I].points[1]+M;break}P.push(u,l),d="l";break;case"M":u=f.shift(),l=f.shift(),T="M",P.push(u,l),d="L";break;case"h":u+=f.shift(),T="L",P.push(u,l);break;case"H":u=f.shift(),T="L",P.push(u,l);break;case"v":l+=f.shift(),T="L",P.push(u,l);break;case"V":l=f.shift(),T="L",P.push(u,l);break;case"C":P.push(f.shift(),f.shift(),f.shift(),f.shift()),u=f.shift(),l=f.shift(),P.push(u,l);break;case"c":P.push(u+f.shift(),l+f.shift(),u+f.shift(),l+f.shift()),u+=f.shift(),l+=f.shift(),T="C",P.push(u,l);break;case"S":m=u,b=l,"C"===(y=a[a.length-1]).command&&(m=u+(u-y.points[2]),b=l+(l-y.points[3])),P.push(m,b,f.shift(),f.shift()),u=f.shift(),l=f.shift(),T="C",P.push(u,l);break;case"s":m=u,b=l,"C"===(y=a[a.length-1]).command&&(m=u+(u-y.points[2]),b=l+(l-y.points[3])),P.push(m,b,u+f.shift(),l+f.shift()),u+=f.shift(),l+=f.shift(),T="C",P.push(u,l);break;case"Q":P.push(f.shift(),f.shift()),u=f.shift(),l=f.shift(),P.push(u,l);break;case"q":P.push(u+f.shift(),l+f.shift()),u+=f.shift(),l+=f.shift(),T="Q",P.push(u,l);break;case"T":m=u,b=l,"Q"===(y=a[a.length-1]).command&&(m=u+(u-y.points[0]),b=l+(l-y.points[1])),u=f.shift(),l=f.shift(),T="Q",P.push(m,b,u,l);break;case"t":m=u,b=l,"Q"===(y=a[a.length-1]).command&&(m=u+(u-y.points[0]),b=l+(l-y.points[1])),u+=f.shift(),l+=f.shift(),T="Q",P.push(m,b,u,l);break;case"A":_=f.shift(),w=f.shift(),x=f.shift(),k=f.shift(),S=f.shift(),E=u,C=l,u=f.shift(),l=f.shift(),T="A",P=this.convertEndpointToCenterParameterization(E,C,u,l,k,S,_,w,x);break;case"a":_=f.shift(),w=f.shift(),x=f.shift(),k=f.shift(),S=f.shift(),E=u,C=l,u+=f.shift(),l+=f.shift(),T="A",P=this.convertEndpointToCenterParameterization(E,C,u,l,k,S,_,w,x)}a.push({command:T||d,points:P,start:{x:A,y:D},pathLength:this.calcLength(A,D,T||d,P)})}"z"!==d&&"Z"!==d||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},e.calcLength=function(t,n,r,i){var o,a,s,u,l=e;switch(r){case"L":return l.getLineLength(t,n,i[0],i[1]);case"C":for(o=0,a=l.getPointOnCubicBezier(0,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),u=.01;u<=1;u+=.01)s=l.getPointOnCubicBezier(u,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),o+=l.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"Q":for(o=0,a=l.getPointOnQuadraticBezier(0,t,n,i[0],i[1],i[2],i[3]),u=.01;u<=1;u+=.01)s=l.getPointOnQuadraticBezier(u,t,n,i[0],i[1],i[2],i[3]),o+=l.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"A":o=0;var c=i[4],h=i[5],d=i[4]+h,f=Math.PI/180;if(Math.abs(c-d)<f&&(f=Math.abs(c-d)),a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),h<0)for(u=c-f;u>d;u-=f)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),o+=l.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(u=c+f;u<d;u+=f)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),o+=l.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),o+l.getLineLength(a.x,a.y,s.x,s.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,n,r,i,o,a,s,u){var l=u*(Math.PI/180),c=Math.cos(l)*(t-n)/2+Math.sin(l)*(e-r)/2,h=-1*Math.sin(l)*(t-n)/2+Math.cos(l)*(e-r)/2,d=c*c/(a*a)+h*h/(s*s);d>1&&(a*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((a*a*(s*s)-a*a*(h*h)-s*s*(c*c))/(a*a*(h*h)+s*s*(c*c)));i===o&&(f*=-1),isNaN(f)&&(f=0);var p=f*a*h/s,v=f*-s*c/a,g=(t+n)/2+Math.cos(l)*p-Math.sin(l)*v,y=(e+r)/2+Math.sin(l)*p+Math.cos(l)*v,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=_([1,0],[(c-p)/a,(h-v)/s]),x=[(c-p)/a,(h-v)/s],k=[(-1*c-p)/a,(-1*h-v)/s],S=_(x,k);return b(x,k)<=-1&&(S=Math.PI),b(x,k)>=1&&(S=0),0===o&&S>0&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),[g,y,a,s,w,S,l,o]},e}(s.Shape);e.Path=l,l.prototype.className="Path",l.prototype._attrsAffectingSize=["data"],u._registerNode(l),a.Factory.addGetterSetter(l,"data"),o.Collection.mapMethods(l)},576:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(2458),l=n(8760),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),n=this.width(),r=this.height();if(t.beginPath(),e){var i=0,o=0,a=0,s=0;"number"==typeof e?i=o=a=s=Math.min(e,n/2,r/2):(i=Math.min(e[0]||0,n/2,r/2),o=Math.min(e[1]||0,n/2,r/2),s=Math.min(e[2]||0,n/2,r/2),a=Math.min(e[3]||0,n/2,r/2)),t.moveTo(i,0),t.lineTo(n-o,0),t.arc(n-o,o,o,3*Math.PI/2,0,!1),t.lineTo(n,r-s),t.arc(n-s,r-s,s,0,Math.PI/2,!1),t.lineTo(a,r),t.arc(a,r-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,r);t.closePath(),t.fillStrokeShape(this)},e}(s.Shape);e.Rect=c,c.prototype.className="Rect",u._registerNode(c),a.Factory.addGetterSetter(c,"cornerRadius",0,l.getNumberOrArrayOfNumbersValidator(4)),o.Collection.mapMethods(c)},3754:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(8760),l=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fillStrokeShape(this)},e.prototype._getPoints=function(){for(var t=this.attrs.sides,e=this.attrs.radius||0,n=[],r=0;r<t;r++)n.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return n},e.prototype.getSelfRect=function(){var t=this._getPoints(),e=t[0].x,n=t[0].y,r=t[0].x,i=t[0].y;return t.forEach(function(t){e=Math.min(e,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)}),{x:e,y:r,width:n-e,height:i-r}},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.RegularPolygon=c,c.prototype.className="RegularPolygon",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],l._registerNode(c),a.Factory.addGetterSetter(c,"radius",0,u.getNumberValidator()),a.Factory.addGetterSetter(c,"sides",0,u.getNumberValidator()),o.Collection.mapMethods(c)},7025:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(8760),l=n(2458),c=2*Math.PI,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,c,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),c,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Ring=h,h.prototype.className="Ring",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],l._registerNode(h),a.Factory.addGetterSetter(h,"innerRadius",0,u.getNumberValidator()),a.Factory.addGetterSetter(h,"outerRadius",0,u.getNumberValidator()),o.Collection.mapMethods(h)},5070:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(5132),l=n(8760),c=n(2458),h=function(t){function e(e){var n=t.call(this,e)||this;return n._updated=!0,n.anim=new u.Animation(function(){var t=n._updated;return n._updated=!1,t}),n.on("animationChange.konva",function(){this.frameIndex(0)}),n.on("frameIndexChange.konva",function(){this._updated=!0}),n.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),n}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],o=this.frameOffsets(),a=i[r+0],s=i[r+1],u=i[r+2],l=i[r+3],c=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,u,l),t.closePath(),t.fillStrokeShape(this)),c)if(o){var h=o[e],d=2*n;t.drawImage(c,a,s,u,l,h[d+0],h[d+1],u,l)}else t.drawImage(c,a,s,u,l,0,0,u,l)},e.prototype._hitFunc=function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],o=this.frameOffsets(),a=i[r+2],s=i[r+3];if(t.beginPath(),o){var u=o[e],l=2*n;t.rect(u[l+0],u[l+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return t.prototype._useBufferCanvas.call(this,!0)},e.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation(),n=this.animations();this.frameIndex(t<n[e].length/4-1?t+1:0)},e}(s.Shape);e.Sprite=h,h.prototype.className="Sprite",c._registerNode(h),a.Factory.addGetterSetter(h,"animation"),a.Factory.addGetterSetter(h,"animations"),a.Factory.addGetterSetter(h,"frameOffsets"),a.Factory.addGetterSetter(h,"image"),a.Factory.addGetterSetter(h,"frameIndex",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"frameRate",17,l.getNumberValidator()),a.Factory.backCompat(h,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),o.Collection.mapMethods(h)},9896:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(8760),l=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var i=1;i<2*r;i++){var o=i%2==0?n:e,a=o*Math.sin(i*Math.PI/r),s=-1*o*Math.cos(i*Math.PI/r);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Star=c,c.prototype.className="Star",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],l._registerNode(c),a.Factory.addGetterSetter(c,"numPoints",5,u.getNumberValidator()),a.Factory.addGetterSetter(c,"innerRadius",0,u.getNumberValidator()),a.Factory.addGetterSetter(c,"outerRadius",0,u.getNumberValidator()),o.Collection.mapMethods(c)},6135:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Text=e.stringToArray=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(2458),l=n(8760),c=n(2458);function h(t){return Array.from(t)}e.stringToArray=h;var d,f=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],p=f.length;function v(){return d||(d=o.Util.createCanvasElement().getContext("2d"))}var g=function(t){function e(e){var n=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this;n._partialTextX=0,n._partialTextY=0;for(var r=0;r<p;r++)n.on(f[r]+"Change.konva",n._setTextData);return n._setTextData(),n}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.textArr,n=e.length;if(this.text()){var r,i=this.padding(),o=this.fontSize(),a=this.lineHeight()*o,s=this.verticalAlign(),u=0,l=this.align(),c=this.getWidth(),d=this.letterSpacing(),f=this.fill(),p=this.textDecoration(),v=-1!==p.indexOf("underline"),g=-1!==p.indexOf("line-through"),y=0,m=(y=a/2,0),b=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===s?u=(this.getHeight()-n*a-2*i)/2:"bottom"===s&&(u=this.getHeight()-n*a-2*i),t.translate(i,u+i),r=0;r<n;r++){m=0,b=0;var _,w,x,k=e[r],S=k.text,E=k.width,C=r!==n-1;if(t.save(),"right"===l?m+=c-E-2*i:"center"===l&&(m+=(c-E-2*i)/2),v&&(t.save(),t.beginPath(),t.moveTo(m,y+b+Math.round(o/2)),w=0==(_=S.split(" ").length-1),x="justify"===l&&C&&!w?c-2*i:E,t.lineTo(m+Math.round(x),y+b+Math.round(o/2)),t.lineWidth=o/15,t.strokeStyle=f,t.stroke(),t.restore()),g&&(t.save(),t.beginPath(),t.moveTo(m,y+b),w=0==(_=S.split(" ").length-1),x="justify"===l&&C&&!w?c-2*i:E,t.lineTo(m+Math.round(x),y+b),t.lineWidth=o/15,t.strokeStyle=f,t.stroke(),t.restore()),0!==d||"justify"===l){_=S.split(" ").length-1;for(var T=h(S),P=0;P<T.length;P++){var A=T[P];" "===A&&r!==n-1&&"justify"===l&&(m+=(c-2*i-E)/_),this._partialTextX=m,this._partialTextY=y+b,this._partialText=A,t.fillStrokeShape(this),m+=this.measureSize(A).width+d}}else this._partialTextX=m,this._partialTextY=y+b,this._partialText=S,t.fillStrokeShape(this);t.restore(),n>1&&(y+=a)}}},e.prototype._hitFunc=function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var e=o.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this},e.prototype.getWidth=function(){return"auto"===this.attrs.width||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},e.prototype.getHeight=function(){return"auto"===this.attrs.height||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var e,n=v(),r=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:r}},e.prototype._getContextFont=function(){return u.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(function(t){var e=(t=t.trim()).indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t='"'+t+'"'),t}).join(", ")},e.prototype._addTextLine=function(t){"justify"===this.align()&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},e.prototype._getTextWidth=function(t){var e=this.letterSpacing(),n=t.length;return v().measureText(t).width+(n?e*(n-1):0)},e.prototype._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,r=this.lineHeight()*e,i=this.attrs.width,o=this.attrs.height,a="auto"!==i&&void 0!==i,s="auto"!==o&&void 0!==o,u=this.padding(),l=i-2*u,c=o-2*u,h=0,d=this.wrap(),f="none"!==d,p="char"!==d&&f,g=this.ellipsis();this.textArr=[],v().font=this._getContextFont();for(var y=g?this._getTextWidth("\u2026"):0,m=0,b=t.length;m<b;++m){var _=t[m],w=this._getTextWidth(_);if(a&&w>l)for(;_.length>0;){for(var x=0,k=_.length,S="",E=0;x<k;){var C=x+k>>>1,T=_.slice(0,C+1),P=this._getTextWidth(T)+y;P<=l?(x=C+1,S=T,E=P):k=C}if(!S)break;if(p){var A,D=_[S.length];(A=(" "===D||"-"===D)&&E<=l?S.length:Math.max(S.lastIndexOf(" "),S.lastIndexOf("-"))+1)>0&&(S=S.slice(0,x=A),E=this._getTextWidth(S))}if(S=S.trimRight(),this._addTextLine(S),n=Math.max(n,E),h+=r,!f||s&&h+r>c){var O=this.textArr[this.textArr.length-1];O&&g&&(this._getTextWidth(O.text+"\u2026")<l||(O.text=O.text.slice(0,O.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(O.text+"\u2026"));break}if((_=(_=_.slice(x)).trimLeft()).length>0&&(w=this._getTextWidth(_))<=l){this._addTextLine(_),h+=r,n=Math.max(n,w);break}}else this._addTextLine(_),h+=r,n=Math.max(n,w);if(s&&h+r>c)break}this.textHeight=e,this.textWidth=n},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(s.Shape);e.Text=g,g.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype.className="Text",g.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],c._registerNode(g),a.Factory.overWriteSetter(g,"width",l.getNumberOrAutoValidator()),a.Factory.overWriteSetter(g,"height",l.getNumberOrAutoValidator()),a.Factory.addGetterSetter(g,"fontFamily","Arial"),a.Factory.addGetterSetter(g,"fontSize",12,l.getNumberValidator()),a.Factory.addGetterSetter(g,"fontStyle","normal"),a.Factory.addGetterSetter(g,"fontVariant","normal"),a.Factory.addGetterSetter(g,"padding",0,l.getNumberValidator()),a.Factory.addGetterSetter(g,"align","left"),a.Factory.addGetterSetter(g,"verticalAlign","top"),a.Factory.addGetterSetter(g,"lineHeight",1,l.getNumberValidator()),a.Factory.addGetterSetter(g,"wrap","word"),a.Factory.addGetterSetter(g,"ellipsis",!1,l.getBooleanValidator()),a.Factory.addGetterSetter(g,"letterSpacing",0,l.getNumberValidator()),a.Factory.addGetterSetter(g,"text","",l.getStringValidator()),a.Factory.addGetterSetter(g,"textDecoration",""),o.Collection.mapMethods(g)},1794:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(2747),l=n(6135),c=n(8760),h=n(2458);function d(t){t.fillText(this.partialText,0,0)}function f(t){t.strokeText(this.partialText,0,0)}var p=function(t){function e(e){var n=t.call(this,e)||this;return n.dummyCanvas=o.Util.createCanvasElement(),n.dataArray=[],n.dataArray=u.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",function(){this.dataArray=u.Path.parsePathData(this.attrs.data),this._setTextData()}),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),e&&e.getKerning&&(o.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(e.getKerning)),n._setTextData(),n}return i(e,t),e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<i.length;o++){t.save();var a=i[o].p0;t.translate(a.x,a.y),t.rotate(i[o].rotation),this.partialText=i[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=r/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var r=0;r<e.length;r++){var i=e[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return l.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return l.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),r=this.align(),i=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var a=0,s=0;s<t.dataArray.length;s++)t.dataArray[s].pathLength>0&&(a+=t.dataArray[s].pathLength);var c=0;"center"===r&&(c=Math.max(0,a/2-o/2)),"right"===r&&(c=Math.max(0,a-o));for(var h,d,f,p=l.stringToArray(this.text()),v=this.text().split(" ").length-1,g=-1,y=0,m=function(){y=0;for(var e=t.dataArray,n=g+1;n<e.length;n++){if(e[n].pathLength>0)return g=n,e[n];"M"===e[n].command&&(h={x:e[n].points[0],y:e[n].points[1]})}return{}},b=function(e){var i=t._getTextSize(e).width+n;" "===e&&"justify"===r&&(i+=(a-o)/v);var s=0,l=0;for(d=void 0;Math.abs(i-s)/i>.01&&l<20;){l++;for(var c=s;void 0===f;)(f=m())&&c+f.pathLength<i&&(c+=f.pathLength,f=void 0);if(f==={}||void 0===h)return;var p=!1;switch(f.command){case"L":u.Path.getLineLength(h.x,h.y,f.points[0],f.points[1])>i?d=u.Path.getPointOnLine(i,h.x,h.y,f.points[0],f.points[1],h.x,h.y):f=void 0;break;case"A":var g=f.points[5],b=f.points[4]+g;0===y?y=f.points[4]+1e-8:i>s?y+=Math.PI/180*g/Math.abs(g):y-=Math.PI/360*g/Math.abs(g),(g<0&&y<b||g>=0&&y>b)&&(y=b,p=!0),d=u.Path.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],y,f.points[6]);break;case"C":0===y?y=i>f.pathLength?1e-8:i/f.pathLength:i>s?y+=(i-s)/f.pathLength/2:y=Math.max(y-(s-i)/f.pathLength/2,0),y>1&&(y=1,p=!0),d=u.Path.getPointOnCubicBezier(y,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);break;case"Q":0===y?y=i/f.pathLength:i>s?y+=(i-s)/f.pathLength:y-=(s-i)/f.pathLength,y>1&&(y=1,p=!0),d=u.Path.getPointOnQuadraticBezier(y,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3])}void 0!==d&&(s=u.Path.getLineLength(h.x,h.y,d.x,d.y)),p&&(p=!1,f=void 0)}},_=c/(t._getTextSize("C").width+n)-1,w=0;w<_&&(b("C"),void 0!==h&&void 0!==d);w++)h=d;for(var x=0;x<p.length&&(b(p[x]),void 0!==h&&void 0!==d);x++){var k=u.Path.getLineLength(h.x,h.y,d.x,d.y),S=0;if(i)try{S=i(p[x-1],p[x])*this.fontSize()}catch(T){S=0}h.x+=S,d.x+=S,this.textWidth+=S;var E=u.Path.getPointOnLine(S+k/2,h.x,h.y,d.x,d.y),C=Math.atan2(d.y-h.y,d.x-h.x);this.glyphInfo.push({transposeX:E.x,transposeY:E.y,text:p[x],rotation:C,p0:h,p1:d}),h=d}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)});for(var e,n,r=t[0]||0,i=t[0]||0,o=t[1]||0,a=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),o=Math.min(o,n),a=Math.max(a,n);var u=this.fontSize();return{x:r-u/2,y:o-u/2,width:i-r+u,height:a-o+u}},e}(s.Shape);e.TextPath=p,p.prototype._fillFunc=d,p.prototype._strokeFunc=f,p.prototype._fillFuncHit=d,p.prototype._strokeFuncHit=f,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],h._registerNode(p),a.Factory.addGetterSetter(p,"data"),a.Factory.addGetterSetter(p,"fontFamily","Arial"),a.Factory.addGetterSetter(p,"fontSize",12,c.getNumberValidator()),a.Factory.addGetterSetter(p,"fontStyle","normal"),a.Factory.addGetterSetter(p,"align","left"),a.Factory.addGetterSetter(p,"letterSpacing",0,c.getNumberValidator()),a.Factory.addGetterSetter(p,"textBaseline","middle"),a.Factory.addGetterSetter(p,"fontVariant","normal"),a.Factory.addGetterSetter(p,"text",""),a.Factory.addGetterSetter(p,"textDecoration",null),a.Factory.addGetterSetter(p,"kerningFunc",null),o.Collection.mapMethods(p)},1161:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;var a=n(9923),s=n(6207),u=n(6191),l=n(535),c=n(576),h=n(829),d=n(2458),f=n(8760),p=n(2458),v=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(t){return t+".tr-konva"}).join(" "),g=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(t){return t+".tr-konva"}).join(" "),y={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},m="ontouchstart"in d.Konva._global,b=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function _(t,e,n){var r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return o(o({},t),{rotation:t.rotation+e,x:r,y:i})}var w=function(t){function e(e){var n=t.call(this,e)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(v,n.update),n.getNode()&&n.update(),n}return i(e,t),e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){return a.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},e.prototype.getNode=function(){return this._nodes&&this._nodes[0]},e.prototype.setNodes=function(t){var e=this;return void 0===t&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,this.rotation(1===t.length?t[0].getAbsoluteRotation():0),this._nodes.forEach(function(t){var n=t._attrsAffectingSize.map(function(t){return t+"Change.tr-konva"}).join(" "),r=function(){1===e.nodes().length&&e.rotation(e.nodes()[0].getAbsoluteRotation()),e._resetTransformCache(),e._transforming||e.isDragging()||e.update()};t.on(n,r),t.on(g,r),t.on("_clearTransformCache.tr-konva",r),t.on("xChange.tr-konva yChange.tr-konva",r),e._proxyDrag(t)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this},e.prototype._proxyDrag=function(t){var e,n=this;t.on("dragstart.tr-konva",function(r){e=t.getAbsolutePosition(),n.isDragging()||t===n.findOne(".back")||n.startDrag(r,!1)}),t.on("dragmove.tr-konva",function(r){if(e){var i=t.getAbsolutePosition(),o=i.x-e.x,a=i.y-e.y;n.nodes().forEach(function(e){if(e!==t&&!e.isDragging()){var n=e.getAbsolutePosition();e.setAbsolutePosition({x:n.x+o,y:n.y+a}),e.startDrag(r)}}),e=null}})},e.prototype.getNodes=function(){return this._nodes||[]},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this._nodes&&this._nodes.forEach(function(t){t.off(".tr-konva")}),this._nodes=[],this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache("nodesRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache("nodesRect",this.__getNodeRect)},e.prototype.__getNodeShape=function(t,e,n){void 0===e&&(e=this.rotation());var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),a=r.x*i.x-t.offsetX()*i.x,s=r.y*i.y-t.offsetY()*i.y,u=(d.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return _({x:o.x+a*Math.cos(u)+s*Math.sin(-u),y:o.y+s*Math.cos(u)+a*Math.sin(u),width:r.width*i.x,height:r.height*i.y,rotation:u},-d.Konva.getAngle(e),{x:0,y:0})},e.prototype.__getNodeRect=function(){var t=this;if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var e=[];this.nodes().map(function(n){var r=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),i=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],o=n.getAbsoluteTransform();i.forEach(function(t){var n=o.point(t);e.push(n)})});var n,r,i,o,s=new a.Transform;s.rotate(-d.Konva.getAngle(this.rotation())),e.forEach(function(t){var e=s.point(t);void 0===n&&(n=i=e.x,r=o=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y)}),s.invert();var u=s.point({x:n,y:r});return{x:u.x,y:u.y,width:i-n,height:o-r,rotation:d.Konva.getAngle(this.rotation())}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),b.forEach((function(t){this._createAnchor(t)}).bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var e=this,n=new c.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:m?10:"auto"}),r=this;n.on("mousedown touchstart",function(t){r._handleMouseDown(t)}),n.on("dragstart",function(t){n.stopDrag(),t.cancelBubble=!0}),n.on("dragend",function(t){t.cancelBubble=!0}),n.on("mouseenter",function(){var r=d.Konva.getAngle(e.rotation()),i=function(t,e){if("rotater"===t)return"crosshair";e+=a.Util._degToRad(y[t]||0);var n=(a.Util._radToDeg(e)%360+360)%360;return a.Util._inRange(n,337.5,360)||a.Util._inRange(n,0,22.5)?"ns-resize":a.Util._inRange(n,22.5,67.5)?"nesw-resize":a.Util._inRange(n,67.5,112.5)?"ew-resize":a.Util._inRange(n,112.5,157.5)?"nwse-resize":a.Util._inRange(n,157.5,202.5)?"ns-resize":a.Util._inRange(n,202.5,247.5)?"nesw-resize":a.Util._inRange(n,247.5,292.5)?"ew-resize":a.Util._inRange(n,292.5,337.5)?"nwse-resize":(a.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,r);n.getStage().content.style.cursor=i,e._cursorChange=!0}),n.on("mouseout",function(){n.getStage().content.style.cursor="",e._cursorChange=!1}),this.add(n)},e.prototype._createBack=function(){var t=this,e=new l.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*a.Util._sign(this.height())-n),t.fillStrokeShape(this)},hitFunc:function(e,n){if(t.shouldOverdrawWholeArea()){var r=t.padding();e.beginPath(),e.rect(-r,-r,n.width()+2*r,n.height()+2*r),e.fillStrokeShape(n)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",function(t){t.cancelBubble=!0}),e.on("dragmove",function(t){t.cancelBubble=!0}),e.on("dragend",function(t){t.cancelBubble=!0})},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/i),this.cos=Math.abs(n/i),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;var o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(function(e){e._fire("transformstart",{evt:t,target:e})})},e.prototype._handleMouseMove=function(t){var e,n,r,i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(t);var a=o.getPointerPosition(),s={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y},u=i.getAbsolutePosition();i.setAbsolutePosition(s);var l=i.getAbsolutePosition();if(u.x!==l.x||u.y!==l.y)if("rotater"!==this._movingAnchorName){var c=this.keepRatio()||t.shiftKey,h=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(c){var f=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(f.x-i.x(),2)+Math.pow(f.y-i.y(),2));var p=this.findOne(".top-left").x()>f.x?-1:1,v=this.findOne(".top-left").y()>f.y?-1:1;e=r*this.cos*p,n=r*this.sin*v,this.findOne(".top-left").x(f.x-e),this.findOne(".top-left").y(f.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){c&&(f=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},r=Math.sqrt(Math.pow(i.x()-f.x,2)+Math.pow(f.y-i.y(),2)),p=this.findOne(".top-right").x()<f.x?-1:1,v=this.findOne(".top-right").y()>f.y?-1:1,e=r*this.cos*p,n=r*this.sin*v,this.findOne(".top-right").x(f.x+e),this.findOne(".top-right").y(f.y-n));var g=i.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(i.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(i.x()):"bottom-left"===this._movingAnchorName?(c&&(f=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},r=Math.sqrt(Math.pow(f.x-i.x(),2)+Math.pow(i.y()-f.y,2)),p=f.x<i.x()?-1:1,v=i.y()<f.y?-1:1,n=r*this.sin*v,i.x(f.x-(e=r*this.cos*p)),i.y(f.y+n)),g=i.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(i.y()):"bottom-right"===this._movingAnchorName?c&&(f=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},r=Math.sqrt(Math.pow(i.x()-f.x,2)+Math.pow(i.y()-f.y,2)),p=this.findOne(".bottom-right").x()<f.x?-1:1,v=this.findOne(".bottom-right").y()<f.y?-1:1,e=r*this.cos*p,n=r*this.sin*v,this.findOne(".bottom-right").x(f.x+e),this.findOne(".bottom-right").y(f.y+n)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(h=this.centeredScaling()||t.altKey){var y=this.findOne(".top-left"),m=this.findOne(".bottom-right"),b=y.x(),w=y.y(),x=this.getWidth()-m.x(),k=this.getHeight()-m.y();m.move({x:-b,y:-w}),y.move({x:x,y:k})}var S=this.findOne(".top-left").getAbsolutePosition();e=S.x,n=S.y;var E=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:E,height:C,rotation:d.Konva.getAngle(this.rotation())},t)}else{var T=this._getNodeRect();e=i.x()-T.width/2,n=-i.y()+T.height/2;var P=Math.atan2(-n,e)+Math.PI/2;T.height<0&&(P-=Math.PI);var A=d.Konva.getAngle(this.rotation())+P,D=d.Konva.getAngle(this.rotationSnapTolerance()),O=function(t,e){return _(t,e,function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t))}(T,function(t,e,n){for(var r=e,i=0;i<t.length;i++){var o=d.Konva.getAngle(t[i]),a=Math.abs(o-e)%(2*Math.PI);Math.min(a,2*Math.PI-a)<n&&(r=o)}return r}(this.rotationSnaps(),A,D)-T.rotation);this._fitNodesInto(O,t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype.getAbsoluteTransform=function(){return this.getTransform()},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(function(e){e._fire("transformend",{evt:t,target:e})}),this._movingAnchorName=null}},e.prototype._fitNodesInto=function(t,e){var n=this,r=this._getNodeRect();if(a.Util._inRange(t.width,2*-this.padding()-1,1))this.update();else if(a.Util._inRange(t.height,2*-this.padding()-1,1))this.update();else{var i=new a.Transform;if(i.rotate(d.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var o=i.point({x:2*-this.padding(),y:0});t.x+=o.x,t.y+=o.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y}else this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0&&(o=i.point({x:2*this.padding(),y:0}),this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y,t.width+=2*this.padding());if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0?(o=i.point({x:0,y:2*-this.padding()}),t.x+=o.x,t.y+=o.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y,t.height+=2*this.padding()):this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0&&(o=i.point({x:0,y:2*this.padding()}),this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y,t.height+=2*this.padding()),this.boundBoxFunc()){var s=this.boundBoxFunc()(r,t);s?t=s:a.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var u=new a.Transform;u.translate(r.x,r.y),u.rotate(r.rotation),u.scale(r.width/1e7,r.height/1e7);var l=new a.Transform;l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(t.width/1e7,t.height/1e7);var c=l.multiply(u.invert());this._nodes.forEach(function(t){var r,i=t.getParent().getAbsoluteTransform(),o=t.getTransform().copy();o.translate(t.offsetX(),t.offsetY());var s=new a.Transform;s.multiply(i.copy().invert()).multiply(c).multiply(i).multiply(o);var u=s.decompose();t.setAttrs(u),n._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(r=t.getLayer())||void 0===r||r.batchDraw()}),this.rotation(a.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype._batchChangeChild=function(t,e){this.findOne(t).setAttrs(e)},e.prototype.update=function(){var t,e=this,n=this._getNodeRect();this.rotation(a.Util._getRotation(n.rotation));var r=n.width,i=n.height,o=this.enabledAnchors(),s=this.resizeEnabled(),u=this.padding(),l=this.anchorSize();this.find("._anchor").each(function(t){t.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+u,offsetY:l/2+u,visible:s&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+u,visible:s&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-u,offsetY:l/2+u,visible:s&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+u,visible:s&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-u,visible:s&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+u,offsetY:l/2-u,visible:s&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-u,visible:s&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-u,offsetY:l/2-u,visible:s&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*a.Util._sign(i)-u,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),h.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return u.Node.prototype.toObject.call(this)},e}(h.Group);e.Transformer=w,w.prototype.className="Transformer",p._registerNode(w),s.Factory.addGetterSetter(w,"enabledAnchors",b,function(t){return t instanceof Array||a.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===b.indexOf(t)&&a.Util.warn("Unknown anchor name: "+t+". Available names are: "+b.join(", "))}),t||[]}),s.Factory.addGetterSetter(w,"resizeEnabled",!0),s.Factory.addGetterSetter(w,"anchorSize",10,f.getNumberValidator()),s.Factory.addGetterSetter(w,"rotateEnabled",!0),s.Factory.addGetterSetter(w,"rotationSnaps",[]),s.Factory.addGetterSetter(w,"rotateAnchorOffset",50,f.getNumberValidator()),s.Factory.addGetterSetter(w,"rotationSnapTolerance",5,f.getNumberValidator()),s.Factory.addGetterSetter(w,"borderEnabled",!0),s.Factory.addGetterSetter(w,"anchorStroke","rgb(0, 161, 255)"),s.Factory.addGetterSetter(w,"anchorStrokeWidth",1,f.getNumberValidator()),s.Factory.addGetterSetter(w,"anchorFill","white"),s.Factory.addGetterSetter(w,"anchorCornerRadius",0,f.getNumberValidator()),s.Factory.addGetterSetter(w,"borderStroke","rgb(0, 161, 255)"),s.Factory.addGetterSetter(w,"borderStrokeWidth",1,f.getNumberValidator()),s.Factory.addGetterSetter(w,"borderDash"),s.Factory.addGetterSetter(w,"keepRatio",!0),s.Factory.addGetterSetter(w,"centeredScaling",!1),s.Factory.addGetterSetter(w,"ignoreStroke",!1),s.Factory.addGetterSetter(w,"padding",0,f.getNumberValidator()),s.Factory.addGetterSetter(w,"node"),s.Factory.addGetterSetter(w,"nodes"),s.Factory.addGetterSetter(w,"boundBoxFunc"),s.Factory.addGetterSetter(w,"shouldOverdrawWholeArea",!1),s.Factory.backCompat(w,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),a.Collection.mapMethods(w)},1353:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;var o=n(9923),a=n(6207),s=n(535),u=n(2458),l=n(8760),c=n(2458),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,u.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.Wedge=h,h.prototype.className="Wedge",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["radius"],c._registerNode(h),a.Factory.addGetterSetter(h,"radius",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"angle",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"clockwise",!1),a.Factory.backCompat(h,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),o.Collection.mapMethods(h)},6188:function(t){var e=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,a="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,u=a||s||Function("return this")(),l=Object.prototype.toString,c=Math.max,h=Math.min,d=function(){return u.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function p(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==l.call(t)}(t))return NaN;if(f(t)){var a="function"==typeof t.valueOf?t.valueOf():t;t=f(a)?a+"":a}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(e,"");var s=r.test(t);return s||i.test(t)?o(t.slice(2),s?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,n){var r,i,o,a,s,u,l=0,v=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function b(t){return l=t,s=setTimeout(w,e),v?m(t):a}function _(t){var n=t-u;return void 0===u||n>=e||n<0||g&&t-l>=o}function w(){var t=d();if(_(t))return x(t);s=setTimeout(w,function(t){var n=e-(t-u);return g?h(n,o-(t-l)):n}(t))}function x(t){return s=void 0,y&&r?m(t):(r=i=void 0,a)}function k(){var t=d(),n=_(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return b(u);if(g)return s=setTimeout(w,e),m(u)}return void 0===s&&(s=setTimeout(w,e)),a}return e=p(e)||0,f(n)&&(v=!!n.leading,o=(g="maxWait"in n)?c(p(n.maxWait)||0,e):o,y="trailing"in n?!!n.trailing:y),k.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},k.flush=function(){return void 0===s?a:x(d())},k}},6301:function(t){var e,n=/^\[object .+?Constructor\]$/,r="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")(),a=Array.prototype,s=Function.prototype,u=Object.prototype,l=o["__core-js_shared__"],c=(e=/[^.]+$/.exec(l&&l.keys&&l.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",h=s.toString,d=u.hasOwnProperty,f=u.toString,p=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=a.splice,g=k(o,"Map"),y=k(Object,"create");function m(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function b(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function w(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function x(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function k(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!E(t)||(e=t,c&&c in e))&&(function(t){var e=E(t)?f.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}(t)?p:n).test(function(t){if(null!=t){try{return h.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t));var e}(r)?r:void 0}function S(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(S.Cache||_),n}function E(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}m.prototype.clear=function(){this.__data__=y?y(null):{}},m.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},m.prototype.get=function(t){var e=this.__data__;if(y){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return d.call(e,t)?e[t]:void 0},m.prototype.has=function(t){var e=this.__data__;return y?void 0!==e[t]:d.call(e,t)},m.prototype.set=function(t,e){return this.__data__[t]=y&&void 0===e?"__lodash_hash_undefined__":e,this},b.prototype.clear=function(){this.__data__=[]},b.prototype.delete=function(t){var e=this.__data__,n=w(e,t);return!(n<0||(n==e.length-1?e.pop():v.call(e,n,1),0))},b.prototype.get=function(t){var e=this.__data__,n=w(e,t);return n<0?void 0:e[n][1]},b.prototype.has=function(t){return w(this.__data__,t)>-1},b.prototype.set=function(t,e){var n=this.__data__,r=w(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},_.prototype.clear=function(){this.__data__={hash:new m,map:new(g||b),string:new m}},_.prototype.delete=function(t){return x(this,t).delete(t)},_.prototype.get=function(t){return x(this,t).get(t)},_.prototype.has=function(t){return x(this,t).has(t)},_.prototype.set=function(t,e){return x(this,t).set(t,e),this},S.Cache=_,t.exports=S},2548:function(t){var e=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,a="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,u=a||s||Function("return this")(),l=Object.prototype.toString,c=Math.max,h=Math.min,d=function(){return u.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function p(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==l.call(t)}(t))return NaN;if(f(t)){var a="function"==typeof t.valueOf?t.valueOf():t;t=f(a)?a+"":a}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(e,"");var s=r.test(t);return s||i.test(t)?o(t.slice(2),s?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return f(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(t,e,n){var r,i,o,a,s,u,l=0,v=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function b(t){return l=t,s=setTimeout(w,e),v?m(t):a}function _(t){var n=t-u;return void 0===u||n>=e||n<0||g&&t-l>=o}function w(){var t=d();if(_(t))return x(t);s=setTimeout(w,function(t){var n=e-(t-u);return g?h(n,o-(t-l)):n}(t))}function x(t){return s=void 0,y&&r?m(t):(r=i=void 0,a)}function k(){var t=d(),n=_(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return b(u);if(g)return s=setTimeout(w,e),m(u)}return void 0===s&&(s=setTimeout(w,e)),a}return e=p(e)||0,f(n)&&(v=!!n.leading,o=(g="maxWait"in n)?c(p(n.maxWait)||0,e):o,y="trailing"in n?!!n.trailing:y),k.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},k.flush=function(){return void 0===s?a:x(d())},k}(t,e,{leading:r,maxWait:e,trailing:i})}},1282:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(9812)),r(n(5098)),r(n(9895)),r(n(3408)),r(n(6082)),r(n(3839)),r(n(1390)),r(n(3807)),r(n(4232)),r(n(2267)),r(n(741)),r(n(1539)),r(n(7002)),r(n(9147)),r(n(980)),r(n(6684))},9812:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1390),a=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=o.Layout.dragStart,n.dragend=n.dragEnd=o.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(o.Layout);e.LayoutAdaptor=a,e.adaptor=function(t){return new a(t)}},6684:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1390),i=n(6082);e.gridify=function(t,e,n,r){return t.cola.start(0,0,0,10,!1),function(t,e,n,r){t.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}}),e.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat(void 0!==e.leaves?e.leaves.map(function(t){return t.index}):[])}});var o=t.concat(e).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new i.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})},e.powerGraphGridLayout=function(t,e,n){var i;t.nodes.forEach(function(t,e){return t.index=e}),(new r.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){return t.padding=n})});var o=t.nodes.length,a=[],s=t.nodes.slice(0);return s.forEach(function(t,e){return t.index=e}),i.groups.forEach(function(t){var e=t.index=t.id+o;s.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return a.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return a.push({source:e,target:t.id+o})})}),i.powerEdges.forEach(function(t){a.push({source:t.source.index,target:t.target.index})}),(new r.Layout).size(e).nodes(s).links(a).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new r.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){t.padding=n})}).start(50,0,100,0,!1),powerGraph:i}}},5098:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9738),i=n(2834);e.d3adaptor=function(t){return!t||function(t){return t.version&&null!==t.version.match(/^3\./)}(t)?new r.D3StyleLayoutAdaptor:new i.D3StyleLayoutAdaptor(t)}},9738:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1390),a=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(t){o.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},e.prototype.on=function(t,e){return this.event.on("string"==typeof t?t:o.EventType[t],e),this},e}(o.Layout);e.D3StyleLayoutAdaptor=a,e.d3adaptor=function(){return new a}},2834:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1390);e.D3StyleLayoutAdaptor=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(o.Layout.dragOrigin).on("start.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(t){o.Layout.drag(t,e.event),r.resume()}).on("end.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer(function(){return t.prototype.tick.call(e)&&n.stop()})},e.prototype.on=function(t,e){return this.event.on("string"==typeof t?t:o.EventType[t],e),this},e}(o.Layout)},9895:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=n,e.Descent=function(){function t(t,e,i){void 0===i&&(i=null),this.D=e,this.G=i,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new r,this.project=null,this.x=t,this.k=t.length;var o=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new n,this.minD=Number.MAX_VALUE;for(var a,s=o;s--;)for(a=o;--a>s;){var u=e[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(o),this.H[s]=new Array(o),a=o;a--;)this.H[s][a]=new Array(o);this.Hd[s]=new Array(o),this.a[s]=new Array(o),this.b[s]=new Array(o),this.c[s]=new Array(o),this.d[s]=new Array(o),this.e[s]=new Array(o),this.ia[s]=new Array(o),this.ib[s]=new Array(o),this.xtmp[s]=new Array(o)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*(t.minD/n)})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;u<n;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var l=0;l<n;++l)if(u!==l){for(var c=n;c--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=t[r][u]-t[r][l];h+=o[r]=d*d}if(h>1e-9)break;var f=this.offsetDir();for(r=0;r<this.k;++r)t[r][l]+=f[r]}var p=Math.sqrt(h),v=this.D[u][l],g=null!=this.G?this.G[u][l]:1;if(g>1&&p>v||!isFinite(v))for(r=0;r<this.k;++r)this.H[r][u][l]=0;else{g>1&&(g=1);var y=v*v,m=2*g*(p-v)/(y*p),b=p*p*p,_=2*-g/(y*b);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][u]+=i[r]*m,a[r]-=this.H[r][u][l]=_*(b+v*(o[r]-h)+p*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}var w=this.snapGridSize/2,x=this.snapGridSize,k=this.snapStrength/(w*w),S=this.numGridSnapNodes;for(u=0;u<S;++u)for(r=0;r<this.k;++r){var E=this.x[r][u],C=E/x,T=C%1,P=C-T;-w<(d=Math.abs(T)<=.5?E-P*x:E>0?E-(P+1)*x:E-(P-1)*x)&&d<=w&&(this.scaleSnapByMaxH?(this.g[r][u]+=s*k*d,this.H[r][u][u]+=s*k):(this.g[r][u]+=k*d,this.H[r][u][u]+=k))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[e][r];if(isFinite(u)){var l=u-o;t+=l*l/(u*u)}}return t},t.zeroDistance=1e-10,t}();var r=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=r},3408:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7002),a=function(){};e.Point=a;var s=function(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r};function u(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function l(t,e,n){return u(t,e,n)>0}function c(t,e,n){return u(t,e,n)<0}function h(t,e){var n,r,i,o,a=e.length-1;if(c(t,e[1],e[0])&&!l(t,e[a-1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return l(t,e[n],e[r])?n:r;if((o=c(t,e[(i=Math.floor((n+r)/2))+1],e[i]))&&!l(t,e[i-1],e[i]))return i;l(t,e[n+1],e[n])?o||l(t,e[n],e[i])?r=i:n=i:o&&c(t,e[n],e[i])?r=i:n=i}}function d(t,e){var n,r,i,o,a=e.length-1;if(l(t,e[a-1],e[0])&&!c(t,e[1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return c(t,e[n],e[r])?n:r;if(o=c(t,e[(i=Math.floor((n+r)/2))+1],e[i]),l(t,e[i-1],e[i])&&!o)return i;c(t,e[n+1],e[n])?o?c(t,e[n],e[i])?r=i:n=i:r=i:o?n=i:l(t,e[n],e[i])?r=i:n=i}}function f(t,e,n,r,i,o){var a,s;s=r(t[a=n(e[0],t)],e);for(var u=!1;!u;){for(u=!0;a===t.length-1&&(a=0),!i(e[s],t[a],t[a+1]);)++a;for(;0===s&&(s=e.length-1),!o(t[a],e[s],e[s-1]);)--s,u=!1}return{t1:a,t2:s}}function p(t,e){return f(t,e,h,d,l,c)}e.LineSegment=s,e.PolyPoint=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a),e.isLeft=u,e.ConvexHull=function(t){var e,n=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),r=t.length,i=n[0].x;for(e=1;e<r&&n[e].x===i;++e);var o=e-1,a=[];if(a.push(n[0]),o===r-1)n[o].y!==n[0].y&&a.push(n[o]);else{var s,l=r-1,c=n[r-1].x;for(e=r-2;e>=0&&n[e].x===c;e--);for(s=e+1,e=o;++e<=s;)if(!(u(n[0],n[s],n[e])>=0&&e<s)){for(;a.length>1&&!(u(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}l!=s&&a.push(n[l]);var h=a.length;for(e=s;--e>=o;)if(!(u(n[l],n[o],n[e])>=0&&e>o)){for(;a.length>h&&!(u(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}}return a},e.clockwiseRadialSweep=function(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)},e.tangent_PolyPolyC=f,e.LRtangent_PolyPolyC=function(t,e){var n=p(e,t);return{t1:n.t2,t2:n.t1}},e.RLtangent_PolyPolyC=p,e.LLtangent_PolyPolyC=function(t,e){return f(t,e,d,d,c,c)},e.RRtangent_PolyPolyC=function(t,e){return f(t,e,h,h,l,l)};var v=function(t,e){this.t1=t,this.t2=e};e.BiTangent=v;var g=function(){};e.BiTangents=g,e.TVGPoint=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a);var y=function(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this};e.VisibilityVertex=y;var m=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();function b(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var a=o.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);a&&n.push(a)}return n}function _(t,e){for(var n=t.length-1,r=e.length-1,i=new g,o=0;o<n;++o)for(var a=0;a<r;++a){var s=t[0==o?n-1:o-1],l=t[o],c=t[o+1],h=e[0==a?r-1:a-1],d=e[a],f=e[a+1],p=u(s,l,d),y=u(l,h,d),m=u(l,d,f),b=u(h,d,l),_=u(d,s,l),w=u(d,l,c);p>=0&&y>=0&&m<0&&b>=0&&_>=0&&w<0?i.ll=new v(o,a):p<=0&&y<=0&&m>0&&b<=0&&_<=0&&w>0?i.rr=new v(o,a):p<=0&&y>0&&m<=0&&b>=0&&_<0&&w>=0?i.rl=new v(o,a):p>=0&&y<0&&m>=0&&b<=0&&_>0&&w<=0&&(i.lr=new v(o,a))}return i}function w(t,e){return!t.every(function(t){return!function(t,e){for(var n=1,r=e.length;n<r;++n)if(c(e[n-1],e[n],t))return!1;return!0}(t,e)})}e.VisibilityEdge=m,e.TangentVisibilityGraph=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],o=0;o<i.length;++o){var a=new y(this.V.length,r,o,i[o]);this.V.push(a),o>0&&this.E.push(new m(i[o-1].vv,a))}i.length>1&&this.E.push(new m(i[0].vv,i[i.length-1].vv))}for(r=0;r<n-1;r++){var s=t[r];for(o=r+1;o<n;o++){var u=t[o],l=_(s,u);for(var c in l){var h=l[c];this.addEdgeIfVisible(s[h.t1],u[h.t2],r,o)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new s(t.x,t.y,e.x,e.y),n,r)||this.E.push(new m(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n,r,i,o=this.P.length;this.V.push(new y(this.V.length,o,0,t));for(var a=0;a<o;++a)if(a!==e){var s=this.P[a],u=(n=t,i=void 0,(i=(r=s).slice(0)).push(r[0]),{rtan:h(n,i),ltan:d(n,i)});this.addEdgeIfVisible(t,s[u.ltan],e,a),this.addEdgeIfVisible(t,s[u.rtan],e,a)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&b(t,this.P[r]).length>0)return!0;return!1},t}(),e.tangents=_,e.polysOverlap=function(t,e){if(w(t,e))return!0;if(w(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(b(new s(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}},6082:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7002),i=n(980),o=n(9147),a=function(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length};e.NodeWrapper=a;var s=function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i};e.Vert=s;var u=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=u,e.GridRouter=function(){function t(t,e,n){var i=this;void 0===n&&(n=12),this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map(function(t,n){return new a(n,e.getBounds(t),e.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return i.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return i.getDepth(t)-i.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(t){var e=r.Rectangle.empty();t.children.forEach(function(t){return e=e.union(i.nodes[t].rect)}),t.rect=e.inflate(i.groupPadding)});var o=this.midPoints(this.cols.map(function(t){return t.pos})),u=this.midPoints(this.rows.map(function(t){return t.pos})),l=o[0],c=o[o.length-1],h=u[0],d=u[u.length-1],f=this.rows.map(function(t){return{x1:l,x2:c,y1:t.pos,y2:t.pos}}).concat(u.map(function(t){return{x1:l,x2:c,y1:t,y2:t}})),p=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:h,y2:d}}).concat(o.map(function(t){return{x1:t,x2:t,y1:h,y2:d}})),v=f.concat(p);v.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],f.forEach(function(t){return p.forEach(function(e){var n=new s(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],a=o.rect,u=Math.abs(n.x-a.cx()),l=Math.abs(n.y-a.cy());if(u<a.width()/2&&l<a.height()/2){n.node=o;break}}})}),v.forEach(function(t,e){i.nodes.forEach(function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(n,r){var o=new s(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)})});var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var a=t.verts[o-1],u=t.verts[o];a.node&&a.node===u.node&&a.node.leaf||i.edges.push({source:a.id,target:u.id,length:Math.abs(r(a,u))})}})}return t.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{e.push(t=t.parent)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++)(c=o[a]).edgeid=i,c.i=a,Math.abs(c[1][e]-c[0][e])<.1&&r.push(c);r.sort(function(t,n){return t[0][e]-n[0][e]});for(var s=[],u=null,l=0;l<r.length;l++){var c=r[l];(!u||Math.abs(c[0][e]-u.pos)>.1)&&s.push(u={pos:c[0][e],segments:[]}),u.segments.push(c)}return s},t.nudgeSegs=function(t,e,n,r,o,a){var s=r.length;if(!(s<=1)){for(var u=r.map(function(e){return new i.Variable(e[0][t])}),l=[],c=0;c<s;c++)for(var h=0;h<s;h++)if(c!==h){var d=r[c],f=d.edgeid,p=r[h].edgeid,v=-1,g=-1;"x"==t?o(f,p)&&(d[0][e]<d[1][e]?(v=h,g=c):(v=c,g=h)):o(f,p)&&(d[0][e]<d[1][e]?(v=c,g=h):(v=h,g=c)),v>=0&&l.push(new i.Constraint(u[v],u[g],a))}new i.Solver(u,l).solve(),u.forEach(function(e,i){var o=r[i],a=e.position();o[0][t]=o[1][t]=a;var s=n[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},t.nudgeSegments=function(e,n,r,i,o){for(var a=t.getSegmentSets(e,n,r),s=0;s<a.length;s++){for(var u=a[s],l=[],c=0;c<u.segments.length;c++){var h=u.segments[c];l.push({type:0,s:h,pos:Math.min(h[0][r],h[1][r])}),l.push({type:1,s:h,pos:Math.max(h[0][r],h[1][r])})}l.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var d=[],f=0;l.forEach(function(a){0===a.type?(d.push(a.s),f++):f--,0==f&&(t.nudgeSegs(n,r,e,d,i,o),d=[])})}},t.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map(function(t){return o.route(r(t),i(t))}),s=t.orderEdges(a),u=a.map(function(e){return t.makeSegments(e)});return t.nudgeSegments(u,"x","y",s,n),t.nudgeSegments(u,"y","x",s,n),t.unreverseEdges(u,a),u},t.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,a,s,l=e[r],c=e[i],h=new u(l,c);0!==h.length&&(h.reversed&&(c.reverse(),c.reversed=!0,h=new u(l,c)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=l.length||h.ti+h.length>=c.length)?n.push({l:r,r:i}):(h.si+h.length>=l.length||h.ti+h.length>=c.length?(o=l[h.si+1],s=l[h.si-1],a=c[h.ti-1]):(o=l[h.si+h.length-2],a=l[h.si+h.length],s=c[h.ti+h.length]),t.isLeft(o,a,s)?n.push({l:i,r:r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),o=1;o<t.length;o++){var a=e(t[o]),s=o<t.length-1?t[o+1]:null;s&&n(i,a,s)||(r.push([i,a]),i=a)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var a={};this.obstacles.forEach(function(t){return a[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in a||r.node&&r.node.id in a)});for(var s=1;s<r.ports.length;s++)this.passableEdges.push({source:r.ports[0].id,target:r.ports[s].id,length:0});for(s=1;s<i.ports.length;s++)this.passableEdges.push({source:i.ports[0].id,target:i.ports[s].id,length:0});var u=new o.Calculator(this.verts.length,this.passableEdges,function(t){return t.source},function(t){return t.target},function(t){return t.length}).PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,function(t,e,o){var a=n.verts[t],s=n.verts[e],u=n.verts[o],l=Math.abs(u.x-a.x),c=Math.abs(u.y-a.y);return a.node===r&&a.node===s.node||s.node===i&&s.node===u.node?0:l>1&&c>1?1e3:0}).reverse().map(function(t){return n.verts[t]});return u.push(this.nodes[i.id].ports[0]),u.filter(function(t,e){return!(e<u.length-1&&u[e+1].node===r&&t.node===r||e>0&&t.node===i&&u[e-1].node===i)})},t.getRoutePath=function(e,n,r,i){var o,a,s,u,l,c={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var h=0;h<e.length;h++){var d=(a=(o=e[h])[1].x)-o[0].x,f=(s=o[1].y)-o[0].y;if(h<e.length-1){Math.abs(d)>0?a-=d/Math.abs(d)*n:s-=f/Math.abs(f)*n,c.routepath+="L "+a+" "+s+" ";var p=e[h+1],v=p[0].x,g=p[0].y;d=p[1].x-v,f=p[1].y-g;var y,m,b=t.angleBetween2Lines(o,p)<0?1:0;Math.abs(d)>0?(y=v+d/Math.abs(d)*n,m=g):(y=v,m=g+f/Math.abs(f)*n);var _=Math.abs(y-a),w=Math.abs(m-s);c.routepath+="A "+_+" "+w+" 0 0 "+b+" "+y+" "+m+" "}else{var x=[a,s];Math.abs(d)>0?(u=[a-=d/Math.abs(d)*i,s+r],l=[a,s-r]):(u=[a+r,s-=f/Math.abs(f)*i],l=[a-r,s]),c.routepath+="L "+a+" "+s+" ",i>0&&(c.arrowpath="M "+x[0]+" "+x[1]+" L "+u[0]+" "+u[1]+" L "+l[0]+" "+l[1])}}else d=(a=(o=e[0])[1].x)-o[0].x,f=(s=o[1].y)-o[0].y,x=[a,s],Math.abs(d)>0?(u=[a-=d/Math.abs(d)*i,s+r],l=[a,s-r]):(u=[a+r,s-=f/Math.abs(f)*i],l=[a-r,s]),c.routepath+="L "+a+" "+s+" ",i>0&&(c.arrowpath="M "+x[0]+" "+x[1]+" L "+u[0]+" "+u[1]+" L "+l[0]+" "+l[1]);return c},t}()},3839:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(1+Math.sqrt(5))/2;e.applyPacking=function(t,e,r,i,o,a){void 0===o&&(o=1),void 0===a&&(a=!0);var s=e,u=r,l=(o=void 0!==o?o:1,i=void 0!==i?i:0,0),c=0,h=0,d=0,f=[];function p(t,e){f=[],l=0,c=0,d=0;for(var n=0;n<t.length;n++)v(t[n],e);return Math.abs(l/c-o)}function v(t,e){for(var n=void 0,r=0;r<f.length;r++)if(f[r].space_left>=t.height&&f[r].x+f[r].width+t.width+10-e<=1e-4){n=f[r];break}f.push(t),void 0!==n?(t.x=n.x+n.width+10,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+10,n.bottom+=t.height+10):(t.y=d,d+=t.height+10,t.x=0,t.bottom=t.y,t.space_left=t.height),t.y+t.height-c>-1e-4&&(c=t.y+t.height-0),t.x+t.width-l>-1e-4&&(l=t.x+t.width-0)}0!=t.length&&(function(t){t.forEach(function(t){var e,n,r,o,a;e=t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=0,a=0,e.array.forEach(function(t){var e=void 0!==t.width?t.width:i,s=void 0!==t.height?t.height:i;e/=2,s/=2,o=Math.max(t.x+e,o),n=Math.min(t.x-e,n),a=Math.max(t.y+s,a),r=Math.min(t.y-s,r)}),e.width=o-n,e.height=a-r})}(t),function(t,e){var r=Number.POSITIVE_INFINITY,i=0;t.sort(function(t,e){return e.height-t.height});for(var o=v=h=t.reduce(function(t,e){return t.width<e.width?t.width:e.width}),a=g=function(t){var e=0;return t.forEach(function(t){return e+=t.width+10}),e}(t),s=0,u=Number.MAX_VALUE,l=Number.MAX_VALUE,c=-1,d=Number.MAX_VALUE,f=Number.MAX_VALUE;d>h||f>1e-4;){if(1!=c){var v=a-(a-o)/n;u=p(t,v)}if(0!=c){var g=o+(a-o)/n;l=p(t,g)}if(d=Math.abs(v-g),f=Math.abs(u-l),u<r&&(r=u,i=v),l<r&&(r=l,i=g),u>l?(o=v,v=g,u=l,c=1):(a=g,g=v,l=u,c=0),s++>100)break}p(t,i)}(t),a&&function(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n=t.x-(e.x-t.width/2)+s/2-l/2,r=t.y-(e.y-t.height/2)+u/2-c/2;t.array.forEach(function(t){t.x+=n,t.y+=r})})}(t))},e.separateGraphs=function(t,e){for(var n={},r={},i=[],o=0,a=0;a<e.length;a++){var s=e[a],u=s.source,l=s.target;r[u.index]?r[u.index].push(l):r[u.index]=[l],r[l.index]?r[l.index].push(u):r[l.index]=[u]}for(a=0;a<t.length;a++){var c=t[a];n[c.index]||h(c,!0)}function h(t,e){if(void 0===n[t.index]){e&&(o++,i.push({array:[]})),n[t.index]=o,i[o-1].array.push(t);var a=r[t.index];if(a)for(var s=0;s<a.length;s++)h(a[s],!1)}}return i}},1390:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2267),i=n(4232),o=n(9895),a=n(7002),s=n(9147),u=n(3408),l=n(3839),c=e.EventType=function(t){return t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end",t}(e.EventType||{});function h(t){return void 0!==t.leaves||void 0!==t.groups}e.Layout=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[c[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:c.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;for(this._descent.locks.clear(),e=0;e<n;++e)(t=this._nodes[e]).fixed&&(void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y),this._descent.locks.add(e,[t.px,t.py]));var r=this._descent.rungeKutta();return 0===r?this._alpha=0:void 0!==this._lastStress&&(this._alpha=r),this._lastStress=r,this.updateNodePositions(),this.trigger({type:c.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(t=this._nodes[r]).x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=r.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:c.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return i.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return i.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,u,l,c){var h=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===u&&(u=0),void 0===l&&(l=!0),void 0===c&&(c=!0);var d,f=this.nodes().length,p=f+2*this._groups.length,v=this._canvasSize[0],g=this._canvasSize[1],y=new Array(p),m=new Array(p),b=null,_=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=v/2,t.y=g/2),y[e]=t.x,m[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?d=this._distanceMatrix:(d=new s.Calculator(p,this._links,t.getSourceIndex,t.getTargetIndex,function(t){return h.getLinkLength(t)}).DistanceMatrix(),b=o.Descent.createSquareMatrix(p,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=h._nodes[t.source]),"number"==typeof t.target&&(t.target=h._nodes[t.target])}),this._links.forEach(function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);b[n][r]=b[r][n]=e.weight||1}));var w=o.Descent.createSquareMatrix(p,function(t,e){return d[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var x=f;this._groups.forEach(function(t){!function(t,e,n,r){b[t][e]=b[e][t]=n,w[t][e]=w[e][t]=.1}(x,x+1,h._groupCompactness),y[x]=0,m[x++]=0,y[x]=0,m[x++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var k=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,k=k.concat(i.generateDirectedEdgeConstraints(f,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new o.Descent([y,m],w),this._descent.locks.clear(),x=0;x<f;++x){var S=this._nodes[x];S.fixed&&(S.px=S.x,S.py=S.y,this._descent.locks.add(x,[S.x,S.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(e,y,m),k.length>0&&(this._descent.project=new a.Projection(this._nodes,this._groups,this._rootGroup,k).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(v,g,c),this.avoidOverlaps(_),_&&(this._nodes.forEach(function(t,e){t.x=y[e],t.y=m[e]}),this._descent.project=new a.Projection(this._nodes,this._groups,this._rootGroup,k,!0).projectFunctions(),this._nodes.forEach(function(t,e){y[e]=t.x,m[e]=t.y})),this._descent.G=b,this._descent.run(r),u){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=f,this._descent.scaleSnapByMaxH=f!=p;var E=o.Descent.createSquareMatrix(p,function(t,e){return t>=f||e>=f?b[t][e]:0});this._descent.G=E,this._descent.run(u)}return this.updateNodePositions(),this.separateOverlappingComponents(v,g,c),l?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),a=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){a.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y})}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e,n){var r=this;if(void 0===n&&(n=!0),!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=i[e],t.y=o[e]});var a=l.separateGraphs(this._nodes,this._links);l.applyPacking(a,t,e,this._defaultNodeSize,1,n),this._nodes.forEach(function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new u.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new u.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},l={x:t.target.x,y:t.target.y},c=i.addPoint(o,t.source.index),h=i.addPoint(l,t.target.index);i.addEdgeIfVisible(o,l,t.source.index,t.target.index),void 0!==n&&n(i);var d=new s.Calculator(i.V.length,i.E,function(t){return t.source.id},function(t){return t.target.id},function(t){return t.length()}).PathFromNodeToNode(c.id,h.id);if(1===d.length||d.length===i.V.length){var f=a.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[f.sourceIntersection,f.arrowStart]}else{for(var p=d.length-2,v=i.V[d[p]].p,g=i.V[d[0]].p,y=(r=[t.source.innerBounds.rayIntersection(v.x,v.y)],p);y>=0;--y)r.push(i.V[d[y]].p);r.push(a.makeEdgeTo(g,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){h(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.storeOffset(e,n)})},t.dragOrigin=function(t){return h(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){h(e)?(void 0!==e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.drag(e,n)})):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){h(e)?(void 0!==e.leaves&&e.leaves.forEach(function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}()},3807:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9147),i=n(9895),o=n(7002),a=n(4232);e.Link3D=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}(),e.Node3D=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n},e.Layout3D=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];void 0===e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,u=new s;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,u,1.5),this.links.forEach(function(t){return t.length*=e.idealLinkLength});var l=new r.Calculator(n,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),c=i.Descent.createSquareMatrix(n,function(t,e){return l[t][e]}),h=i.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return h[e][n]=h[n][e]=1}),this.descent=new i.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=h,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var d=0;d<this.nodes.length;d++){var f=this.nodes[d];f.fixed&&this.descent.locks.add(d,[f.x,f.y,f.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.k=(t.dims=["x","y","z"]).length,t}();var s=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},4232:function(t,e){"use strict";function n(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function r(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function i(t,e,n,r){var i=function(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}(t,r);t.forEach(function(t){var o=i[r.getSourceIndex(t)],a=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,a))})}function o(t,e,n){var r=[],i=0,o=[],a=[];function s(t){t.index=t.lowlink=i++,o.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var r=n[e];void 0===r.index?(s(r),t.lowlink=Math.min(t.lowlink,r.lowlink)):r.onStack&&(t.lowlink=Math.min(t.lowlink,r.index))}if(t.lowlink===t.index){for(var u=[];o.length&&((r=o.pop()).onStack=!1,u.push(r),r!==t););a.push(u.map(function(t){return t.id}))}}for(var u=0;u<t;u++)r.push({id:u,out:[]});for(var l=0,c=e;l<c.length;l++){var h=c[l],d=r[n.getSourceIndex(h)],f=r[n.getTargetIndex(h)];d.out.push(f)}for(var p=0,v=r;p<v.length;p++){var g=v[p];void 0===g.index&&s(g)}return a}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,function(t,e){return Math.sqrt(n(t,e)-r(t,e))},e)},e.jaccardLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:r(t,e)/n(t,e)},e)},e.generateDirectedEdgeConstraints=function(t,e,n,r){var i=o(t,e,r),a={};i.forEach(function(t,e){return t.forEach(function(t){return a[t]=e})});var s=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);a[e]!==a[i]&&s.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),s},e.stronglyConnectedComponents=o},2267:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.source=t,this.target=e,this.type=n};e.PowerEdge=n;var r=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new a);for(var s=0;s<t;++s)this.roots[0].add(this.modules[s]=new o(s))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new a;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new o(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var u=0;u<t.groups.length;++u){var l=t.groups[u],c={};for(var h in l)"leaves"!==h&&"groups"!==h&&l.hasOwnProperty(h)&&(c[h]=l[h]);e.add(new o(-1-u,new s,new s,this.initModulesFromGroup(l),c))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),s=new a;s.add(t),s.add(e);var u=new o(this.modules.length,i,r,s);this.modules.push(u);var l=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var a=n[r];a.add(o,u),a.remove(o,t),a.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return l(i,"incoming","outgoing"),l(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(u),u},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var u=e[o],l=e[s];r[i]={id:i,nEdges:this.nEdges(u,l),a:u,b:l},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges})[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,r=[];return i(this.roots[0],{},r),this.allEdges().forEach(function(i){var o=e.modules[i.source],a=e.modules[i.target];t.push(new n(void 0===o.gid?i.source:r[o.gid],void 0===a.gid?i.target:r[a.gid],i.type))}),r},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();function i(t,e,n){t.forAll(function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var r=e;if(t.gid=n.length,!t.isIsland()||t.isPredefined()){if(r={id:t.gid},t.isPredefined())for(var o in t.definition)r[o]=t.definition[o];e.groups||(e.groups=[]),e.groups.push(t.gid),n.push(r)}i(t.children,r,n)}})}e.Configuration=r;var o=function(){function t(t,e,n,r,i){void 0===e&&(e=new s),void 0===n&&(n=new s),void 0===r&&(r=new a),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(r,i){r.forAll(function(r){t.push(new n(e.id,r.id,i))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();e.Module=o;var a=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=function(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();e.ModuleSet=a;var s=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new a).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();e.LinkSets=s,e.getGroups=function(t,e,n,i){for(var o=new r(t.length,e,n,i);o.greedyMerge(););var a=[],s=o.getGroupHierarchy(a);return a.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:s,powerEdges:a}}},741:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}();e.PairingHeap=n,e.PriorityQueue=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i,o=0;i=e[o];++o)t=new n(i),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}()},1539:function(t,e){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,function(t,n){return e(n,t)})},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(e(t,(n=r._ancestors[o]).data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();e.TreeBase=i;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=o;var a=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}();e.RBTree=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new a(t),n=!0,this.size++;else{var r=new a(void 0),i=!1,o=!1,s=null,u=r,l=null,c=this._root;for(u.right=this._root;;){if(null===c?(c=new a(t),l.set_child(i,c),n=!0,this.size++):e.is_red(c.left)&&e.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),e.is_red(c)&&e.is_red(l)){var h=u.right===s;c===l.get_child(o)?u.set_child(h,e.single_rotate(s,!o)):u.set_child(h,e.double_rotate(s,!o))}var d=this._comparator(c.data,t);if(0===d)break;o=i,null!==s&&(u=s),s=l,l=c,c=c.get_child(i=d<0)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new a(void 0),r=n;r.right=this._root;for(var i=null,o=null,s=null,u=!0;null!==r.get_child(u);){var l=u;o=i,i=r,r=r.get_child(u);var c=this._comparator(t,r.data);if(u=c>0,0===c&&(s=r),!e.is_red(r)&&!e.is_red(r.get_child(u)))if(e.is_red(r.get_child(!u))){var h=e.single_rotate(r,u);i.set_child(l,h),i=h}else if(!e.is_red(r.get_child(!u))){var d=i.get_child(!l);if(null!==d)if(e.is_red(d.get_child(!l))||e.is_red(d.get_child(l))){var f=o.right===i;e.is_red(d.get_child(l))?o.set_child(f,e.double_rotate(i,l)):e.is_red(d.get_child(!l))&&o.set_child(f,e.single_rotate(i,l));var p=o.get_child(f);p.red=!0,r.red=!0,p.left.red=!1,p.right.red=!1}else i.red=!1,d.red=!0,r.red=!0}}return null!==s&&(s.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i)},7002:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(980),a=n(1539);function s(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},u.empty()):u.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,e){return s(e).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}e.computeGroupBounds=s;var u=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var u=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var u=n-t,l=a-i,c=r-e,h=s-o,d=h*u-l*c;if(0==d)return null;var f=t-i,p=e-o,v=(l*p-h*f)/d,g=(u*p-c*f)/d;return v>=0&&v<=1&&g>=0&&g<=1?{x:t+v*u,y:e+v*c}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=u,e.makeEdgeBetween=function(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),u=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/s,y:r.y+u*a/s}}},e.makeEdgeTo=function(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}};var l=function(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=d(),this.next=d()},c=function(t,e,n){this.isOpen=t,this.v=e,this.pos=n};function h(t,e){return t.pos>e.pos?1:t.pos<e.pos||t.isOpen?-1:e.isOpen?1:0}function d(){return new a.RBTree(function(t,e){return t.pos-e.pos})}var f={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new u(n-r/2,n+r/2,t,e)},findNeighbours:function(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}},p={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new u(t,e,n-r/2,n+r/2)},findNeighbours:function(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}};function v(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,s=o?t.groups.reduce(function(t,r){return t.concat(v(r,e,n,!0))},[]):[],u=(r?2:0)+a+o,l=new Array(u),c=new Array(u),h=0,d=function(t,e){c[h]=t,l[h++]=e};if(r){var f=t.bounds,p=e.getCentre(f),y=e.getSize(f)/2,m=e.getOpen(f),b=e.getClose(f),_=p-y+i/2,w=p+y-i/2;t.minVar.desiredPosition=_,d(e.makeRect(m,b,_,i),t.minVar),t.maxVar.desiredPosition=w,d(e.makeRect(m,b,w,i),t.maxVar)}a&&t.leaves.forEach(function(t){return d(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;d(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var x=g(c,l,e,n);return o&&(l.forEach(function(t){t.cOut=[],t.cIn=[]}),x.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),s.concat(x)}function g(t,e,n,r){var i,a=t.length,s=2*a;console.assert(e.length>=a);var u=new Array(s);for(i=0;i<a;++i){var f=t[i],p=new l(e[i],f,n.getCentre(f));u[i]=new c(!0,p,n.getOpen(f)),u[i+a]=new c(!1,p,n.getClose(f))}u.sort(h);var v=new Array,g=d();for(i=0;i<s;++i){var y=u[i];if(p=y.v,y.isOpen)g.insert(p),n.findNeighbours(p,g);else{g.remove(p);var m=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;v.push(new o.Constraint(t.v,e.v,i))},b=function(t,e,n){for(var r,i=p[t].iterator();null!==(r=i[t]());)n(r,p),r[e].remove(p)};b("prev","next",function(t,e){return m(t,e)}),b("next","prev",function(t,e){return m(e,t)})}}return console.assert(0===g.size),v}function y(t,e){return g(t,e,f,1e-6)}function m(t,e){return g(t,e,p,1e-6)}function b(t){return v(t,f,1e-6)}function _(t){return v(t,p,1e-6)}e.generateXConstraints=y,e.generateYConstraints=m,e.generateXGroupConstraints=b,e.generateYGroupConstraints=_,e.removeOverlaps=function(t){var e=t.map(function(t){return new o.Variable(t.cx())}),n=y(t,e),r=new o.Solver(e,n);r.solve(),e.forEach(function(e,n){return t[n].setXCentre(e.position())}),e=t.map(function(t){return new o.Variable(t.cy())}),n=m(t,e),(r=new o.Solver(e,n)).solve(),e.forEach(function(e,n){return t[n].setYCentre(e.position())})};var w=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return i(e,t),e}(o.Variable);e.IndexedVariable=w,e.Projection=function(){function t(t,e,n,r,i){var o=this;if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1),this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=i,this.variables=t.map(function(t,e){return t.variable=new w(e,1)}),r&&this.createConstraints(r),i&&n&&void 0!==n.groups){t.forEach(function(t){if(t.width&&t.height){var e=t.width/2,n=t.height/2;t.bounds=new u(t.x-e,t.x+e,t.y-n,t.y+n)}else t.bounds=new u(t.x,t.x,t.y,t.y)}),s(n);var a=t.length;e.forEach(function(t){o.variables[a]=t.minVar=new w(a++,void 0!==t.stiffness?t.stiffness:.01),o.variables[a]=t.maxVar=new w(a++,void 0!==t.stiffness?t.stiffness:.01)})}}return t.prototype.createSeparation=function(t){return new o.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),o=null;i.forEach(function(t){if(o){var e=o[n]+o[r];e>t[n]&&(t[n]=e)}o=t})}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){r.push(new o.Constraint(n,e.nodes[t.node].variable,t.offset,!0))})},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,l=t[o],c=e[o];i.bounds=new u(l-a,l+a,c-s,c+s)})},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,b,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,_,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,r,i,o,a,u,l){this.setupVariablesAndBounds(t,e,r,i),this.rootGroup&&this.avoidOverlaps&&(s(this.rootGroup),o=o.concat(a(this.rootGroup))),this.solve(this.variables,o,n,r),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(l),s(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new o.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}()},9147:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(741),i=function(t,e){this.id=t,this.distance=e},o=function(t){this.id=t,this.neighbours=[]},a=function(t,e,n){this.node=t,this.prev=e,this.d=n};e.Calculator=function(){function t(t,e,n,r,a){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new o(s);for(s=this.es.length;s--;){var u=this.es[s],l=n(u),c=r(u),h=a(u);this.neighbours[l].neighbours.push(new i(c,h)),this.neighbours[c].neighbours.push(new i(l,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue(function(t,e){return t.d<=e.d}),o=this.neighbours[t],s=new a(o,null,0),u={};for(i.push(s);!i.empty()&&(o=(s=i.pop()).node).id!==e;)for(var l=o.neighbours.length;l--;){var c=o.neighbours[l],h=this.neighbours[c.id];if(!s.prev||h.id!==s.prev.node.id){var d=h.id+","+o.id;if(!(d in u&&u[d]<=s.d)){var f=s.prev?n(s.prev.node.id,o.id,h.id):0,p=s.d+c.distance+f;u[d]=p,i.push(new a(h,s,p))}}}for(var v=[];s.prev;)v.push((s=s.prev).node.id);return v},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue(function(t,e){return t.d<=e.d}),i=this.neighbours.length,o=new Array(i);i--;){var a=this.neighbours[i];a.d=i===t?0:Number.POSITIVE_INFINITY,a.q=n.push(a)}for(;!n.empty();){var s=n.pop();if(o[s.id]=s.d,s.id===e){for(var u=[],l=s;void 0!==l.prev;)u.push(l.prev.id),l=l.prev;return u}for(i=s.neighbours.length;i--;){var c=s.neighbours[i],h=(l=this.neighbours[c.id],s.d+c.distance);s.d!==Number.MAX_VALUE&&l.d>h&&(l.d=h,l.prev=s,n.reduceKey(l.q,l,function(t,e){return t.q=e}))}}return o},t}()},980:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.weight;this.AB+=n*e*(t.offset/t.scale),this.AD+=n*e*t.desiredPosition,this.A2+=n*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=n;var r=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=r;var i=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();e.Variable=i;var o=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=o;var a=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new o(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<s.LAGRANGIAN_TOLERANCE&&(n=r.left.block,o.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();e.Blocks=a;var s=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new a(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||u<e)&&(e=u,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new a(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=s,e.removeOverlapInOneDimension=function(t,e,n){for(var o=t.map(function(t){return new i(t.desiredCenter)}),a=[],u=t.length,l=0;l<u-1;l++)a.push(new r(o[l],o[l+1],(t[l].size+t[l+1].size)/2));var c=o[0],h=o[u-1],d=t[0].size/2,f=t[u-1].size/2,p=null,v=null;return e&&(p=new i(e,1e3*c.weight),o.push(p),a.push(new r(p,c,d))),n&&(v=new i(n,1e3*h.weight),o.push(v),a.push(new r(h,v,f))),new s(o,a).solve(),{newCenters:o.slice(0,t.length).map(function(t){return t.position()}),lowerBound:p?p.position():c.position()-d,upperBound:v?v.position():h.position()+f}}},5050:function(t,n,a){"use strict";function s(t){return"function"==typeof t}var d=!1,g={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else d&&console.log("RxJS: Back to a better error behavior. Thank you. <3");d=t},get useDeprecatedSynchronousErrorHandling(){return d}};function b(t){setTimeout(function(){throw t},0)}var w={closed:!0,next:function(t){},error:function(t){if(g.useDeprecatedSynchronousErrorHandling)throw t;b(t)},complete:function(){}},x=Array.isArray||function(t){return t&&"number"==typeof t.length};function k(t){return null!==t&&"object"==typeof t}var S=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map(function(t,e){return"".concat(e+1,") ").concat(t.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),E=function(){var t=function(){function t(e){m(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return _(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var a=0;a<n.length;++a)n[a].remove(this);if(s(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(h){e=h instanceof S?C(h.errors):[h]}}if(x(o))for(var u=-1,l=o.length;++u<l;){var c=o[u];if(k(c))try{c.unsubscribe()}catch(h){e=e||[],h instanceof S?e=e.concat(C(h.errors)):e.push(h)}}if(e)throw new S(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}();return t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function C(t){return t.reduce(function(t,e){return t.concat(e instanceof S?e.errors:e)},[])}var T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),P=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;switch(m(this,n),(o=e.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=w;break;case 1:if(!t){o.destination=w;break}if("object"==typeof t){t instanceof n?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(v(o))):(o.syncErrorThrowable=!0,o.destination=new A(v(o),t));break}default:o.syncErrorThrowable=!0,o.destination=new A(v(o),t,r,i)}return o}return _(n,[{key:T,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,c(y(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(E),A=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a,u;m(this,n),(a=e.call(this))._parentSubscriber=t;var l=v(a);return s(r)?u=r:r&&(u=r.next,i=r.error,o=r.complete,r!==w&&(s((l=Object.create(r)).unsubscribe)&&a.add(l.unsubscribe.bind(l)),l.unsubscribe=a.unsubscribe.bind(v(a)))),a._context=l,a._next=u,a._error=i,a._complete=o,a}return _(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;g.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=g.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):b(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;b(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};g.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),g.useDeprecatedSynchronousErrorHandling)throw n;b(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!g.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return g.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(b(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(P),D="function"==typeof Symbol&&Symbol.observable||"@@observable";function O(t){return t}var M,I=((M=function(){function t(e){m(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof P)return t;if(t[T])return t[T]()}return t||e||n?new P(t,e,n):new P(w)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||g.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),g.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){g.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof P?r:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=L(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:D,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0===(r=e).length?O:1===r.length?r[0]:function(t){return r.reduce(function(t,e){return e(t)},t)})(this);var r}},{key:"toPromise",value:function(t){var e=this;return new(t=L(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})}}]),t}()).create=function(t){return new M(t)},M);function L(t){if(t||(t=g.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var N,R=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),F=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return _(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(E),j=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this,t)).destination=t,r}return n}(P),B=((N=function(t){h(n,t);var e=f(n);function n(){var t;return m(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _(n,[{key:T,value:function(){return new j(this)}},{key:"lift",value:function(t){var e=new z(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new R;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new R;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new R;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new R;return c(y(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new R;return this.hasError?(t.error(this.thrownError),E.EMPTY):this.isStopped?(t.complete(),E.EMPTY):(this.observers.push(t),new F(this,t))}},{key:"asObservable",value:function(){var t=new I;return t.source=this,t}}]),n}(I)).create=function(t,e){return new z(t,e)},N),z=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this)).destination=t,i.source=r,i}return _(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):E.EMPTY}}]),n}(B);function V(t){return t&&"function"==typeof t.schedule}function G(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new U(t,e))}}var U=function(){function t(e,n){m(this,t),this.project=e,this.thisArg=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new H(t,this.project,this.thisArg))}}]),t}(),H=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||v(o),o}return _(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(P),q=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};var W="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Y=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function K(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var X=function(t){if(t&&"function"==typeof t[D])return n=t,function(t){var e=n[D]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Y(t))return q(t);if(K(t))return function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,b),e}}(t);if(t&&"function"==typeof t[W])return e=t,function(t){for(var n=e[W]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t};var e,n,r=k(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(r," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function Q(t,e){return new I(function(n){var r=new E,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Z(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[D]}(t))return function(t,e){return new I(function(n){var r=new E;return r.add(e.schedule(function(){var i=t[D]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}(t,e);if(K(t))return function(t,e){return new I(function(n){var r=new E;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}(t,e);if(Y(t))return Q(t,e);if(function(t){return t&&"function"==typeof t[W]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new I(function(n){var r,i=new E;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[W](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof I?t:new I(X(t))}var $=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this)).parent=t,r}return _(n,[{key:"_next",value:function(t){this.parent.notifyNext(t)}},{key:"_error",value:function(t){this.parent.notifyError(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(P),J=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(P);function tt(t,e){if(!e.closed){if(t instanceof I)return t.subscribe(e);var n;try{n=X(t)(e)}catch(r){e.error(r)}return n}}function et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(r){return r.pipe(et(function(n,r){return Z(t(n,r)).pipe(G(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new nt(t,n))})}var nt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;m(this,t),this.project=e,this.concurrent=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new rt(t,this.project,this.concurrent))}}]),t}(),rt=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return m(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new $(this),n=this.destination;n.add(e);var r=tt(t,e);r!==e&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(J);function it(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return et(O,t)}function ot(t,e){return e?Q(t,e):new I(q(t))}function at(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,o=e[e.length-1];return V(o)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof o&&(r=e.pop()),null===i&&1===e.length&&e[0]instanceof I?e[0]:it(r)(ot(e,i))}function st(){return function(t){return t.lift(new lt(t))}}var ut,lt=function(){function t(e){m(this,t),this.connectable=e}return _(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new ct(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),ct=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).connectable=r,i}return _(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(P),ht=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new E).add(this.source.subscribe(new ft(this.getSubject(),this))),t.closed&&(this._connection=null,t=E.EMPTY)),t}},{key:"refCount",value:function(){return st()(this)}}]),n}(I),dt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(ut=ht.prototype)._subscribe},_isComplete:{value:ut._isComplete,writable:!0},getSubject:{value:ut.getSubject},connect:{value:ut.connect},refCount:{value:ut.refCount}},ft=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).connectable=r,i}return _(n,[{key:"_error",value:function(t){this._unsubscribe(),c(y(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),c(y(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(j);function pt(){return new B}function vt(){return function(t){return st()((e=pt,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,dt);return r.source=t,r.subjectFactory=n,r})(t));var e}}function gt(t){for(var e in t)if(t[e]===gt)return e;throw Error("Could not find renamed property on target object.")}function yt(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(mt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return"".concat(t.overriddenName);if(t.name)return"".concat(t.name);var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function bt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var _t=gt({__forward_ref__:gt});function wt(t){return t.__forward_ref__=wt,t.toString=function(){return mt(this())},t}function xt(t){return kt(t)?t():t}function kt(t){return"function"==typeof t&&t.hasOwnProperty(_t)&&t.__forward_ref__===wt}var St=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,function(t,e){return"".concat(t?"NG0".concat(t,": "):"").concat(e)}(t,r))).code=t,i}return n}(u(Error));function Et(t){return"string"==typeof t?t:null==t?"":String(t)}function Ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Et(t)}function Tt(t,e){var n=e?" in ".concat(e):"";throw new St("201","No provider for ".concat(Ct(t)," found").concat(n))}function Pt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function At(t){return{providers:t.providers||[],imports:t.imports||[]}}function Dt(t){return Ot(t,Lt)||Ot(t,Rt)}function Ot(t,e){return t.hasOwnProperty(e)?t[e]:null}function Mt(t){return t&&(t.hasOwnProperty(Nt)||t.hasOwnProperty(Ft))?t[Nt]:null}var It,Lt=gt({"\u0275prov":gt}),Nt=gt({"\u0275inj":gt}),Rt=gt({ngInjectableDef:gt}),Ft=gt({ngInjectorDef:gt}),jt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function Bt(t){var e=It;return It=t,e}function zt(t,e,n){var r=Dt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&jt.Optional?null:void 0!==e?e:void Tt(mt(t),"Injector")}function Vt(t){return{toString:t}.toString()}var Gt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Ut=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),Ht="undefined"!=typeof globalThis&&globalThis,qt="undefined"!=typeof window&&window,Wt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yt="undefined"!=typeof global&&global,Kt=Ht||Yt||qt||Wt,Xt={},Qt=[],Zt=gt({"\u0275cmp":gt}),$t=gt({"\u0275dir":gt}),Jt=gt({"\u0275pipe":gt}),te=gt({"\u0275mod":gt}),ee=gt({"\u0275loc":gt}),ne=gt({"\u0275fac":gt}),re=gt({__NG_ELEMENT_ID__:gt}),ie=0;function oe(t){return Vt(function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Gt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Qt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ut.Emulated,id:"c",styles:t.styles||Qt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=ie++,n.inputs=ce(t.inputs,e),n.outputs=ce(t.outputs),i&&i.forEach(function(t){return t(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(ae)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(se)}:null,n})}function ae(t){return de(t)||function(t){return t[$t]||null}(t)}function se(t){return function(t){return t[Jt]||null}(t)}var ue={};function le(t){var e={type:t.type,bootstrap:t.bootstrap||Qt,declarations:t.declarations||Qt,imports:t.imports||Qt,exports:t.exports||Qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Vt(function(){ue[t.id]=t.type}),e}function ce(t,e){if(null==t)return Xt;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var he=oe;function de(t){return t[Zt]||null}function fe(t,e){var n=t[te]||null;if(!n&&!0===e)throw new Error("Type ".concat(mt(t)," does not have '\u0275mod' property."));return n}function pe(t){return Array.isArray(t)&&"object"==typeof t[1]}function ve(t){return Array.isArray(t)&&!0===t[1]}function ge(t){return 0!=(8&t.flags)}function ye(t){return 2==(2&t.flags)}function me(t){return 1==(1&t.flags)}function be(t){return null!==t.template}function _e(t,e){return t.hasOwnProperty(ne)?t[ne]:null}var we,xe=function(){function t(e,n,r){m(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return _(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function ke(){return Se}function Se(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ce),Ee}function Ee(){var t=Te(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===Xt)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ce(t,e,n,r){var i=Te(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Xt,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new xe(u&&u.currentValue,e,a===Xt),t[r]=e}function Te(t){return t.__ngSimpleChanges__||null}function Pe(t){return!!t.listen}ke.ngInherit=!0;var Ae={createRenderer:function(t,e){return void 0!==we?we:"undefined"!=typeof document?document:void 0}};function De(t){for(;Array.isArray(t);)t=t[0];return t}function Oe(t,e){return De(e[t.index])}function Me(t,e){return t.data[e]}function Ie(t,e){return t[e]}function Le(t,e){var n=e[t];return pe(n)?n:n[0]}function Ne(t){return 4==(4&t[2])}function Re(t){return 128==(128&t[2])}function Fe(t,e){return null==e?null:t[e]}function je(t){t[18]=0}function Be(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var ze={lFrame:un(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ve(){return ze.bindingsEnabled}function Ge(){return ze.lFrame.lView}function Ue(){return ze.lFrame.tView}function He(t){return ze.lFrame.contextLView=t,t[8]}function qe(){for(var t=We();null!==t&&64===t.type;)t=t.parent;return t}function We(){return ze.lFrame.currentTNode}function Ye(t,e){var n=ze.lFrame;n.currentTNode=t,n.isParent=e}function Ke(){return ze.lFrame.isParent}function Xe(){ze.lFrame.isParent=!1}function Qe(){return ze.isInCheckNoChangesMode}function Ze(t){ze.isInCheckNoChangesMode=t}function $e(){return ze.lFrame.bindingIndex++}function Je(t){ze.lFrame.currentDirectiveIndex=t}function tn(t){var e=ze.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function en(){return ze.lFrame.currentQueryIndex}function nn(t){ze.lFrame.currentQueryIndex=t}function rn(t){var e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function on(t,e,n){if(n&jt.SkipSelf){for(var r=e,i=t;!(null!==(r=r.parent)||n&jt.Host||(r=rn(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}var o=ze.lFrame=sn();return o.currentTNode=e,o.lView=t,!0}function an(t){var e=sn(),n=t[1];ze.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function sn(){var t=ze.lFrame,e=null===t?null:t.child;return null===e?un(t):e}function un(t){var e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ln(){var t=ze.lFrame;return ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var cn=ln;function hn(){var t=ln();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dn(){return ze.lFrame.selectedIndex}function fn(t){ze.lFrame.selectedIndex=t}function pn(){var t=ze.lFrame;return Me(t.tView,t.selectedIndex)}function vn(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,l=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function gn(t,e,n){bn(t,e,3,n)}function yn(t,e,n,r){(3&t[2])===n&&bn(t,e,n,r)}function mn(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function bn(t,e,n,r){for(var i=null!=r?r:-1,o=e.length-1,a=0,s=void 0!==r?65535&t[18]:0;s<o;s++)if("number"==typeof e[s+1]){if(a=e[s],null!=r&&a>=r)break}else e[s]<0&&(t[18]+=65536),(a<i||-1==i)&&(_n(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function _n(t,e,n,r){var i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}var wn=function t(e,n,r){m(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function xn(t,e,n){for(var r=Pe(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{var l=o,c=n[++i];Sn(l)?r&&t.setProperty(e,l,c):r?t.setAttribute(e,l,c):e.setAttribute(l,c),i++}}return i}function kn(t){return 3===t||4===t||6===t}function Sn(t){return 64===t.charCodeAt(0)}function En(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||Cn(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function Cn(t,e,n,r,i){var o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){var s=t[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Tn(t){return-1!==t}function Pn(t){return 32767&t}function An(t,e){for(var n=t>>16,r=e;n>0;)r=r[15],n--;return r}var Dn=!0;function On(t){var e=Dn;return Dn=t,e}var Mn=0;function In(t,e){var n=Nn(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ln(r.data,t),Ln(e,null),Ln(r.blueprint,null));var i=Rn(t,e),o=t.injectorIndex;if(Tn(i))for(var a=Pn(i),s=An(i,e),u=s[1].data,l=0;l<8;l++)e[o+l]=s[a+l]|u[a+l];return e[o+8]=i,o}function Ln(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Nn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Rn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=0,r=null,i=e;null!==i;){var o=i[1],a=o.type;if(null===(r=2===a?o.declTNode:1===a?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Fn(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(re)&&(r=n[re]),null==r&&(r=n[re]=Mn++);var i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function jn(t,e,n){if(n&jt.Optional)return t;Tt(e,"NodeInjector")}function Bn(t,e,n,r){if(n&jt.Optional&&void 0===r&&(r=null),0==(n&(jt.Self|jt.Host))){var i=t[9],o=Bt(void 0);try{return i?i.get(e,r,n&jt.Optional):zt(e,r,n&jt.Optional)}finally{Bt(o)}}return jn(r,e,n)}function zn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jt.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(re)?t[re]:void 0;return"number"==typeof e?e>=0?255&e:Gn:e}(n);if("function"==typeof o){if(!on(e,t,r))return r&jt.Host?jn(i,n,r):Bn(e,n,r,i);try{var a=o(r);if(null!=a||r&jt.Optional)return a;Tt(n)}finally{cn()}}else if("number"==typeof o){var s=null,u=Nn(t,e),l=-1,c=r&jt.Host?e[16][6]:null;for((-1===u||r&jt.SkipSelf)&&(-1!==(l=-1===u?Rn(t,e):e[u+8])&&Yn(r,!1)?(s=e[1],u=Pn(l),e=An(l,e)):u=-1);-1!==u;){var h=e[1];if(Wn(o,u,h.data)){var d=Un(u,e,n,s,r,c);if(d!==Vn)return d}-1!==(l=e[u+8])&&Yn(r,e[1].data[u+8]===c)&&Wn(o,u,e)?(s=h,u=Pn(l),e=An(l,e)):u=-1}}}return Bn(e,n,r,i)}var Vn={};function Gn(){return new Kn(qe(),Ge())}function Un(t,e,n,r,i,o){var a=e[1],s=a.data[t+8],u=Hn(s,a,n,null==r?ye(s)&&Dn:r!=a&&0!=(3&s.type),i&jt.Host&&o===s);return null!==u?qn(e,a,u,s):Vn}function Hn(t,e,n,r,i){for(var o=t.providerIndexes,a=e.data,s=1048575&o,u=t.directiveStart,l=o>>20,c=i?s+l:t.directiveEnd,h=r?s:s+l;h<c;h++){var d=a[h];if(h<u&&n===d||h>=u&&d.type===n)return h}if(i){var f=a[u];if(f&&be(f)&&f.type===n)return u}return null}function qn(t,e,n,r){var i=t[n],o=e.data;if(i instanceof wn){var a=i;a.resolving&&function(t,e){throw new St("200","Circular dependency in DI detected for ".concat(t))}(Ct(o[n]));var s=On(a.canSeeViewProviders);a.resolving=!0;var u=a.injectImpl?Bt(a.injectImpl):null;on(t,r,jt.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,a=r.ngDoCheck;if(i){var s=Se(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,o[n],e)}finally{null!==u&&Bt(u),On(s),a.resolving=!1,cn()}}return i}function Wn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Yn(t,e){return!(t&jt.Self||t&jt.Host&&e)}var Kn=function(){function t(e,n){m(this,t),this._tNode=e,this._lView=n}return _(t,[{key:"get",value:function(t,e){return zn(this._tNode,this._lView,t,void 0,e)}}]),t}();function Xn(t){return Vt(function(){for(var e=t.prototype.constructor,n=e[ne]||Qn(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[ne]||Qn(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}})}function Qn(t){return kt(t)?function(){var e=Qn(xt(t));return e&&e()}:_e(t)}function Zn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(kn(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}(qe(),t)}function $n(t,e,n){return Vt(function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=l(i,e);return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Jn=function(){function t(e,n){m(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Pt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _(t,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),t}(),tr=new Jn("AnalyzeForEntryComponents"),er=Function;function nr(t,e){void 0===e&&(e=t);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),nr(r,e)):e!==t&&e.push(r)}return e}function rr(t,e){t.forEach(function(t){return Array.isArray(t)?rr(t,e):e(t)})}function ir(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function or(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ar(t,e){for(var n=[],r=0;r<t;r++)n.push(e);return n}function sr(t,e){var n=ur(t,e);if(n>=0)return t[1|n]}function ur(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),a=t[o<<1];if(e===a)return o<<1;a>e?i=o:r=o+1}return~(i<<1)}(t,e)}var lr,cr={},hr=/\n/gm,dr=gt({provide:String,useValue:gt});function fr(t){var e=lr;return lr=t,e}function pr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt.Default;if(void 0===lr)throw new Error("inject() must be called from an injection context");return null===lr?zt(t,void 0,e):lr.get(t,e&jt.Optional?null:void 0,e)}function vr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt.Default;return(It||pr)(xt(t),e)}var gr=vr;function yr(t){for(var e=[],n=0;n<t.length;n++){var r=xt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=jt.Default,a=0;a<r.length;a++){var s=r[a],u=s.__NG_DI_FLAG__;"number"==typeof u?-1===u?i=s.token:o|=u:i=s}e.push(vr(i,o))}else e.push(vr(r))}return e}function mr(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}var br,_r=mr($n("Inject",function(t){return{token:t}}),-1),wr=mr($n("Optional"),8),xr=mr($n("SkipSelf"),4);function kr(t){var e;return(null===(e=function(){if(void 0===br&&(br=null,Kt.trustedTypes))try{br=Kt.trustedTypes.createPolicy("angular",{createHTML:function(t){return t},createScript:function(t){return t},createScriptURL:function(t){return t}})}catch(e){}return br}())||void 0===e?void 0:e.createHTML(t))||t}var Sr=function(){function t(e){m(this,t),this.changingThisBreaksApplicationSecurity=e}return _(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),t}(),Er=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Sr),Cr=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Sr),Tr=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Sr),Pr=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Sr),Ar=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Sr);function Dr(t){return t instanceof Sr?t.changingThisBreaksApplicationSecurity:t}function Or(t,e){var n=Mr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===e}function Mr(t){return t instanceof Sr&&t.getTypeName()||null}var Ir=function(){function t(e){m(this,t),this.inertDocumentHelper=e}return _(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(kr(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(n){return null}}}]),t}(),Lr=function(){function t(e){if(m(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return _(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=kr(t),e;var n=this.inertDocument.createElement("body");return n.innerHTML=kr(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),Nr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Rr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fr(t){return(t=String(t)).match(Nr)||t.match(Rr)?t:"unsafe:"+t}function jr(t){var e,n={},r=o(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Br(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var zr,Vr=jr("area,br,col,hr,img,wbr"),Gr=jr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ur=jr("rp,rt"),Hr=Br(Ur,Gr),qr=Br(Vr,Br(Gr,jr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Br(Ur,jr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hr),Wr=jr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yr=jr("srcset"),Kr=Br(Wr,Yr,jr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xr=jr("script,style,template"),Qr=function(){function t(){m(this,t),this.sanitizedSomething=!1,this.buf=[]}return _(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!qr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(Kr.hasOwnProperty(s)){var u=o.value;Wr[s]&&(u=Fr(u)),Yr[s]&&(n=u,u=(n=String(n)).split(",").map(function(t){return Fr(t.trim())}).join(", ")),this.buf.push(" ",a,'="',Jr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();qr.hasOwnProperty(e)&&!Vr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(Jr(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(t.outerHTML));return e}}]),t}(),Zr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$r=/([^\#-~ |!])/g;function Jr(t){return t.replace(/&/g,"&amp;").replace(Zr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace($r,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ti(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ei=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ni(t){var e,n=(e=Ge())&&e[12];return n?n.sanitize(ei.URL,t)||"":Or(t,"URL")?Dr(t):Fr(Et(t))}function ri(t,e){t.__ngContext__=e}function ii(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function oi(t){return t.ngDebugContext}function ai(t){return t.ngOriginalError}function si(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var ui=function(){function t(){m(this,t),this._console=console}return _(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||si}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?oi(t)?oi(t):this._findContext(ai(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=ai(t);e&&ai(e);)e=ai(e);return e}}]),t}(),li=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Kt);function ci(t){return t instanceof Function?t():t}var hi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function di(t,e){return(void 0)(t,e)}function fi(t){var e=t[3];return ve(e)?e[3]:e}function pi(t){return gi(t[13])}function vi(t){return gi(t[4])}function gi(t){for(;null!==t&&!ve(t);)t=t[4];return t}function yi(t,e,n,r,i){if(null!=r){var o,a=!1;ve(r)?o=r:pe(r)&&(a=!0,r=r[0]);var s=De(r);0===t&&null!==n?null==i?Ei(e,n,s):Si(e,n,s,i||null,!0):1===t&&null!==n?Si(e,n,s,i||null,!0):2===t?function(t,e,n){var r=Ti(t,e);r&&function(t,e,n,r){Pe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,r,i){var o=n[7];o!==De(n)&&yi(e,t,r,o,i);for(var a=10;a<n.length;a++){var s=n[a];Ni(s[1],s,t,e,r,o)}}(e,t,o,n,i)}}function mi(t,e,n){return Pe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function bi(t,e){var n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Be(i,-1)),n.splice(r,1)}function _i(t,e){if(!(t.length<=10)){var n,r=10+e,i=t[r];if(i){var o=i[17];null!==o&&o!==t&&bi(o,i),e>0&&(t[r-1][4]=i[4]);var a=or(t,10+e);Ni(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var s=a[19];null!==s&&s.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function wi(t,e){if(!(256&e[2])){var n=e[11];Pe(n)&&n.destroyNode&&Ni(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return xi(t[1],t);for(;e;){var n=null;if(pe(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)pe(e)&&xi(e[1],e),e=e[3];null===e&&(e=t),pe(e)&&xi(e[1],e),n=e&&e[4]}e=n}}(e)}}function xi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof wn)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2){var s=i[o[a]],u=o[a+1];try{u.call(s)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){var n=t.cleanup,r=e[7],i=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var a=n[o+1],s="function"==typeof a?a(e):De(e[a]),u=r[i=n[o+2]],l=n[o+3];"boolean"==typeof l?s.removeEventListener(n[o],u,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{var c=r[i=n[o+1]];n[o].call(c)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();e[7]=null}}(t,e),1===e[1].type&&Pe(e[11])&&e[11].destroy();var n=e[17];if(null!==n&&ve(e[3])){n!==e[3]&&bi(n,e);var r=e[19];null!==r&&r.detachView(t)}}}function ki(t,e,n){return function(t,e,n){for(var r=e;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){var i=t.data[r.directiveStart].encapsulation;if(i===Ut.None||i===Ut.Emulated)return null}return Oe(r,n)}(t,e.parent,n)}function Si(t,e,n,r,i){Pe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ei(t,e,n){Pe(t)?t.appendChild(e,n):e.appendChild(n)}function Ci(t,e,n,r,i){null!==r?Si(t,e,n,r,i):Ei(t,e,n)}function Ti(t,e){return Pe(t)?t.parentNode(e):e.parentNode}function Pi(t,e,n){return Ai(t,e,n)}var Ai=function(t,e,n){return 40&t.type?Oe(t,n):null};function Di(t,e,n,r){var i=ki(t,r,e),o=e[11],a=Pi(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)Ci(o,i,n[s],a,!1);else Ci(o,i,n,a,!1)}function Oi(t,e){if(null!==e){var n=e.type;if(3&n)return Oe(e,t);if(4&n)return Ii(-1,t[e.index]);if(8&n){var r=e.child;if(null!==r)return Oi(t,r);var i=t[e.index];return ve(i)?Ii(-1,i):De(i)}if(32&n)return di(e,t)()||De(t[e.index]);var o=Mi(t,e);return null!==o?Array.isArray(o)?o[0]:Oi(fi(t[16]),o):Oi(t,e.next)}return null}function Mi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ii(t,e){var n=10+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return Oi(r,i)}return e[7]}function Li(t,e,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;if(a&&0===e&&(s&&ri(De(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)Li(t,e,n.child,r,i,o,!1),yi(e,t,i,s,o);else if(32&u){for(var l=di(n,r),c=void 0;c=l();)yi(e,t,i,c,o);yi(e,t,i,s,o)}else 16&u?Ri(t,e,r,n,i,o):yi(e,t,i,s,o);n=a?n.projectionNext:n.next}}function Ni(t,e,n,r,i,o){Li(n,r,t.firstChild,e,i,o,!1)}function Ri(t,e,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)yi(e,t,i,s[u],o);else Li(t,e,s,a[3],i,o,!0)}function Fi(t,e,n){Pe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ji(t,e,n){Pe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Bi(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function zi(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==Bi((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Vi(t){return 4===t.type&&"ng-template"!==t.value}function Gi(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function Ui(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(kn(t[e]))return e;return t.length}(i),a=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!Gi(t,u,n)||""===u&&1===e.length){if(Hi(r))return!1;a=!0}}else{var l=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!zi(t.attrs,l,n)){if(Hi(r))return!1;a=!0}continue}var c=qi(8&r?"class":u,i,Vi(t),n);if(-1===c){if(Hi(r))return!1;a=!0;continue}if(""!==l){var h;h=c>o?"":i[c+1].toLowerCase();var d=8&r?h:null;if(d&&-1!==Bi(d,l,0)||2&r&&l!==h){if(Hi(r))return!1;a=!0}}}}else{if(!a&&!Hi(r)&&!Hi(u))return!1;if(a&&Hi(u))continue;a=!1,r=u|1&r}}return Hi(r)||a}function Hi(t){return 0==(1&t)}function qi(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Wi(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(Ui(t,e[r],n))return!0;return!1}function Yi(t,e){t:for(var n=0;n<e.length;n++){var r=e[n];if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])continue t;return!0}}return!1}function Ki(t,e){return t?":not("+e.trim()+")":e}function Xi(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var a=t[n];if("string"==typeof a)if(2&r){var s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||Hi(a)||(e+=Ki(o,i),i=""),r=a,o=o||!Hi(r);n++}return""!==i&&(e+=Ki(o,i)),e}var Qi={};function Zi(t){$i(Ue(),Ge(),dn()+t,Qe())}function $i(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&gn(e,i,n)}else{var o=t.preOrderHooks;null!==o&&yn(e,o,0,n)}fn(n)}function Ji(t,e){return t<<17|e<<2}function to(t){return t>>17&32767}function eo(t){return 2|t}function no(t){return(131068&t)>>2}function ro(t,e){return-131069&t|e<<2}function io(t){return 1|t}function oo(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=t.data[o];nn(i),a.contentQueries(2,e[o],o)}}}function ao(t,e,n,r,i,o,a,s,u,l){var c=e.blueprint.slice();return c[0]=i,c[2]=140|r,je(c),c[3]=c[15]=t,c[8]=n,c[10]=a||t&&t[10],c[11]=s||t&&t[11],c[12]=u||t&&t[12]||null,c[9]=l||t&&t[9]||null,c[6]=o,c[16]=2==e.type?t[16]:c,c}function so(t,e,n,r,i){var o,a,s=t.data[e];if(null===s)s=function(t,e,n,r,i){var o=We(),a=Ke(),s=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=s),null!==o&&(a?null==o.child&&null!==s.parent&&(o.child=s):null===o.next&&(o.next=s)),s}(t,e,n,r,i),ze.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;var u=(o=ze.lFrame,a=o.currentTNode,o.isParent?a:a.parent);s.injectorIndex=null===u?-1:u.injectorIndex}return Ye(s,!0),s}function uo(t,e,n,r){if(0===n)return-1;for(var i=e.length,o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function lo(t,e,n){an(e);try{var r=t.viewQuery;null!==r&&Bo(1,r,n);var i=t.template;null!==i&&fo(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&oo(t,e),t.staticViewQueries&&Bo(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)Lo(t,e[n])}(e,o)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),a}finally{e[2]&=-5,hn()}}function co(t,e,n,r){var i=e[2];if(256!=(256&i)){an(e);var o=Qe();try{je(e),ze.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&fo(t,e,n,2,r);var a=3==(3&i);if(!o)if(a){var s=t.preOrderCheckHooks;null!==s&&gn(e,s,null)}else{var u=t.preOrderHooks;null!==u&&yn(e,u,0,null),mn(e,0)}if(function(t){for(var e=pi(t);null!==e;e=vi(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&Be(o,1),i[2]|=1024}}(e),function(t){for(var e=pi(t);null!==e;e=vi(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];Re(r)&&co(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&oo(t,e),!o)if(a){var l=t.contentCheckHooks;null!==l&&gn(e,l)}else{var c=t.contentHooks;null!==c&&yn(e,c,1),mn(e,1)}!function(t,e){var n,r,i,o=t.hostBindingOpCodes;if(null!==o)try{for(var a=0;a<o.length;a++){var s=o[a];if(s<0)fn(~s);else{var u=s,l=o[++a],c=o[++a];n=l,r=u,i=void 0,(i=ze.lFrame).bindingIndex=i.bindingRootIndex=n,Je(r),c(2,e[u])}}}finally{fn(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)Mo(t,e[n])}(e,h);var d=t.viewQuery;if(null!==d&&Bo(2,d,r),!o)if(a){var f=t.viewCheckHooks;null!==f&&gn(e,f)}else{var p=t.viewHooks;null!==p&&yn(e,p,2),mn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Be(e[3],-1))}finally{hn()}}}function ho(t,e,n,r){var i=e[10],o=!Qe(),a=Ne(e);try{o&&!a&&i.begin&&i.begin(),a&&lo(t,e,r),co(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function fo(t,e,n,r,i){var o=dn(),a=2&r;try{fn(-1),a&&e.length>20&&$i(t,e,20,Qe()),n(r,i)}finally{fn(o)}}function po(t,e,n){Ve()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||In(n,e),ri(r,e);for(var a=n.initialInputs,s=i;s<o;s++){var u=t.data[s],l=be(u);l&&Po(e,n,u);var c=qn(e,t,s,n);ri(c,e),null!==a&&Ao(0,s-i,c,u,0,a),l&&(Le(n.index,e)[8]=c)}}(t,e,n,Oe(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,a=ze.lFrame.currentDirectiveIndex;try{fn(o);for(var s=r;s<i;s++){var u=t.data[s],l=e[s];Je(s),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||ko(u,l)}}finally{fn(-1),Je(a)}}(t,e,n))}function vo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oe,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(e,t):t[a];t[i++]=s}}function go(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=yo(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function yo(t,e,n,r,i,o,a,s,u,l){var c=20+r,h=c+i,d=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:Qi);return n}(c,h),f="function"==typeof l?l():l;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:s,declTNode:e,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function mo(t,e,n,r){var i=Vo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Go(t).push(r,i.length-1))}function bo(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function _o(t,e,n,r,i,o,a,s){var u,l,c=Oe(e,n),h=e.inputs;!s&&null!=h&&(u=h[r])?(qo(t,n,u,r,i),ye(e)&&function(t,e){var n=Le(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(l=r)?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l,i=null!=a?a(i,e.value||"",r):i,Pe(o)?o.setProperty(c,r,i):Sn(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function wo(t,e,n,r){var i=!1;if(Ve()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];Wi(n,a.selectors,!1)&&(i||(i=[]),Fn(In(n,e),t,a.type),be(a)?(So(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){i=!0,Co(n,t.data.length,o.length);for(var s=0;s<o.length;s++){var u=o[s];u.providersResolver&&u.providersResolver(u)}for(var l=!1,c=!1,h=uo(t,e,o.length,null),d=0;d<o.length;d++){var f=o[d];n.mergedAttrs=En(n.mergedAttrs,f.hostAttrs),To(t,n,e,h,f),Eo(h,f,a),null!==f.contentQueries&&(n.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=128);var p=f.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),l=!0),c||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),c=!0),h++}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],a=null,s=null,u=e.directiveStart;u<n;u++){var l=r[u],c=l.inputs,h=null===i||Vi(e)?null:Do(c,i);o.push(h),a=bo(c,u,a),s=bo(l.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n)}a&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new St("301","Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,a)}return n.mergedAttrs=En(n.mergedAttrs,n.attrs),i}function xo(t,e,n,r,i,o){var a=o.hostBindings;if(a){var s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);var u=~e.index;(function(t){for(var e=t.length;e>0;){var n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,a)}}function ko(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function So(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Eo(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;be(e)&&(n[""]=t)}}function Co(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function To(t,e,n,r,i){t.data[r]=i;var o=i.factory||(i.factory=_e(i.type)),a=new wn(o,be(i),null);t.blueprint[r]=a,n[r]=a,xo(t,e,0,r,uo(t,n,i.hostVars,Qi),i)}function Po(t,e,n){var r=Oe(e,t),i=go(n),o=t[10],a=No(t,ao(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function Ao(t,e,n,r,i,o){var a=o[e];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var l=a[u++],c=a[u++],h=a[u++];null!==s?r.setInput(n,h,l,c):n[c]=h}}function Do(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Oo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Mo(t,e){var n=Le(e,t);if(Re(n)){var r=n[1];80&n[2]?co(r,n,r.template,n[8]):n[5]>0&&Io(n)}}function Io(t){for(var e=pi(t);null!==e;e=vi(e))for(var n=10;n<e.length;n++){var r=e[n];if(1024&r[2]){var i=r[1];co(i,r,i.template,r[8])}else r[5]>0&&Io(r)}var o=t[1].components;if(null!==o)for(var a=0;a<o.length;a++){var s=Le(o[a],t);Re(s)&&s[5]>0&&Io(s)}}function Lo(t,e){var n=Le(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),lo(r,n,n[8])}function No(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ro(t){for(;t;){t[2]|=64;var e=fi(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Fo(t,e,n){var r=e[10];r.begin&&r.begin();try{co(t,e,t.template,n)}catch(i){throw Ho(e,i),i}finally{r.end&&r.end()}}function jo(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=ii(n),i=r[1];ho(i,r,i.template,n)}}(t[8])}function Bo(t,e,n){nn(0),e(t,n)}var zo=Promise.resolve(null);function Vo(t){return t[7]||(t[7]=[])}function Go(t){return t.cleanup||(t.cleanup=[])}function Uo(t,e,n){return(null===t||be(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Ho(t,e){var n=t[9],r=n?n.get(ui,null):null;r&&r.handleError(e)}function qo(t,e,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=e[a],l=t.data[a];null!==l.setInput?l.setInput(u,i,r,s):u[s]=i}}function Wo(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var a=0;a<e.length;a++){var s=e[a];"number"==typeof s?o=s:1==o?i=bt(i,s):2==o&&(r=bt(r,s+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Yo,Ko=new Jn("INJECTOR",-1),Xo=function(){function t(){m(this,t)}return _(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr;if(e===cr){var n=new Error("NullInjectorError: No provider for ".concat(mt(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),Qo=new Jn("Set Injector scope."),Zo={},$o={};function Jo(){return void 0===Yo&&(Yo=new Xo),Yo}function ta(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new ea(t,n,e||Jo(),r)}var ea=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;m(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&rr(n,function(t){return i.processProvider(t,e,n)}),rr([e],function(t){return i.processInjectorType(t,[],a)}),this.records.set(Ko,ia(void 0,this));var s=this.records.get(Qo);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof e?null:mt(e))}return _(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jt.Default;this.assertNotDestroyed();var r,i=fr(this);try{if(!(n&jt.SkipSelf)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Jn)&&Dt(t);o=a&&this.injectableDefInScope(a)?ia(na(t),Zo):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&jt.Self?Jo():this.parent).get(t,e=n&jt.Optional&&e===cr?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(mt(t)),i)throw s;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=mt(e);if(Array.isArray(e))i=e.map(mt).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):mt(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(hr,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,0,this.source)}throw s}finally{fr(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach(function(e){return t.get(e)})}},{key:"toString",value:function(){var t=[];return this.records.forEach(function(e,n){return t.push(mt(n))}),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=xt(t)))return!1;var i=Mt(t),o=null==i&&t.ngModule||void 0,a=void 0===o?t:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=Mt(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{rr(i.imports,function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))})}finally{}if(void 0!==u)for(var l=function(t){var e=u[t],n=e.ngModule,i=e.providers;rr(i,function(t){return r.processProvider(t,n,i||Qt)})},c=0;c<u.length;c++)l(c)}this.injectorDefTypes.add(a);var h=_e(a)||function(){return new a};this.records.set(a,ia(h,Zo));var d=i.providers;if(null!=d&&!s){var f=t;rr(d,function(t){return r.processProvider(t,f,d)})}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=aa(t=xt(t))?t:xt(t&&t.provide),i=function(t,e,n){return oa(t)?ia(void 0,t.useValue):ia(ra(t),Zo)}(t);if(aa(t)||!0!==t.multi)this.records.get(r);else{var o=this.records.get(r);o||((o=ia(void 0,Zo,!0)).factory=function(){return yr(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===Zo&&(e.value=$o,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){if(!t.providedIn)return!1;var e=xt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}]),t}();function na(t){var e=Dt(t),n=null!==e?e.factory:_e(t);if(null!==n)return n;if(t instanceof Jn)throw new Error("Token ".concat(mt(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=ar(e,"?");throw new Error("Can't resolve all parameters for ".concat(mt(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[Lt]||t[Rt]);if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function ra(t,e,n){var r,o;if(aa(t)){var a=xt(t);return _e(a)||na(a)}if(oa(t))r=function(){return xt(t.useValue)};else if((o=t)&&o.useFactory)r=function(){return t.useFactory.apply(t,i(yr(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))r=function(){return vr(xt(t.useExisting))};else{var s=xt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return _e(s)||na(s);r=function(){return l(s,i(yr(t.deps)))}}return r}function ia(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function oa(t){return null!==t&&"object"==typeof t&&dr in t}function aa(t){return"function"==typeof t}var sa=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=ta(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},ua=function(){var t=function(){function t(){m(this,t)}return _(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?sa(t,e,""):sa(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=cr,t.NULL=new Xo,t.\u0275prov=Pt({token:t,providedIn:"any",factory:function(){return vr(Ko)}}),t.__NG_ELEMENT_ID__=-1,t}();function la(t,e){vn(ii(t)[1],qe())}function ca(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(be(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=ha(t.inputs),o.declaredInputs=ha(t.declaredInputs),o.outputs=ha(t.outputs);var a=i.hostBindings;a&&pa(t,a);var s=i.viewQuery,u=i.contentQueries;if(s&&da(t,s),u&&fa(t,u),yt(t.inputs,i.inputs),yt(t.declaredInputs,i.declaredInputs),yt(t.outputs,i.outputs),be(i)&&i.data.animation){var l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}var c=i.features;if(c)for(var h=0;h<c.length;h++){var d=c[h];d&&d.ngInherit&&d(t),d===ca&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=En(i.hostAttrs,n=En(n,i.hostAttrs))}}(r)}function ha(t){return t===Xt?{}:t===Qt?[]:t}function da(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function fa(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function pa(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}var va=null;function ga(){if(!va){var t=Kt.Symbol;if(t&&t.iterator)va=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(va=r)}}return va}var ya=function(){function t(e){m(this,t),this.wrapped=e}return _(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function ma(t){return!!ba(t)&&(Array.isArray(t)||!(t instanceof Map)&&ga()in t)}function ba(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function _a(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function wa(t,e,n,r){var i=Ge();return _a(i,$e(),e)&&(Ue(),function(t,e,n,r,i,o){var a=Oe(t,e);!function(t,e,n,r,i,o,a){if(null==o)Pe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{var s=null==a?Et(o):a(o,r||"",i);Pe(t)?t.setAttribute(e,i,s,n):n?e.setAttributeNS(n,i,s):e.setAttribute(i,s)}}(e[11],a,o,t.value,n,r,i)}(pn(),i,t,e,n,r)),wa}function xa(t,e,n,r,i,o,a,s){var u=Ge(),l=Ue(),c=t+20,h=l.firstCreatePass?function(t,e,n,r,i,o,a,s,u){var l=e.consts,c=so(e,t,4,a||null,Fe(l,s));wo(e,n,c,Fe(l,u)),vn(e,c);var h=c.tViews=yo(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,l,u,e,n,r,i,o,a):l.data[c];Ye(h,!1);var d=u[11].createComment("");Di(l,u,d,h),ri(d,u),No(u,u[c]=Oo(d,u,d,h)),me(h)&&po(l,u,h),null!=a&&vo(u,h,s)}function ka(t){return Ie(ze.lFrame.contextLView,20+t)}function Sa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt.Default,n=Ge();return null===n?vr(t,e):zn(qe(),n,xt(t),e)}function Ea(t,e,n){var r=Ge();return _a(r,$e(),e)&&_o(Ue(),pn(),r,t,e,r[11],n,!1),Ea}function Ca(t,e,n,r,i){var o=i?"class":"style";qo(t,n,e.inputs[o],o,r)}function Ta(t,e,n,r){var i=Ge(),o=Ue(),a=20+t,s=i[11],u=i[a]=mi(s,e,ze.lFrame.currentNamespace),l=o.firstCreatePass?function(t,e,n,r,i,o,a){var s=e.consts,u=so(e,t,2,i,Fe(s,o));return wo(e,n,u,Fe(s,a)),null!==u.attrs&&Wo(u,u.attrs,!1),null!==u.mergedAttrs&&Wo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(a,o,i,0,e,n,r):o.data[a];Ye(l,!0);var c=l.mergedAttrs;null!==c&&xn(s,u,c);var h=l.classes;null!==h&&ji(s,u,h);var d=l.styles;null!==d&&Fi(s,u,d),64!=(64&l.flags)&&Di(o,i,u,l),0===ze.lFrame.elementDepthCount&&ri(u,i),ze.lFrame.elementDepthCount++,me(l)&&(po(o,i,l),function(t,e,n){if(ge(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}(o,l,i)),null!==r&&vo(i,l)}function Pa(){var t=qe();Ke()?Xe():Ye(t=t.parent,!1);var e=t;ze.lFrame.elementDepthCount--;var n=Ue();n.firstCreatePass&&(vn(n,t),ge(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ca(n,e,Ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ca(n,e,Ge(),e.stylesWithoutHost,!1)}function Aa(t,e,n,r){Ta(t,e,n,r),Pa()}function Da(){return Ge()}function Oa(t){return!!t&&"function"==typeof t.then}function Ma(t){return!!t&&"function"==typeof t.subscribe}var Ia=Ma;function La(t,e,n,r){var i=Ge(),o=Ue(),a=qe();return Ra(o,i,i[11],a,t,e,!!n,r),La}function Na(t,e){var n=qe(),r=Ge(),i=Ue();return Ra(i,r,Uo(tn(i.data),n,r),n,t,e,!1),Na}function Ra(t,e,n,r,i,o,a,s){var u=me(r),l=t.firstCreatePass&&Go(t),c=Vo(e),h=!0;if(3&r.type||s){var d=Oe(r,e),f=s?s(d):d,p=c.length,v=s?function(t){return s(De(t[r.index]))}:r.index;if(Pe(n)){var g=null;if(!s&&u&&(g=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=e[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,h=!1;else{o=ja(r,e,0,o,!1);var y=n.listen(f,i,o);c.push(o,y),l&&l.push(i,v,p,p+1)}}else o=ja(r,e,0,o,!0),f.addEventListener(i,o,a),c.push(o),l&&l.push(i,v,p,a)}else o=ja(r,e,0,o,!1);var m,b=r.outputs;if(h&&null!==b&&(m=b[i])){var _=m.length;if(_)for(var w=0;w<_;w+=2){var x=e[m[w]][m[w+1]].subscribe(o),k=c.length;c.push(o,x),l&&l.push(i,r.index,k,-(k+1))}}}function Fa(t,e,n,r){try{return!1!==n(r)}catch(i){return Ho(t,i),!1}}function ja(t,e,n,r,i){return function n(o){if(o===Function)return r;var a=2&t.flags?Le(t.index,e):e;0==(32&e[2])&&Ro(a);for(var s=Fa(e,0,r,o),u=n.__ngNextListenerFn__;u;)s=Fa(e,0,u,o)&&s,u=u.__ngNextListenerFn__;return i&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function Ba(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(ze.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ze.lFrame.contextLView))[8]}(t)}function za(t,e){for(var n=null,r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++){var o=e[i];if("*"!==o){if(null===r?Wi(t,o,!0):Yi(r,o))return i}else n=i}return n}function Va(t){var e=Ge()[16][6];if(!e.projection)for(var n=e.projection=ar(t?t.length:1,null),r=n.slice(),i=e.child;null!==i;){var o=t?za(i,t):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function Ga(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Ge(),i=Ue(),o=so(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),Xe(),64!=(64&o.flags)&&function(t,e,n){Ri(e[11],0,e,n,ki(t,n,e),Pi(n.parent||e[6],n,e))}(i,r,o)}function Ua(t,e,n,r,i){for(var o=t[n+1],a=null===e,s=r?to(o):no(o),u=!1;0!==s&&(!1===u||a);){var l=t[s+1];Ha(t[s],e)&&(u=!0,t[s+1]=r?io(l):eo(l)),s=r?to(l):no(l)}u&&(t[n+1]=r?eo(o):io(o))}function Ha(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ur(t,e)>=0}function qa(t,e,n){return Ya(t,e,n,!1),qa}function Wa(t,e){return Ya(t,e,null,!0),Wa}function Ya(t,e,n,r){var i,o,a=Ge(),s=Ue(),u=(i=ze.lFrame,o=i.bindingIndex,i.bindingIndex=i.bindingIndex+2,o);s.firstUpdatePass&&function(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[dn()],a=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!a&&(e=!1),e=function(t,e,n,r){var i=tn(t),o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Xa(n=Ka(null,t,e,n,r),e.attrs,r),o=null);else{var a=e.directiveStylingLast;if(-1===a||t[a]!==i)if(n=Ka(i,t,e,n,r),null===o){var s=function(t,e,n){var r=n?e.classBindings:e.styleBindings;if(0!==no(r))return t[to(r)]}(t,e,r);void 0!==s&&Array.isArray(s)&&function(t,e,n,r){t[to(n?e.classBindings:e.styleBindings)]=r}(t,e,r,s=Xa(s=Ka(null,t,e,s[1],r),e.attrs,r))}else o=function(t,e,n){for(var r,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=Xa(r,t[o].hostAttrs,n);return Xa(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){var a=o?e.classBindings:e.styleBindings,s=to(a),u=no(a);t[r]=n;var l,c=!1;if(Array.isArray(n)){var h=n;(null===(l=h[1])||ur(h,l)>0)&&(c=!0)}else l=n;if(i)if(0!==u){var d=to(t[s+1]);t[r+1]=Ji(d,s),0!==d&&(t[d+1]=ro(t[d+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=Ji(s,0),0!==s&&(t[s+1]=ro(t[s+1],r)),s=r;else t[r+1]=Ji(u,0),0===s?s=r:t[u+1]=ro(t[u+1],r),u=r;c&&(t[r+1]=eo(t[r+1])),Ua(t,l,r,!0),Ua(t,l,r,!1),function(t,e,n,r,i){var o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ur(o,e)>=0&&(n[r+1]=io(n[r+1]))}(e,l,t,r,o),a=Ji(s,u),o?e.classBindings=a:e.styleBindings=a}(i,o,e,n,a,r)}}(s,t,u,r),e!==Qi&&_a(a,u,e)&&function(t,e,n,r,i,o,a,s){if(3&e.type){var u=t.data,l=u[s+1];Za(1==(1&l)?Qa(u,e,n,i,no(l),a):void 0)||(Za(o)||2==(2&l)&&(o=Qa(u,null,n,i,s,a)),function(t,e,n,r,i){var o=Pe(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{var a=-1===r.indexOf("-")?void 0:hi.DashCase;if(null==i)o?t.removeStyle(n,r,a):n.style.removeProperty(r);else{var s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),a|=hi.Important),o?t.setStyle(n,r,i,a):n.style.setProperty(r,i,s?"important":"")}}}(r,a,function(t,e){return De(e[t])}(dn(),n),i,o))}}(s,s.data[dn()],a,a[11],t,a[u+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=mt(Dr(t)))),t}(e,n),r,u)}function Ka(t,e,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(r=Xa(r,(o=e[s]).hostAttrs,i),o!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function Xa(t,e,n){var r,i,o,a,s=n?1:2,u=-1;if(null!==e)for(var l=0;l<e.length;l++){var c=e[l];"number"==typeof c?u=c:u===s&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),r=t,i=c,o=!!n||e[++l],a=void 0,(a=ur(r,i))>=0?r[1|a]=o:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(r,a=~a,i,o))}return void 0===t?null:t}function Qa(t,e,n,r,i,o){for(var a,s=null===e;i>0;){var u=t[i],l=Array.isArray(u),c=l?u[1]:u,h=null===c,d=n[i+1];d===Qi&&(d=h?Qt:void 0);var f=h?sr(d,r):c===r?d:void 0;if(l&&!Za(f)&&(f=sr(u,r)),Za(f)&&(a=f,s))return a;var p=t[i+1];i=s?to(p):no(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(a=sr(v,r))}return a}function Za(t){return void 0!==t}function $a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Ge(),r=Ue(),i=t+20,o=r.firstCreatePass?so(r,i,1,e,null):r.data[i],a=n[i]=function(t,e){return Pe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Di(r,n,a,o),Ye(o,!1)}function Ja(t,e,n){var r=Ge();if(_a(r,$e(),e)){var i=Ue(),o=pn();_o(i,o,r,t,e,Uo(tn(i.data),o,r),n,!0)}return Ja}var ts=void 0,es=["en",[["a","p"],["AM","PM"],ts],[["AM","PM"],ts,ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ts,"{1} 'at' {0}",ts],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],ns={};function rs(t){return t in ns||(ns[t]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[t]),ns[t]}var is=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});function os(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined"," [Expected=> null != ").concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}function as(t,e,n,r,i){if(t=xt(t),Array.isArray(t))for(var o=0;o<t.length;o++)as(t[o],e,n,r,i);else{var a=Ue(),s=Ge(),u=aa(t)?t:xt(t.provide),l=ra(t),c=qe(),h=1048575&c.providerIndexes,d=c.directiveStart,f=c.providerIndexes>>20;if(aa(t)||!t.multi){var p=new wn(l,i,Sa),v=ls(u,e,i?h:h+f,d);-1===v?(Fn(In(c,s),a,u),ss(a,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var g=ls(u,e,h+f,d),y=ls(u,e,h,h+f),m=g>=0&&n[g],b=y>=0&&n[y];if(i&&!b||!i&&!m){Fn(In(c,s),a,u);var _=function(t,e,n,r,i){var o=new wn(t,n,Sa);return o.multi=[],o.index=e,o.componentProviders=0,us(o,i,r&&!n),o}(i?hs:cs,n.length,i,r,l);!i&&b&&(n[y].providerFactory=_),ss(a,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(_),s.push(_)}else ss(a,t,g>-1?g:y,us(n[i?y:g],l,!i&&r));!i&&r&&b&&n[y].componentProviders++}}}function ss(t,e,n,r){var i=aa(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var s=a.indexOf(n);-1===s?a.push(n,[r,o]):a[s+1].push(r,o)}else a.push(n,o)}}}function us(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ls(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function cs(t,e,n,r){return ds(this.multi,[])}function hs(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=qn(n,n[1],this.providerFactory.index,r);ds(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else ds(o,i=[]);return i}function ds(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function fs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=Ue();if(r.firstCreatePass){var i=be(t);as(n,r.data,r.blueprint,i,!0),as(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var ps=function t(){m(this,t)},vs=function(){function t(){m(this,t)}return _(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(mt(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),gs=function(){var t=function t(){m(this,t)};return t.NULL=new vs,t}();function ys(){}function ms(t,e){return new _s(Oe(t,e))}var bs=function(){return ms(qe(),Ge())},_s=function(){var t=function t(e){m(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=bs,t}();function ws(t){return t instanceof _s?t.nativeElement:t}var xs=function t(){m(this,t)},ks=function(){var t=function t(){m(this,t)};return t.\u0275prov=Pt({token:t,providedIn:"root",factory:function(){return null}}),t}(),Ss=function t(e){m(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},Es=new Ss("12.0.1"),Cs=function(){function t(){m(this,t)}return _(t,[{key:"supports",value:function(t){return ma(t)}},{key:"create",value:function(t){return new Ps(t)}}]),t}(),Ts=function(t,e){return e},Ps=function(){function t(e){m(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ts}return _(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Ms(n,r,i)?e:n,a=Ms(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,d=h+c;l<=d&&d<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!ma(t))throw new Error("Error trying to diff '".concat(mt(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[ga()]();!(r=i.next()).done;)e(r.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new As(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Os),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Os),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),t}(),As=function t(e,n){m(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ds=function(){function t(){m(this,t),this._head=null,this._tail=null}return _(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),Os=function(){function t(){m(this,t),this.map=new Map}return _(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Ds,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),t}();function Ms(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Is=function(){function t(){m(this,t)}return _(t,[{key:"supports",value:function(t){return t instanceof Map||ba(t)}},{key:"create",value:function(){return new Ls}}]),t}(),Ls=function(){function t(){m(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _(t,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||ba(t)))throw new Error("Error trying to diff '".concat(mt(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Ns(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})}}]),t}(),Ns=function t(e){m(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function Rs(){return new Fs([new Cs])}var Fs=function(){var t=function(){function t(e){m(this,t),this.factories=e}return _(t,[{key:"find",value:function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||Rs())},deps:[[t,new xr,new wr]]}}}]),t}();return t.\u0275prov=Pt({token:t,providedIn:"root",factory:Rs}),t}();function js(){return new Bs([new Is])}var Bs=function(){var t=function(){function t(e){m(this,t),this.factories=e}return _(t,[{key:"find",value:function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||js())},deps:[[t,new xr,new wr]]}}}]),t}();return t.\u0275prov=Pt({token:t,providedIn:"root",factory:js}),t}();function zs(t,e,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=e[n.index];if(null!==a&&r.push(De(a)),ve(a))for(var s=10;s<a.length;s++){var u=a[s],l=u[1].firstChild;null!==l&&zs(u[1],u,l,r)}var c=n.type;if(8&c)zs(t,e,n.child,r);else if(32&c)for(var h=di(n,e),d=void 0;d=h();)r.push(d);else if(16&c){var f=Mi(e,n);if(Array.isArray(f))r.push.apply(r,i(f));else{var p=fi(e[16]);zs(p[1],p,f,r,!0)}}n=o?n.projectionNext:n.next}return r}var Vs=function(){function t(e,n){m(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return _(t,[{key:"rootNodes",get:function(){var t=this._lView,e=t[1];return zs(e,t,e.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(t){this._lView[8]=t}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var t=this._lView[3];if(ve(t)){var e=t[8],n=e?e.indexOf(this):-1;n>-1&&(_i(t,n),or(e,n))}this._attachedToViewContainer=!1}wi(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){mo(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){Ro(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Fo(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){Ze(!0);try{Fo(t,e,n)}finally{Ze(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Ni(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),t}(),Gs=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this,t))._view=t,r}return _(n,[{key:"detectChanges",value:function(){jo(this._view)}},{key:"checkNoChanges",value:function(){!function(t){Ze(!0);try{jo(t)}finally{Ze(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Vs),Us=function(t){return function(t,e,n){if(ye(t)&&!n){var r=Le(t.index,e);return new Vs(r,r)}return 47&t.type?new Vs(e[16],e):null}(qe(),Ge(),16==(16&t))},Hs=function(){var t=function t(){m(this,t)};return t.__NG_ELEMENT_ID__=Us,t}(),qs=[new Is],Ws=new Fs([new Cs]),Ys=new Bs(qs),Ks=function(){return Zs(qe(),Ge())},Xs=function(){var t=function t(){m(this,t)};return t.__NG_ELEMENT_ID__=Ks,t}(),Qs=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this))._declarationLView=t,o._declarationTContainer=r,o.elementRef=i,o}return _(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=ao(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),lo(e,n,t),new Vs(n)}}]),n}(Xs);function Zs(t,e){return 4&t.type?new Qs(e,t,ms(t,e)):null}var $s=function t(){m(this,t)},Js=function t(){m(this,t)},tu=function(){return ou(qe(),Ge())},eu=function(){var t=function t(){m(this,t)};return t.__NG_ELEMENT_ID__=tu,t}(),nu=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this))._lContainer=t,o._hostTNode=r,o._hostLView=i,o}return _(n,[{key:"element",get:function(){return ms(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new Kn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var t=Rn(this._hostTNode,this._hostLView);if(Tn(t)){var e=An(t,this._hostLView),n=Pn(t);return new Kn(e[1].data[n+8],e)}return new Kn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){var e=ru(this._lContainer);return null!==e&&e[t]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var a=o.get($s,null);a&&(i=a)}var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var r=t._lView,i=r[1];if(ve(r[3])){var o=this.indexOf(t);if(-1!==o)this.detach(o);else{var a=r[3],s=new n(a,a[6],a[3]);s.detach(s.indexOf(t))}}var u=this._adjustIndex(e),l=this._lContainer;!function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],ir(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var a=e[17];null!==a&&n!==a&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(i,r,l,u);var c=Ii(u,l),h=r[11],d=Ti(h,l[7]);return null!==d&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ni(t,r,n,1,i,o)}(i,l[6],h,r,d,c),t.attachToViewContainerRef(),ir(iu(l),u,t),t}},{key:"move",value:function(t,e){return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=ru(this._lContainer);return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){var e=this._adjustIndex(t,-1),n=_i(this._lContainer,e);n&&(or(iu(this._lContainer),e),wi(n[1],n))}},{key:"detach",value:function(t){var e=this._adjustIndex(t,-1),n=_i(this._lContainer,e);return n&&null!=or(iu(this._lContainer),e)?new Vs(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}}]),n}(eu);function ru(t){return t[8]}function iu(t){return t[8]||(t[8]=[])}function ou(t,e){var n,r=e[t.index];if(ve(r))n=r;else{var i;if(8&t.type)i=De(r);else{var o=e[11];i=o.createComment("");var a=Oe(t,e);Si(o,Ti(o,a),i,function(t,e){return Pe(t)?t.nextSibling(e):e.nextSibling}(o,a),!1)}e[t.index]=n=Oo(r,e,i,t),No(e,n)}return new nu(n,t,e)}var au={},su=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this)).ngModule=t,r}return _(n,[{key:"resolveComponentFactory",value:function(t){var e=de(t);return new cu(e,this.ngModule)}}]),n}(gs);function uu(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var lu=new Jn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return li}}),cu=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(Xi).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return _(n,[{key:"inputs",get:function(){return uu(this.componentDef.inputs)}},{key:"outputs",get:function(){return uu(this.componentDef.outputs)}},{key:"create",value:function(t,e,n,r){var i,o,a=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,au,i);return o!==au||r===au?o:e.get(n,r,i)}}}(t,r.injector):t,s=a.get(xs,Ae),u=a.get(ks,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(Pe(t))return t.selectRootElement(e,n===Ut.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(l,n,this.componentDef.encapsulation):mi(s.createRenderer(null,this.componentDef),c,function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,f={components:[],scheduler:li,clean:zo,playerHandler:null,flags:0},p=yo(0,null,null,1,0,null,null,null,null,null),v=ao(null,p,f,d,null,null,s,l,u,a);an(v);try{var g=function(t,e,n,r,i,o){var a=n[1];n[20]=t;var s=so(a,20,2,"#host",null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(Wo(s,u,!0),null!==t&&(xn(i,t,u),null!==s.classes&&ji(i,t,s.classes),null!==s.styles&&Fi(i,t,s.styles)));var l=r.createRenderer(t,e),c=ao(n,go(e),null,e.onPush?64:16,n[20],s,r,l,null,null);return a.firstCreatePass&&(Fn(In(s,n),a,e.type),So(a,s),Co(s,n.length,1)),No(n,c),n[20]=c}(h,this.componentDef,v,s,l);if(h)if(n)xn(l,h,["ng-version",Es.full]);else{var y=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Hi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),m=y.attrs,b=y.classes;m&&xn(l,h,m),b&&b.length>0&&ji(l,h,b.join(" "))}if(o=Me(p,20),void 0!==e)for(var _=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var x=e[w];_.push(null!=x?Array.from(x):null)}i=function(t,e,n,r,i){var o=n[1],a=function(t,e,n){var r=qe();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),To(t,r,e,uo(t,e,1,null),n));var i=qn(e,t,r.directiveStart,r);ri(i,e);var o=Oe(r,e);return o&&ri(o,e),i}(o,n,e);if(r.components.push(a),t[8]=a,i&&i.forEach(function(t){return t(a,e)}),e.contentQueries){var s=qe();e.contentQueries(1,a,s.directiveStart)}var u=qe();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fn(u.index),xo(n[1],u,0,u.directiveStart,u.directiveEnd,e),ko(e,a)),a}(g,this.componentDef,v,f,[la]),lo(p,v,null)}finally{hn()}return new hu(this.componentType,i,ms(o,v),v,o)}}]),n}(ps),hu=function(t){h(n,t);var e=f(n);function n(t,r,i,o,a){var s;return m(this,n),(s=e.call(this)).location=i,s._rootLView=o,s._tNode=a,s.instance=r,s.hostView=s.changeDetectorRef=new Gs(o),s.componentType=t,s}return _(n,[{key:"injector",get:function(){return new Kn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(t){this.hostView.onDestroy(t)}}]),n}(function(){return function t(){m(this,t)}}()),du=new Map,fu=function(t){h(n,t);var e=f(n);function n(t,r){var i;m(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=v(i),i.destroyCbs=[],i.componentFactoryResolver=new su(v(i));var o=fe(t),a=t[ee]||null;return a&&os(a),i._bootstrapComponents=ci(o.bootstrap),i._r3Injector=ta(t,r,[{provide:$s,useValue:v(i)},{provide:gs,useValue:i.componentFactoryResolver}],mt(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return _(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ua.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jt.Default;return t===ua||t===$s||t===Ko?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}($s),pu=function(t){h(n,t);var e=f(n);function n(t){var r,i,a;return m(this,n),(r=e.call(this)).moduleType=t,null!==fe(t)&&(i=t,a=new Set,function t(e){var n=fe(e,!0),r=n.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(mt(e)," vs ").concat(mt(e.name)))}(r,du.get(r),e),du.set(r,e));var i,s=o(ci(n.imports));try{for(s.s();!(i=s.n()).done;){var u=i.value;a.has(u)||(a.add(u),t(u))}}catch(l){s.e(l)}finally{s.f()}}(i)),r}return _(n,[{key:"create",value:function(t){return new fu(this.moduleType,t)}}]),n}(Js);function vu(t,e){var n,r=Ue(),i=t+20;r.firstCreatePass?(n=function(t,e){if(e)for(var n=e.length-1;n>=0;n--){var r=e[n];if(t===r.name)return r}throw new St("302","The pipe '".concat(t,"' could not be found!"))}(e,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=_e(n.type)),a=Bt(Sa);try{var s=On(!1),u=o();return On(s),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(r,Ge(),i,u),u}finally{Bt(a)}}function gu(t,e,n){var r=t+20,i=Ge(),o=Ie(i,r);return function(t,e){return ya.isWrapped(e)&&(e=ya.unwrap(e),t[ze.lFrame.bindingIndex]=Qi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?function(t,e,n,r,i,o){var a=e+n;return _a(t,a,i)?function(t,e,n){return t[e]=n}(t,a+1,o?r.call(o,i):r(i)):function(t,e){var n=t[e];return n===Qi?void 0:n}(t,a+1)}(i,function(){var t=ze.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n))}function yu(t){return function(e){setTimeout(t,void 0,e)}}var mu=function(t){h(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(this,n),(t=e.call(this)).__isAsync=r,t}return _(n,[{key:"emit",value:function(t){c(y(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,o,a,s=t,u=e||function(){return null},l=r;if(t&&"object"==typeof t){var h=t;s=null===(i=h.next)||void 0===i?void 0:i.bind(h),u=null===(o=h.error)||void 0===o?void 0:o.bind(h),l=null===(a=h.complete)||void 0===a?void 0:a.bind(h)}this.__isAsync&&(u=yu(u),s&&(s=yu(s)),l&&(l=yu(l)));var d=c(y(n.prototype),"subscribe",this).call(this,{next:s,error:u,complete:l});return t instanceof E&&t.add(d),d}}]),n}(B);function bu(){return this._results[ga()]()}var _u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m(this,t),this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=ga(),r=t.prototype;r[n]||(r[n]=bu)}return _(t,[{key:"changes",get:function(){return this._changes||(this._changes=new mu)}},{key:"get",value:function(t){return this._results[t]}},{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t,e){this.dirty=!1;var n=nr(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),wu=function(){function t(e){m(this,t),this.queryList=e,this.matches=null}return _(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),xu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];m(this,t),this.queries=e}return _(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==Ru(t,e).matches&&this.queries[e].setDirty()}}]),t}(),ku=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;m(this,t),this.predicate=e,this.flags=n,this.read=r},Su=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];m(this,t),this.queries=e}return _(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),t}(),Eu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;m(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return _(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,Cu(e,i)),this.matchTNodeWithReadOption(t,e,Hn(e,t,i,!1,!1))}else n===Xs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Hn(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===_s||r===eu||r===Xs&&4&e.type)this.addMatch(e.index,-2);else{var i=Hn(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function Cu(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Tu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ms(t,e):4&t.type?Zs(t,e):null}(e,t):-2===n?function(t,e,n){return n===_s?ms(e,t):n===Xs?Zs(e,t):n===eu?ou(e,t):void 0}(t,e,r):qn(t,t[1],n,e)}function Pu(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,a=n.matches,s=[],u=0;u<a.length;u+=2){var l=a[u];s.push(l<0?null:Tu(e,o[l],a[u+1],n.metadata.read))}i.matches=s}return i.matches}function Au(t,e,n,r){var i=t.queries.getByIndex(n),o=i.matches;if(null!==o)for(var a=Pu(t,e,i,n),s=0;s<o.length;s+=2){var u=o[s];if(u>0)r.push(a[s/2]);else{for(var l=o[s+1],c=e[-u],h=10;h<c.length;h++){var d=c[h];d[17]===d[3]&&Au(d[1],d,l,r)}if(null!==c[9])for(var f=c[9],p=0;p<f.length;p++){var v=f[p];Au(v[1],v,l,r)}}}return r}function Du(t){var e=Ge(),n=Ue(),r=en();nn(r+1);var i=Ru(n,r);if(t.dirty&&Ne(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?Au(n,e,r,[]):Pu(n,e,i,r);t.reset(o,ws),t.notifyOnChanges()}return!0}return!1}function Ou(t,e,n){var r=Ue();r.firstCreatePass&&(Nu(r,new ku(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Lu(r,Ge(),e)}function Mu(t,e,n,r){var i=Ue();if(i.firstCreatePass){var o=qe();Nu(i,new ku(e,n,r),o.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Lu(i,Ge(),n)}function Iu(){return t=Ge(),e=en(),t[19].queries[e].queryList;var t,e}function Lu(t,e,n){var r=new _u(4==(4&n));mo(t,e,r,r.destroy),null===e[19]&&(e[19]=new xu),e[19].queries.push(new wu(r))}function Nu(t,e,n){null===t.queries&&(t.queries=new Su),t.queries.track(new Eu(e,n))}function Ru(t,e){return t.queries.getByIndex(e)}var Fu=new Jn("Application Initializer"),ju=function(){var t=function(){function t(e){var n=this;m(this,t),this.appInits=e,this.resolve=ys,this.reject=ys,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return _(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=function(n){var r=t.appInits[n]();if(Oa(r))e.push(r);else if(Ia(r)){var i=new Promise(function(t,e){r.subscribe({complete:t,error:e})});e.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Fu,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Bu=new Jn("AppId"),zu={provide:Bu,useFactory:function(){return"".concat(Vu()).concat(Vu()).concat(Vu())},deps:[]};function Vu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Gu=new Jn("Platform Initializer"),Uu=new Jn("Platform ID"),Hu=new Jn("appBootstrapListener"),qu=function(){var t=function(){function t(){m(this,t)}return _(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Wu=new Jn("LocaleId"),Yu=new Jn("DefaultCurrencyCode"),Ku=function t(e,n){m(this,t),this.ngModuleFactory=e,this.componentFactories=n},Xu=function(t){return new pu(t)},Qu=Xu,Zu=function(t){return Promise.resolve(Xu(t))},$u=function(t){var e=Xu(t),n=ci(fe(t).declarations).reduce(function(t,e){var n=de(e);return n&&t.push(new cu(n)),t},[]);return new Ku(e,n)},Ju=$u,tl=function(t){return Promise.resolve($u(t))},el=function(){var t=function(){function t(){m(this,t),this.compileModuleSync=Qu,this.compileModuleAsync=Zu,this.compileModuleAndAllComponentsSync=Ju,this.compileModuleAndAllComponentsAsync=tl}return _(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),nl=Promise.resolve(0);function rl(t){"undefined"==typeof Zone?nl.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var il=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,a=e.shouldCoalesceEventChangeDetection,s=void 0!==a&&a,u=e.shouldCoalesceRunChangeDetection,l=void 0!==u&&u;if(m(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mu(!1),this.onMicrotaskEmpty=new mu(!1),this.onStable=new mu(!1),this.onError=new mu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!l&&s,this.shouldCoalesceRunChangeDetection=l,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=Kt.requestAnimationFrame,e=Kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=function(){!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Kt,function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){t.lastRequestAnimationFrameId=-1,sl(t),t.isCheckStableRunning=!0,al(t),t.isCheckStableRunning=!1},void 0,function(){},function(){})),t.fakeTopEventTask.invoke()}),sl(t))}(n)},(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,i,o,a,s){try{return ul(n),t.invokeTask(i,o,a,s)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&r(),ll(n)}},onInvoke:function(t,e,i,o,a,s,u){try{return ul(n),t.invoke(i,o,a,s,u)}finally{n.shouldCoalesceRunChangeDetection&&r(),ll(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,sl(n),al(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return _(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ol,ys,ys);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}(),ol={};function al(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function sl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ul(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ll(t){t._nesting--,al(t)}var cl,hl=function(){function t(){m(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mu,this.onMicrotaskEmpty=new mu,this.onStable=new mu,this.onError=new mu}return _(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),dl=function(){var t=function(){function t(e){var n=this;m(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return _(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){il.assertNotInAngularZone(),rl(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())rl(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(il))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),fl=function(){var t=function(){function t(){m(this,t),this._applications=new Map,pl.addToWindow(this)}return _(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return pl.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),pl=new(function(){function t(){m(this,t)}return _(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),vl=!0,gl=!1;function yl(){return gl=!0,vl}var ml=new Jn("AllowMultipleToken"),bl=function t(e,n){m(this,t),this.name=e,this.token=n};function _l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(e),i=new Jn(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=wl();if(!o||o.injector.get(ml,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0},{provide:Qo,useValue:"platform"});!function(t){if(cl&&!cl.destroyed&&!cl.injector.get(ml,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");cl=t.get(xl);var e=t.get(Gu,null);e&&e.forEach(function(t){return t()})}(ua.create({providers:a,name:r}))}return function(t){var e=wl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function wl(){return cl&&!cl.destroyed?cl:null}var xl=function(){var t=function(){function t(e){m(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r={ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1},"noop"===n?new hl:("zone.js"===n?void 0:n)||new il({enableLongStackTrace:yl(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),a=[{provide:il,useValue:o}];return o.run(function(){var e=ua.create({providers:a,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(ui,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.runOutsideAngular(function(){var t=o.onError.subscribe({next:function(t){r.handleError(t)}});n.onDestroy(function(){Cl(i._modules,n),t.unsubscribe()})}),function(t,e,r){try{var o=((a=n.injector.get(ju)).runInitializers(),a.donePromise.then(function(){return os(n.injector.get(Wu,"en-US")||"en-US"),i._moduleDoBootstrap(n),n}));return Oa(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(r,o)})}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=kl({},n);return function(t,e,n){var r=new pu(n);return Promise.resolve(r)}(0,0,t).then(function(t){return e.bootstrapModuleFactory(t,r)})}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(El);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(mt(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(ua))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}();function kl(t,e){return Array.isArray(e)?e.reduce(kl,t):Object.assign(Object.assign({},t),e)}var Sl,El=((Sl=function(){function t(e,n,r,i,o){var a=this;m(this,t),this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new I(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),u=new I(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){il.assertNotInAngularZone(),rl(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){il.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=at(s,u.pipe(vt()))}return _(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof ps?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get($s),o=n.create(ua.NULL,[],e||n.selector,i),a=o.location.nativeElement,s=o.injector.get(dl,null),u=s&&o.injector.get(fl);return s&&u&&u.registerApplication(a,s),o.onDestroy(function(){r.detachView(o.hostView),Cl(r.components,o),u&&u.unregisterApplication(a)}),this._loadComponent(o),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=o(this._views);try{for(n.s();!(e=n.n()).done;)e.value.detectChanges()}catch(r){n.e(r)}finally{n.f()}}catch(i){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(i)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;Cl(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Hu,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(t){return t.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),t}()).\u0275fac=function(t){return new(t||Sl)(vr(il),vr(ua),vr(ui),vr(gs),vr(ju))},Sl.\u0275prov=Pt({token:Sl,factory:Sl.\u0275fac}),Sl);function Cl(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Tl=function t(){m(this,t)},Pl=function t(){m(this,t)},Al={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Dl=function(){var t=function(){function t(e,n){m(this,t),this._compiler=e,this._config=n||Al}return _(t,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var e=this,n=r(t.split("#"),2),i=n[0],o=n[1];return void 0===o&&(o="default"),a(8255)(i).then(function(t){return t[o]}).then(function(t){return Ol(t,i,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})}},{key:"loadFactory",value:function(t){var e=r(t.split("#"),2),n=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),a(8255)(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(function(t){return t[i+o]}).then(function(t){return Ol(t,n,i)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(el),vr(Pl,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}();function Ol(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var Ml=_l(null,"core",[{provide:Uu,useValue:"unknown"},{provide:xl,deps:[ua]},{provide:fl,deps:[]},{provide:qu,deps:[]}]),Il=[{provide:El,useClass:El,deps:[il,ua,ui,gs,ju]},{provide:lu,deps:[il],useFactory:function(t){var e=[];return t.onStable.subscribe(function(){for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ju,useClass:ju,deps:[[new wr,Fu]]},{provide:el,useClass:el,deps:[]},zu,{provide:Fs,useFactory:function(){return Ws},deps:[]},{provide:Bs,useFactory:function(){return Ys},deps:[]},{provide:Wu,useFactory:function(t){return os(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new _r(Wu),new wr,new xr]]},{provide:Yu,useValue:"USD"}],Ll=function(){var t=function t(e){m(this,t)};return t.\u0275fac=function(e){return new(e||t)(vr(El))},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:Il}),t}(),Nl=null;function Rl(){return Nl}var Fl=new Jn("DocumentToken"),jl=function(){var t=function(){function t(){m(this,t)}return _(t,[{key:"historyGo",value:function(t){throw new Error("Not implemented")}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({factory:Bl,token:t,providedIn:"platform"}),t}();function Bl(){return vr(Vl)}var zl=new Jn("Location Initialized"),Vl=function(){var t=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this))._doc=t,r._init(),r}return _(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return Rl().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){var e=Rl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),function(){return e.removeEventListener("popstate",t)}}},{key:"onHashChange",value:function(t){var e=Rl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),function(){return e.removeEventListener("hashchange",t)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(t,e,n){Gl()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){Gl()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(t)}},{key:"getState",value:function(){return this._history.state}}]),n}(jl);return t.\u0275fac=function(e){return new(e||t)(vr(Fl))},t.\u0275prov=Pt({factory:Ul,token:t,providedIn:"platform"}),t}();function Gl(){return!!window.history.pushState}function Ul(){return new Vl(vr(Fl))}function Hl(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function ql(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Wl(t){return t&&"?"!==t[0]?"?"+t:t}var Yl=function(){var t=function(){function t(){m(this,t)}return _(t,[{key:"historyGo",value:function(t){throw new Error("Not implemented")}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({factory:Kl,token:t,providedIn:"root"}),t}();function Kl(t){var e=vr(Fl).location;return new Ql(vr(jl),e&&e.origin||"")}var Xl=new Jn("appBaseHref"),Ql=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r){var i;if(m(this,n),(i=e.call(this))._platformLocation=t,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,p(i)}return _(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return Hl(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+Wl(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+Wl(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+Wl(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(e=(t=this._platformLocation).historyGo)||void 0===e||e.call(t,n)}}]),n}(Yl);return t.\u0275fac=function(e){return new(e||t)(vr(jl),vr(Xl,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Zl=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return _(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=Hl(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+Wl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+Wl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(e=(t=this._platformLocation).historyGo)||void 0===e||e.call(t,n)}}]),n}(Yl);return t.\u0275fac=function(e){return new(e||t)(vr(jl),vr(Xl,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),$l=function(){var t=function(){function t(e,n){var r=this;m(this,t),this._subject=new mu,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=ql(tc(i)),this._platformStrategy.onPopState(function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})})}return _(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+Wl(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,tc(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wl(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wl(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(e=(t=this._platformStrategy).historyGo)||void 0===e||e.call(t,n)}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(t,e)})}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Yl),vr(jl))},t.normalizeQueryParams=Wl,t.joinWithSlash=Hl,t.stripTrailingSlash=ql,t.\u0275prov=Pt({factory:Jl,token:t,providedIn:"root"}),t}();function Jl(){return new $l(vr(Yl),vr(jl))}function tc(t){return t.replace(/\/index.html$/,"")}var ec=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),nc=function t(){m(this,t)},rc=function(){var t=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this)).locale=t,r}return _(n,[{key:"getPluralCategory",value:function(t,e){switch(function(t){return function(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=rs(e);if(n)return n;var r=e.split("-")[0];if(n=rs(r))return n;if("en"===r)return es;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}(t)[is.PluralCase]}(e||this.locale)(t)){case ec.Zero:return"zero";case ec.One:return"one";case ec.Two:return"two";case ec.Few:return"few";case ec.Many:return"many";default:return"other"}}}]),n}(nc);return t.\u0275fac=function(e){return new(e||t)(vr(Wu))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}();function ic(t,e){e=encodeURIComponent(e);var n,i=o(t.split(";"));try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.indexOf("="),u=r(-1==s?[a,""]:[a.slice(0,s),a.slice(s+1)],2),l=u[0],c=u[1];if(l.trim()===e)return decodeURIComponent(c)}}catch(h){i.e(h)}finally{i.f()}return null}var oc=function(){function t(e,n,r,i){m(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return _(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),ac=function(){var t=function(){function t(e,n,r){m(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _(t,[{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(t){this._trackByFn=t}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new oc(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new sc(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new sc(t,s);n.push(u)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(eu),Sa(Xs),Sa(Fs))},t.\u0275dir=he({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t}(),sc=function t(e,n){m(this,t),this.record=e,this.view=n},uc=function(){var t=function(){function t(e,n){m(this,t),this._viewContainer=e,this._context=new lc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _(t,[{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){cc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){cc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(eu),Sa(Xs))},t.\u0275dir=he({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t}(),lc=function t(){m(this,t),this.$implicit=null,this.ngIf=null};function cc(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(mt(e),"'."))}var hc=function(){function t(){m(this,t)}return _(t,[{key:"createSubscription",value:function(t,e){return t.subscribe({next:e,error:function(t){throw t}})}},{key:"dispose",value:function(t){t.unsubscribe()}},{key:"onDestroy",value:function(t){t.unsubscribe()}}]),t}(),dc=new(function(){function t(){m(this,t)}return _(t,[{key:"createSubscription",value:function(t,e){return t.then(e,function(t){throw t})}},{key:"dispose",value:function(t){}},{key:"onDestroy",value:function(t){}}]),t}()),fc=new hc,pc=function(){var t,e=function(){function t(e){m(this,t),this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _(t,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}},{key:"_subscribe",value:function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})}},{key:"_selectStrategy",value:function(e){if(Oa(e))return dc;if(Ma(e))return fc;throw Error("InvalidPipeArgument: '".concat(e,"' for pipe '").concat(mt(t),"'"))}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}]),t}();return e.\u0275fac=function(t){return new(t||e)(Sa(Hs,16))},e.\u0275pipe={type:(t={name:"async",type:e,pure:!1}).type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null},e}(),vc=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:[{provide:nc,useClass:rc}]}),t}();function gc(t){return"browser"===t}function yc(t){return"server"===t}var mc=function(){var t=function t(){m(this,t)};return t.\u0275prov=Pt({token:t,providedIn:"root",factory:function(){return new bc(vr(Fl),window)}}),t}(),bc=function(){function t(e,n){m(this,t),this.document=e,this.window=n,this.offset=function(){return[0,0]}}return _(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var e=function(t,e){var n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow))for(var r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var o=i.shadowRoot;if(o){var a=o.getElementById(e)||o.querySelector('[name="'.concat(e,'"]'));if(a)return a}i=r.nextNode()}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(t){return t.focus(),this.document.activeElement===t}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var t=_c(this.window.history)||_c(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}]),t}();function _c(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var wc,xc=function t(){m(this,t)},kc=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getBaseHref",value:function(t){var e=(Sc=Sc||document.querySelector("base"))?Sc.getAttribute("href"):null;return null==e?null:function(t){(wc=wc||document.createElement("a")).setAttribute("href",t);var e=wc.pathname;return"/"===e.charAt(0)?e:"/".concat(e)}(e)}},{key:"resetBaseElement",value:function(){Sc=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(t){return ic(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new n,Nl||(Nl=t)}}]),n}(function(t){h(n,t);var e=f(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).supportsDOMEvents=!0,t}return n}(function(){return function t(){m(this,t)}}())),Sc=null,Ec=new Jn("TRANSITION_ID"),Cc=[{provide:Fu,useFactory:function(t,e,n){return function(){n.get(ju).donePromise.then(function(){var n=Rl();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(function(e){return e.getAttribute("ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Ec,Fl,ua],multi:!0}],Tc=function(){function t(){m(this,t)}return _(t,[{key:"addToWindow",value:function(t){Kt.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Kt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},Kt.getAllAngularRootElements=function(){return t.getAllRootElements()},Kt.frameworkStabilizers||(Kt.frameworkStabilizers=[]),Kt.frameworkStabilizers.push(function(t){var e=Kt.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?Rl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){var e;e=new t,pl=e}}]),t}(),Pc=function(){var t=function(){function t(){m(this,t)}return _(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Ac=new Jn("EventManagerPlugins"),Dc=function(){var t=function(){function t(e,n){var r=this;m(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(t){return t.manager=r}),this._plugins=e.slice().reverse()}return _(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event ".concat(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Ac),vr(il))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Oc=function(){function t(e){m(this,t),this._doc=e}return _(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=Rl().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),Mc=function(){var t=function(){function t(){m(this,t),this._stylesSet=new Set}return _(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Ic=function(){var t=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Map,r._hostNodes.set(t.head,[]),r}return _(n,[{key:"_addStylesToHost",value:function(t,e,n){var r=this;t.forEach(function(t){var i=r._doc.createElement("style");i.textContent=t,n.push(e.appendChild(i))})}},{key:"addHost",value:function(t){var e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}},{key:"removeHost",value:function(t){var e=this._hostNodes.get(t);e&&e.forEach(Lc),this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach(function(n,r){e._addStylesToHost(t,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(t){return t.forEach(Lc)})}}]),n}(Mc);return t.\u0275fac=function(e){return new(e||t)(vr(Fl))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}();function Lc(t){Rl().remove(t)}var Nc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rc=/%COMP%/g;function Fc(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Fc(t,i,n):(i=i.replace(Rc,t),n.push(i))}return n}function jc(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Bc=function(){var t=function(){function t(e,n,r){m(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new zc(e)}return _(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ut.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Vc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case 1:case Ut.ShadowDom:return new Gc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Fc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Dc),vr(Ic),vr(Bu))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),zc=function(){function t(e){m(this,t),this.eventManager=e,this.data=Object.create(null)}return _(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Nc[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=Nc[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=Nc[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&(hi.DashCase|hi.Important)?t.style.setProperty(e,n,r&hi.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&hi.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,jc(n)):this.eventManager.addEventListener(t,e,jc(n))}}]),t}(),Vc=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;m(this,n),(a=e.call(this,t)).component=i;var s=Fc(o+"-"+i.id,i.styles,[]);return r.addStyles(s),a.contentAttr="_ngcontent-%COMP%".replace(Rc,o+"-"+i.id),a.hostAttr="_nghost-%COMP%".replace(Rc,o+"-"+i.id),a}return _(n,[{key:"applyToHost",value:function(t){c(y(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=c(y(n.prototype),"createElement",this).call(this,t,e);return c(y(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(zc),Gc=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;m(this,n),(a=e.call(this,t)).sharedStylesHost=r,a.hostEl=i,a.shadowRoot=i.attachShadow({mode:"open"}),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=Fc(o.id,o.styles,[]),u=0;u<s.length;u++){var l=document.createElement("style");l.textContent=s[u],a.shadowRoot.appendChild(l)}return a}return _(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return c(y(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return c(y(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return c(y(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(c(y(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(zc),Uc=function(){var t=function(t){h(n,t);var e=f(n);function n(t){return m(this,n),e.call(this,t)}return _(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(Oc);return t.\u0275fac=function(e){return new(e||t)(vr(Fl))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Hc=["alt","control","meta","shift"],qc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yc={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Kc=function(){var t=function(t){h(n,t);var e=f(n);function n(t){return m(this,n),e.call(this,t)}return _(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Rl().onAndCancel(t,i.domEventName,o)})}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(Hc.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Wc.hasOwnProperty(e)&&(e=Wc[e]))}return qc[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Hc.forEach(function(r){r!=n&&(0,Yc[r])(t)&&(e+=r+".")}),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(Oc);return t.\u0275fac=function(e){return new(e||t)(vr(Fl))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Xc=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({factory:function(){return vr(Zc)},token:t,providedIn:"root"}),t}();function Qc(t){return new Zc(t.get(Fl))}var Zc=function(){var t=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this))._doc=t,r}return _(n,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case ei.NONE:return e;case ei.HTML:return Or(e,"HTML")?Dr(e):function(t,e){var n=null;try{zr=zr||function(t){var e=new Lr(t);return function(){try{return!!(new window.DOMParser).parseFromString(kr(""),"text/html")}catch(t){return!1}}()?new Ir(e):e}(t);var r=e?String(e):"";n=zr.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=zr.getInertBodyElement(r)}while(r!==o);return kr((new Qr).sanitizeChildren(ti(n)||n))}finally{if(n)for(var a=ti(n)||n;a.firstChild;)a.removeChild(a.firstChild)}}(this._doc,String(e)).toString();case ei.STYLE:return Or(e,"Style")?Dr(e):e;case ei.SCRIPT:if(Or(e,"Script"))return Dr(e);throw new Error("unsafe value used in a script context");case ei.URL:return Mr(e),Or(e,"URL")?Dr(e):Fr(String(e));case ei.RESOURCE_URL:if(Or(e,"ResourceURL"))return Dr(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(t){return new Er(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return new Cr(t)}},{key:"bypassSecurityTrustScript",value:function(t){return new Tr(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return new Pr(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return new Ar(t)}}]),n}(Xc);return t.\u0275fac=function(e){return new(e||t)(vr(Fl))},t.\u0275prov=Pt({factory:function(){return Qc(vr(Ko))},token:t,providedIn:"root"}),t}(),$c=_l(Ml,"browser",[{provide:Uu,useValue:"browser"},{provide:Gu,useValue:function(){kc.makeCurrent(),Tc.init()},multi:!0},{provide:Fl,useFactory:function(){return function(t){we=t}(document),document},deps:[]}]),Jc=[[],{provide:Qo,useValue:"root"},{provide:ui,useFactory:function(){return new ui},deps:[]},{provide:Ac,useClass:Uc,multi:!0,deps:[Fl,il,Uu]},{provide:Ac,useClass:Kc,multi:!0,deps:[Fl]},[],{provide:Bc,useClass:Bc,deps:[Dc,Ic,Bu]},{provide:xs,useExisting:Bc},{provide:Mc,useExisting:Ic},{provide:Ic,useClass:Ic,deps:[Fl]},{provide:dl,useClass:dl,deps:[il]},{provide:Dc,useClass:Dc,deps:[Ac,il]},{provide:xc,useClass:Pc,deps:[]},[]],th=function(){var t=function(){function t(e){if(m(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:Bu,useValue:e.appId},{provide:Ec,useExisting:Bu},Cc]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(t,12))},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:Jc,imports:[vc,Ll]}),t}();"undefined"!=typeof window&&window;var eh=function t(){m(this,t)};function nh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:e,timings:t}}function rh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:t,options:e}}function ih(t){return{type:6,styles:t,offset:null}}function oh(t,e,n){return{type:0,name:t,styles:e,options:n}}function ah(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:t,animation:e,options:n}}function sh(t){Promise.resolve(null).then(t)}var uh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;m(this,t),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}return _(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var t=this;sh(function(){return t._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(t){this._position=this.totalTime?t*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}(),lh=function(){function t(e){var n=this;m(this,t),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var r=0,i=0,o=0,a=this.players.length;0==a?sh(function(){return n._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++r==a&&n._onFinish()}),t.onDestroy(function(){++i==a&&n._onDestroy()}),t.onStart(function(){++o==a&&n._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return _(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(t){return t.init()})}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})}},{key:"pause",value:function(){this.players.forEach(function(t){return t.pause()})}},{key:"restart",value:function(){this.players.forEach(function(t){return t.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}},{key:"getPosition",value:function(){var t=this.players.reduce(function(t,e){return null===t||e.totalTime>t.totalTime?e:t},null);return null!=t?t.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}();function ch(){return"undefined"!=typeof window&&void 0!==window.document}function hh(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function dh(t){switch(t.length){case 0:return new uh;case 1:return t[0];default:return new lh(t)}}function fh(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=[],s=[],u=-1,l=null;if(r.forEach(function(t){var n=t.offset,r=n==u,c=r&&l||{};Object.keys(t).forEach(function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case"!":s=i[n];break;case"*":s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}c[r]=s}),r||s.push(c),l=c,u=n}),a.length){var c="\n - ";throw new Error("Unable to animate due to the following errors:".concat(c).concat(a.join(c)))}return s}function ph(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&vh(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&vh(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&vh(n,"destroy",t))})}}function vh(t,e,n){var r=n.totalTime,i=gh(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function gh(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function yh(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function mh(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var bh=function(t,e){return!1},_h=function(t,e){return!1},wh=function(t,e,n){return[]},xh=hh();(xh||"undefined"!=typeof Element)&&(bh=ch()?function(t,e){for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:function(t,e){return t.contains(e)},_h=function(){if(xh||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?function(t,n){return e.apply(t,[n])}:_h}(),wh=function(t,e,n){var r=[];if(n)for(var i=t.querySelectorAll(e),o=0;o<i.length;o++)r.push(i[o]);else{var a=t.querySelector(e);a&&r.push(a)}return r});var kh=null,Sh=!1;function Eh(t){kh||(kh=("undefined"!=typeof document?document.body:null)||{},Sh=!!kh.style&&"WebkitAppearance"in kh.style);var e=!0;return kh.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in kh.style)&&Sh)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in kh.style),e}var Ch=_h,Th=bh,Ph=wh;function Ah(t){var e={};return Object.keys(t).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}var Dh=function(){var t=function(){function t(){m(this,t)}return _(t,[{key:"validateStyleProperty",value:function(t){return Eh(t)}},{key:"matchesElement",value:function(t,e){return Ch(t,e)}},{key:"containsElement",value:function(t,e){return Th(t,e)}},{key:"query",value:function(t,e,n){return Ph(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return n||""}},{key:"animate",value:function(t,e,n,r,i){return new uh(n,r)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Oh=function(){var t=function t(){m(this,t)};return t.NOOP=new Dh,t}();function Mh(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ih(parseFloat(e[1]),e[2])}function Ih(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Lh(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'.concat(t,'" is invalid.')),{duration:0,delay:0,easing:""};r=Ih(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=Ih(parseFloat(s),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var l=!1,c=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&e.splice(c,0,'The provided timing value "'.concat(t,'" is invalid.'))}return{duration:r,delay:i,easing:o}}(t,e,n)}function Nh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function Rh(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r in t)n[r]=t[r];else Nh(t,n);return n}function Fh(t,e,n){return n?e+":"+n+";":""}function jh(t){for(var e="",n=0;n<t.style.length;n++){var r=t.style.item(n);e+=Fh(0,r,t.style.getPropertyValue(r))}for(var i in t.style)t.style.hasOwnProperty(i)&&!i.startsWith("_")&&(e+=Fh(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[i]));t.setAttribute("style",e)}function Bh(t,e,n){t.style&&(Object.keys(e).forEach(function(r){var i=Yh(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),hh()&&jh(t))}function zh(t,e){t.style&&(Object.keys(e).forEach(function(e){var n=Yh(e);t.style[n]=""}),hh()&&jh(t))}function Vh(t){return Array.isArray(t)?1==t.length?t[0]:rh(t):t}var Gh=new RegExp("{{\\s*(.+?)\\s*}}","g");function Uh(t){var e=[];if("string"==typeof t){for(var n;n=Gh.exec(t);)e.push(n[1]);Gh.lastIndex=0}return e}function Hh(t,e,n){var r=t.toString(),i=r.replace(Gh,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()});return i==r?t:i}function qh(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Wh=/-+([a-z0-9])/g;function Yh(t){return t.replace(Wh,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1].toUpperCase()})}function Kh(t,e){return 0===t||0===e}function Xh(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach(function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var a=function(){var n=e[s];o.forEach(function(e){n[e]=Zh(t,e)})},s=1;s<e.length;s++)a()}return e}function Qh(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #".concat(e.type))}}function Zh(t,e){return window.getComputedStyle(t)[e]}var $h=new Set(["true","1"]),Jh=new Set(["false","0"]);function td(t,e){var n=$h.has(t)||Jh.has(t),r=$h.has(e)||Jh.has(e);return function(i,o){var a="*"==t||t==i,s="*"==e||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?$h.has(t):Jh.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?$h.has(e):Jh.has(e)),a&&s}}var ed=new RegExp("s*:selfs*,?","g");function nd(t,e,n){return new rd(t).build(e,n)}var rd=function(){function t(e){m(this,t),this._driver=e}return _(t,[{key:"build",value:function(t,e){var n=new id(e);return this._resetContextStyleTimingState(n),Qh(this,Vh(t),n)}},{key:"_resetContextStyleTimingState",value:function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}},{key:"visitTrigger",value:function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=u}else if(1==t.type){var l=n.visitTransition(t,e);r+=l.queryCount,i+=l.depCount,a.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(od(t)){var e=t;Object.keys(e).forEach(function(t){Uh(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var a=qh(i.values());e.errors.push('state("'.concat(t.name,'", ...) must define default values for all the following style substitutions: ').concat(a.join(", ")))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=Qh(this,Vh(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'.concat(t,'" is not supported')),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(t,'" is not supported')),e;var o=i[1],a=i[2],s=i[3];e.push(td(o,s)),"<"!=a[0]||"*"==o&&"*"==s||e.push(td(s,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:ad(t.options)}}},{key:"visitSequence",value:function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return Qh(n,t,e)}),options:ad(t.options)}}},{key:"visitGroup",value:function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=Qh(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:ad(t.options)}}},{key:"visitAnimate",value:function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return sd(Lh(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=sd(0,0,"");return i.dynamic=!0,i.strValue=r,i}return sd((n=n||Lh(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:ih({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=ih(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}},{key:"_makeStyleAst",value:function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?"*"==t?n.push(t):e.errors.push("The provided style string value ".concat(t," is not allowed.")):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(od(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,l,c,h=e.collectedStyles[e.currentQuerySelector],d=h[r],f=!0;d&&(o!=i&&o>=d.startTime&&i<=d.endTime&&(e.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(d.startTime,'ms" and "').concat(d.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(i,'ms"')),f=!1),o=d.startTime),f&&(h[r]={startTime:o,endTime:i}),e.options&&(a=t[r],s=e.options,u=e.errors,l=s.params||{},(c=Uh(a)).length&&c.forEach(function(t){l.hasOwnProperty(t)||u.push("Unable to resolve the local animation param ".concat(t," in the given list of values"))}))}else e.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,l=t.steps.map(function(t){var r=n._makeStyleAst(t,e),l=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(od(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(od(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),c=0;return null!=l&&(i++,c=r.offset=l),s=s||c<0||c>1,a=a||c<u,u=c,o.push(c),r});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,h=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));var d=c-1,f=e.currentTime,p=e.currentAnimateTimings,v=p.duration;return l.forEach(function(t,i){var a=h>0?i==d?1:h*i:o[i],s=a*v;e.currentTime=f+p.delay+s,p.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)}),r}},{key:"visitReference",value:function(t,e){return{type:8,animation:Qh(this,Vh(t.animation),e),options:ad(t.options)}}},{key:"visitAnimateChild",value:function(t,e){return e.depCount++,{type:9,options:ad(t.options)}}},{key:"visitAnimateRef",value:function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ad(t.options)}}},{key:"visitQuery",value:function(t,e){var n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;var o=r(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(ed,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),a=o[0],s=o[1];e.currentQuerySelector=n.length?n+" "+a:a,yh(e.collectedStyles,e.currentQuerySelector,{});var u=Qh(this,Vh(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:u,originalSelector:t.selector,options:ad(t.options)}}},{key:"visitStagger",value:function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Lh(t.timings,e.errors,!0);return{type:12,animation:Qh(this,Vh(t.animation),e),timings:n,options:null}}}]),t}(),id=function t(e){m(this,t),this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function od(t){return!Array.isArray(t)&&"object"==typeof t}function ad(t){var e;return t?(t=Nh(t)).params&&(t.params=(e=t.params)?Nh(e):null):t={},t}function sd(t,e,n){return{duration:t,delay:e,easing:n}}function ud(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var ld=function(){function t(){m(this,t),this._map=new Map}return _(t,[{key:"consume",value:function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e}},{key:"append",value:function(t,e){var n,r=this._map.get(t);r||this._map.set(t,r=[]),(n=r).push.apply(n,i(e))}},{key:"has",value:function(t){return this._map.has(t)}},{key:"clear",value:function(){this._map.clear()}}]),t}(),cd=new RegExp(":enter","g"),hd=new RegExp(":leave","g");function dd(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new fd).buildKeyframes(t,e,n,r,i,o,a,s,u,l)}var fd=function(){function t(){m(this,t)}return _(t,[{key:"buildKeyframes",value:function(t,e,n,r,i,o,a,s,u){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new ld;var c=new vd(t,e,u,r,i,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),Qh(this,n,c);var h=c.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(a).length){var d=h[h.length-1];d.allowOnlyTimelineStyles()||d.setStyles([a],null,c.errors,s)}return h.length?h.map(function(t){return t.buildKeyframes()}):[ud(e,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(t,e){}},{key:"visitState",value:function(t,e){}},{key:"visitTransition",value:function(t,e){}},{key:"visitAnimateChild",value:function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}},{key:"visitAnimateRef",value:function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}},{key:"_visitSubInstructions",value:function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?Mh(n.duration):null,o=null!=n.delay?Mh(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}},{key:"visitReference",value:function(t,e){e.updateOptions(t.options,!0),Qh(this,t.animation,e),e.previousNode=t}},{key:"visitSequence",value:function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pd);var a=Mh(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return Qh(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}},{key:"visitGroup",value:function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Mh(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),Qh(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t}},{key:"_visitTiming",value:function(t,e){if(t.dynamic){var n=t.strValue;return Lh(e.params?Hh(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}},{key:"visitAnimate",value:function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}},{key:"visitStyle",value:function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}},{key:"visitKeyframes",value:function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}},{key:"visitQuery",value:function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Mh(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=pd);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),Qh(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}},{key:"visitStagger",value:function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;Qh(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}]),t}(),pd={},vd=function(){function t(e,n,r,i,o,a,s,u){m(this,t),this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new gd(this._driver,n,0),s.push(this.currentTimeline)}return _(t,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=Mh(r.duration)),null!=r.delay&&(i.delay=Mh(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=Hh(o[t],a,n.errors))})}}}},{key:"_copyOptions",value:function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t}},{key:"createSubContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(t){return this.previousNode=pd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new yd(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}},{key:"delayNextStep",value:function(t){t>0&&this.currentTimeline.delayNextStep(t)}},{key:"invokeQuery",value:function(t,e,n,r,o,a){var s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(cd,"."+this._enterClassName)).replace(hd,"."+this._leaveClassName);var u=this._driver.query(this.element,t,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),s.push.apply(s,i(u))}return o||0!=s.length||a.push('`query("'.concat(e,'")` returned zero elements. (Use `query("').concat(e,'", { optional: true })` if you wish to allow this.)')),s}}]),t}(),gd=function(){function t(e,n,r,i){m(this,t),this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _(t,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}},{key:"fork",value:function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}},{key:"_updateStyle",value:function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||"*",e._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]="*"}):Rh(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=Hh(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:"*"),i._updateStyle(t,e)})}},{key:"applyStylesToKeyframe",value:function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))}},{key:"snapshotCurrentStyles",value:function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t}},{key:"mergeTimelineCollectedStyles",value:function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})}},{key:"buildKeyframes",value:function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,a){var s=Rh(o,!0);Object.keys(s).forEach(function(t){var r=s[t];"!"==r?e.add(t):"*"==r&&n.add(t)}),r||(s.offset=a/t.duration),i.push(s)});var o=e.size?qh(e.values()):[],a=n.size?qh(n.values()):[];if(r){var s=i[0],u=Nh(s);s.offset=0,u.offset=1,i=[s,u]}return ud(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}}]),t}(),yd=function(t){h(n,t);var e=f(n);function n(t,r,i,o,a,s){var u,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return m(this,n),(u=e.call(this,t,r,s.delay)).element=r,u.keyframes=i,u.preStyleProps=o,u.postStyleProps=a,u._stretchStartingKeyframe=l,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return _(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=Rh(t[0],!1);u.offset=0,o.push(u);var l=Rh(t[0],!1);l.offset=md(s),o.push(l);for(var c=t.length-1,h=1;h<=c;h++){var d=Rh(t[h],!1);d.offset=md((n+d.offset*r)/a),o.push(d)}r=a,n=0,i="",t=o}return ud(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(gd);function md(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e-1);return Math.round(t*n)/n}var bd,_d,wd=function t(){m(this,t)},xd=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"normalizePropertyName",value:function(t,e){return Yh(t)}},{key:"normalizeStyleValue",value:function(t,e,n,r){var i="",o=n.toString().trim();if(kd[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for ".concat(t,":").concat(n))}return o+i}}]),n}(wd),kd=(bd="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),_d={},bd.forEach(function(t){return _d[t]=!0}),_d);function Sd(t,e,n,r,i,o,a,s,u,l,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:d}}var Ed={},Cd=function(){function t(e,n,r){m(this,t),this._triggerName=e,this.ast=n,this._stateStyles=r}return _(t,[{key:"match",value:function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)}},{key:"buildStyles",value:function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}},{key:"build",value:function(t,e,n,r,i,o,a,s,u,l){var c=[],h=this.ast.options&&this.ast.options.params||Ed,d=this.buildStyles(n,a&&a.params||Ed,c),f=s&&s.params||Ed,p=this.buildStyles(r,f,c),v=new Set,g=new Map,y=new Map,m="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=l?[]:dd(t,e,this.ast.animation,i,o,d,p,b,u,c),w=0;if(_.forEach(function(t){w=Math.max(t.duration+t.delay,w)}),c.length)return Sd(e,this._triggerName,n,r,m,d,p,[],[],g,y,w,c);_.forEach(function(t){var n=t.element,r=yh(g,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=yh(y,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&v.add(n)});var x=qh(v.values());return Sd(e,this._triggerName,n,r,m,d,p,_,x,g,y,w)}}]),t}(),Td=function(){function t(e,n){m(this,t),this.styles=e,this.defaultParams=n}return _(t,[{key:"buildStyles",value:function(t,e){var n={},r=Nh(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=Hh(o,r,e)),n[t]=o})}}),n}}]),t}(),Pd=function(){function t(e,n){var r=this;m(this,t),this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(function(t){r.states[t.name]=new Td(t.style,t.options&&t.options.params||{})}),Ad(this.states,"true","1"),Ad(this.states,"false","0"),n.transitions.forEach(function(t){r.transitionFactories.push(new Cd(e,t,r.states))}),this.fallbackTransition=new Cd(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _(t,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(t,e,n,r){return this.transitionFactories.find(function(i){return i.match(t,e,n,r)})||null}},{key:"matchStyles",value:function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}]),t}();function Ad(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var Dd=new ld,Od=function(){function t(e,n,r){m(this,t),this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _(t,[{key:"register",value:function(t,e){var n=[],r=nd(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[t]=r}},{key:"_buildPlayer",value:function(t,e,n){var r=t.element,i=fh(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}},{key:"create",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],a=this._animations[t],s=new Map;if(a?(n=dd(this._driver,e,a,"ng-enter","ng-leave",{},{},i,Dd,o)).forEach(function(t){var e=yh(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: ".concat(o.join("\n")));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,"*")})});var u=dh(n.map(function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return r.destroy(t)}),this.players.push(u),u}},{key:"destroy",value:function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by ".concat(t));return e}},{key:"listen",value:function(t,e,n,r){var i=gh(e,"","","");return ph(this._getPlayer(t),n,i,r),function(){}}},{key:"command",value:function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])}}]),t}(),Md=[],Id={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ld={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Nd=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m(this,t),this.namespaceId=n;var r,i=e&&e.hasOwnProperty("value");if(this.value=null!=(r=i?e.value:e)?r:null,i){var o=Nh(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return _(t,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}}}]),t}(),Rd=new Nd("void"),Fd=function(){function t(e,n,r){m(this,t),this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Hd(n,this._hostClassName)}return _(t,[{key:"listen",value:function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(e,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(e,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(e,'" is not supported!'));var a=yh(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=yh(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Hd(t,"ng-trigger"),Hd(t,"ng-trigger-"+e),u[e]=Rd),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]})}}},{key:"register",value:function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}},{key:"_getTrigger",value:function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'.concat(t,'" has not been registered!'));return e}},{key:"trigger",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(e),a=new Bd(this.id,e,t),s=this._engine.statesByElement.get(t);s||(Hd(t,"ng-trigger"),Hd(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],l=new Nd(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[e]=l,u||(u=Rd),"void"===l.value||u.value!==l.value){var c=yh(this._engine.playersByElement,t,[]);c.forEach(function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()});var h=o.matchTransition(u.value,l.value,t,l.params),d=!1;if(!h){if(!i)return;h=o.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:l,player:a,isFallbackTransition:d}),d||(Hd(t,"ng-animate-queued"),a.onStart(function(){qd(t,"ng-animate-queued")})),a.onDone(function(){var e=r.players.indexOf(a);e>=0&&r.players.splice(e,1);var n=r._engine.playersByElement.get(t);if(n){var i=n.indexOf(a);i>=0&&n.splice(i,1)}}),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,l.params)){var f=[],p=o.matchStyles(u.value,u.params,f),v=o.matchStyles(l.value,l.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){zh(t,p),Bh(t,v)})}}},{key:"deregister",value:function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})}},{key:"clearElementCache",value:function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))}},{key:"_signalRemovalForInnerTriggers",value:function(t,e){var n=this,r=this._engine.driver.query(t,".ng-trigger",!0);r.forEach(function(t){if(!t.__ng_removed){var r=n._engine.fetchNamespacesByElement(t);r.size?r.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):n.clearElementCache(t)}}),this._engine.afterFlushAnimationsDone(function(){return r.forEach(function(t){return n.clearElementCache(t)})})}},{key:"triggerLeaveAnimation",value:function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&dh(a).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(t){var e=this,n=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(n&&r){var i=new Set;n.forEach(function(n){var o=n.name;if(!i.has(o)){i.add(o);var a=e._triggers[o].fallbackTransition,s=r[o]||Rd,u=new Nd("void"),l=new Bd(e.id,o,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:o,transition:a,fromState:s,toState:u,player:l,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{var s=t.__ng_removed;s&&s!==Id||(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}}},{key:"insertNode",value:function(t,e){Hd(t,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==r.triggerName){var n=gh(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,ph(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})}},{key:"destroy",value:function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)}},{key:"elementContainsData",value:function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(function(e){return e.element===t})||e}}]),t}(),jd=function(){function t(e,n,r){m(this,t),this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return _(t,[{key:"_onRemovalComplete",value:function(t,e){this.onRemovalComplete(t,e)}},{key:"queuedPlayers",get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t}},{key:"createNamespace",value:function(t,e){var n=new Fd(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}},{key:"_balanceNamespaceList",value:function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}},{key:"register",value:function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}},{key:"registerTrigger",value:function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}},{key:"destroy",value:function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}}},{key:"_fetchNamespace",value:function(t){return this._namespaceLookup[t]}},{key:"fetchNamespacesByElement",value:function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e}},{key:"trigger",value:function(t,e,n,r){if(zd(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}},{key:"insertNode",value:function(t,e,n,r){if(zd(e)){var i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}}},{key:"collectEnterElement",value:function(t){this.collectedEnterElements.push(t)}},{key:"markElementAsDisabled",value:function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Hd(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),qd(t,"ng-animate-disabled"))}},{key:"removeNode",value:function(t,e,n,r){if(zd(e)){var i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){var o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}},{key:"markElementAsRemoved",value:function(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(t,e,n,r,i){return zd(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}}},{key:"_buildInstruction",value:function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}},{key:"destroyInnerAnimations",value:function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})}},{key:"destroyActiveAnimationsForElement",value:function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})}},{key:"whenRenderingDone",value:function(){var t=this;return new Promise(function(e){if(t.players.length)return dh(t.players).onDone(function(){return e()});e()})}},{key:"processLeaveNode",value:function(t){var e=this,n=t.__ng_removed;if(n&&n.setForRemoval){if(t.__ng_removed=Id,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(t){e.markElementAsDisabled(t,!1)})}},{key:"flush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,n){return t._balanceNamespaceList(e,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Hd(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,e)}finally{for(var o=0;o<i.length;o++)i[o]()}}else for(var a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?dh(n).onDone(function(){s.forEach(function(t){return t()})}):s.forEach(function(t){return t()})}}},{key:"reportError",value:function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(t.join("\n")))}},{key:"_flushAnimations",value:function(t,e){var n=this,r=new ld,o=[],a=new Map,s=[],u=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(function(t){h.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)h.add(e[r])});var d=this.bodyNode,f=Array.from(this.statesByElement.keys()),p=Ud(f,this.collectedEnterElements),v=new Map,g=0;p.forEach(function(t,e){var n="ng-enter"+g++;v.set(e,n),t.forEach(function(t){return Hd(t,n)})});for(var y=[],m=new Set,b=new Set,_=0;_<this.collectedLeaveElements.length;_++){var w=this.collectedLeaveElements[_],x=w.__ng_removed;x&&x.setForRemoval&&(y.push(w),m.add(w),x.hasAnimation?this.driver.query(w,".ng-star-inserted",!0).forEach(function(t){return m.add(t)}):b.add(w))}var k=new Map,S=Ud(f,Array.from(m));S.forEach(function(t,e){var n="ng-leave"+g++;k.set(e,n),t.forEach(function(t){return Hd(t,n)})}),t.push(function(){p.forEach(function(t,e){var n=v.get(e);t.forEach(function(t){return qd(t,n)})}),S.forEach(function(t,e){var n=k.get(e);t.forEach(function(t){return qd(t,n)})}),y.forEach(function(t){n.processLeaveNode(t)})});for(var E=[],C=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(function(t){var e=t.player,i=t.element;if(E.push(e),n.collectedEnterElements.length){var a=i.__ng_removed;if(a&&a.setForMove)return void e.destroy()}var h=!d||!n.driver.containsElement(d,i),f=k.get(i),p=v.get(i),g=n._buildInstruction(t,r,p,f,h);if(g.errors&&g.errors.length)C.push(g);else{if(h)return e.onStart(function(){return zh(i,g.fromStyles)}),e.onDestroy(function(){return Bh(i,g.toStyles)}),void o.push(e);if(t.isFallbackTransition)return e.onStart(function(){return zh(i,g.fromStyles)}),e.onDestroy(function(){return Bh(i,g.toStyles)}),void o.push(e);g.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(i,g.timelines),s.push({instruction:g,player:e,element:i}),g.queriedElements.forEach(function(t){return yh(u,t,[]).push(e)}),g.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=l.get(e);r||l.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),g.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=c.get(e);r||c.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if(C.length){var P=[];C.forEach(function(t){P.push("@".concat(t.triggerName," has failed due to:\n")),t.errors.forEach(function(t){return P.push("- ".concat(t,"\n"))})}),E.forEach(function(t){return t.destroy()}),this.reportError(P)}var A=new Map,D=new Map;s.forEach(function(t){var e=t.element;r.has(e)&&(D.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,A))}),o.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){yh(A,e,[]).push(t),t.destroy()})});var O=y.filter(function(t){return Kd(t,l,c)}),M=new Map;Gd(M,this.driver,b,c,"*").forEach(function(t){Kd(t,l,c)&&O.push(t)});var I=new Map;p.forEach(function(t,e){Gd(I,n.driver,new Set(t),l,"!")}),O.forEach(function(t){var e=M.get(t),n=I.get(t);M.set(t,Object.assign(Object.assign({},e),n))});var L=[],N=[],R={};s.forEach(function(t){var e=t.element,i=t.player,s=t.instruction;if(r.has(e)){if(h.has(e))return i.onDestroy(function(){return Bh(e,s.toStyles)}),i.disabled=!0,i.overrideTotalTime(s.totalTime),void o.push(i);var u=R;if(D.size>1){for(var l=e,c=[];l=l.parentNode;){var d=D.get(l);if(d){u=d;break}c.push(l)}c.forEach(function(t){return D.set(t,u)})}var f=n._buildAnimation(i.namespaceId,s,A,a,I,M);if(i.setRealPlayer(f),u===R)L.push(i);else{var p=n.playersByElement.get(u);p&&p.length&&(i.parentPlayer=dh(p)),o.push(i)}}else zh(e,s.fromStyles),i.onDestroy(function(){return Bh(e,s.toStyles)}),N.push(i),h.has(e)&&o.push(i)}),N.forEach(function(t){var e=a.get(t.element);if(e&&e.length){var n=dh(e);t.setRealPlayer(n)}}),o.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var F=0;F<y.length;F++){var j=y[F],B=j.__ng_removed;if(qd(j,"ng-leave"),!B||!B.hasAnimation){var z=[];if(u.size){var V=u.get(j);V&&V.length&&z.push.apply(z,i(V));for(var G=this.driver.query(j,".ng-animating",!0),U=0;U<G.length;U++){var H=u.get(G[U]);H&&H.length&&z.push.apply(z,i(H))}}var q=z.filter(function(t){return!t.destroyed});q.length?Wd(this,j,q):this.processLeaveNode(j)}}return y.length=0,L.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),L}},{key:"elementContainsData",value:function(t,e){var n=!1,r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}},{key:"afterFlush",value:function(t){this._flushFns.push(t)}},{key:"afterFlushAnimationsDone",value:function(t){this._whenQuietFns.push(t)}},{key:"_getPreviousPlayers",value:function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach(function(t){t.queued||(u||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o}},{key:"_beforeAnimationBuild",value:function(t,e,n){var r,i=this,a=e.element,s=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:e.triggerName,l=o(e.timelines);try{var c=function(){var t=r.value.element,o=t!==a,l=yh(n,t,[]);i._getPreviousPlayers(t,o,s,u,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})};for(l.s();!(r=l.n()).done;)c()}catch(h){l.e(h)}finally{l.f()}zh(a,e.fromStyles)}},{key:"_buildAnimation",value:function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,l=[],c=new Set,h=new Set,d=e.timelines.map(function(e){var d=e.element;c.add(d);var f=d.__ng_removed;if(f&&f.removedBeforeQueried)return new uh(e.duration,e.delay);var p,v,g=d!==u,y=(p=(n.get(d)||Md).map(function(t){return t.getRealPlayer()}),v=[],Yd(p,v),v).filter(function(t){return!!t.element&&t.element===d}),m=i.get(d),b=o.get(d),_=fh(0,a._normalizer,0,e.keyframes,m,b),w=a._buildPlayer(e,_,y);if(e.subTimeline&&r&&h.add(d),g){var x=new Bd(t,s,d);x.setRealPlayer(w),l.push(x)}return w});l.forEach(function(t){yh(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete t[e]}return r}(a.playersByQueriedElement,t.element,t)})}),c.forEach(function(t){return Hd(t,"ng-animating")});var f=dh(d);return f.onDestroy(function(){c.forEach(function(t){return qd(t,"ng-animating")}),Bh(u,e.toStyles)}),h.forEach(function(t){yh(r,t,[]).push(f)}),f}},{key:"_buildPlayer",value:function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new uh(t.duration,t.delay)}}]),t}(),Bd=function(){function t(e,n,r){m(this,t),this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new uh,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _(t,[{key:"setRealPlayer",value:function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return ph(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(t){this.totalTime=t}},{key:"syncPlayerEvents",value:function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})}},{key:"_queueEvent",value:function(t,e){yh(this._queuedCallbacks,t,[]).push(e)}},{key:"onDone",value:function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}},{key:"onStart",value:function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}},{key:"onDestroy",value:function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(t){this.queued||this._player.setPosition(t)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)}}]),t}();function zd(t){return t&&1===t.nodeType}function Vd(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Gd(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(Vd(t))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Ld,a.push(r))}),t.set(r,o)});var s=0;return n.forEach(function(t){return Vd(t,o[s++])}),a}function Ud(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;function o(t){if(!t)return 1;var e=i.get(t);if(e)return e;var a=t.parentNode;return e=n.has(a)?a:r.has(a)?1:o(a),i.set(t,e),e}return e.forEach(function(t){var e=o(t);1!==e&&n.get(e).push(t)}),n}function Hd(t,e){if(t.classList)t.classList.add(e);else{var n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function qd(t,e){if(t.classList)t.classList.remove(e);else{var n=t.$$classes;n&&delete n[e]}}function Wd(t,e,n){dh(n).onDone(function(){return t.processLeaveNode(e)})}function Yd(t,e){for(var n=0;n<t.length;n++){var r=t[n];r instanceof lh?Yd(r.players,e):e.push(r)}}function Kd(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var Xd=function(){function t(e,n,r){var i=this;m(this,t),this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new jd(e,n,r),this._timelineEngine=new Od(e,n,r),this._transitionEngine.onRemovalComplete=function(t,e){return i.onRemovalComplete(t,e)}}return _(t,[{key:"registerTrigger",value:function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=nd(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));a=function(t,e){return new Pd(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}},{key:"register",value:function(t,e){this._transitionEngine.register(t,e)}},{key:"destroy",value:function(t,e){this._transitionEngine.destroy(t,e)}},{key:"onInsert",value:function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}},{key:"onRemove",value:function(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}},{key:"disableAnimations",value:function(t,e){this._transitionEngine.markElementAsDisabled(t,e)}},{key:"process",value:function(t,e,n,i){if("@"==n.charAt(0)){var o=r(mh(n),2),a=o[0],s=o[1];this._timelineEngine.command(a,e,s,i)}else this._transitionEngine.trigger(t,e,n,i)}},{key:"listen",value:function(t,e,n,i,o){if("@"==n.charAt(0)){var a=r(mh(n),2),s=a[0],u=a[1];return this._timelineEngine.listen(s,e,u,o)}return this._transitionEngine.listen(t,e,n,i,o)}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(t)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),t}();function Qd(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=$d(e[0]),e.length>1&&(r=$d(e[e.length-1]))):e&&(n=$d(e)),n||r?new Zd(t,n,r):null}var Zd=function(){var t=function(){function t(e,n,r){m(this,t),this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;var i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}return _(t,[{key:"start",value:function(){this._state<1&&(this._startStyles&&Bh(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(Bh(this._element,this._initialStyles),this._endStyles&&(Bh(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(zh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zh(this._element,this._endStyles),this._endStyles=null),Bh(this._element,this._initialStyles),this._state=3)}}]),t}();return t.initialStylesByElement=new WeakMap,t}();function $d(t){for(var e=null,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];Jd(i)&&((e=e||{})[i]=t[i])}return e}function Jd(t){return"display"===t||"position"===t}var tf=function(){function t(e,n,r,i,o,a,s){var u=this;m(this,t),this._element=e,this._name=n,this._duration=r,this._delay=i,this._easing=o,this._fillMode=a,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return u._handleCallback(t)}}return _(t,[{key:"apply",value:function(){var t,e,n;t=this._element,e="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=sf(t,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)t.charAt(n)}(n),e="".concat(n,", ").concat(e)),af(t,"",e),of(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){ef(this._element,this._name,"paused")}},{key:"resume",value:function(){ef(this._element,this._name,"running")}},{key:"setPosition",value:function(t){var e=nf(this._element,this._name);this._position=t*this._duration,af(this._element,"Delay","-".concat(this._position,"ms"),e)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),of(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),t=this._element,e=this._name,n=sf(t,"").split(","),(r=rf(n,e))>=0&&(n.splice(r,1),af(t,"",n.join(","))))}}]),t}();function ef(t,e,n){af(t,"PlayState",n,nf(t,e))}function nf(t,e){var n=sf(t,"");return n.indexOf(",")>0?rf(n.split(","),e):rf([n],e)}function rf(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function of(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function af(t,e,n,r){var i="animation"+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function sf(t,e){return t.style["animation"+e]||""}var uf=function(){function t(e,n,r,i,o,a,s,u){m(this,t),this.element=e,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=i+o,this._buildStyler()}return _(t,[{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(t){this._styler.setPosition(t)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var t=this;this._styler=new tf(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}},{key:"beforeDestroy",value:function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:Zh(t.element,r))})}this.currentSnapshot=e}}]),t}(),lf=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this)).element=t,i._startingStyles={},i.__initialized=!1,i._styles=Ah(r),i}return _(n,[{key:"init",value:function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(e){t._startingStyles[e]=t.element.style[e]}),c(y(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(e){return t.element.style.setProperty(e,t._styles[e])}),c(y(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)}),this._startingStyles=null,c(y(n.prototype),"destroy",this).call(this))}}]),n}(uh),cf=function(){function t(){m(this,t),this._count=0}return _(t,[{key:"validateStyleProperty",value:function(t){return Eh(t)}},{key:"matchesElement",value:function(t,e){return Ch(t,e)}},{key:"containsElement",value:function(t,e){return Th(t,e)}},{key:"query",value:function(t,e,n){return Ph(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"buildKeyframeElement",value:function(t,e,n){n=n.map(function(t){return Ah(t)});var r="@keyframes ".concat(e," {\n"),i="";n.forEach(function(t){i=" ";var e=parseFloat(t.offset);r+="".concat(i).concat(100*e,"% {\n"),i+=" ",Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(e,": ").concat(n,";\n"))}}),r+="".concat(i,"}\n")}),r+="}\n";var o=document.createElement("style");return o.textContent=r,o}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=o.filter(function(t){return t instanceof uf}),s={};Kh(n,r)&&a.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return s[t]=e[t]})});var u=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach(function(t){Object.keys(t).forEach(function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Xh(t,e,s));if(0==n)return new lf(t,u);var l="gen_css_kf_"+this._count++,c=this.buildKeyframeElement(t,l,e);(function(t){var e,n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(c);var h=Qd(t,e),d=new uf(t,e,l,n,r,i,u,h);return d.onDestroy(function(){var t;(t=c).parentNode.removeChild(t)}),d}}]),t}(),hf=function(){function t(e,n,r,i){m(this,t),this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(t,e,n){return t.animate(e,n)}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Zh(t.element,n))}),this.currentSnapshot=e}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}(),df=function(){function t(){m(this,t),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ff().toString()),this._cssKeyframesDriver=new cf}return _(t,[{key:"validateStyleProperty",value:function(t){return Eh(t)}},{key:"matchesElement",value:function(t,e){return Ch(t,e)}},{key:"containsElement",value:function(t,e){return Th(t,e)}},{key:"query",value:function(t,e,n){return Ph(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"overrideWebAnimationsSupport",value:function(t){this._isNativeImpl=t}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},l=o.filter(function(t){return t instanceof hf});Kh(n,r)&&l.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var c=Qd(t,e=Xh(t,e=e.map(function(t){return Rh(t,!1)}),u));return new hf(t,e,s,c)}}]),t}();function ff(){return ch()&&Element.prototype.animate||{}}var pf=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this))._nextAnimationId=0,i._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Ut.None,styles:[],data:{animation:[]}}),i}return _(n,[{key:"build",value:function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?rh(t):t;return yf(this._renderer,null,e,"register",[n]),new vf(e,this._renderer)}}]),n}(eh);return t.\u0275fac=function(e){return new(e||t)(vr(xs),vr(Fl))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),vf=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this))._id=t,i._renderer=r,i}return _(n,[{key:"create",value:function(t,e){return new gf(this._id,t,e||{},this._renderer)}}]),n}(function(){return function t(){m(this,t)}}()),gf=function(){function t(e,n,r,i){m(this,t),this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _(t,[{key:"_listen",value:function(t,e){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(t),e)}},{key:"_command",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return yf(this._renderer,this.element,this.id,t,n)}},{key:"onDone",value:function(t){this._listen("done",t)}},{key:"onStart",value:function(t){this._listen("start",t)}},{key:"onDestroy",value:function(t){this._listen("destroy",t)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(t){this._command("setPosition",t)}},{key:"getPosition",value:function(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}]),t}();function yf(t,e,n,r,i){return t.setProperty(e,"@@".concat(n,":").concat(r),i)}var mf=function(){var t=function(){function t(e,n,r){m(this,t),this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return _(t,[{key:"createRenderer",value:function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new bf("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);return e.data.animation.forEach(function e(r){Array.isArray(r)?r.forEach(e):n.engine.registerTrigger(o,a,t,r.name,r)}),new _f(this,a,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var t=this;this.promise.then(function(){t._microtaskId++})}},{key:"scheduleListenerCallback",value:function(t,e,n){var i=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){i._zone.run(function(){i._animationCallbacksBuffer.forEach(function(t){var e=r(t,2);(0,e[0])(e[1])}),i._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}},{key:"end",value:function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(xs),vr(Xd),vr(il))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),bf=function(){function t(e,n,r){m(this,t),this.namespaceId=e,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(t){return n.destroyNode(t)}:null}return _(t,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(t,e){return this.delegate.createElement(t,e)}},{key:"createComment",value:function(t){return this.delegate.createComment(t)}},{key:"createText",value:function(t){return this.delegate.createText(t)}},{key:"appendChild",value:function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}},{key:"insertBefore",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}},{key:"removeChild",value:function(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}},{key:"selectRootElement",value:function(t,e){return this.delegate.selectRootElement(t,e)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setAttribute",value:function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}},{key:"setValue",value:function(t,e){this.delegate.setValue(t,e)}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"disableAnimations",value:function(t,e){this.engine.disableAnimations(t,e)}}]),t}(),_f=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,r,i,o)).factory=t,a.namespaceId=r,a}return _(n,[{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){var i,o,a=this;if("@"==e.charAt(0)){var s,u=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),l=e.substr(1),c="";return"@"!=l.charAt(0)&&(o=(i=l).indexOf("."),l=(s=r([i.substring(0,o),i.substr(o+1)],2))[0],c=s[1]),this.engine.listen(this.namespaceId,u,l,c,function(t){a.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}]),n}(bf),wf=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r,i){return m(this,n),e.call(this,t.body,r,i)}return _(n,[{key:"ngOnDestroy",value:function(){this.flush()}}]),n}(Xd);return t.\u0275fac=function(e){return new(e||t)(vr(Fl),vr(Oh),vr(wd))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),xf=new Jn("AnimationModuleType"),kf=[{provide:eh,useClass:pf},{provide:wd,useFactory:function(){return new xd}},{provide:Xd,useClass:wf},{provide:xs,useFactory:function(t,e,n){return new mf(t,e,n)},deps:[Bc,Xd,il]}],Sf=[{provide:Oh,useFactory:function(){return"function"==typeof ff()?new df:new cf}},{provide:xf,useValue:"BrowserAnimations"}].concat(kf),Ef=[{provide:Oh,useClass:Dh},{provide:xf,useValue:"NoopAnimations"}].concat(kf),Cf=function(){var t=function(){function t(){m(this,t)}return _(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:e.disableAnimations?Ef:Sf}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:Sf,imports:[th]}),t}();function Tf(t){return null!=t&&"false"!="".concat(t)}function Pf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Af(t){return Array.isArray(t)?t:[t]}function Df(t){return t instanceof _s?t.nativeElement:t}var Of=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(P),Mf=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return _(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(P);function If(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Mf(t,n,r);if(!i.closed)return e instanceof I?e.subscribe(i):X(e)(i)}var Lf={};function Nf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i;return V(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&x(e[0])&&(e=e[0]),ot(e,i).lift(new Rf(r))}var Rf=function(){function t(e){m(this,t),this.resultSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Ff(t,this.resultSelector))}}]),t}(),Ff=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return _(n,[{key:"_next",value:function(t){this.values.push(Lf),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++)this.add(If(this,t[n],void 0,n))}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n){var r=this.values,i=this.toRespond?r[n]===Lf?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(Of);function jf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return V(r)?(e.pop(),Q(e,r)):ot(e)}function Bf(){return it(1)(jf.apply(void 0,arguments))}var zf=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Vf=new I(function(t){return t.complete()});function Gf(t){return t?function(t){return new I(function(e){return t.schedule(function(){return e.complete()})})}(t):Vf}function Uf(t){return function(e){return 0===t?Gf():e.lift(new Hf(t))}}var Hf=function(){function t(e){if(m(this,t),this.total=e,this.total<0)throw new zf}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new qf(t,this.total))}}]),t}(),qf=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(P),Wf=function(){function t(e){m(this,t),this.total=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Yf(t,this.total))}}]),t}(),Yf=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _(n,[{key:"_next",value:function(t){++this.count>this.total&&this.destination.next(t)}}]),n}(P),Kf=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return _(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){h(n,t);var e=f(n);function n(t,r){return m(this,n),e.call(this)}return _(n,[{key:"schedule",value:function(t){return this}}]),n}(E)),Xf=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;m(this,t),this.SchedulerAction=e,this.now=n}return _(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),Qf=function(t){h(n,t);var e=f(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xf.now;return m(this,n),(r=e.call(this,t,function(){return n.delegate&&n.delegate!==v(r)?n.delegate.now():i()})).actions=[],r.active=!1,r.scheduled=void 0,r}return _(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):c(y(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(Xf),Zf=new Qf(Kf);function $f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zf;return function(n){return n.lift(new Jf(t,e))}}var Jf=function(){function t(e,n){m(this,t),this.dueTime=e,this.scheduler=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new tp(t,this.dueTime,this.scheduler))}}]),t}(),tp=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t)).dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return _(n,[{key:"_next",value:function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ep,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}},{key:"clearDebounce",value:function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}]),n}(P);function ep(t){t.debouncedNext()}function np(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return V(r)?(e.pop(),function(t){return Bf(e,t,r)}):function(t){return Bf(e,t)}}function rp(t){return function(e){return e.lift(new op(t))}}var ip,op=function(){function t(e){m(this,t),this.notifier=e}return _(t,[{key:"call",value:function(t,e){var n=new ap(t),r=tt(this.notifier,new $(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}]),t}(),ap=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this,t)).seenValue=!1,r}return _(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(J);try{ip="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Dx){ip=!1}var sp,up,lp,cp,hp=function(){var t=function t(e){m(this,t),this._platformId=e,this.isBrowser=this._platformId?gc(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ip)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT};return t.\u0275fac=function(e){return new(e||t)(vr(Uu))},t.\u0275prov=Pt({factory:function(){return new t(vr(Uu))},token:t,providedIn:"root"}),t}(),dp=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({}),t}();function fp(){if("object"!=typeof document||!document)return 0;if(null==up){var t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";var n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",t.appendChild(n),document.body.appendChild(t),up=0,0===t.scrollLeft&&(t.scrollLeft=1,up=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return up}var pp,vp=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({}),t}(),gp=new Set,yp=function(){var t=function(){function t(e){m(this,t),this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):mp}return _(t,[{key:"matchMedia",value:function(t){return this._platform.WEBKIT&&function(t){if(!gp.has(t))try{pp||((pp=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(pp)),pp.sheet&&(pp.sheet.insertRule("@media ".concat(t," {.fx-query-test{ }}"),0),gp.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(hp))},t.\u0275prov=Pt({factory:function(){return new t(vr(hp))},token:t,providedIn:"root"}),t}();function mp(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var bp=function(){var t=function(){function t(e,n){m(this,t),this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new B}return _(t,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(t){var e=this;return _p(Af(t)).some(function(t){return e._registerQuery(t).mql.matches})}},{key:"observe",value:function(t){var e=this,n=Nf(_p(Af(t)).map(function(t){return e._registerQuery(t).observable}));return(n=Bf(n.pipe(Uf(1)),n.pipe(function(t){return t.lift(new Wf(1))},$f(0)))).pipe(G(function(t){var e={matches:!1,breakpoints:{}};return t.forEach(function(t){var n=t.matches,r=t.query;e.matches=e.matches||n,e.breakpoints[r]=n}),e}))}},{key:"_registerQuery",value:function(t){var e=this;if(this._queries.has(t))return this._queries.get(t);var n=this._mediaMatcher.matchMedia(t),r={observable:new I(function(t){var r=function(n){return e._zone.run(function(){return t.next(n)})};return n.addListener(r),function(){n.removeListener(r)}}).pipe(np(n),G(function(e){var n=e.matches;return{query:t,matches:n}}),rp(this._destroySubject)),mql:n};return this._queries.set(t,r),r}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(yp),vr(il))},t.\u0275prov=Pt({factory:function(){return new t(vr(yp),vr(il))},token:t,providedIn:"root"}),t}();function _p(t){return t.map(function(t){return t.split(",")}).reduce(function(t,e){return t.concat(e)}).map(function(t){return t.trim()})}var wp=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this))._value=t,r}return _(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(t){var e=c(y(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new R;return this._value}},{key:"next",value:function(t){c(y(n.prototype),"next",this).call(this,this._value=t)}}]),n}(B);function xp(t,e){return function(n){return n.lift(new kp(t,e))}}var kp=function(){function t(e,n){m(this,t),this.predicate=e,this.thisArg=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Sp(t,this.predicate,this.thisArg))}}]),t}(),Sp=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return _(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(P);function Ep(){}function Cp(t,e,n){return function(r){return r.lift(new Tp(t,e,n))}}var Tp=function(){function t(e,n,r){m(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Pp(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),Pp=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t))._tapNext=Ep,a._tapError=Ep,a._tapComplete=Ep,a._tapError=i||Ep,a._tapComplete=o||Ep,s(r)?(a._context=v(a),a._tapNext=r):r&&(a._context=r,a._tapNext=r.next||Ep,a._tapError=r.error||Ep,a._tapComplete=r.complete||Ep),a}return _(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(P),Ap={provide:Hu,useFactory:function(t,e){return function(){if(gc(e)){var n=Array.from(t.querySelectorAll("[class*=".concat(Dp,"]"))),r=/\bflex-layout-.+?\b/g;n.forEach(function(t){t.classList.contains("".concat(Dp,"ssr"))&&t.parentNode?t.parentNode.removeChild(t):t.className.replace(r,"")})}}},deps:[Fl,Uu],multi:!0},Dp="flex-layout-",Op=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:[Ap]}),t}(),Mp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;m(this,t),this.matches=e,this.mediaQuery=n,this.mqAlias=r,this.suffix=i,this.priority=o,this.property=""}return _(t,[{key:"clone",value:function(){return new t(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}]),t}(),Ip=function(){var t=function(){function t(){m(this,t),this.stylesheet=new Map}return _(t,[{key:"addStyleToElement",value:function(t,e,n){var r=this.stylesheet.get(t);r?r.set(e,n):this.stylesheet.set(t,new Map([[e,n]]))}},{key:"clearStyles",value:function(){this.stylesheet.clear()}},{key:"getStyleForElement",value:function(t,e){var n=this.stylesheet.get(t),r="";if(n){var i=n.get(e);"number"!=typeof i&&"string"!=typeof i||(r=i+"")}return r}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Lp={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},Np=new Jn("Flex Layout token, config options for the library",{providedIn:"root",factory:function(){return Lp}}),Rp=new Jn("FlexLayoutServerLoaded",{providedIn:"root",factory:function(){return!1}}),Fp=new Jn("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:function(){return null}});function jp(t,e){return t=t?t.clone():new Mp,e&&(t.mqAlias=e.alias,t.mediaQuery=e.mediaQuery,t.suffix=e.suffix,t.priority=e.priority),t}var Bp=["row","column","row-reverse","column-reverse"];function zp(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}var Vp=function(){var t=function(){function t(e,n,r,i){m(this,t),this.elementRef=e,this.styleBuilder=n,this.styler=r,this.marshal=i,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new B,this.styleCache=new Map}return _(t,[{key:"parentElement",get:function(){return this.elementRef.nativeElement.parentElement}},{key:"nativeElement",get:function(){return this.elementRef.nativeElement}},{key:"activatedValue",get:function(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)},set:function(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}},{key:"ngOnChanges",value:function(t){var e=this;Object.keys(t).forEach(function(n){if(-1!==e.inputs.indexOf(n)){var r=n.split(".").slice(1).join(".");e.setValue(t[n].currentValue,r)}})}},{key:"ngOnDestroy",value:function(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}},{key:"addStyles",value:function(t,e){var n=this.styleBuilder,r=n.shouldCache,i=this.styleCache.get(t);i&&r||(i=n.buildStyles(t,e),r&&this.styleCache.set(t,i)),this.mru=Object.assign({},i),this.applyStyleToElement(i),n.sideEffect(t,i,e)}},{key:"clearStyles",value:function(){var t=this;Object.keys(this.mru).forEach(function(e){t.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={}}},{key:"triggerUpdate",value:function(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}},{key:"getFlexFlowDirection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n=this.styler.getFlowDirection(t),i=r(n,2),o=i[0],a=i[1];if(!a&&e){var s=function(t){var e=function(t){var e=r((t=t?t.toLowerCase():"").split(" "),3),n=e[0],i=e[1],o=e[2];return Bp.find(function(t){return t===n})||(n=Bp[0]),"inline"===i&&(i="inline"!==o?o:"",o="inline"),[n,zp(i),!!o]}(t),n=r(e,3);return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":e||null}}(n[0],n[1],n[2])}(o);this.styler.applyStyleToElements(s,[t])}return o.trim()}return"row"}},{key:"hasWrap",value:function(t){return this.styler.hasWrap(t)}},{key:"applyStyleToElement",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nativeElement;this.styler.applyStyleToElement(n,t,e)}},{key:"setValue",value:function(t,e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,e)}},{key:"updateWithValue",value:function(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}]),t}();return t.\u0275fac=function(t){!function(){throw new Error("invalid")}()},t.\u0275dir=he({type:t,features:[ke]}),t}(),Gp=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Up="(orientation: portrait) and (max-width: 599.98px)",Hp="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",qp="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",Wp="(orientation: portrait) and (min-width: 840px)",Yp="(orientation: landscape) and (min-width: 1280px)",Kp={HANDSET:"".concat(Up,", (orientation: landscape) and (max-width: 959.98px)"),TABLET:"".concat(Hp," , ").concat(qp),WEB:"".concat(Wp,", ").concat(Yp," "),HANDSET_PORTRAIT:"".concat(Up),TABLET_PORTRAIT:"".concat(Hp," "),WEB_PORTRAIT:"".concat(Wp),HANDSET_LANDSCAPE:"(orientation: landscape) and (max-width: 959.98px)",TABLET_LANDSCAPE:"".concat(qp),WEB_LANDSCAPE:"".concat(Yp)},Xp=[{alias:"handset",priority:2e3,mediaQuery:Kp.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Kp.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Kp.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Kp.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Kp.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Kp.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Kp.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Kp.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Kp.WEB_PORTRAIT,overlapping:!0}],Qp=/(\.|-|_)/g;function Zp(t){var e=t.length>0?t.charAt(0):"",n=t.length>1?t.slice(1):"";return e.toUpperCase()+n}var $p=new Jn("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:function(){var t=gr(Fp),e=gr(Np),n=[].concat.apply([],(t||[]).map(function(t){return Array.isArray(t)?t:[t]}));return function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={};return t.forEach(function(t){r[t.alias]=t}),n.forEach(function(t){r[t.alias]?function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(t[s]=a[s])}}(r[t.alias],t):r[t.alias]=t}),(e=Object.keys(r).map(function(t){return r[t]})).forEach(function(t){t.suffix||(t.suffix=t.alias.replace(Qp,"|").split("|").map(Zp).join(""),t.overlapping=!!t.overlapping)}),e}((e.disableDefaultBps?[]:Gp).concat(e.addOrientationBps?Xp:[]),n)}});function Jp(t,e){return(e&&e.priority||0)-(t&&t.priority||0)}function tv(t,e){return(t.priority||0)-(e.priority||0)}var ev=function(){var t=function(){function t(e){m(this,t),this.findByMap=new Map,this.items=i(e).sort(tv)}return _(t,[{key:"findByAlias",value:function(t){return t?this.findWithPredicate(t,function(e){return e.alias==t}):null}},{key:"findByQuery",value:function(t){return this.findWithPredicate(t,function(e){return e.mediaQuery==t})}},{key:"overlappings",get:function(){return this.items.filter(function(t){return 1==t.overlapping})}},{key:"aliases",get:function(){return this.items.map(function(t){return t.alias})}},{key:"suffixes",get:function(){return this.items.map(function(t){return t.suffix?t.suffix:""})}},{key:"findWithPredicate",value:function(t,e){var n=this.findByMap.get(t);return n||(n=this.items.find(e)||null,this.findByMap.set(t,n)),n||null}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr($p))},t.\u0275prov=Pt({factory:function(){return new t(vr($p))},token:t,providedIn:"root"}),t}(),nv=function(){var t=function(){function t(e,n,r){m(this,t),this._zone=e,this._platformId=n,this._document=r,this.source=new wp(new Mp(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}return _(t,[{key:"activations",get:function(){var t=[];return this.registry.forEach(function(e,n){e.matches&&t.push(n)}),t}},{key:"isActive",value:function(t){var e=this.registry.get(t);return e?e.matches:this.registerQuery(t).some(function(t){return t.matches})}},{key:"observe",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&t.length){var r=this._observable$.pipe(xp(function(e){return!n||t.indexOf(e.mediaQuery)>-1}));return at(new I(function(n){var r=e.registerQuery(t);if(r.length){var i=r.pop();r.forEach(function(t){n.next(t)}),e.source.next(i)}n.complete()}),r)}return this._observable$}},{key:"registerQuery",value:function(t){var e=this,n=Array.isArray(t)?t:[t],r=[];return function(t,e){var n=t.filter(function(t){return!rv[t]});if(n.length>0){var r=n.join(", ");try{var i=e.createElement("style");i.setAttribute("type","text/css"),i.styleSheet||i.appendChild(e.createTextNode("\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ".concat(r," {.fx-query-test{ }}\n"))),e.head.appendChild(i),n.forEach(function(t){return rv[t]=i})}catch(o){console.error(o)}}}(n,this._document),n.forEach(function(t){var n=function(n){e._zone.run(function(){return e.source.next(new Mp(n.matches,t))})},i=e.registry.get(t);i||((i=e.buildMQL(t)).addListener(n),e.pendingRemoveListenerFns.push(function(){return i.removeListener(n)}),e.registry.set(t,i)),i.matches&&r.push(new Mp(!0,t))}),r}},{key:"ngOnDestroy",value:function(){for(var t;t=this.pendingRemoveListenerFns.pop();)t()}},{key:"buildMQL",value:function(t){return function(t,e){return e&&window.matchMedia("all").addListener?window.matchMedia(t):{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){},onchange:null,addEventListener:function(){},removeEventListener:function(){},dispatchEvent:function(){return!1}}}(t,gc(this._platformId))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(il),vr(Uu),vr(Fl))},t.\u0275prov=Pt({factory:function(){return new t(vr(il),vr(Uu),vr(Fl))},token:t,providedIn:"root"}),t}(),rv={},iv={alias:"print",mediaQuery:"print",priority:1e3},ov=function(){var t=function(){function t(e,n,r){m(this,t),this.breakpoints=e,this.layoutConfig=n,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new av,this.deactivations=[]}return _(t,[{key:"withPrintQuery",value:function(t){return[].concat(i(t),["print"])}},{key:"isPrintEvent",value:function(t){return t.mediaQuery.startsWith("print")}},{key:"printAlias",get:function(){return this.layoutConfig.printWithBreakpoints||[]}},{key:"printBreakPoints",get:function(){var t=this;return this.printAlias.map(function(e){return t.breakpoints.findByAlias(e)}).filter(function(t){return null!==t})}},{key:"getEventBreakpoints",value:function(t){var e=t.mediaQuery,n=this.breakpoints.findByQuery(e);return(n?[].concat(i(this.printBreakPoints),[n]):this.printBreakPoints).sort(Jp)}},{key:"updateEvent",value:function(t){var e=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(e=this.getEventBreakpoints(t)[0],t.mediaQuery=e?e.mediaQuery:""),jp(t,e)}},{key:"registerBeforeAfterPrintHooks",value:function(t){var e=this;if(this._document.defaultView&&!this.registeredBeforeAfterPrintHooks){this.registeredBeforeAfterPrintHooks=!0;var n=function(){e.isPrinting||(e.isPrintingBeforeAfterEvent=!0,e.startPrinting(t,e.getEventBreakpoints(new Mp(!0,"print"))),t.updateStyles())},r=function(){e.isPrintingBeforeAfterEvent=!1,e.isPrinting&&(e.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",n),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(n),this.afterPrintEventListeners.push(r)}}},{key:"interceptEvents",value:function(t){var e=this;return this.registerBeforeAfterPrintHooks(t),function(n){e.isPrintEvent(n)?n.matches&&!e.isPrinting?(e.startPrinting(t,e.getEventBreakpoints(n)),t.updateStyles()):n.matches||!e.isPrinting||e.isPrintingBeforeAfterEvent||(e.stopPrinting(t),t.updateStyles()):e.collectActivations(n)}}},{key:"blockPropagation",value:function(){var t=this;return function(e){return!(t.isPrinting||t.isPrintEvent(e))}}},{key:"startPrinting",value:function(t,e){this.isPrinting=!0,t.activatedBreakpoints=this.queue.addPrintBreakpoints(e)}},{key:"stopPrinting",value:function(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}},{key:"collectActivations",value:function(t){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(t.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{var e=this.breakpoints.findByQuery(t.mediaQuery);e&&(this.deactivations.push(e),this.deactivations.sort(Jp))}}},{key:"ngOnDestroy",value:function(){var t=this;this._document.defaultView&&(this.beforePrintEventListeners.forEach(function(e){return t._document.defaultView.removeEventListener("beforeprint",e)}),this.afterPrintEventListeners.forEach(function(e){return t._document.defaultView.removeEventListener("afterprint",e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(ev),vr(Np),vr(Fl))},t.\u0275prov=Pt({factory:function(){return new t(vr(ev),vr(Np),vr(Fl))},token:t,providedIn:"root"}),t}(),av=function(){function t(){m(this,t),this.printBreakpoints=[]}return _(t,[{key:"addPrintBreakpoints",value:function(t){var e=this;return t.push(iv),t.sort(Jp),t.forEach(function(t){return e.addBreakpoint(t)}),this.printBreakpoints}},{key:"addBreakpoint",value:function(t){t&&void 0===this.printBreakpoints.find(function(e){return e.mediaQuery===t.mediaQuery})&&(this.printBreakpoints=function(t){return!!t&&t.mediaQuery.startsWith("print")}(t)?[t].concat(i(this.printBreakpoints)):[].concat(i(this.printBreakpoints),[t]))}},{key:"clear",value:function(){this.printBreakpoints=[]}}]),t}();function sv(t){for(var e in t){var n=t[e]||"";switch(e){case"display":t.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+e]=n;break;case"flex-direction":n=n||"row",t["-webkit-flex-direction"]=n,t["flex-direction"]=n;break;case"order":t.order=t["-webkit-"+e]=isNaN(+n)?"0":n}}return t}var uv=function(){var t=function(){function t(e,n,r,i){m(this,t),this._serverStylesheet=e,this._serverModuleLoaded=n,this._platformId=r,this.layoutConfig=i}return _(t,[{key:"applyStyleToElement",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={};"string"==typeof e&&(r[e]=n,e=r),r=this.layoutConfig.disableVendorPrefixes?e:sv(e),this._applyMultiValueStyleToElement(r,t)}},{key:"applyStyleToElements",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.layoutConfig.disableVendorPrefixes?t:sv(t);n.forEach(function(t){e._applyMultiValueStyleToElement(r,t)})}},{key:"getFlowDirection",value:function(t){var e=this.lookupStyle(t,"flex-direction");return[e||"row",this.lookupInlineStyle(t,"flex-direction")||yc(this._platformId)&&this._serverModuleLoaded?e:""]}},{key:"hasWrap",value:function(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}},{key:"lookupAttributeValue",value:function(t,e){return t.getAttribute(e)||""}},{key:"lookupInlineStyle",value:function(t,e){return gc(this._platformId)?t.style.getPropertyValue(e):this._getServerStyle(t,e)}},{key:"lookupStyle",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";return t&&((r=this.lookupInlineStyle(t,e))||(gc(this._platformId)?n||(r=getComputedStyle(t).getPropertyValue(e)):this._serverModuleLoaded&&(r=this._serverStylesheet.getStyleForElement(t,e)))),r?r.trim():""}},{key:"_applyMultiValueStyleToElement",value:function(t,e){var n=this;Object.keys(t).sort().forEach(function(r){var i=t[r],a=Array.isArray(i)?i:[i];a.sort();var s,u=o(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;l=l?l+"":"",gc(n._platformId)||!n._serverModuleLoaded?gc(n._platformId)?e.style.setProperty(r,l):n._setServerStyle(e,r,l):n._serverStylesheet.addStyleToElement(e,r,l)}}catch(c){u.e(c)}finally{u.f()}})}},{key:"_setServerStyle",value:function(t,e,n){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var r=this._readStyleAttribute(t);r[e]=n||"",this._writeStyleAttribute(t,r)}},{key:"_getServerStyle",value:function(t,e){return this._readStyleAttribute(t)[e]||""}},{key:"_readStyleAttribute",value:function(t){var e={},n=t.getAttribute("style");if(n)for(var r=n.split(/;+/g),i=0;i<r.length;i++){var o=r[i].trim();if(o.length>0){var a=o.indexOf(":");if(-1===a)throw new Error("Invalid CSS style: ".concat(o));e[o.substr(0,a).trim()]=o.substr(a+1).trim()}}return e}},{key:"_writeStyleAttribute",value:function(t,e){var n="";for(var r in e)e[r]&&(n+=r+":"+e[r]+";");t.setAttribute("style",n)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Ip),vr(Rp),vr(Uu),vr(Np))},t.\u0275prov=Pt({factory:function(){return new t(vr(Ip),vr(Rp),vr(Uu),vr(Np))},token:t,providedIn:"root"}),t}(),lv=function(){function t(){m(this,t),this.shouldCache=!0}return _(t,[{key:"sideEffect",value:function(t,e,n){}}]),t}(),cv=function(){var t=function(){function t(e,n,r){m(this,t),this.matchMedia=e,this.breakpoints=n,this.hook=r,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new B,this.observeActivations()}return _(t,[{key:"activatedAlias",get:function(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}},{key:"onMediaChange",value:function(t){var e=this.findByQuery(t.mediaQuery);e&&((t=jp(t,e)).matches&&-1===this.activatedBreakpoints.indexOf(e)?(this.activatedBreakpoints.push(e),this.activatedBreakpoints.sort(Jp),this.updateStyles()):t.matches||-1===this.activatedBreakpoints.indexOf(e)||(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(e),1),this.activatedBreakpoints.sort(Jp),this.updateStyles()))}},{key:"init",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];hv(this.updateMap,t,e,n),hv(this.clearMap,t,e,r),this.buildElementKeyMap(t,e),this.watchExtraTriggers(t,e,i)}},{key:"getValue",value:function(t,e,n){var r=this.elementMap.get(t);if(r){var i=void 0!==n?r.get(n):this.getActivatedValues(r,e);if(i)return i.get(e)}}},{key:"hasValue",value:function(t,e){var n=this.elementMap.get(t);if(n){var r=this.getActivatedValues(n,e);if(r)return void 0!==r.get(e)||!1}return!1}},{key:"setValue",value:function(t,e,n,r){var i=this.elementMap.get(t);if(i){var o=(i.get(r)||new Map).set(e,n);i.set(r,o),this.elementMap.set(t,i)}else i=(new Map).set(r,(new Map).set(e,n)),this.elementMap.set(t,i);var a=this.getValue(t,e);void 0!==a&&this.updateElement(t,e,a)}},{key:"trackValue",value:function(t,e){return this.subject.asObservable().pipe(xp(function(n){return n.element===t&&n.key===e}))}},{key:"updateStyles",value:function(){var t=this;this.elementMap.forEach(function(e,n){var r=new Set(t.elementKeyMap.get(n)),i=t.getActivatedValues(e);i&&i.forEach(function(e,i){t.updateElement(n,i,e),r.delete(i)}),r.forEach(function(r){if(i=t.getActivatedValues(e,r)){var o=i.get(r);t.updateElement(n,r,o)}else t.clearElement(n,r)})})}},{key:"clearElement",value:function(t,e){var n=this.clearMap.get(t);if(n){var r=n.get(e);r&&(r(),this.subject.next({element:t,key:e,value:""}))}}},{key:"updateElement",value:function(t,e,n){var r=this.updateMap.get(t);if(r){var i=r.get(e);i&&(i(n),this.subject.next({element:t,key:e,value:n}))}}},{key:"releaseElement",value:function(t){var e=this.watcherMap.get(t);e&&(e.forEach(function(t){return t.unsubscribe()}),this.watcherMap.delete(t));var n=this.elementMap.get(t);n&&(n.forEach(function(t,e){return n.delete(e)}),this.elementMap.delete(t))}},{key:"triggerUpdate",value:function(t,e){var n=this,r=this.elementMap.get(t);if(r){var i=this.getActivatedValues(r,e);i&&(e?this.updateElement(t,e,i.get(e)):i.forEach(function(e,r){return n.updateElement(t,r,e)}))}}},{key:"buildElementKeyMap",value:function(t,e){var n=this.elementKeyMap.get(t);n||(n=new Set,this.elementKeyMap.set(t,n)),n.add(e)}},{key:"watchExtraTriggers",value:function(t,e,n){var r=this;if(n&&n.length){var o=this.watcherMap.get(t);if(o||(o=new Map,this.watcherMap.set(t,o)),!o.get(e)){var a=at.apply(void 0,i(n)).subscribe(function(){var n=r.getValue(t,e);r.updateElement(t,e,n)});o.set(e,a)}}}},{key:"findByQuery",value:function(t){return this.breakpoints.findByQuery(t)}},{key:"getActivatedValues",value:function(t,e){for(var n=0;n<this.activatedBreakpoints.length;n++){var r=t.get(this.activatedBreakpoints[n].alias);if(r&&(void 0===e||r.has(e)&&null!=r.get(e)))return r}var i=t.get("");return void 0===e||i&&i.has(e)?i:void 0}},{key:"observeActivations",value:function(){var t=this.breakpoints.items.map(function(t){return t.mediaQuery});this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(Cp(this.hook.interceptEvents(this)),xp(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(nv),vr(ev),vr(ov))},t.\u0275prov=Pt({factory:function(){return new t(vr(nv),vr(ev),vr(ov))},token:t,providedIn:"root"}),t}();function hv(t,e,n,r){if(void 0!==r){var i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)}}new Map,new WeakMap;var dv=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[Op]]}),t}(),fv=new Jn("cdk-dir-doc",{providedIn:"root",factory:function(){return gr(Fl)}}),pv=function(){var t=function(){function t(e){if(m(this,t),this.value="ltr",this.change=new mu,e){var n=e.documentElement?e.documentElement.dir:null,r=(e.body?e.body.dir:null)||n;this.value="ltr"===r||"rtl"===r?r:"ltr"}}return _(t,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(fv,8))},t.\u0275prov=Pt({factory:function(){return new t(vr(fv,8))},token:t,providedIn:"root"}),t}(),vv=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({}),t}(),gv=["row","column","row-reverse","column-reverse"];function yv(t){var e=r((t=t?t.toLowerCase():"").split(" "),3),n=e[0],i=e[1],o=e[2];return gv.find(function(t){return t===n})||(n=gv[0]),"inline"===i&&(i="inline"!==o?o:"",o="inline"),[n,bv(i),!!o]}function mv(t){return r(yv(t),1)[0].indexOf("row")>-1}function bv(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}var _v=function(){var t,e=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"buildStyles",value:function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":e||null}}((e=r(yv(t),3))[0],e[1],e[2]);var e}}]),n}(lv);return e.\u0275fac=function(n){return(t||(t=Xn(e)))(n||e)},e.\u0275prov=Pt({factory:function(){return new e},token:e,providedIn:"root"}),e}(),wv=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"],xv=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t,i,r,o)).DIRECTIVE_KEY="layout",a.styleCache=Sv,a.init(),a}return n}(Vp);return t.\u0275fac=function(e){return new(e||t)(Sa(_s),Sa(uv),Sa(_v),Sa(cv))},t.\u0275dir=he({type:t,features:[ca]}),t}(),kv=function(){var t,e=function(t){h(n,t);var e=f(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).inputs=wv,t}return n}(xv);return e.\u0275fac=function(n){return(t||(t=Xn(e)))(n||e)},e.\u0275dir=he({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[ca]}),e}(),Sv=new Map;new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map;var Ev=function(){var t,e=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"buildStyles",value:function(t,e){var n={},i=r(t.split(" "),2),o=i[0],a=i[1];switch(o){case"center":n["justify-content"]="center";break;case"space-around":n["justify-content"]="space-around";break;case"space-between":n["justify-content"]="space-between";break;case"space-evenly":n["justify-content"]="space-evenly";break;case"end":case"flex-end":n["justify-content"]="flex-end";break;case"start":case"flex-start":default:n["justify-content"]="flex-start"}switch(a){case"start":case"flex-start":n["align-items"]=n["align-content"]="flex-start";break;case"center":n["align-items"]=n["align-content"]="center";break;case"end":case"flex-end":n["align-items"]=n["align-content"]="flex-end";break;case"space-between":n["align-content"]="space-between",n["align-items"]="stretch";break;case"space-around":n["align-content"]="space-around",n["align-items"]="stretch";break;case"baseline":n["align-content"]="stretch",n["align-items"]="baseline";break;case"stretch":default:n["align-items"]=n["align-content"]="stretch"}return function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(t[s]=a[s])}return t}(n,{display:e.inline?"inline-flex":"flex","flex-direction":e.layout,"box-sizing":"border-box","max-width":"stretch"===a?mv(e.layout)?null:"100%":null,"max-height":"stretch"===a&&mv(e.layout)?"100%":null})}}]),n}(lv);return e.\u0275fac=function(n){return(t||(t=Xn(e)))(n||e)},e.\u0275prov=Pt({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Cv=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"],Tv=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t,i,r,o)).DIRECTIVE_KEY="layout-align",a.layout="row",a.inline=!1,a.init(),a.marshal.trackValue(a.nativeElement,"layout").pipe(rp(a.destroySubject)).subscribe(a.onLayoutChange.bind(v(a))),a}return _(n,[{key:"updateWithValue",value:function(t){var e=this.layout||"row",n=this.inline;"row"===e&&n?this.styleCache=Iv:"row"!==e||n?"row-reverse"===e&&n?this.styleCache=Nv:"row-reverse"!==e||n?"column"===e&&n?this.styleCache=Lv:"column"!==e||n?"column-reverse"===e&&n?this.styleCache=Rv:"column-reverse"!==e||n||(this.styleCache=Mv):this.styleCache=Dv:this.styleCache=Ov:this.styleCache=Av,this.addStyles(t,{layout:e,inline:n})}},{key:"onLayoutChange",value:function(t){var e=this,n=t.value.split(" ");this.layout=n[0],this.inline=t.value.includes("inline"),gv.find(function(t){return t===e.layout})||(this.layout="row"),this.triggerUpdate()}}]),n}(Vp);return t.\u0275fac=function(e){return new(e||t)(Sa(_s),Sa(uv),Sa(Ev),Sa(cv))},t.\u0275dir=he({type:t,features:[ca]}),t}(),Pv=function(){var t,e=function(t){h(n,t);var e=f(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).inputs=Cv,t}return n}(Tv);return e.\u0275fac=function(n){return(t||(t=Xn(e)))(n||e)},e.\u0275dir=he({type:e,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[ca]}),e}(),Av=new Map,Dv=new Map,Ov=new Map,Mv=new Map,Iv=new Map,Lv=new Map,Nv=new Map,Rv=new Map,Fv=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[Op,vv]]}),t}();new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map;var jv=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[Op]]}),t}();new Ss("12.0.0-beta.34");var Bv=function(){var t=function(){function t(e,n){m(this,t),yc(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}return _(t,null,[{key:"withConfig",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{ngModule:t,providers:e.serverLoaded?[{provide:Np,useValue:Object.assign(Object.assign({},Lp),e)},{provide:Fp,useValue:n,multi:!0},{provide:Rp,useValue:!0}]:[{provide:Np,useValue:Object.assign(Object.assign({},Lp),e)},{provide:Fp,useValue:n,multi:!0}]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Rp),vr(Uu))},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[Fv,dv,jv],Fv,dv,jv]}),t}(),zv=function(){var t=function(){function t(e){m(this,t),this._platform=e}return _(t,[{key:"isDisabled",value:function(t){return t.hasAttribute("disabled")}},{key:"isVisible",value:function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}},{key:"isTabbable",value:function(t){if(!this._platform.isBrowser)return!1;var e,n=function(t){try{return t.frameElement}catch(Dx){return null}}((e=t).ownerDocument&&e.ownerDocument.defaultView||window);if(n){if(-1===Gv(n))return!1;if(!this.isVisible(n))return!1}var r=t.nodeName.toLowerCase(),i=Gv(t);return t.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}},{key:"isFocusable",value:function(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Vv(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(hp))},t.\u0275prov=Pt({factory:function(){return new t(vr(hp))},token:t,providedIn:"root"}),t}();function Vv(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Gv(t){if(!Vv(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var Uv=function(){function t(e,n,r,i){var o=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];m(this,t),this._element=e,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=function(){return o.focusLastTabbableElement()},this.endAnchorListener=function(){return o.focusFirstTabbableElement()},this._enabled=!0,a||this.attachAnchors()}return _(t,[{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}},{key:"destroy",value:function(){var t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}},{key:"attachAnchors",value:function(){var t=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular(function(){t._startAnchor||(t._startAnchor=t._createAnchor(),t._startAnchor.addEventListener("focus",t.startAnchorListener)),t._endAnchor||(t._endAnchor=t._createAnchor(),t._endAnchor.addEventListener("focus",t.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(t){var e=this;return new Promise(function(n){e._executeOnStable(function(){return n(e.focusInitialElement(t))})})}},{key:"focusFirstTabbableElementWhenReady",value:function(t){var e=this;return new Promise(function(n){e._executeOnStable(function(){return n(e.focusFirstTabbableElement(t))})})}},{key:"focusLastTabbableElementWhenReady",value:function(t){var e=this;return new Promise(function(n){e._executeOnStable(function(){return n(e.focusLastTabbableElement(t))})})}},{key:"_getRegionBoundary",value:function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-".concat(t,"], [cdkFocusRegion").concat(t,"], [cdk-focus-").concat(t,"]")),n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-".concat(t))?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]):e[n].hasAttribute("cdk-focus-region-".concat(t))&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(t){var e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){var n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}},{key:"focusFirstTabbableElement",value:function(t){var e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}},{key:"focusLastTabbableElement",value:function(t){var e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}},{key:"_getLastTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=e.length-1;n>=0;n--){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}},{key:"_createAnchor",value:function(){var t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}},{key:"_toggleAnchorTabIndex",value:function(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}},{key:"toggleAnchors",value:function(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}},{key:"_executeOnStable",value:function(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Uf(1)).subscribe(t)}}]),t}(),Hv=function(){var t=function(){function t(e,n,r){m(this,t),this._checker=e,this._ngZone=n,this._document=r}return _(t,[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Uv(t,this._checker,this._ngZone,this._document,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(zv),vr(il),vr(Fl))},t.\u0275prov=Pt({factory:function(){return new t(vr(zv),vr(il),vr(Fl))},token:t,providedIn:"root"}),t}();"undefined"!=typeof Element&&Element;var qv,Wv=new Jn("cdk-focus-monitor-default-options"),Yv=(qv={passive:!0,capture:!0},function(){if(null==sp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return sp=!0}}))}finally{sp=sp||!1}return sp}()?qv:!!qv.capture),Kv=function(){var t=function(){function t(e,n,r,i){var o=this;m(this,t),this._ngZone=e,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){o._lastTouchTarget=null,o._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(t){if(!o._lastTouchTarget){var e=function(t){return 0===t.buttons}(t)?"keyboard":"mouse";o._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=function(t){!function(t){var e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t)?(null!=o._touchTimeoutId&&clearTimeout(o._touchTimeoutId),o._lastTouchTarget=Xv(t),o._touchTimeoutId=setTimeout(function(){return o._lastTouchTarget=null},650)):o._lastTouchTarget||o._setOriginForCurrentEventQueue("keyboard")},this._windowFocusListener=function(){o._windowFocused=!0,o._windowFocusTimeoutId=setTimeout(function(){return o._windowFocused=!1})},this._rootNodeFocusAndBlurListener=function(t){for(var e=Xv(t),n="focus"===t.type?o._onFocus:o._onBlur,r=e;r;r=r.parentElement)n.call(o,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}return _(t,[{key:"monitor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Df(t);if(!this._platform.isBrowser||1!==n.nodeType)return jf(null);var r=function(t){if(function(){if(null==cp){var t="undefined"!=typeof document?document.head:null;cp=!(!t||!t.createShadowRoot&&!t.attachShadow)}return cp}()){var e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;var o={checkChildren:e,subject:new B,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}},{key:"stopMonitoring",value:function(t){var e=Df(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}},{key:"focusVia",value:function(t,e,n){var i=this,o=Df(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(function(t){var n=r(t,2),o=n[0],a=n[1];return i._originChanged(o,e,a)}):(this._setOriginForCurrentEventQueue(e),"function"==typeof o.focus&&o.focus(n))}},{key:"ngOnDestroy",value:function(){var t=this;this._elementInfo.forEach(function(e,n){return t.stopMonitoring(n)})}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}},{key:"_getFocusOrigin",value:function(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}},{key:"_setClasses",value:function(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}},{key:"_setOriginForCurrentEventQueue",value:function(t){var e=this;this._ngZone.runOutsideAngular(function(){e._origin=t,0===e._detectionMode&&(e._originTimeoutId=setTimeout(function(){return e._origin=null},1))})}},{key:"_wasCausedByTouch",value:function(t){var e=Xv(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(t,e){var n=this._elementInfo.get(e);n&&(n.checkChildren||e===Xv(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}},{key:"_onBlur",value:function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(t,e){this._ngZone.run(function(){return t.next(e)})}},{key:"_registerGlobalListeners",value:function(t){var e=this;if(this._platform.isBrowser){var n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(function(){n.addEventListener("focus",e._rootNodeFocusAndBlurListener,Yv),n.addEventListener("blur",e._rootNodeFocusAndBlurListener,Yv)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(function(){var t=e._getDocument(),n=e._getWindow();t.addEventListener("keydown",e._documentKeydownListener,Yv),t.addEventListener("mousedown",e._documentMousedownListener,Yv),t.addEventListener("touchstart",e._documentTouchstartListener,Yv),n.addEventListener("focus",e._windowFocusListener)})}}},{key:"_removeGlobalListeners",value:function(t){var e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){var n=this._rootNodeFocusListenerCount.get(e);n>1?this._rootNodeFocusListenerCount.set(e,n-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Yv),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Yv),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){var r=this._getDocument(),i=this._getWindow();r.removeEventListener("keydown",this._documentKeydownListener,Yv),r.removeEventListener("mousedown",this._documentMousedownListener,Yv),r.removeEventListener("touchstart",this._documentTouchstartListener,Yv),i.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}},{key:"_originChanged",value:function(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}},{key:"_getClosestElementsInfo",value:function(t){var e=[];return this._elementInfo.forEach(function(n,r){(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(il),vr(hp),vr(Fl,8),vr(Wv,8))},t.\u0275prov=Pt({factory:function(){return new t(vr(il),vr(hp),vr(Fl,8),vr(Wv,8))},token:t,providedIn:"root"}),t}();function Xv(t){return t.composedPath?t.composedPath()[0]:t.target}var Qv=function(){var t=function(){function t(e,n){m(this,t),this._platform=e,this._document=n}return _(t,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);var e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){var t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black"),this._hasCheckedHighContrastMode=!0;var e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(hp),vr(Fl))},t.\u0275prov=Pt({factory:function(){return new t(vr(hp),vr(Fl))},token:t,providedIn:"root"}),t}(),Zv=new Ss("12.0.5"),$v=new Ss("12.0.5"),Jv=new Jn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),tg=function(){var t=function(){function t(e,n,r){m(this,t),this._hasDoneGlobalChecks=!1,this._document=r,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=n,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _(t,[{key:"_getWindow",value:function(){var t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}},{key:"_checksAreEnabled",value:function(){return yl()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var t=this._getWindow();return t&&(t.__karma__||t.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._checksAreEnabled()&&!1!==this._sanityChecks&&this._sanityChecks.theme&&this._document.body&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}}},{key:"_checkCdkVersionMatch",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&$v.full!==Zv.full&&console.warn("The Angular Material version ("+$v.full+") does not match the Angular CDK version ("+Zv.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Qv),vr(Jv,8),vr(Fl))},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[vv],vv]}),t}();function eg(t,e){return function(t){h(r,t);var n=f(r);function r(){var t;m(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))).defaultColor=e,t.color=e,t}return _(r,[{key:"color",get:function(){return this._color},set:function(t){var e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),e&&this._elementRef.nativeElement.classList.add("mat-".concat(e)),this._color=e)}}]),r}(t)}try{"undefined"!=typeof Intl}catch(Dx){!1}var ng=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[tg],tg]}),t}(),rg=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[tg,dp],tg]}),t}(),ig=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[tg]]}),t}(),og=["*",[["mat-toolbar-row"]]],ag=["*","mat-toolbar-row"],sg=eg(function t(e){m(this,t),this._elementRef=e}),ug=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t}(),lg=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t))._platform=r,o._document=i,o}return _(n,[{key:"ngAfterViewInit",value:function(){var t=this;this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(function(){return t._checkToolbarMixedModes()}))}},{key:"_checkToolbarMixedModes",value:function(){}}]),n}(sg);return t.\u0275fac=function(e){return new(e||t)(Sa(_s),Sa(hp),Sa(Fl))},t.\u0275cmp=oe({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){var r;(1&t&&Mu(n,ug,5),2&t)&&(Du(r=Iu())&&(e._toolbarRows=r))},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&Wa("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ca],ngContentSelectors:ag,decls:2,vars:0,template:function(t,e){1&t&&(Va(og),Ga(0),Ga(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t}(),cg=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[tg],tg]}),t}(),hg=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[rg,tg],tg]}),t}();function dg(t,e,n,r){return s(n)&&(r=n,n=void 0),r?dg(t,e,n).pipe(G(function(t){return x(t)?r.apply(void 0,i(t)):r(t)})):new I(function(r){fg(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function fg(t,e,n,r,i){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var a=t;t.addEventListener(e,n,i),o=function(){return a.removeEventListener(e,n,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var s=t;t.on(e,n),o=function(){return s.off(e,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var u=t;t.addListener(e,n),o=function(){return u.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,c=t.length;l<c;l++)fg(t[l],e,n,r,i)}r.add(o)}var pg=function(){function t(e,n){m(this,t),this.compare=e,this.keySelector=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new vg(t,this.compare,this.keySelector))}}]),t}(),vg=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return _(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(P),gg=function(){function t(e){m(this,t),this.durationSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new yg(t,this.durationSelector))}}]),t}(),yg=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).durationSelector=r,i.hasValue=!1,i}return _(n,[{key:"_next",value:function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e;try{e=(0,this.durationSelector)(t)}catch(r){return this.destination.error(r)}var n=tt(e,new $(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(J);function mg(t){return!x(t)&&t-parseFloat(t)+1>=0}function bg(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function _g(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zf;return e=function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return mg(e)?r=Number(e)<1?1:Number(e):V(e)&&(n=e),V(n)||(n=Zf),new I(function(e){var i=mg(t)?t:+t-n.now();return n.schedule(bg,i,{index:0,period:r,subscriber:e})})}(t,n)},function(t){return t.lift(new gg(e))}}function wg(t,e){return"function"==typeof e?function(n){return n.pipe(wg(function(n,r){return Z(t(n,r)).pipe(G(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new xg(t))}}var xg=function(){function t(e){m(this,t),this.project=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new kg(t,this.project))}}]),t}(),kg=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return _(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new $(this),r=this.destination;r.add(n),this.innerSubscription=tt(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||c(y(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&c(y(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t){this.destination.next(t)}}]),n}(J),Sg=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?c(y(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?c(y(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?c(y(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(Kf),Eg=new(function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return n}(Qf))(Sg);function Cg(t,e){return new I(e?function(n){return e.schedule(Tg,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function Tg(t){var e=t.error;t.subscriber.error(e)}var Pg=function(){var t=function(){function t(e,n,r){m(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return _(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return jf(this.value);case"E":return Cg(this.error);case"C":return Gf()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}();return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Ag=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return m(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return _(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new Dg(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(Pg.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(Pg.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(Pg.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(P),Dg=function t(e,n){m(this,t),this.notification=e,this.destination=n},Og=function(t){h(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return m(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=r<1?1:r,t._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return _(n,[{key:"nextInfiniteTimeWindow",value:function(t){if(!this.isStopped){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}c(y(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this.isStopped||(this._events.push(new Mg(this._getNow(),t)),this._trimBufferThenGetEvents()),c(y(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new R;if(this.isStopped||this.hasError?e=E.EMPTY:(this.observers.push(t),e=new F(this,t)),i&&t.add(t=new Ag(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(var s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||Eg).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}(B),Mg=function t(e,n){m(this,t),this.time=e,this.value=n},Ig=function(){var t=function(){function t(e,n,r){m(this,t),this._ngZone=e,this._platform=n,this._scrolled=new B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}return _(t,[{key:"register",value:function(t){var e=this;this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(function(){return e._scrolled.next(t)}))}},{key:"deregister",value:function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}},{key:"scrolled",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new I(function(n){t._globalSubscription||t._addGlobalListener();var r=e>0?t._scrolled.pipe(_g(e)).subscribe(n):t._scrolled.subscribe(n);return t._scrolledCount++,function(){r.unsubscribe(),t._scrolledCount--,t._scrolledCount||t._removeGlobalListener()}}):jf()}},{key:"ngOnDestroy",value:function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(e,n){return t.deregister(n)}),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(xp(function(t){return!t||n.indexOf(t)>-1}))}},{key:"getAncestorScrollContainers",value:function(t){var e=this,n=[];return this.scrollContainers.forEach(function(r,i){e._scrollableContainsElement(i,t)&&n.push(i)}),n}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_scrollableContainsElement",value:function(t,e){var n=Df(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return dg(t._getWindow().document,"scroll").subscribe(function(){return t._scrolled.next()})})}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(il),vr(hp),vr(Fl,8))},t.\u0275prov=Pt({factory:function(){return new t(vr(il),vr(hp),vr(Fl,8))},token:t,providedIn:"root"}),t}(),Lg=function(){var t=function(){function t(e,n,r,i){var o=this;m(this,t),this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=i,this._destroyed=new B,this._elementScrolled=new I(function(t){return o.ngZone.runOutsideAngular(function(){return dg(o.elementRef.nativeElement,"scroll").pipe(rp(o._destroyed)).subscribe(t)})})}return _(t,[{key:"ngOnInit",value:function(){this.scrollDispatcher.register(this)}},{key:"ngOnDestroy",value:function(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}},{key:"elementScrolled",value:function(){return this._elementScrolled}},{key:"getElementRef",value:function(){return this.elementRef}},{key:"scrollTo",value:function(t){var e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=fp()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==fp()?t.left=t.right:1==fp()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}},{key:"_applyScrollToOptions",value:function(t){var e=this.elementRef.nativeElement;!function(){if(null==lp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return lp=!1;if("scrollBehavior"in document.documentElement.style)lp=!0;else{var t=Element.prototype.scrollTo;lp=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return lp}()?(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left)):e.scrollTo(t)}},{key:"measureScrollOffset",value:function(t){var e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;var n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&2==fp()?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&1==fp()?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(_s),Sa(Ig),Sa(il),Sa(pv,8))},t.\u0275dir=he({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t}(),Ng=function(){var t=function(){function t(e,n,r){var i=this;m(this,t),this._platform=e,this._change=new B,this._changeListener=function(t){i._change.next(t)},this._document=r,n.runOutsideAngular(function(){if(e.isBrowser){var t=i._getWindow();t.addEventListener("resize",i._changeListener),t.addEventListener("orientationchange",i._changeListener)}i.change().subscribe(function(){return i._updateViewportSize()})})}return _(t,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}},{key:"getViewportRect",value:function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,r=e.height;return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return t>0?this._change.pipe(_g(t)):this._change}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_updateViewportSize",value:function(){var t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(hp),vr(il),vr(Fl,8))},t.\u0275prov=Pt({factory:function(){return new t(vr(hp),vr(il),vr(Fl,8))},token:t,providedIn:"root"}),t}(),Rg=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({}),t}();function Fg(t){return function(e){return e.lift(new jg(t))}}var jg=function(){function t(e){m(this,t),this.value=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Bg(t,this.value))}}]),t}(),Bg=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).value=r,i}return _(n,[{key:"_next",value:function(t){this.destination.next(this.value)}}]),n}(P),zg=["*"];function Vg(t,e){if(1&t){var n=Da();Ta(0,"div",2),La("click",function(){return He(n),Ba()._onBackdropClicked()}),Pa()}2&t&&Wa("mat-drawer-shown",Ba()._isShowingBackdrop())}function Gg(t,e){1&t&&(Ta(0,"mat-drawer-content"),Ga(1,2),Pa())}var Ug=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Hg=["mat-drawer","mat-drawer-content","*"];function qg(t,e){if(1&t){var n=Da();Ta(0,"div",2),La("click",function(){return He(n),Ba()._onBackdropClicked()}),Pa()}2&t&&Wa("mat-drawer-shown",Ba()._isShowingBackdrop())}function Wg(t,e){1&t&&(Ta(0,"mat-sidenav-content",3),Ga(1,2),Pa())}var Yg,Kg,Xg=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Qg=["mat-sidenav","mat-sidenav-content","*"],Zg=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",$g={transformDrawer:(Yg="transform",Kg=[oh("open, open-instant",ih({transform:"none",visibility:"visible"})),oh("void",ih({"box-shadow":"none",visibility:"hidden"})),ah("void => open-instant",nh("0ms")),ah("void <=> open, open-instant => void",nh("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))],{type:7,name:Yg,definitions:Kg,options:{}})},Jg=new Jn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),ty=new Jn("MAT_DRAWER_CONTAINER"),ey=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r,i,o,a){var s;return m(this,n),(s=e.call(this,i,o,a))._changeDetectorRef=t,s._container=r,s}return _(n,[{key:"ngAfterContentInit",value:function(){var t=this;this._container._contentMarginChanges.subscribe(function(){t._changeDetectorRef.markForCheck()})}}]),n}(Lg);return t.\u0275fac=function(e){return new(e||t)(Sa(Hs),Sa(wt(function(){return ry})),Sa(_s),Sa(Ig),Sa(il))},t.\u0275cmp=oe({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&qa("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[ca],ngContentSelectors:zg,decls:1,vars:0,template:function(t,e){1&t&&(Va(),Ga(0))},encapsulation:2,changeDetection:0}),t}(),ny=function(){var t=function(){function t(e,n,r,i,o,a,s){var u=this;m(this,t),this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=i,this._ngZone=o,this._doc=a,this._container=s,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new B,this._animationEnd=new B,this._animationState="void",this.openedChange=new mu(!0),this._openedStream=this.openedChange.pipe(xp(function(t){return t}),G(function(){})),this.openedStart=this._animationStarted.pipe(xp(function(t){return t.fromState!==t.toState&&0===t.toState.indexOf("open")}),Fg(void 0)),this._closedStream=this.openedChange.pipe(xp(function(t){return!t}),G(function(){})),this.closedStart=this._animationStarted.pipe(xp(function(t){return t.fromState!==t.toState&&"void"===t.toState}),Fg(void 0)),this._destroyed=new B,this.onPositionChanged=new mu,this._modeChanged=new B,this.openedChange.subscribe(function(t){t?(u._doc&&(u._elementFocusedBeforeDrawerWasOpened=u._doc.activeElement),u._takeFocus()):u._isFocusWithinDrawer()&&u._restoreFocus()}),this._ngZone.runOutsideAngular(function(){dg(u._elementRef.nativeElement,"keydown").pipe(xp(function(t){return 27===t.keyCode&&!u.disableClose&&!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.length?n.some(function(e){return t[e]}):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t)}),rp(u._destroyed)).subscribe(function(t){return u._ngZone.run(function(){u.close(),t.stopPropagation(),t.preventDefault()})})}),this._animationEnd.pipe(function(t,e){return function(e){return e.lift(new pg(t,void 0))}}(function(t,e){return t.fromState===e.fromState&&t.toState===e.toState})).subscribe(function(t){var e=t.fromState,n=t.toState;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&u.openedChange.emit(u._opened)})}return _(t,[{key:"position",get:function(){return this._position},set:function(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}},{key:"mode",get:function(){return this._mode},set:function(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}},{key:"disableClose",get:function(){return this._disableClose},set:function(t){this._disableClose=Tf(t)}},{key:"autoFocus",get:function(){var t=this._autoFocus;return null==t?"side"!==this.mode:t},set:function(t){this._autoFocus=Tf(t)}},{key:"opened",get:function(){return this._opened},set:function(t){this.toggle(Tf(t))}},{key:"_takeFocus",value:function(){var t=this;this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(function(e){e||"function"!=typeof t._elementRef.nativeElement.focus||t._elementRef.nativeElement.focus()})}},{key:"_restoreFocus",value:function(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}},{key:"_isFocusWithinDrawer",value:function(){var t,e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}},{key:"ngAfterContentInit",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}},{key:"ngAfterContentChecked",value:function(){this._platform.isBrowser&&(this._enableAnimations=!0)}},{key:"ngOnDestroy",value:function(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(t){return this.toggle(!0,t)}},{key:"close",value:function(){return this.toggle(!1)}},{key:"_closeViaBackdropClick",value:function(){return this._setOpen(!1,!0)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened,e=arguments.length>1?arguments[1]:void 0;return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}},{key:"_setOpen",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"program";return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=r):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(function(t){n.openedChange.pipe(Uf(1)).subscribe(function(e){return t(e?"open":"close")})})}},{key:"_getWidth",value:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}},{key:"_updateFocusTrapState",value:function(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}},{key:"_animationStartListener",value:function(t){this._animationStarted.next(t)}},{key:"_animationDoneListener",value:function(t){this._animationEnd.next(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(_s),Sa(Hv),Sa(Kv),Sa(hp),Sa(il),Sa(Fl,8),Sa(ty,8))},t.\u0275cmp=oe({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&Na("@transform.start",function(t){return e._animationStartListener(t)})("@transform.done",function(t){return e._animationDoneListener(t)}),2&t&&(wa("align",null),Ja("@transform",e._animationState),Wa("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:zg,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Va(),Ta(0,"div",0),Ga(1),Pa())},directives:[Lg],encapsulation:2,data:{animation:[$g.transformDrawer]},changeDetection:0}),t}(),ry=function(){var t=function(){function t(e,n,r,i,o){var a=this,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6?arguments[6]:void 0;m(this,t),this._dir=e,this._element=n,this._ngZone=r,this._changeDetectorRef=i,this._animationMode=u,this._drawers=new _u,this.backdropClick=new mu,this._destroyed=new B,this._doCheckSubject=new B,this._contentMargins={left:null,right:null},this._contentMarginChanges=new B,e&&e.change.pipe(rp(this._destroyed)).subscribe(function(){a._validateDrawers(),a.updateContentMargins()}),o.change().pipe(rp(this._destroyed)).subscribe(function(){return a.updateContentMargins()}),this._autosize=s}return _(t,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"autosize",get:function(){return this._autosize},set:function(t){this._autosize=Tf(t)}},{key:"hasBackdrop",get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(t){this._backdropOverride=null==t?null:Tf(t)}},{key:"scrollable",get:function(){return this._userContent||this._content}},{key:"ngAfterContentInit",value:function(){var t=this;this._allDrawers.changes.pipe(np(this._allDrawers),rp(this._destroyed)).subscribe(function(e){t._drawers.reset(e.filter(function(e){return!e._container||e._container===t})),t._drawers.notifyOnChanges()}),this._drawers.changes.pipe(np(null)).subscribe(function(){t._validateDrawers(),t._drawers.forEach(function(e){t._watchDrawerToggle(e),t._watchDrawerPosition(e),t._watchDrawerMode(e)}),(!t._drawers.length||t._isDrawerOpen(t._start)||t._isDrawerOpen(t._end))&&t.updateContentMargins(),t._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(function(){t._doCheckSubject.pipe($f(10),rp(t._destroyed)).subscribe(function(){return t.updateContentMargins()})})}},{key:"ngOnDestroy",value:function(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(){this._drawers.forEach(function(t){return t.open()})}},{key:"close",value:function(){this._drawers.forEach(function(t){return t.close()})}},{key:"updateContentMargins",value:function(){var t=this,e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){var r=this._left._getWidth();e+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){var i=this._right._getWidth();n+=i,e-=i}n=n||null,(e=e||null)===this._contentMargins.left&&n===this._contentMargins.right||(this._contentMargins={left:e,right:n},this._ngZone.run(function(){return t._contentMarginChanges.next(t._contentMargins)}))}},{key:"ngDoCheck",value:function(){var t=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(function(){return t._doCheckSubject.next()})}},{key:"_watchDrawerToggle",value:function(t){var e=this;t._animationStarted.pipe(xp(function(t){return t.fromState!==t.toState}),rp(this._drawers.changes)).subscribe(function(t){"open-instant"!==t.toState&&"NoopAnimations"!==e._animationMode&&e._element.nativeElement.classList.add("mat-drawer-transition"),e.updateContentMargins(),e._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(rp(this._drawers.changes)).subscribe(function(){return e._setContainerClass(t.opened)})}},{key:"_watchDrawerPosition",value:function(t){var e=this;t&&t.onPositionChanged.pipe(rp(this._drawers.changes)).subscribe(function(){e._ngZone.onMicrotaskEmpty.pipe(Uf(1)).subscribe(function(){e._validateDrawers()})})}},{key:"_watchDrawerMode",value:function(t){var e=this;t&&t._modeChanged.pipe(rp(at(this._drawers.changes,this._destroyed))).subscribe(function(){e.updateContentMargins(),e._changeDetectorRef.markForCheck()})}},{key:"_setContainerClass",value:function(t){var e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}},{key:"_validateDrawers",value:function(){var t=this;this._start=this._end=null,this._drawers.forEach(function(e){"end"==e.position?t._end=e:t._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}},{key:"_isPushed",value:function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}},{key:"_onBackdropClicked",value:function(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}},{key:"_closeModalDrawersViaBackdrop",value:function(){var t=this;[this._start,this._end].filter(function(e){return e&&!e.disableClose&&t._canHaveBackdrop(e)}).forEach(function(t){return t._closeViaBackdropClick()})}},{key:"_isShowingBackdrop",value:function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}},{key:"_canHaveBackdrop",value:function(t){return"side"!==t.mode||!!this._backdropOverride}},{key:"_isDrawerOpen",value:function(t){return null!=t&&t.opened}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(pv,8),Sa(_s),Sa(il),Sa(Hs),Sa(Ng),Sa(Jg),Sa(xf,8))},t.\u0275cmp=oe({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){var r;(1&t&&(Mu(n,ey,5),Mu(n,ny,5)),2&t)&&(Du(r=Iu())&&(e._content=r.first),Du(r=Iu())&&(e._allDrawers=r))},viewQuery:function(t,e){var n;(1&t&&Ou(ey,5),2&t)&&(Du(n=Iu())&&(e._userContent=n.first))},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&Wa("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[fs([{provide:ty,useExisting:t}])],ngContentSelectors:Hg,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(Va(Ug),xa(0,Vg,1,2,"div",0),Ga(1),Ga(2,1),xa(3,Gg,2,0,"mat-drawer-content",1)),2&t&&(Ea("ngIf",e.hasBackdrop),Zi(3),Ea("ngIf",!e._content))},directives:[uc,ey],styles:[Zg],encapsulation:2,changeDetection:0}),t}(),iy=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r,i,o,a){return m(this,n),e.call(this,t,r,i,o,a)}return n}(ey);return t.\u0275fac=function(e){return new(e||t)(Sa(Hs),Sa(wt(function(){return ay})),Sa(_s),Sa(Ig),Sa(il))},t.\u0275cmp=oe({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&qa("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[ca],ngContentSelectors:zg,decls:1,vars:0,template:function(t,e){1&t&&(Va(),Ga(0))},encapsulation:2,changeDetection:0}),t}(),oy=function(){var t,e=function(t){h(n,t);var e=f(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments))._fixedInViewport=!1,t._fixedTopGap=0,t._fixedBottomGap=0,t}return _(n,[{key:"fixedInViewport",get:function(){return this._fixedInViewport},set:function(t){this._fixedInViewport=Tf(t)}},{key:"fixedTopGap",get:function(){return this._fixedTopGap},set:function(t){this._fixedTopGap=Pf(t)}},{key:"fixedBottomGap",get:function(){return this._fixedBottomGap},set:function(t){this._fixedBottomGap=Pf(t)}}]),n}(ny);return e.\u0275fac=function(n){return(t||(t=Xn(e)))(n||e)},e.\u0275cmp=oe({type:e,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(wa("align",null),qa("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),Wa("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[ca],ngContentSelectors:zg,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Va(),Ta(0,"div",0),Ga(1),Pa())},directives:[Lg],encapsulation:2,data:{animation:[$g.transformDrawer]},changeDetection:0}),e}(),ay=function(){var t,e=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return n}(ry);return e.\u0275fac=function(n){return(t||(t=Xn(e)))(n||e)},e.\u0275cmp=oe({type:e,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){var r;(1&t&&(Mu(n,iy,5),Mu(n,oy,5)),2&t)&&(Du(r=Iu())&&(e._content=r.first),Du(r=Iu())&&(e._allDrawers=r))},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&Wa("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[fs([{provide:ty,useExisting:e}]),ca],ngContentSelectors:Qg,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(Va(Xg),xa(0,qg,1,2,"div",0),Ga(1),Ga(2,1),xa(3,Wg,2,0,"mat-sidenav-content",1)),2&t&&(Ea("ngIf",e.hasBackdrop),Zi(3),Ea("ngIf",!e._content))},directives:[uc,iy,Lg],styles:[Zg],encapsulation:2,changeDetection:0}),e}(),sy=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[vc,tg,dp,Rg],Rg,tg]}),t}();function uy(t,e){return new I(function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var u=Z(t[s]),l=!1;n.add(u.subscribe({next:function(t){l||(l=!0,a++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&l||(a===r&&n.next(e?e.reduce(function(t,e,n){return t[e]=i[n],t},{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()})}function ly(t){return function(e){var n=new cy(t),r=e.lift(n);return n.caught=r}}var cy=function(){function t(e){m(this,t),this.selector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new hy(t,this.selector,this.caught))}}]),t}(),hy=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return _(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(o){return void c(y(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new $(this);this.add(r);var i=tt(e,r);i!==r&&this.add(i)}}}]),n}(J);function dy(t){return function(e){return e.lift(new fy(t))}}var fy=function(){function t(e){m(this,t),this.callback=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new py(t,this.callback))}}]),t}(),py=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).add(new E(r)),i}return n}(P);function vy(t,e){return et(t,e,1)}var gy=function t(){m(this,t)},yy=function t(){m(this,t)},my=function(){function t(e){var n=this;m(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}})}:function(){n.headers=new Map,Object.keys(e).forEach(function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))})}:this.headers=new Map}return _(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,i(n)),this.headers.set(e,r);break;case"d":var o=t.value;if(o){var a=this.headers.get(e);if(!a)return;0===(a=a.filter(function(t){return-1===o.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})}}]),t}(),by=function(){function t(){m(this,t)}return _(t,[{key:"encodeKey",value:function(t){return _y(t)}},{key:"encodeValue",value:function(t){return _y(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function _y(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function wy(t){return"".concat(t)}var xy=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m(this,t),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new by,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){var n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(function(t){var i=t.indexOf("="),o=r(-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],2),a=o[0],s=o[1],u=n.get(a)||[];u.push(s),n.set(a,u)}),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(function(t){var r=n.fromObject[t];e.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}return _(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"appendAll",value:function(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n];Array.isArray(r)?r.forEach(function(t){e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).filter(function(t){return""!==t}).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(wy(e.value)),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(wy(e.value));-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=this.updates=null)}}]),t}(),ky=function(){function t(){m(this,t),this.map=new Map}return _(t,[{key:"set",value:function(t,e){return this.map.set(t,e),this}},{key:"get",value:function(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}},{key:"delete",value:function(t){return this.map.delete(t),this}},{key:"keys",value:function(){return this.map.keys()}}]),t}();function Sy(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Ey(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Cy(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Ty=function(){function t(e,n,r,i){var o;if(m(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new my),this.context||(this.context=new ky),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new xy,this.urlWithParams=n}return _(t,[{key:"serializeBody",value:function(){return null===this.body?null:Sy(this.body)||Ey(this.body)||Cy(this.body)||"string"==typeof this.body?this.body:this.body instanceof xy?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Cy(this.body)?null:Ey(this.body)?this.body.type||null:Sy(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xy?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.method||this.method,i=n.url||this.url,o=n.responseType||this.responseType,a=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,u=void 0!==n.reportProgress?n.reportProgress:this.reportProgress,l=n.headers||this.headers,c=n.params||this.params,h=null!==(e=n.context)&&void 0!==e?e:this.context;return void 0!==n.setHeaders&&(l=Object.keys(n.setHeaders).reduce(function(t,e){return t.set(e,n.setHeaders[e])},l)),n.setParams&&(c=Object.keys(n.setParams).reduce(function(t,e){return t.set(e,n.setParams[e])},c)),new t(r,i,a,{params:c,headers:l,context:h,reportProgress:u,responseType:o,withCredentials:s})}}]),t}(),Py=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),Ay=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";m(this,t),this.headers=e.headers||new my,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},Dy=function(t){h(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(this,n),(t=e.call(this,r)).type=Py.ResponseHeader,t}return _(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Ay),Oy=function(t){h(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(this,n),(t=e.call(this,r)).type=Py.Response,t.body=void 0!==r.body?r.body:null,t}return _(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Ay),My=function(t){h(n,t);var e=f(n);function n(t){var r;return m(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return n}(Ay);function Iy(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Ly=function(){var t=function(){function t(e){m(this,t),this.handler=e}return _(t,[{key:"request",value:function(t,e){var n,r,i,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t instanceof Ty?n=t:(r=a.headers instanceof my?a.headers:new my(a.headers),a.params&&(i=a.params instanceof xy?a.params:new xy({fromObject:a.params})),n=new Ty(t,e,void 0!==a.body?a.body:null,{headers:r,context:a.context,params:i,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials}));var s=jf(n).pipe(vy(function(t){return o.handler.handle(t)}));if(t instanceof Ty||"events"===a.observe)return s;var u=s.pipe(xp(function(t){return t instanceof Oy}));switch(a.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(G(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(G(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(G(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(G(function(t){return t.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(a.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new xy).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,Iy(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,Iy(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,Iy(n,e))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(gy))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Ny=function(){function t(e,n){m(this,t),this.next=e,this.interceptor=n}return _(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),Ry=new Jn("HTTP_INTERCEPTORS"),Fy=function(){var t=function(){function t(){m(this,t)}return _(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),jy=/^\)\]\}',?\n/,By=function(){var t=function(){function t(e){m(this,t),this.xhrFactory=e}return _(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new I(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new my(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new Dy({headers:i,status:e,statusText:n,url:o})},l=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,l=null;204!==o&&(l=void 0===r.response?r.responseText:r.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof l){var h=l;l=l.replace(jy,"");try{l=""!==l?JSON.parse(l):null}catch(d){l=h,c&&(c=!1,l={error:d,text:l})}}c?(n.next(new Oy({body:l,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new My({error:l,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=u().url,i=new My({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,d=function(e){h||(n.next(u()),h=!0);var i={type:Py.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(t){var e={type:Py.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",d),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:Py.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.readyState!==r.DONE&&r.abort()}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(xc))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),zy=new Jn("XSRF_COOKIE_NAME"),Vy=new Jn("XSRF_HEADER_NAME"),Gy=function t(){m(this,t)},Uy=function(){var t=function(){function t(e,n,r){m(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ic(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Fl),vr(Uu),vr(zy))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Hy=function(){var t=function(){function t(e,n){m(this,t),this.tokenService=e,this.headerName=n}return _(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Gy),vr(Vy))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),qy=function(){var t=function(){function t(e,n){m(this,t),this.backend=e,this.injector=n,this.chain=null}return _(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(Ry,[]);this.chain=e.reduceRight(function(t,e){return new Ny(t,e)},this.backend)}return this.chain.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(yy),vr(ua))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Wy=function(){var t=function(){function t(){m(this,t)}return _(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:Hy,useClass:Fy}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:zy,useValue:e.cookieName}:[],e.headerName?{provide:Vy,useValue:e.headerName}:[]]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:[Hy,{provide:Ry,useExisting:Hy,multi:!0},{provide:Gy,useClass:Uy},{provide:zy,useValue:"XSRF-TOKEN"},{provide:Vy,useValue:"X-XSRF-TOKEN"}]}),t}(),Yy=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:[Ly,{provide:gy,useClass:qy},By,{provide:yy,useExisting:By}],imports:[[Wy.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t}(),Ky=["*"];function Xy(t){return Error('Unable to find icon with the name "'.concat(t,'"'))}function Qy(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was \"".concat(t,'".'))}function Zy(t){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was \"".concat(t,'".'))}var $y=function t(e,n,r){m(this,t),this.url=e,this.svgText=n,this.options=r},Jy=function(){var t=function(){function t(e,n,r,i){m(this,t),this._httpClient=e,this._sanitizer=n,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}return _(t,[{key:"addSvgIcon",value:function(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}},{key:"addSvgIconLiteral",value:function(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}},{key:"addSvgIconInNamespace",value:function(t,e,n,r){return this._addSvgIconConfig(t,e,new $y(n,null,r))}},{key:"addSvgIconResolver",value:function(t){return this._resolvers.push(t),this}},{key:"addSvgIconLiteralInNamespace",value:function(t,e,n,r){var i=this._sanitizer.sanitize(ei.HTML,n);if(!i)throw Zy(n);return this._addSvgIconConfig(t,e,new $y("",i,r))}},{key:"addSvgIconSet",value:function(t,e){return this.addSvgIconSetInNamespace("",t,e)}},{key:"addSvgIconSetLiteral",value:function(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}},{key:"addSvgIconSetInNamespace",value:function(t,e,n){return this._addSvgIconSetConfig(t,new $y(e,null,n))}},{key:"addSvgIconSetLiteralInNamespace",value:function(t,e,n){var r=this._sanitizer.sanitize(ei.HTML,e);if(!r)throw Zy(e);return this._addSvgIconSetConfig(t,new $y("",r,n))}},{key:"registerFontClassAlias",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._fontCssClassesByAlias.set(t,e),this}},{key:"classNameForFontAlias",value:function(t){return this._fontCssClassesByAlias.get(t)||t}},{key:"setDefaultFontSetClass",value:function(t){return this._defaultFontSetClass=t,this}},{key:"getDefaultFontSetClass",value:function(){return this._defaultFontSetClass}},{key:"getSvgIconFromUrl",value:function(t){var e=this,n=this._sanitizer.sanitize(ei.RESOURCE_URL,t);if(!n)throw Qy(t);var r=this._cachedIconsByUrl.get(n);return r?jf(tm(r)):this._loadSvgIconFromConfig(new $y(t,null)).pipe(Cp(function(t){return e._cachedIconsByUrl.set(n,t)}),G(function(t){return tm(t)}))}},{key:"getNamedSvgIcon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=em(e,t),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t))return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);var i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):Cg(Xy(n))}},{key:"ngOnDestroy",value:function(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}},{key:"_getSvgFromConfig",value:function(t){return t.svgText?jf(tm(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(G(function(t){return tm(t)}))}},{key:"_getSvgFromIconSetConfigs",value:function(t,e){var n=this,r=this._extractIconWithNameFromAnySet(t,e);return r?jf(r):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(x(r))return uy(r,null);if(k(r)&&Object.getPrototypeOf(r)===Object.prototype){var o=Object.keys(r);return uy(o.map(function(t){return r[t]}),o)}}if("function"==typeof e[e.length-1]){var a=e.pop();return uy(e=1===e.length&&x(e[0])?e[0]:e,null).pipe(G(function(t){return a.apply(void 0,i(t))}))}return uy(e,null)}(e.filter(function(t){return!t.svgText}).map(function(t){return n._loadSvgIconSetFromConfig(t).pipe(ly(function(e){var r=n._sanitizer.sanitize(ei.RESOURCE_URL,t.url);return n._errorHandler.handleError(new Error("Loading icon set URL: ".concat(r," failed: ").concat(e.message))),jf(null)}))})).pipe(G(function(){var r=n._extractIconWithNameFromAnySet(t,e);if(!r)throw Xy(t);return r}))}},{key:"_extractIconWithNameFromAnySet",value:function(t,e){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){var i=this._svgElementFromConfig(r),o=this._extractSvgIconFromSet(i,t,r.options);if(o)return o}}return null}},{key:"_loadSvgIconFromConfig",value:function(t){var e=this;return this._fetchIcon(t).pipe(Cp(function(e){return t.svgText=e}),G(function(){return e._svgElementFromConfig(t)}))}},{key:"_loadSvgIconSetFromConfig",value:function(t){return t.svgText?jf(null):this._fetchIcon(t).pipe(Cp(function(e){return t.svgText=e}))}},{key:"_extractSvgIconFromSet",value:function(t,e,n){var r=t.querySelector('[id="'.concat(e,'"]'));if(!r)return null;var i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);var o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}},{key:"_svgElementFromString",value:function(t){var e=this._document.createElement("DIV");e.innerHTML=t;var n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}},{key:"_toSvgElement",value:function(t){for(var e=this._svgElementFromString("<svg></svg>"),n=t.attributes,r=0;r<n.length;r++){var i=n[r],o=i.name,a=i.value;"id"!==o&&e.setAttribute(o,a)}for(var s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[s].cloneNode(!0));return e}},{key:"_setSvgAttributes",value:function(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}},{key:"_fetchIcon",value:function(t){var e,n=this,r=t.url,i=t.options,o=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error('Cannot fetch icon from URL "'.concat(r,'".'));var a=this._sanitizer.sanitize(ei.RESOURCE_URL,r);if(!a)throw Qy(r);var s=this._inProgressUrlFetches.get(a);if(s)return s;var u=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(dy(function(){return n._inProgressUrlFetches.delete(a)}),vt());return this._inProgressUrlFetches.set(a,u),u}},{key:"_addSvgIconConfig",value:function(t,e,n){return this._svgIconConfigs.set(em(t,e),n),this}},{key:"_addSvgIconSetConfig",value:function(t,e){var n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}},{key:"_svgElementFromConfig",value:function(t){if(!t.svgElement){var e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}},{key:"_getIconConfigFromResolvers",value:function(t,e){for(var n=0;n<this._resolvers.length;n++){var r=this._resolvers[n](e,t);if(r)return(i=r).url&&i.options?new $y(r.url,null,r.options):new $y(r,null)}var i}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Ly,8),vr(Xc),vr(Fl,8),vr(ui))},t.\u0275prov=Pt({factory:function(){return new t(vr(Ly,8),vr(Xc),vr(Fl,8),vr(ui))},token:t,providedIn:"root"}),t}();function tm(t){return t.cloneNode(!0)}function em(t,e){return t+":"+e}var nm=eg(function t(e){m(this,t),this._elementRef=e}),rm=new Jn("mat-icon-location",{providedIn:"root",factory:function(){var t=gr(Fl),e=t?t.location:null;return{getPathname:function(){return e?e.pathname+e.search:""}}}}),im=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],om=im.map(function(t){return"[".concat(t,"]")}).join(", "),am=/^url\(['"]?#(.*?)['"]?\)$/,sm=function(){var t=function(t){h(n,t);var e=f(n);function n(t,r,i,o,a){var s;return m(this,n),(s=e.call(this,t))._iconRegistry=r,s._location=o,s._errorHandler=a,s._inline=!1,s._currentIconFetch=E.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true"),s}return _(n,[{key:"inline",get:function(){return this._inline},set:function(t){this._inline=Tf(t)}},{key:"svgIcon",get:function(){return this._svgIcon},set:function(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}},{key:"fontSet",get:function(){return this._fontSet},set:function(t){var e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}},{key:"fontIcon",get:function(){return this._fontIcon},set:function(t){var e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}},{key:"_splitIconName",value:function(t){if(!t)return["",""];var e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error('Invalid icon name: "'.concat(t,'"'))}}},{key:"ngOnInit",value:function(){this._updateFontIconClasses()}},{key:"ngAfterViewChecked",value:function(){var t=this._elementsWithExternalReferences;if(t&&t.size){var e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}},{key:"ngOnDestroy",value:function(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}},{key:"_usingFontIcon",value:function(){return!this.svgIcon}},{key:"_setSvgElement",value:function(t){this._clearSvgElement();for(var e=t.querySelectorAll("style"),n=0;n<e.length;n++)e[n].textContent+=" ";var r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}},{key:"_clearSvgElement",value:function(){var t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){var n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}},{key:"_updateFontIconClasses",value:function(){if(this._usingFontIcon()){var t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}}},{key:"_cleanupFontValue",value:function(t){return"string"==typeof t?t.trim().split(" ")[0]:t}},{key:"_prependPathToReferences",value:function(t){var e=this._elementsWithExternalReferences;e&&e.forEach(function(e,n){e.forEach(function(e){n.setAttribute(e.name,"url('".concat(t,"#").concat(e.value,"')"))})})}},{key:"_cacheChildrenWithExternalReferences",value:function(t){for(var e=t.querySelectorAll(om),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map,r=function(t){im.forEach(function(r){var i=e[t],o=i.getAttribute(r),a=o?o.match(am):null;if(a){var s=n.get(i);s||(s=[],n.set(i,s)),s.push({name:r,value:a[1]})}})},i=0;i<e.length;i++)r(i)}},{key:"_updateSvgIcon",value:function(t){var e=this;if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){var n=r(this._splitIconName(t),2),i=n[0],o=n[1];i&&(this._svgNamespace=i),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,i).pipe(Uf(1)).subscribe(function(t){return e._setSvgElement(t)},function(t){e._errorHandler.handleError(new Error("Error retrieving icon ".concat(i,":").concat(o,"! ").concat(t.message)))})}}}]),n}(nm);return t.\u0275fac=function(e){return new(e||t)(Sa(_s),Sa(Jy),Zn("aria-hidden"),Sa(rm),Sa(ui))},t.\u0275cmp=oe({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(wa("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),Wa("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ca],ngContentSelectors:Ky,decls:1,vars:0,template:function(t,e){1&t&&(Va(),Ga(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t}(),um=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[tg],tg]}),t}(),lm=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[tg],tg]}),t}(),cm=["*"],hm=function(t){return function(t){h(n,t);var e=f(n);function n(){var t;m(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._disabled=!1,t}return _(n,[{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Tf(t)}}]),n}(t)}(function(t){h(n,t);var e=f(n);function n(){var t;m(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._disableRipple=!1,t}return _(n,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(t){this._disableRipple=Tf(t)}}]),n}(function t(){m(this,t)})),dm=new Jn("MatNavList"),fm=function(){var t,e=function(t){h(n,t);var e=f(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments))._stateChanges=new B,t}return _(n,[{key:"ngOnChanges",value:function(){this._stateChanges.next()}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),n}(hm);return e.\u0275fac=function(n){return(t||(t=Xn(e)))(n||e)},e.\u0275cmp=oe({type:e,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[fs([{provide:dm,useExisting:e}]),ca,ke],ngContentSelectors:cm,decls:1,vars:0,template:function(t,e){1&t&&(Va(),Ga(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),e}(),pm=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[ng,rg,tg,ig,vc],ng,tg,ig,lm]}),t}(),vm=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}();function gm(t){return new I(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Z(n):Gf()).subscribe(e)})}function ym(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new mm(t,e,n))}}var mm=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new bm(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),bm=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return _(n,[{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}},{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}}]),n}(P);function _m(t){return function(e){return 0===t?Gf():e.lift(new wm(t))}}var wm=function(){function t(e){if(m(this,t),this.total=e,this.total<0)throw new zf}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new xm(t,this.total))}}]),t}(),xm=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return _(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(P);function km(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cm;return function(e){return e.lift(new Sm(t))}}var Sm=function(){function t(e){m(this,t),this.errorFactory=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Em(t,this.errorFactory))}}]),t}(),Em=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return _(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}]),n}(P);function Cm(){return new vm}function Tm(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new Pm(t))}}var Pm=function(){function t(e){m(this,t),this.defaultValue=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Am(t,this.defaultValue))}}]),t}(),Am=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return _(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(P);function Dm(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?xp(function(e,n){return t(e,n,r)}):O,Uf(1),n?Tm(e):km(function(){return new vm}))}}var Om=function t(e,n){m(this,t),this.id=e,this.url=n},Mm=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return m(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=a,i}return _(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Om),Im=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return _(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Om),Lm=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t,r)).reason=i,o}return _(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Om),Nm=function(t){h(n,t);var e=f(n);function n(t,r,i){var o;return m(this,n),(o=e.call(this,t,r)).error=i,o}return _(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Om),Rm=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Om),Fm=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Om),jm=function(t){h(n,t);var e=f(n);function n(t,r,i,o,a){var s;return m(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s.shouldActivate=a,s}return _(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Om),Bm=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Om),zm=function(t){h(n,t);var e=f(n);function n(t,r,i,o){var a;return m(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Om),Vm=function(){function t(e){m(this,t),this.route=e}return _(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Gm=function(){function t(e){m(this,t),this.route=e}return _(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),Um=function(){function t(e){m(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Hm=function(){function t(e){m(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),qm=function(){function t(e){m(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Wm=function(){function t(e){m(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Ym=function(){function t(e,n,r){m(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return _(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),Km=function(){function t(e){m(this,t),this.params=e||{}}return _(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function Xm(t){return new Km(t)}function Qm(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Zm(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function $m(t,e){var n,r=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!Jm(t[n=r[o]],e[n]))return!1;return!0}function Jm(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;var n=i(t).sort(),r=i(e).sort();return n.every(function(t,e){return r[e]===t})}return t===e}function tb(t){return Array.prototype.concat.apply([],t)}function eb(t){return t.length>0?t[t.length-1]:null}function nb(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function rb(t){return Ia(t)?t:Oa(t)?Z(Promise.resolve(t)):jf(t)}var ib={exact:function t(e,n,r){if(!fb(e.segments,n.segments))return!1;if(!lb(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:sb},ob={exact:function(t,e){return $m(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return Jm(t[n],e[n])})},ignored:function(){return!0}};function ab(t,e,n){return ib[n.paths](t.root,e.root,n.matrixParams)&&ob[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function sb(t,e,n){return ub(t,e,e.segments,n)}function ub(t,e,n,r){if(t.segments.length>n.length){var i=t.segments.slice(0,n.length);return!!fb(i,n)&&!e.hasChildren()&&!!lb(i,n,r)}if(t.segments.length===n.length){if(!fb(t.segments,n))return!1;if(!lb(t.segments,n,r))return!1;for(var o in e.children){if(!t.children[o])return!1;if(!sb(t.children[o],e.children[o],r))return!1}return!0}var a=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!fb(t.segments,a)&&!!lb(t.segments,a,r)&&!!t.children.primary&&ub(t.children.primary,e,s,r)}function lb(t,e,n){return e.every(function(e,r){return ob[n](t[r].parameters,e.parameters)})}var cb=function(){function t(e,n,r){m(this,t),this.root=e,this.queryParams=n,this.fragment=r}return _(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Xm(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return gb.serialize(this)}}]),t}(),hb=function(){function t(e,n){var r=this;m(this,t),this.segments=e,this.children=n,this.parent=null,nb(n,function(t,e){return t.parent=r})}return _(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return yb(this)}}]),t}(),db=function(){function t(e,n){m(this,t),this.path=e,this.parameters=n}return _(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Xm(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Sb(this)}}]),t}();function fb(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}var pb=function t(){m(this,t)},vb=function(){function t(){m(this,t)}return _(t,[{key:"parse",value:function(t){var e=new Ab(t);return new cb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){var e,n,r;return"/".concat(mb(t.root,!0)).concat((n=t.queryParams,r=Object.keys(n).map(function(t){var e=n[t];return Array.isArray(e)?e.map(function(e){return"".concat(_b(t),"=").concat(_b(e))}).join("&"):"".concat(_b(t),"=").concat(_b(e))}),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof t.fragment?"#".concat((e=t.fragment,encodeURI(e))):"")}}]),t}(),gb=new vb;function yb(t){return t.segments.map(function(t){return Sb(t)}).join("/")}function mb(t,e){if(!t.hasChildren())return yb(t);if(e){var n=t.children.primary?mb(t.children.primary,!1):"",r=[];return nb(t.children,function(t,e){"primary"!==e&&r.push("".concat(e,":").concat(mb(t,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(t,e){var n=[];return nb(t.children,function(t,r){"primary"===r&&(n=n.concat(e(t,r)))}),nb(t.children,function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,function(e,n){return"primary"===n?[mb(t.children.primary,!1)]:["".concat(n,":").concat(mb(e,!1))]});return 1===Object.keys(t.children).length&&null!=t.children.primary?"".concat(yb(t),"/").concat(i[0]):"".concat(yb(t),"/(").concat(i.join("//"),")")}function bb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _b(t){return bb(t).replace(/%3B/gi,";")}function wb(t){return bb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xb(t){return decodeURIComponent(t)}function kb(t){return xb(t.replace(/\+/g,"%20"))}function Sb(t){return"".concat(wb(t.path)).concat((e=t.parameters,Object.keys(e).map(function(t){return";".concat(wb(t),"=").concat(wb(e[t]))}).join("")));var e}var Eb=/^[^\/()?;=#]+/;function Cb(t){var e=t.match(Eb);return e?e[0]:""}var Tb=/^[^=?&#]+/,Pb=/^[^?&#]+/,Ab=function(){function t(e){m(this,t),this.url=e,this.remaining=e}return _(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hb([],{}):new hb([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new hb(t,e)),n}},{key:"parseSegment",value:function(){var t=Cb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new db(xb(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=Cb(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Cb(this.remaining);r&&(n=r,this.capture(n))}t[xb(e)]=xb(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(Tb);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(Pb);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=kb(e),o=kb(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Cb(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new hb([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),Db=function(){function t(e){m(this,t),this._root=e}return _(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=Ob(t,this._root);return e?e.children.map(function(t){return t.value}):[]}},{key:"firstChild",value:function(t){var e=Ob(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=Mb(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})}},{key:"pathFromRoot",value:function(t){return Mb(t,this._root).map(function(t){return t.value})}}]),t}();function Ob(t,e){if(t===e.value)return e;var n,r=o(e.children);try{for(r.s();!(n=r.n()).done;){var i=Ob(t,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function Mb(t,e){if(t===e.value)return[e];var n,r=o(e.children);try{for(r.s();!(n=r.n()).done;){var i=Mb(t,n.value);if(i.length)return i.unshift(e),i}}catch(a){r.e(a)}finally{r.f()}return[]}var Ib=function(){function t(e,n){m(this,t),this.value=e,this.children=n}return _(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function Lb(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Nb=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).snapshot=r,Vb(v(i),t),i}return _(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Db);function Rb(t,e){var n=function(t,e){var n=new Bb([],{},{},"",{},"primary",e,null,t.root,-1,{});return new zb("",new Ib(n,[]))}(t,e),r=new wp([new db("",{})]),i=new wp({}),o=new wp({}),a=new wp({}),s=new wp(""),u=new Fb(r,i,a,s,o,"primary",e,n.root);return u.snapshot=n.root,new Nb(new Ib(u,[]),n)}var Fb=function(){function t(e,n,r,i,o,a,s,u){m(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(G(function(t){return Xm(t)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(G(function(t){return Xm(t)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function jb(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Bb=function(){function t(e,n,r,i,o,a,s,u,l,c,h){m(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}return _(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Xm(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Xm(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(t){return t.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),t}(),zb=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,r)).url=t,Vb(v(i),r),i}return _(n,[{key:"toString",value:function(){return Gb(this._root)}}]),n}(Db);function Vb(t,e){e.value._routerState=t,e.children.forEach(function(e){return Vb(t,e)})}function Gb(t){var e=t.children.length>0?" { ".concat(t.children.map(Gb).join(", ")," } "):"";return"".concat(t.value).concat(e)}function Ub(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$m(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),$m(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!$m(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),$m(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Hb(t,e){var n,r;return $m(t.params,e.params)&&fb(n=t.url,r=e.url)&&n.every(function(t,e){return $m(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||Hb(t.parent,e.parent))}function qb(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=e.value;var i=function(t,e,n){return e.children.map(function(e){var r,i=o(n.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(t.shouldReuseRoute(e.value,a.value.snapshot))return qb(t,e,a)}}catch(s){i.e(s)}finally{i.f()}return qb(t,e)})}(t,e,n);return new Ib(r,i)}if(t.shouldAttach(e.value)){var a=t.retrieve(e.value);if(null!==a){var s=a.route;return Wb(e,s),s}}var u,l=new Fb(new wp((u=e.value).url),new wp(u.params),new wp(u.queryParams),new wp(u.fragment),new wp(u.data),u.outlet,u.component,u),c=e.children.map(function(e){return qb(t,e)});return new Ib(l,c)}function Wb(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)Wb(t.children[n],e.children[n])}function Yb(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Kb(t){return"object"==typeof t&&null!=t&&t.outlets}function Xb(t,e,n,r,i){var o={};return r&&nb(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return"".concat(t)}):"".concat(t)}),new cb(n.root===t?e:Qb(n.root,t,e),o,i)}function Qb(t,e,n){var r={};return nb(t.children,function(t,i){r[i]=t===e?n:Qb(t,e,n)}),new hb(t.segments,r)}var Zb=function(){function t(e,n,r){if(m(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Yb(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(Kb);if(i&&i!==eb(r))throw new Error("{outlets:{}} has to be the last command")}return _(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),$b=function t(e,n,r){m(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function Jb(t,e,n){if(t||(t=new hb([],{})),0===t.segments.length&&t.hasChildren())return t_(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=n[r];if(Kb(s))break;var u="".concat(s),l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!i_(u,l,a))return o;r+=2}else{if(!i_(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new hb(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new hb(t.segments.slice(r.pathIndex),t.children),t_(o,0,i)}return r.match&&0===i.length?new hb(t.segments,{}):r.match&&!t.hasChildren()?e_(t,e,n):r.match?t_(t,0,i):e_(t,e,n)}function t_(t,e,n){if(0===n.length)return new hb(t.segments,{});var r=function(t){return Kb(t[0])?t[0].outlets:{primary:t}}(n),i={};return nb(r,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Jb(t.children[r],e,n))}),nb(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new hb(t.segments,i)}function e_(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){var o=n[i];if(Kb(o)){var a=n_(o.outlets);return new hb(r,a)}if(0===i&&Yb(n[0]))r.push(new db(t.segments[e].path,r_(n[0]))),i++;else{var s=Kb(o)?o.outlets.primary:"".concat(o),u=i<n.length-1?n[i+1]:null;s&&u&&Yb(u)?(r.push(new db(s,r_(u))),i+=2):(r.push(new db(s,{})),i++)}}return new hb(r,{})}function n_(t){var e={};return nb(t,function(t,n){"string"==typeof t&&(t=[t]),null!==t&&(e[n]=e_(new hb([],{}),0,t))}),e}function r_(t){var e={};return nb(t,function(t,n){return e[n]="".concat(t)}),e}function i_(t,e,n){return t==n.path&&$m(e,n.parameters)}var o_=function(){function t(e,n,r,i){m(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return _(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ub(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=Lb(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),nb(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){for(var n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Lb(t),o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];this.deactivateRouteAndItsChildren(i[s],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=Lb(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Wm(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Hm(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(Ub(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),a_(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),l=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=l,a.outlet&&a.outlet.activateWith(r,l),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function a_(t){Ub(t.value),t.children.forEach(a_)}var s_=function t(e,n){m(this,t),this.routes=e,this.module=n};function u_(t){return"function"==typeof t}function l_(t){return t instanceof cb}var c_=Symbol("INITIAL_VALUE");function h_(){return wg(function(t){return Nf(t.map(function(t){return t.pipe(Uf(1),np(c_))})).pipe(ym(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==c_)return t;if(r===c_&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||l_(r))return r}return t},t)},c_),xp(function(t){return t!==c_}),G(function(t){return l_(t)?t:!0===t}),Uf(1))})}var d_=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Aa(0,"router-outlet")},directives:function(){return[ow]},encapsulation:2}),t}();function f_(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];p_(r,v_(e,r))}}function p_(t,e){t.children&&f_(t.children,e)}function v_(t,e){return e?t||e.path?t&&!e.path?"".concat(t,"/"):!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function g_(t){var e=t.children&&t.children.map(g_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=d_),n}function y_(t){return t.outlet||"primary"}function m_(t,e){var n=t.filter(function(t){return y_(t)===e});return n.push.apply(n,i(t.filter(function(t){return y_(t)!==e}))),n}var b_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function __(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},b_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(e.matcher||Zm)(n,t,e);if(!i)return Object.assign({},b_);var o={};nb(i.posParams,function(t,e){o[e]=t.path});var a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function w_(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(t,e,n){return n.some(function(n){return x_(t,e,n)&&"primary"!==y_(n)})}(t,n,r)){var a=new hb(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var a,s=o(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(""===u.path&&"primary"!==y_(u)){var l=new hb([],{});l._sourceSegment=t,l._segmentIndexShift=e.length,i[y_(u)]=l}}}catch(c){s.e(c)}finally{s.f()}return i}(t,e,r,new hb(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(function(n){return x_(t,e,n)})}(t,n,r)){var s=new hb(t.segments,function(t,e,n,r,i,a){var s,u={},l=o(r);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(x_(t,n,c)&&!i[y_(c)]){var h=new hb([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===a?t.segments.length:e.length,u[y_(c)]=h}}}catch(d){l.e(d)}finally{l.f()}return Object.assign(Object.assign({},i),u)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new hb(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function x_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function k_(t,e,n,r){return!!(y_(t)===r||"primary"!==r&&x_(e,n,t))&&("**"===t.path||__(e,t,n).matched)}function S_(t,e,n){return 0===e.length&&!t.children[n]}var E_=function t(e){m(this,t),this.segmentGroup=e||null},C_=function t(e){m(this,t),this.urlTree=e};function T_(t){return new I(function(e){return e.error(new E_(t))})}function P_(t){return new I(function(e){return e.error(new C_(t))})}function A_(t){return new I(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))})}var D_=function(){function t(e,n,r,i,o){m(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get($s)}return _(t,[{key:"apply",value:function(){var t=this,e=w_(this.urlTree.root,[],[],this.config).segmentGroup,n=new hb(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,"primary").pipe(G(function(e){return t.createUrlTree(O_(e),t.urlTree.queryParams,t.urlTree.fragment)})).pipe(ly(function(e){if(e instanceof C_)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof E_)throw t.noMatchError(e);throw e}))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(G(function(n){return e.createUrlTree(O_(n),t.queryParams,t.fragment)})).pipe(ly(function(t){if(t instanceof E_)throw e.noMatchError(t);throw t}))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new hb([],{primary:t}):t;return new cb(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(G(function(t){return new hb([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){for(var r=this,i=[],o=0,a=Object.keys(n.children);o<a.length;o++){var s=a[o];"primary"===s?i.unshift(s):i.push(s)}return Z(i).pipe(vy(function(i){var o=n.children[i],a=m_(e,i);return r.expandSegmentGroup(t,a,o,i).pipe(G(function(t){return{segment:t,outlet:i}}))}),ym(function(t,e){return t[e.outlet]=e.segment,t},{}),function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?xp(function(e,n){return t(e,n,r)}):O,_m(1),n?Tm(e):km(function(){return new vm}))}}())}},{key:"expandSegment",value:function(t,e,n,r,i,o){var a=this;return Z(n).pipe(vy(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ly(function(t){if(t instanceof E_)return jf(null);throw t}))}),Dm(function(t){return!!t}),ly(function(t,n){if(t instanceof vm||"EmptyError"===t.name){if(S_(e,r,i))return jf(new hb([],{}));throw new E_(e)}throw t}))}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return k_(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):T_(e):T_(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?P_(o):this.lineralizeSegments(n,o).pipe(et(function(n){var o=new hb(n,{});return i.expandSegment(t,o,e,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=__(e,r,i),u=s.matched,l=s.consumedSegments,c=s.lastChild,h=s.positionalParamSegments;if(!u)return T_(e);var d=this.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?P_(d):this.lineralizeSegments(r,d).pipe(et(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r,i){var o=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?jf(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(G(function(t){return n._loadedConfig=t,new hb(r,{})})):jf(new hb(r,{}));var a=__(e,n,r),s=a.matched,u=a.consumedSegments,l=a.lastChild;if(!s)return T_(e);var c=r.slice(l);return this.getChildConfig(t,n,r).pipe(et(function(t){var r=t.module,a=t.routes,s=w_(e,u,c,a),l=s.segmentGroup,h=s.slicedSegments,d=new hb(l.segments,l.children);if(0===h.length&&d.hasChildren())return o.expandChildren(r,a,d).pipe(G(function(t){return new hb(u,t)}));if(0===a.length&&0===h.length)return jf(new hb(u,{}));var f=y_(n)===i;return o.expandSegment(r,d,a,h,f?"primary":i,!0).pipe(G(function(t){return new hb(u.concat(t.segments),t.children)}))}))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?jf(new s_(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?jf(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(et(function(n){return n?r.configLoader.load(t.injector,e).pipe(G(function(t){return e._loadedConfig=t,t})):function(t){return new I(function(e){return e.error(Qm("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))})}(e)})):jf(new s_([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r=this,i=e.canLoad;return i&&0!==i.length?jf(i.map(function(r){var i,o=t.get(r);if(function(t){return t&&u_(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!u_(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return rb(i)})).pipe(h_(),Cp(function(t){if(l_(t)){var e=Qm('Redirecting to "'.concat(r.urlSerializer.serialize(t),'"'));throw e.url=t,e}}),G(function(t){return!0===t})):jf(!0)}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return jf(n);if(r.numberOfChildren>1||!r.children.primary)return A_(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new cb(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return nb(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return nb(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new hb(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=o(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===t.path)return e.splice(r),a;r++}}catch(s){i.e(s)}finally{i.f()}return t}}]),t}();function O_(t){for(var e={},n=0,r=Object.keys(t.children);n<r.length;n++){var i=r[n],o=O_(t.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new hb(t.segments.concat(e.segments),e.children)}return t}(new hb(t.segments,e))}var M_=function t(e){m(this,t),this.path=e,this.route=this.path[this.path.length-1]},I_=function t(e,n){m(this,t),this.component=e,this.route=n};function L_(t,e,n){var r=t._root;return R_(r,e?e._root:null,n,[r.value])}function N_(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function R_(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Lb(e);return t.children.forEach(function(t){!function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fb(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fb(t.url,e.url)||!$m(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hb(t,e)||!$m(t.queryParams,e.queryParams);case"paramsChange":default:return!Hb(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new M_(r)):(o.data=a.data,o._resolvedData=a._resolvedData),R_(t,e,o.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new I_(s.outlet.component,a))}else a&&F_(e,s,i),i.canActivateChecks.push(new M_(r)),R_(t,null,o.component?s?s.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),nb(o,function(t,e){return F_(t,n.getContext(e),i)}),i}function F_(t,e,n){var r=Lb(t),i=t.value;nb(r,function(t,r){F_(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new I_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var j_=function t(){m(this,t)};function B_(t){return new I(function(e){return e.error(t)})}var z_=function(){function t(e,n,r,i,o,a){m(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _(t,[{key:"recognize",value:function(){var t=w_(this.urlTree.root,[],[],this.config.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;var n=new Bb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ib(n,e),i=new zb(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=jb(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){for(var n=[],r=0,o=Object.keys(e.children);r<o.length;r++){var a=o[r],s=e.children[a],u=m_(t,a),l=this.processSegmentGroup(u,s,a);if(null===l)return null;n.push.apply(n,i(l))}var c=V_(n);return c.sort(function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)}),c}},{key:"processSegment",value:function(t,e,n,r){var i,a=o(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,u=this.processSegmentAgainstRoute(s,e,n,r);if(null!==u)return u}}catch(l){a.e(l)}finally{a.f()}return S_(e,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo||!k_(t,e,n,r))return null;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?eb(n).parameters:{};i=new Bb(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,H_(t),y_(t),t.component,t,G_(e),U_(e)+n.length,q_(t))}else{var u=__(e,t,n);if(!u.matched)return null;o=u.consumedSegments,a=n.slice(u.lastChild),i=new Bb(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,H_(t),y_(t),t.component,t,G_(e),U_(e)+o.length,q_(t))}var l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),c=w_(e,o,a,l.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution),h=c.segmentGroup,d=c.slicedSegments;if(0===d.length&&h.hasChildren()){var f=this.processChildren(l,h);return null===f?null:[new Ib(i,f)]}if(0===l.length&&0===d.length)return[new Ib(i,[])];var p=y_(t)===r,v=this.processSegment(l,h,d,p?"primary":r);return null===v?null:[new Ib(i,v)]}}]),t}();function V_(t){var e,n=[],r=new Set,a=o(t);try{var s=function(){var t,o=e.value;if(!function(t){var e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}(o))return n.push(o),"continue";var a=n.find(function(t){return o.value.routeConfig===t.value.routeConfig});void 0!==a?((t=a.children).push.apply(t,i(o.children)),r.add(a)):n.push(o)};for(a.s();!(e=a.n()).done;)s()}catch(d){a.e(d)}finally{a.f()}var u,l=o(r);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=V_(c.children);n.push(new Ib(c.value,h))}}catch(d){l.e(d)}finally{l.f()}return n.filter(function(t){return!r.has(t)})}function G_(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function U_(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function H_(t){return t.data||{}}function q_(t){return t.resolve||{}}function W_(t){return wg(function(e){var n=t(e);return n?Z(n).pipe(G(function(){return e})):jf(e)})}var Y_=function(t){h(n,t);var e=f(n);function n(){return m(this,n),e.apply(this,arguments)}return n}(function(){function t(){m(this,t)}return _(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}()),K_=new Jn("ROUTES"),X_=function(){function t(e,n,r,i){m(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _(t,[{key:"load",value:function(t,e){var n=this;if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);var r=this.loadModuleFactory(e.loadChildren).pipe(G(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new s_(tb(i.injector.get(K_,void 0,jt.Self|jt.Optional)).map(g_),i)}),ly(function(t){throw e._loader$=void 0,t}));return e._loader$=new ht(r,function(){return new B}).pipe(st()),e._loader$}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Z(this.loader.load(t)):rb(t()).pipe(et(function(t){return t instanceof Js?jf(t):Z(e.compiler.compileModuleAsync(t))}))}}]),t}(),Q_=function t(){m(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new Z_,this.attachRef=null},Z_=function(){function t(){m(this,t),this.contexts=new Map}return _(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new Q_,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),$_=function(){function t(){m(this,t)}return _(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function J_(t){throw t}function tw(t,e,n){return e.parse("/")}function ew(t,e){return jf(null)}var nw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},iw=function(){var t=function(){function t(e,n,r,i,o,a,s,u){var l=this;m(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new B,this.errorHandler=J_,this.malformedUriErrorHandler=tw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ew,afterPreactivation:ew},this.urlHandlingStrategy=new $_,this.routeReuseStrategy=new Y_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get($s),this.console=o.get(qu);var c=o.get(il);this.isNgZoneEnabled=c instanceof il&&il.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new cb(new hb([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new X_(a,s,function(t){return l.triggerEvent(new Vm(t))},function(t){return l.triggerEvent(new Gm(t))}),this.routerState=Rb(this.currentUrlTree,this.rootComponentType),this.transitions=new wp({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(xp(function(t){return 0!==t.id}),G(function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),wg(function(t){var r,i,o,a=!1,s=!1;return jf(t).pipe(Cp(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wg(function(t){var r=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||r)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return jf(t).pipe(wg(function(t){var r=e.transitions.getValue();return n.next(new Mm(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?Vf:Promise.resolve(t)}),function(t,e,n,r){return wg(function(i){return function(t,e,n,r,i){return new D_(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(G(function(t){return Object.assign(Object.assign({},i),{urlAfterRedirects:t})}))})}(e.ngModule.injector,e.configLoader,e.urlSerializer,e.config),Cp(function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,n,r,i,o){return et(function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var a=new z_(t,e,n,r,i,o).recognize();return null===a?B_(new j_):jf(a)}catch(s){return B_(s)}}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe(G(function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})}));var a})}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Cp(function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects);var r=new Rm(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(r&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var i=t.id,o=t.extractedUrl,a=t.source,s=t.restoredState,u=t.extras,l=new Mm(i,e.serializeUrl(o),a,s);n.next(l);var c=Rb(o,e.rootComponentType).snapshot;return jf(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:o,extras:Object.assign(Object.assign({},u),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Vf}),W_(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})}),Cp(function(t){var n=new Fm(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),G(function(t){return Object.assign(Object.assign({},t),{guards:L_(t.targetSnapshot,t.currentSnapshot,e.rootContexts)})}),function(t,e){return et(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?jf(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Z(t).pipe(et(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?jf(o.map(function(o){var a,s=N_(o,e,i);if(function(t){return t&&u_(t.canDeactivate)}(s))a=rb(s.canDeactivate(t,e,n,r));else{if(!u_(s))throw new Error("Invalid CanDeactivate guard");a=rb(s(t,e,n,r))}return a.pipe(Dm())})).pipe(h_()):jf(!0)}(t.component,t.route,n,e,r)}),Dm(function(t){return!0!==t},!0))}(s,r,i,t).pipe(et(function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Z(e).pipe(vy(function(e){return Bf(function(t,e){return null!==t&&e&&e(new Um(t)),jf(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new qm(t)),jf(!0)}(e.route,r),function(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return gm(function(){return jf(e.guards.map(function(i){var o,a=N_(i,e.node,n);if(function(t){return t&&u_(t.canActivateChild)}(a))o=rb(a.canActivateChild(r,t));else{if(!u_(a))throw new Error("Invalid CanActivateChild guard");o=rb(a(r,t))}return o.pipe(Dm())})).pipe(h_())})});return jf(i).pipe(h_())}(t,e.path,n),function(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?jf(r.map(function(r){return gm(function(){var i,o=N_(r,e,n);if(function(t){return t&&u_(t.canActivate)}(o))i=rb(o.canActivate(e,t));else{if(!u_(o))throw new Error("Invalid CanActivate guard");i=rb(o(e,t))}return i.pipe(Dm())})})).pipe(h_()):jf(!0)}(t,e.route,n))}),Dm(function(t){return!0!==t},!0))}(r,a,t,e):jf(n)}),G(function(t){return Object.assign(Object.assign({},n),{guardsResult:t})}))})}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),Cp(function(t){if(l_(t.guardsResult)){var n=Qm('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}var r=new jm(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(r)}),xp(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new Lm(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0}),W_(function(t){if(t.guards.canActivateChecks.length)return jf(t).pipe(Cp(function(t){var n=new Bm(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),wg(function(t){var r,i,o=!1;return jf(t).pipe((r=e.paramsInheritanceStrategy,i=e.ngModule.injector,et(function(t){var e=t.targetSnapshot,n=t.guards.canActivateChecks;if(!n.length)return jf(t);var o=0;return Z(n).pipe(vy(function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return jf({});var o={};return Z(i).pipe(et(function(i){return function(t,e,n,r){var i=N_(t,e,r);return rb(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Cp(function(t){o[i]=t}))}),_m(1),et(function(){return Object.keys(o).length===i.length?jf(o):Vf}))}(t._resolve,t,e,r).pipe(G(function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),jb(t,n).resolve),null}))}(t.route,e,r,i)}),Cp(function(){return o++}),_m(1),et(function(e){return o===n.length?jf(t):Vf}))})),Cp({next:function(){return o=!0},complete:function(){if(!o){var r=new Lm(t.id,e.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),t.resolve(!1)}}}))}),Cp(function(t){var n=new zm(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}))}),W_(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})}),G(function(t){var n=function(t,e,n){var r=qb(t,e._root,n?n._root:void 0);return new Nb(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})}),Cp(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(r=e.rootContexts,i=e.routeReuseStrategy,o=function(t){return e.triggerEvent(t)},G(function(t){return new o_(i,t.targetRouterState,t.currentRouterState,o).activate(r),t})),Cp({next:function(){a=!0},complete:function(){a=!0}}),dy(function(){if(!a&&!s){e.resetUrlToCurrentUrlTree();var r=new Lm(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null}),ly(function(r){if(s=!0,(u=r)&&u.ngNavigationCancelingError){var i=l_(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new Lm(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout(function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new Nm(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(l){t.reject(l)}}var u;return Vf}))}))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.extractLocationChangeInfoFromEvent(e);t.shouldScheduleNavigation(t.lastLocationChangeInfo,n)&&setTimeout(function(){var e=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var a=Object.assign({},r);delete a.navigationId,0!==Object.keys(a).length&&(o.state=a)}t.scheduleNavigation(i,e,r,o)},0),t.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(t,e){if(!t)return!0;var n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){f_(t),this.config=t.map(g_),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,o=e.fragment,a=e.queryParamsHandling,s=e.preserveFragment,u=n||this.routerState.root,l=s?this.currentUrlTree.fragment:o,c=null;switch(a){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,o){if(0===n.length)return Xb(e.root,e.root,e,r,o);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Zb(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,o){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return nb(r.outlets,function(t,e){a[e]="string"==typeof t?t.split("/"):t}),[].concat(i(t),[{outlets:a}])}if(r.segmentPath)return[].concat(i(t),[r.segmentPath])}return"string"!=typeof r?[].concat(i(t),[r]):0===o?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[].concat(i(t),[r])},[]);return new Zb(n,e,r)}(n);if(a.toRoot())return Xb(e.root,new hb([],{}),e,r,o);var s=function(t,e,n){if(t.isAbsolute)return new $b(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new $b(r,r===e.root,0)}var i=Yb(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new $b(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,e,t),u=s.processChildren?t_(s.segmentGroup,s.index,a.commands):Jb(s.segmentGroup,s.index,a.commands);return Xb(s.segmentGroup,u,e,r,o)}(u,this.currentUrlTree,t,c,null!=l?l:null)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=l_(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){var n;if(n=!0===e?Object.assign({},nw):!1===e?Object.assign({},rw):e,l_(t))return ab(this.currentUrlTree,t,n);var r=this.parseUrl(t);return ab(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new Im(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,e.resolve(!0)},function(e){t.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);var o,a,s,u=this.getTransition(),l="imperative"!==e&&"imperative"===(null==u?void 0:u.source),c=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===t.toString();if(l&&c)return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise(function(t,e){o=t,a=e});var h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(t){return Promise.reject(t)})}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(er),vr(pb),vr(Z_),vr($l),vr(ua),vr(Tl),vr(el),vr(void 0))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),ow=function(){var t=function(){function t(e,n,r,i,o){m(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new mu,this.deactivateEvents=new mu,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}return _(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new aw(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(Z_),Sa(eu),Sa(gs),Zn("name"),Sa(Hs))},t.\u0275dir=he({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t}(),aw=function(){function t(e,n,r){m(this,t),this.route=e,this.childContexts=n,this.parent=r}return _(t,[{key:"get",value:function(t,e){return t===Fb?this.route:t===Z_?this.childContexts:this.parent.get(t,e)}}]),t}(),sw=function t(){m(this,t)},uw=function(){function t(){m(this,t)}return _(t,[{key:"preload",value:function(t,e){return jf(null)}}]),t}(),lw=function(){var t=function(){function t(e,n,r,i,o){m(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new X_(n,r,function(t){return e.triggerEvent(new Vm(t))},function(t){return e.triggerEvent(new Gm(t))})}return _(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(xp(function(t){return t instanceof Im}),vy(function(){return t.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var t=this.injector.get($s);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=o(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var s=a._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(t,a)):a.children&&r.push(this.processRoutes(t,a.children))}}catch(u){i.e(u)}finally{i.f()}return Z(r).pipe(it(),G(function(t){}))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return(e._loadedConfig?jf(e._loadedConfig):n.loader.load(t.injector,e)).pipe(et(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(iw),vr(Tl),vr(el),vr(ua),vr(sw))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),cw=function(){var t=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};m(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Mm?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Im&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Ym&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Ym(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(iw),vr(mc),vr(void 0))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),hw=new Jn("ROUTER_CONFIGURATION"),dw=new Jn("ROUTER_FORROOT_GUARD"),fw=[$l,{provide:pb,useClass:vb},{provide:iw,useFactory:function(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,c=new iw(null,t,e,n,r,i,o,tb(a));return u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(s,c),s.enableTracing&&c.events.subscribe(function(t){var e,n;null===(e=console.group)||void 0===e||e.call(console,"Router Event: ".concat(t.constructor.name)),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),c},deps:[pb,Z_,$l,ua,Tl,el,K_,hw,[function(){return function t(){m(this,t)}}(),new wr],[function(){return function t(){m(this,t)}}(),new wr]]},Z_,{provide:Fb,useFactory:function(t){return t.routerState.root},deps:[iw]},{provide:Tl,useClass:Dl},lw,uw,function(){function t(){m(this,t)}return _(t,[{key:"preload",value:function(t,e){return e().pipe(ly(function(){return jf(null)}))}}]),t}(),{provide:hw,useValue:{enableTracing:!1}}];function pw(){return new bl("Router",iw)}var vw=function(){var t=function(){function t(e,n){m(this,t)}return _(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[fw,bw(e),{provide:dw,useFactory:mw,deps:[[iw,new wr,new xr]]},{provide:hw,useValue:n||{}},{provide:Yl,useFactory:yw,deps:[jl,[new _r(Xl),new wr],hw]},{provide:cw,useFactory:gw,deps:[iw,mc,hw]},{provide:sw,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:uw},{provide:bl,multi:!0,useFactory:pw},[_w,{provide:Fu,multi:!0,useFactory:ww,deps:[_w]},{provide:kw,useFactory:xw,deps:[_w]},{provide:Hu,multi:!0,useExisting:kw}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[bw(e)]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(dw,8),vr(iw,8))},t.\u0275mod=le({type:t}),t.\u0275inj=At({}),t}();function gw(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new cw(t,e,n)}function yw(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Zl(t,e):new Ql(t,e)}function mw(t){return"guarded"}function bw(t){return[{provide:tr,multi:!0,useValue:t},{provide:K_,multi:!0,useValue:t}]}var _w=function(){var t=function(){function t(e){m(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new B}return _(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(zl,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(iw),i=t.injector.get(hw);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),e(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return t.initNavigation?jf(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()):e(!0),n})}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(hw),n=this.injector.get(lw),r=this.injector.get(cw),i=this.injector.get(iw),o=this.injector.get(El);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(ua))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}();function ww(t){return t.appInitializer.bind(t)}function xw(t){return t.bootstrapListener.bind(t)}var kw=new Jn("Router Initializer"),Sw=[],Ew=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({imports:[[vw.forRoot(Sw)],vw]}),t}();function Cw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}function Tw(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Cw(o,r,i,a,s,"next",t)}function s(t){Cw(o,r,i,a,s,"throw",t)}a(void 0)})}}var Pw=a(6934),Aw=a.n(Pw),Dw={position:"absolute",left:"0",top:"0",userSelect:"none",outlineStyle:"none",width:"100%",height:"100%"};function Ow(t){t.stopPropagation()}function Mw(t){t.addEventListener("click",Ow),t.addEventListener("mousedown",Ow),t.addEventListener("mouseup",Ow),t.addEventListener("mousemove",Ow)}var Iw=function(){function t(e){m(this,t),this.adapter=e,this.updateOnRenderEnabled=!1}return _(t,[{key:"inVisibleBounds",value:function(t){return this.adapter.inVisibleBounds(t)}},{key:"updateOnRender",get:function(){return this.updateOnRenderEnabled},set:function(t){this.updateOnRenderEnabled!==t&&(this.updateOnRenderEnabled=t,t?this.cy.on("render",this.update):this.cy.off("render",void 0,this.update))}},{key:"cy",get:function(){return this.adapter.cy}},{key:"moveUp",value:function(){this.adapter.move(this,-1)}},{key:"moveDown",value:function(){this.adapter.move(this,1)}},{key:"moveBack",value:function(){this.adapter.move(this,Number.NEGATIVE_INFINITY)}},{key:"moveFront",value:function(){this.adapter.move(this,Number.POSITIVE_INFINITY)}},{key:"insertBefore",value:function(t,e){return this.adapter.insert("before",this,t,e)}},{key:"insertAfter",value:function(t,e){return this.adapter.insert("after",this,t,e)}}]),t}(),Lw=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).callbacks=[],i.update=function(){var t,e=o(i.callbacks);try{for(e.s();!(t=e.n()).done;){(0,t.value)(i.node)}}catch(n){e.e(n)}finally{e.f()}},i.root=r,Object.assign(i.root.style,Dw),i}return _(n,[{key:"visible",get:function(){return"none"!==this.root.style.display},set:function(t){this.visible!=t&&(this.root.style.display=t?"":"none")}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"callback",value:function(t){return this.callbacks.push(t),this.update(),this}},{key:"resize",value:function(){}},{key:"remove",value:function(){this.root.remove()}}]),n}(Iw),Nw="http://www.w3.org/2000/svg",Rw=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(i=e.call(this,t,r.createElementNS(Nw,"svg"))).type="svg",i.updateOnTransform=!1,i.root.__cy_layer=v(i),i.node=r.createElementNS(Nw,"g"),i.node.__cy_layer=v(i),i.root.appendChild(i.node),o.stopClicks&&Mw(i.node),i}return _(n,[{key:"setViewport",value:function(t,e,n){this.node.setAttribute("transform","translate(".concat(t,",").concat(e,")scale(").concat(n,")")),this.updateOnTransform&&this.update()}}]),n}(Lw),Fw=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(i=e.call(this,t,r.createElementNS(Nw,"svg"))).type="svg-static",i.root.__cy_layer=v(i),i.node=r.createElementNS(Nw,"g"),i.node.__cy_layer=v(i),i.root.appendChild(i.node),o.stopClicks&&Mw(i.node),i}return _(n,[{key:"setViewport",value:function(){}}]),n}(Lw),jw=function(t){h(n,t);var e=f(n);function n(t,r){var i,o,a,s,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(i=e.call(this,t)).callbacks=[],i.transform={tx:0,ty:0,zoom:1},i.update=function(){return i.draw()},i.node=r.createElement("canvas"),Object.assign(i.node.style,Dw),u.stopClicks&&Mw(i.node),i.pixelRatio=null!==(o=null!==(a=u.pixelRatio)&&void 0!==a?a:(null!==(s=window)&&void 0!==s?s:{}).devicePixelRatio)&&void 0!==o?o:1,i.ctx=i.node.getContext("2d",u),i.ctx.resetTransform(),i}return _(n,[{key:"visible",get:function(){return"none"!==this.node.style.display},set:function(t){this.node.style.display=t?"":"none"}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"root",get:function(){return this.node}},{key:"callback",value:function(t){return this.callbacks.push(t),this.update(),this}},{key:"clear",value:function(){var t=this.ctx,e=t.getTransform();t.resetTransform(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.setTransform(e)}},{key:"draw",value:function(){this.clear(),this.ctx.save(),this.ctx.resetTransform(),this.ctx.scale(this.pixelRatio,this.pixelRatio),this.ctx.translate(this.transform.tx,this.transform.ty),this.ctx.scale(this.transform.zoom,this.transform.zoom);var t,e=o(this.callbacks);try{for(e.s();!(t=e.n()).done;){(0,t.value)(this.ctx)}}catch(n){e.e(n)}finally{e.f()}this.ctx.restore()}},{key:"resize",value:function(t,e){this.node.width=t*this.pixelRatio,this.node.height=e*this.pixelRatio,this.update()}},{key:"setViewport",value:function(t,e,n){}},{key:"remove",value:function(){this.node.remove()}}]),n}(Iw),Bw=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(i=e.call(this,t,r,o)).type="canvas",i.node.__cy_layer=v(i),i}return _(n,[{key:"setViewport",value:function(t,e,n){this.transform.tx=t,this.transform.ty=e,this.transform.zoom=n,this.update()}}]),n}(jw),zw=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(i=e.call(this,t,r,o)).type="canvas-static",i.node.__cy_layer=v(i),i}return n}(jw),Vw=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(i=e.call(this,t,r.createElement("div"))).type="html",i.updateOnTransform=!1,i.root.__cy_layer=v(i),i.node=r.createElement("div"),i.node.__cy_layer=v(i),i.node.style.position="absolute",i.node.style.left="0px",i.node.style.top="0px",i.root.appendChild(i.node),o.stopClicks&&Mw(i.node),i}return _(n,[{key:"setViewport",value:function(t,e,n){this.node.style.transform="translate(".concat(t,"px,").concat(e,"px)scale(").concat(n,")"),this.updateOnTransform&&this.update()}}]),n}(Lw),Gw=function(t){h(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(this,n),(i=e.call(this,t,r.createElement("div"))).type="html-static",i.node.__cy_layer=v(i),o.stopClicks&&Mw(i.node),i}return _(n,[{key:"node",get:function(){return this.root}},{key:"setViewport",value:function(){}}]),n}(Lw),Uw=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t)).update=function(){},i.node=r,i}return _(n,[{key:"root",get:function(){return this.node}},{key:"resize",value:function(){}},{key:"setViewport",value:function(){}},{key:"remove",value:function(){}}]),n}(Iw),Hw=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t,r)).type="node",i.node.__cy_layer=v(i),i}return n}(Uw),qw=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t,r)).type="drag",i.node.__cy_layer=v(i),i}return n}(Uw),Ww=function(t){h(n,t);var e=f(n);function n(t,r){var i;return m(this,n),(i=e.call(this,t,r)).type="select-box",i.node.__cy_layer=v(i),i}return n}(Uw);function Yw(t,e,n){var r=Array.from(t.children);if(n.uniqueElements){var i=new Map(r.map(function(t){return[t.dataset.id,t]})),a=-1;e.forEach(function(e){var o=n.bb(e);if(n.isVisible(o)){a++;var s,u=e.id(),l=r[a],c=i.get(u);if(c){if(n.update(c,e,o),i.delete(u),l===c)return;s=c}else(s=n.enter(e,o)).dataset.id=u,n.update(s,e,o);0===a?t.insertAdjacentElement("afterbegin",s):r[a-1].insertAdjacentElement("afterend",s),r.splice(a,0,s)}}),i.forEach(function(t){return t.remove()})}else{e.forEach(function(e){var i=n.bb(e);if(n.isVisible(i))if(r.length>0)n.update(r.shift(),e,i);else{var o=n.enter(e,i);t.appendChild(o),n.update(o,e,i)}});var s,u=o(r);try{for(u.s();!(s=u.n()).done;){s.value.remove()}}catch(l){u.e(l)}finally{u.f()}}}function Kw(t,e){return t.callback(e),{remove:function(){t.callbacks.splice(t.callbacks.indexOf(e),1)}}}function Xw(t){return{selector:":visible",updateOn:null!=t&&t.queryEachTime?"render":"position",queryEachTime:!1,checkBounds:!0}}function Qw(t,e,n){var r=Object.assign({checkBoundsPointCount:5,initCollection:function(){}},Xw(n),n),i=r.queryEachTime?t.cy.collection():t.cy.edges(r.selector);r.queryEachTime||r.initCollection(i),"render"===r.updateOn?t.updateOnRender=!0:"position"===r.updateOn?(i.on("position add remove",t.update),i.sources().on("position",t.update),i.targets().on("position",t.update)):i.on("add remove",t.update);var o=Kw(t,function(n){var o=r.queryEachTime?t.cy.edges(r.selector):i;r.queryEachTime&&r.initCollection(o),o.forEach(function(i){var o=i._private.rscratch,a=o&&null!=o.startX&&null!=o.startY?{x:o.startX,y:o.startY}:i.sourceEndpoint(),s=o&&null!=o.endX&&null!=o.endY?{x:o.endX,y:o.endY}:i.targetEndpoint();if(!(r.checkBounds&&r.checkBoundsPointCount>0)||function(t,e,n,r){var i=function(t){return{x:e.x*t+n.x*(1-t),y:e.y*t+n.y*(1-t)}};if(1===r)return t.inVisibleBounds(i(.5));for(var o=1/r,a=0;a<=r;a++)if(t.inVisibleBounds(i(a*o)))return!0;return!1}(t,a,s,r.checkBoundsPointCount))if(o&&o.pathCache)e(n,i,o.pathCache,a,s);else{var u=new Path2D;u.moveTo(a.x,a.y),u.lineTo(s.x,s.y),e(n,i,u,a,s)}})});return{layer:t,edges:i,remove:function(){i.off("position add remove",void 0,t.update),i.sources().off("position",void 0,t.update),i.targets().off("position",void 0,t.update),o.remove()}}}function Zw(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({transform:"",position:"top-left",boundingBox:{includeLabels:!1,includeOverlays:!1},uniqueElements:!1,initCollection:function(){}},Xw(r),r),o=i.queryEachTime?t.cy.collection():t.cy.nodes(i.selector);i.queryEachTime||i.initCollection(o),"render"===i.updateOn?t.updateOnRender=!0:o.on("position"===i.updateOn?"position add remove":"add remove",t.update);var a=function(e){return{layer:t,nodes:o,remove:function(){o.off("position add remove",void 0,t.update),e.remove()}}};if("canvas"===t.type){var s=i,u=function(e){var r=e.getTransform(),a=s.queryEachTime?t.cy.nodes(s.selector):o;i.queryEachTime&&i.initCollection(a),a.forEach(function(o){var a=o.boundingBox(i.boundingBox);if(!s.checkBounds||t.inVisibleBounds(a)){if("top-left"===s.position)e.translate(a.x1,a.y1);else if("center"===s.position){var u=o.position();e.translate(u.x,u.y)}n(e,o,a),"none"!==s.position&&e.setTransform(r)}})};return a(Kw(t,u))}var l=i,c={bb:function(t){return t.boundingBox(l.boundingBox)},isVisible:l.checkBounds?function(e){return t.inVisibleBounds(e)}:function(){return!0},uniqueElements:!0===l.uniqueElements};if(l.checkBounds&&(t.updateOnTransform=!0),"html"===t.type){var h=e(e({},c),{},{enter:function(e,n){var r=t.node.ownerDocument.createElement("div");return r.style.position="absolute",l.init&&l.init(r,e,n),r},update:function(t,e,r){if("top-left"===l.position)t.style.transform="".concat(l.transform,"translate(").concat(r.x1,"px,").concat(r.y1,"px)");else if("center"===l.position){var i=e.position();t.style.transform="".concat(l.transform,"translate(").concat(i.x,"px,").concat(i.y,"px)")}n(t,e,r)}}),d=function(e){var n=l.queryEachTime?t.cy.nodes(l.selector):o;i.queryEachTime&&i.initCollection(n),Yw(e,n,h)};return a(Kw(t,d))}var f=e(e({},c),{},{enter:function(e,n){var r=t.node.ownerDocument.createElementNS(Nw,"g");return l.init&&l.init(r,e,n),r},update:function(t,e,r){if("top-left"===l.position)t.setAttribute("transform","".concat(l.transform,"translate(").concat(r.x1,",").concat(r.y1,")"));else if("center"===l.position){var i=e.position();t.setAttribute("transform","".concat(l.transform,"translate(").concat(i.x,",").concat(i.y,")"))}n(t,e,r)}});return a(Kw(t,function(e){var n=l.queryEachTime?t.cy.nodes(l.selector):o;i.queryEachTime&&i.initCollection(n),Yw(e,n,f)}))}var $w=function(){function t(e){var n=this;m(this,t),this.resize=function(){var t=n.cy.width(),e=n.cy.height();n.viewport.width=t,n.viewport.height=e;var r,i=o(n.layers);try{for(i.s();!(r=i.n()).done;){r.value.resize(t,e)}}catch(a){i.e(a)}finally{i.f()}},this.destroy=function(){var t,e=o(n.layers);try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(r){e.e(r)}finally{e.f()}n.cy.off("destroy",void 0,n.destroy),n.cy.off("viewport",void 0,n.zoomed),n.cy.off("resize",void 0,n.resize),n.cy.scratch("_layers",void 0)},this.zoomed=function(){var t=n.cy.pan(),e=n.cy.zoom();n.viewport.tx=t.x,n.viewport.ty=t.y,n.viewport.zoom=e;var r,i=o(n.layers);try{for(i.s();!(r=i.n()).done;){r.value.setViewport(t.x,t.y,e)}}catch(a){i.e(a)}finally{i.f()}},this.renderPerEdge=Qw,this.renderPerNode=Zw,this.cy=e,this.adapter={cy:this.cy,insert:function(t,e,r){return n.insert(t,e,r)},move:function(t,e){return n.move(t,e)},inVisibleBounds:function(t){var e=n.viewport,r=function(t){var n=t*e.zoom+e.tx;return n>=0&&n<=e.width},i=function(t){var n=t*e.zoom+e.ty;return n>=0&&n<=e.height};return function(t){return null!=t.x}(t)?r(t.x)&&i(t.y):r(t.x1)&&i(t.y1)||r(t.x2)&&i(t.y1)||r(t.x2)&&i(t.y2)||r(t.x1)&&i(t.y2)||r((t.x1+t.x2)/2)&&i((t.y1+t.y2)/2)}};var r=e.container(),i=new Hw(this.adapter,r.querySelector('[data-id="layer2-node"]'));this.nodeLayer=i;var a=new qw(this.adapter,r.querySelector('[data-id="layer1-drag"]'));this.dragLayer=a;var s=new Ww(this.adapter,r.querySelector('[data-id="layer0-selectbox"]'));this.selectBoxLayer=s,i.root.style.zIndex="",a.root.style.zIndex="",s.root.style.zIndex="",i.root.insertAdjacentElement("afterend",a.root),a.root.insertAdjacentElement("afterend",s.root),e.on("viewport",this.zoomed),e.on("resize",this.resize),e.on("destroy",this.destroy),this.viewport={width:this.cy.width(),height:this.cy.height(),tx:this.cy.pan().x,ty:this.cy.pan().y,zoom:this.cy.zoom()}}return _(t,[{key:"move",value:function(t,e){var n=this.layers,r=n.indexOf(t),i=Math.max(Math.min(r+e,n.length,0));i!==r&&(r>=n.length-1?this.root.appendChild(t.root):this.root.insertBefore(t.root,n[i].root))}},{key:"document",get:function(){return this.cy.container().ownerDocument}},{key:"root",get:function(){return this.nodeLayer.node.parentElement}},{key:"layers",get:function(){return Array.from(this.root.children).map(function(t){return t.__cy_layer}).filter(function(t){return null!=t})}},{key:"getLayers",value:function(){return this.layers}},{key:"init",value:function(t){return t.resize(this.viewport.width,this.viewport.height),t.setViewport(this.viewport.tx,this.viewport.ty,this.viewport.zoom),t}},{key:"update",value:function(){this.zoomed();var t,e=o(this.layers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n instanceof Bw&&n.draw()}}catch(r){e.e(r)}finally{e.f()}}},{key:"createLayer",value:function(t,e){switch(t){case"svg":return this.init(new Rw(this.adapter,this.document,e));case"html":return this.init(new Vw(this.adapter,this.document,e));case"canvas":return this.init(new Bw(this.adapter,this.document,e));case"html-static":return this.init(new Gw(this.adapter,this.document,e));case"svg-static":return this.init(new Fw(this.adapter,this.document,e));case"canvas-static":return this.init(new zw(this.adapter,this.document,e))}}},{key:"append",value:function(t,e){var n=this.createLayer(t,e);return this.root.appendChild(n.root),n}},{key:"insert",value:function(t,e,n,r){var i=this.createLayer(n,r);return e.root.insertAdjacentElement("before"===t?"beforebegin":"afterend",i.root),i}},{key:"getLast",value:function(){var t,e=this.layers;return null!==(t=e[e.length-1])&&void 0!==t?t:null}},{key:"getFirst",value:function(){var t;return null!==(t=this.layers[0])&&void 0!==t?t:null}}]),t}();function Jw(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(!t.container())throw new Error("layers plugin does not work in headless environments");var e=t.scratch("_layers");if(e)return e;var n=new $w(t);return t.scratch("_layers",n),n}function tx(t){t("core","layers",Jw)}void 0!==window.cytoscape&&tx(window.cytoscape);var ex=tx;function nx(t,e){if(1&t){var n=Da();Ta(0,"div",8),La("click",function(){return He(n),Ba().onSettingsClicked()}),Aa(1,"img",9),Pa()}}var rx=function(){var t=function(){function t(e,n){m(this,t),this.sanitizer=e,this.ref=n,this.fitContainerToParent=!1,this.enableSettingsIcon=!0,this.borderSize=2,this.width=200,this.height=100}return _(t,[{key:"ngOnInit",value:function(){var t=this.sanitizer.bypassSecurityTrustUrl(this.blueprint.icon);this.blueprint.icon=t}},{key:"onSettingsClicked",value:function(){console.log(this.blueprint.id,this.blueprint.name)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(Xc),Sa(Hs))},t.\u0275cmp=oe({type:t,selectors:[["app-node"]],inputs:{fitContainerToParent:"fitContainerToParent",enableSettingsIcon:"enableSettingsIcon",borderSize:"borderSize",width:"width",height:"height",blueprint:"blueprint"},decls:8,vars:16,consts:[["id","container"],["fxLayout","row","fxLayoutAlign","space-between"],["id","bp-icon"],["draggable","false",3,"src"],["id","bp-info"],["id","bp-name",3,"textContent"],["id","bp-type",3,"textContent"],["id","settings-icon",3,"click",4,"ngIf"],["id","settings-icon",3,"click"],["src","assets/icons/node/settings.svg"]],template:function(t,e){1&t&&(Ta(0,"div",0),Ta(1,"div",1),Ta(2,"div",2),Aa(3,"img",3),Pa(),Ta(4,"div",4),Aa(5,"div",5),Aa(6,"div",6),Pa(),Pa(),xa(7,nx,2,0,"div",7),Pa()),2&t&&(qa("border-width",e.borderSize,"px")("width",e.fitContainerToParent?"":e.width,"px")("height",e.fitContainerToParent?"":e.height,"px")("width",e.fitContainerToParent?"99":"","%")("height",e.fitContainerToParent?"100":"","%"),Zi(3),qa("width",e.width/2.7,"px"),Ea("src",e.blueprint.icon,ni),Zi(2),Ea("textContent",e.blueprint.name),Zi(1),Ea("textContent",e.blueprint.type),Zi(1),Ea("ngIf",e.enableSettingsIcon))},directives:[kv,Pv,uc],styles:["#container[_ngcontent-%COMP%]{display:flex;flex:auto;align-items:stretch;margin:1px;padding:10px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;border-style:solid;border-color:#000;border-radius:8px}#container[_ngcontent-%COMP%]:hover{border-width:3px}#bp-icon[_ngcontent-%COMP%]{display:flex;align-items:center;border-right:1px solid #acacac;padding-right:5px}#bp-info[_ngcontent-%COMP%]{align-self:baseline;margin:10px 10px 10px 5px}#bp-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px}#bp-type[_ngcontent-%COMP%]{font-size:14px}#settings-icon[_ngcontent-%COMP%]{align-self:start;margin:-10px 0 0 15px;cursor:pointer}#settings-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}"]}),t}(),ix=new Jn("blueprint.service"),ox=function(t){return t.Frontend="Frontend",t.Backend="Backend",t.Database="Database",t}({}),ax=a(9049),sx=a.n(ax),ux=a(2508),lx=a.n(ux),cx=a(2598),hx=a.n(cx),dx=a(4173),fx=a.n(dx),px=a(8429),vx=a.n(px),gx=a(3091),yx=a.n(gx),mx=a(6685),bx=a.n(mx),_x=a(7950),wx=a.n(_x);function xx(t,e){if(1&t){var n=Da();Ta(0,"div",7),La("drop",function(t){return He(n),Ba().dropBp(t)})("dragover",function(t){return He(n),Ba().allowDropBp(t)})("dragstart",function(t){var e=He(n).$implicit;return Ba().dragBp(t,e)}),Aa(1,"app-node",8),Pa()}if(2&t){var r=e.$implicit;Zi(1),Ea("borderSize",1)("fitContainerToParent",!0)("enableSettingsIcon",!1)("blueprint",r)}}var kx=function(){var t=function(){function t(e,n){m(this,t),this.breakpointObserver=e,this.blueprintsSvc=n,this.isExpanded=!0,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(G(function(t){return t.matches}),function(t,e,n){var r;return r={bufferSize:void 0,windowTime:void 0,refCount:!1,scheduler:void 0},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,u=t.scheduler,l=0,c=!1,h=!1;return function(t){var r;l++,!e||c?(c=!1,e=new Og(i,a,u),r=e.subscribe(this),n=t.subscribe({next:function(t){e.next(t)},error:function(t){c=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}),h&&(n=void 0)):r=e.subscribe(this),this.add(function(){l--,r.unsubscribe(),r=void 0,n&&!h&&s&&0===l&&(n.unsubscribe(),n=void 0,e=void 0)})}}(r))}}()),this.sdf=!1,this.bpCatalog=[]}return _(t,[{key:"ngOnInit",value:function(){var t=this;return Tw(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.blueprintsSvc.getBlueprints();case 2:n=e.sent,t.bpCatalog=[].concat(i(Object.values(n)),i(t.bpCatalog));case 4:case"end":return e.stop()}},e)}))()}},{key:"allowDropBp",value:function(t){t.preventDefault()}},{key:"dragBp",value:function(t,e){var n;null===(n=t.dataTransfer)||void 0===n||n.setData("bp",JSON.stringify(e))}},{key:"dropBp",value:function(t){this.sdf=!0,t.preventDefault()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(bp),Sa(ix))},t.\u0275cmp=oe({type:t,selectors:[["app-sidebar-catalog"]],decls:18,vars:10,consts:[[1,"sidenav-container"],["fixedInViewport","","position","end",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","class","bp-container","draggable","true",3,"drop","dragover","dragstart",4,"ngFor","ngForOf"],["id","nav-collapse-btn","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["id","nav-expand-btn","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["mat-list-item","","draggable","true",1,"bp-container",3,"drop","dragover","dragstart"],[3,"borderSize","fitContainerToParent","enableSettingsIcon","blueprint"]],template:function(t,e){if(1&t){var n=Da();Ta(0,"mat-sidenav-container",0),Ta(1,"mat-sidenav",1,2),vu(3,"async"),vu(4,"async"),vu(5,"async"),Ta(6,"mat-toolbar"),$a(7,"Blueprints Catalog"),Pa(),Ta(8,"mat-nav-list"),xa(9,xx,2,4,"div",3),Pa(),Ta(10,"div",4),La("click",function(){return He(n),ka(2).toggle()}),Ta(11,"span"),$a(12,"Collapse sidebar"),Pa(),Ta(13,"mat-icon",5),$a(14,"arrow_forward_ios"),Pa(),Pa(),Pa(),Pa(),Ta(15,"div",6),La("click",function(){return He(n),ka(2).toggle()}),Ta(16,"mat-icon",5),$a(17,"arrow_back_ios"),Pa(),Pa()}2&t&&(Zi(1),Ea("mode",gu(4,6,e.isHandset$)?"over":"side")("opened",!1===gu(5,8,e.isHandset$)),wa("role",gu(3,4,e.isHandset$)?"dialog":"navigation"),Zi(8),Ea("ngForOf",e.bpCatalog))},directives:[ay,oy,lg,fm,ac,sm,rx],pipes:[pc],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%;z-index:4}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.bp-container[_ngcontent-%COMP%]{width:100%;height:100px;cursor:pointer;box-sizing:border-box}#nav-expand-btn[_ngcontent-%COMP%]{display:flex;position:fixed;align-items:center;bottom:0;right:0;padding:10px;background-color:#d3d3d3;color:#000;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:3}#nav-expand-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:translateX(20%)}#nav-collapse-btn[_ngcontent-%COMP%]{display:flex;position:absolute;flex:auto;justify-content:center;align-items:center;width:100%;bottom:0;padding:10px 0;background-color:#d3d3d3;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#nav-collapse-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}"]}),t}(),Sx=["cy"],Ex=function(){var t=function(){function t(e,n,r){m(this,t);var i,o=this;this.blueprintsSvc=e,this.resolver=n,this.injector=r,this.nodeWidth=200,this.nodeHeight=100,this.onCyReady=(i=Tw(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=o.resolver.resolveComponentFactory(rx),(i=e.cy.layers()).nodeLayer.moveFront(),i.renderPerNode(i.append("html"),function(){},{init:function(t,e){var n=e.data("bp");if(n){console.log(e.id(),n);var i=r.create(o.injector);i.instance.width=o.nodeWidth,i.instance.height=o.nodeHeight,i.instance.blueprint={id:n.id,icon:n.icon.changingThisBreaksApplicationSecurity,name:n.name,type:ox.Frontend},i.changeDetectorRef.detectChanges(),t.insertAdjacentElement("beforeend",i.location.nativeElement)}},uniqueElements:!0,checkBounds:!0});case 2:case"end":return t.stop()}},t)})),function(t,e){return i.apply(this,arguments)}),Aw().use(ex),hx()(Aw()),lx()(Aw(),fx(),vx()),Aw().use(sx()),yx()(Aw()),bx()(Aw()),Aw().use(wx())}return _(t,[{key:"allowDropBp",value:function(t){t.preventDefault()}},{key:"dropBp",value:function(t){var e;t.preventDefault();var n=null===(e=t.dataTransfer)||void 0===e?void 0:e.getData("bp"),r=JSON.parse(n);this.cy.add({group:"nodes",data:{id:"".concat(r.id,"_").concat(Date.now().toString()),bp:r},position:{x:(t.clientX-this.cy.pan().x)/this.cy.zoom(),y:(t.clientY-this.cy.pan().y)/this.cy.zoom()}}),this.cy.trigger("bp-added",[r])}},{key:"ngAfterViewInit",value:function(){var t=this;return Tw(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("keydown",function(e){e.ctrlKey&&"90"==e.which?t.cy.undoRedo().undo():e.ctrlKey&&"89"==e.which&&t.cy.undoRedo().redo()},!0),t.cy=Aw()({container:t.cyDiv.nativeElement,layout:{name:"cola"},boxSelectionEnabled:!0,maxZoom:3,minZoom:.5,zoom:1,style:[{selector:"node",style:{shape:"roundrectangle",width:t.nodeWidth,height:t.nodeHeight,color:"black","background-color":"white","overlay-opacity":0}},{selector:"edge",style:{"curve-style":"straight",width:2,"line-color":"black"}},{selector:".eh-handle",style:{"background-color":"white",width:15,height:15,shape:"ellipse","border-color":"black","overlay-opacity":0,"border-width":2,"border-opacity":1}},{selector:".eh-source",style:{"border-width":3,"border-color":"black"}},{selector:".eh-target",style:{"border-width":3,"border-color":"black",opacity:1}},{selector:".eh-preview, .eh-ghost-edge",style:{"line-color":"black","target-arrow-color":"black","source-arrow-color":"black"}},{selector:".eh-preview",style:{opacity:.3}}]}),t.cy.gridGuide({snapToGridDuringDrag:!0,distributionGuidelines:!0,geometricGuideline:!0,centerToEdgeAlignment:!0,panGrid:!0,guidelinesStackOrder:1,guidelinesTolerance:7,gridColor:"#e4e4e4",lineWidth:2}),t.cy.panzoom({minZoom:.5,maxZoom:3}),t.cy.undoRedo(),t.cy.edgeEditing({undoable:!0,initAnchorsAutomatically:!1,enableCreateAnchorOnDrag:!0,zIndex:1}),t.cy.on("bp-added",t.onCyReady),t.cy.edgehandles({snap:!0,loopAllowed:function(){return!1}}),t.cy.on("ehcomplete",function(t,e,n,r){r.addClass("edgebendediting-hasbendpoints"),r.data("cyedgebendeditingWeights",[.5]),r.data("cyedgebendeditingDistances",[.5])});case 1:case"end":return e.stop()}},e)}))()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Sa(ix),Sa(gs),Sa(ua))},t.\u0275cmp=oe({type:t,selectors:[["app-topology-view"]],viewQuery:function(t,e){var n;(1&t&&Ou(Sx,5),2&t)&&(Du(n=Iu())&&(e.cyDiv=n.first))},decls:4,vars:0,consts:[["id","cy",3,"drop","dragover"],["cy",""]],template:function(t,e){1&t&&(Ta(0,"div"),Ta(1,"div",0,1),La("drop",function(t){return e.dropBp(t)})("dragover",function(t){return e.allowDropBp(t)}),Pa(),Aa(3,"app-sidebar-catalog"),Pa())},directives:[kx],styles:["#cy[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}app-sidebar-catalog[_ngcontent-%COMP%]{z-index:5}"]}),t}(),Cx=function(){var t=function t(){m(this,t),this.title="cloud-flow-frontend"};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&Aa(0,"app-topology-view")},directives:[Ex],styles:[""]}),t}(),Tx=function(){var t=function(){function t(e){m(this,t),this.http=e}return _(t,[{key:"getBlueprints",value:function(){var t=this;return Tw(regeneratorRuntime.mark(function e(){var n,i,o,a,s,u,l,c,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.http.get("assets/mock-catalog.json").toPromise();case 2:n=e.sent,i={},o=Object.entries(n),a=0;case 6:if(!(a<o.length)){e.next=18;break}return s=r(o[a],2),u=s[0],l=s[1],e.next=12,t.http.get(l.icon,{responseType:"text"}).toPromise();case 12:c=e.sent,h="data:image/svg+xml;base64,"+btoa(c),i[u]=Object.assign(Object.assign({},l),{id:u,icon:h});case 15:a++,e.next=6;break;case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}},e)}))()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(vr(Ly))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t}(),Px=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t}),t.\u0275inj=At({providers:[{provide:ix,useClass:Tx}],imports:[[Yy]]}),t}(),Ax=function(){var t=function t(){m(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=le({type:t,bootstrap:[Cx]}),t.\u0275inj=At({providers:[],imports:[[Ew,Cf,th,Bv,vp,hg,um,pm,sy,cg,Px]]}),t}();(function(){if(gl)throw new Error("Cannot enable prod mode after platform setup.");vl=!1})(),$c().bootstrapModule(Ax).catch(function(t){return console.error(t)})}},function(t){"use strict";t(t.s=5050)}])}();