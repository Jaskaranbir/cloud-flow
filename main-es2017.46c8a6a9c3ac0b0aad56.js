(self.webpackChunkcloud_flow_frontend=self.webpackChunkcloud_flow_frontend||[]).push([[179],{8255:function(t){function e(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=8255,t.exports=e},7950:function(t,e,n){var r;r=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),o=n(2),s=n(5)||("undefined"!=typeof window?window.cola:null),a=n(4),l=function(t){return(void 0===t?"undefined":r(t))===r(0)},u=function(){},c=function(t,e){var n;return null!=(n=t)&&(void 0===n?"undefined":r(n))===r(function(){})?t.apply(e,[e]):t};function h(t){this.options=i({},o,t)}h.prototype.run=function(){var t=this,e=this.options;t.manuallyStopped=!1;var n=e.cy,i=e.eles,o=i.nodes(),h=i.edges(),d=!1,p=o.filter(function(t){return t.isParent()}),f=o.subtract(p),g=e.boundingBox||{x1:0,y1:0,w:n.width(),h:n.height()};void 0===g.x2&&(g.x2=g.x1+g.w),void 0===g.w&&(g.w=g.x2-g.x1),void 0===g.y2&&(g.y2=g.y1+g.h),void 0===g.h&&(g.h=g.y2-g.y1);var m=function(){for(var t=0;t<o.length;t++){var r=o[t],i=r.layoutDimensions(e),s=r.scratch("cola");if(!s.updatedDims){var a=c(e.nodeSpacing,r);s.width=i.w+2*a,s.height=i.h+2*a}}o.positions(function(t){var e=t.scratch().cola,n=void 0;return!t.grabbed()&&f.contains(t)&&(l((n={x:g.x1+e.x,y:g.y1+e.y}).x)&&l(n.y)||(n=void 0)),n}),o.updateCompoundBounds(),d||(y(),d=!0),e.fit&&n.fit(e.padding)},v=function(){e.ungrabifyWhileSimulating&&x.grabify(),n.off("destroy",w),o.off("grab free position",S),o.off("lock unlock",E),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})},y=function(){t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t})},b=e.refresh;b=e.refresh<0?1:Math.max(1,b);var _=t.adaptor=s.adaptor({trigger:function(t){switch(t.type){case"tick":case s.EventType?s.EventType.tick:null:e.animate&&m();break;case"end":case s.EventType?s.EventType.end:null:m(),e.infinite||v()}},kick:function(){var n=!0,r=function(){if(t.manuallyStopped)return v(),!0;var r=_.tick();return e.infinite||n||_.convergenceThreshold(e.convergenceThreshold),n=!1,r&&e.infinite&&_.resume(),r};if(e.animate)a(function t(){(function(){for(var t=void 0,e=0;e<b&&!t;e++)t=t||r();return t})()||a(t)});else for(;!r(););},on:u,drag:u});t.adaptor=_;var x=o.filter(":grabbable");e.ungrabifyWhileSimulating&&x.ungrabify();var w=void 0;n.one("destroy",w=function(){t.stop()});var S=void 0;o.on("grab free position",S=function(t){var e=this.scratch().cola,n=this.position();if(t.cyTarget===this||t.target===this)switch(t.type){case"grab":_.dragstart(e);break;case"free":_.dragend(e);break;case"position":e.px===n.x-g.x1&&e.py===n.y-g.y1||(e.px=n.x-g.x1,e.py=n.y-g.y1)}});var E=void 0;o.on("lock unlock",E=function(){var t=this.scratch().cola;t.fixed=this.locked(),this.locked()?_.dragstart(t):_.dragend(t)}),_.nodes(f.map(function(t,n){var r=c(e.nodeSpacing,t),i=t.position(),o=t.layoutDimensions(e);return t.scratch().cola={x:e.randomize&&!t.locked()||void 0===i.x?Math.round(Math.random()*g.w):i.x,y:e.randomize&&!t.locked()||void 0===i.y?Math.round(Math.random()*g.h):i.y,width:o.w+2*r,height:o.h+2*r,index:n,fixed:t.locked()}}));var C=[];e.alignment&&(e.alignment.vertical&&e.alignment.vertical.forEach(function(t){var e=[];t.forEach(function(t){var n=t.node.scratch().cola;e.push({node:n.index,offset:t.offset?t.offset:0})}),C.push({type:"alignment",axis:"x",offsets:e})}),e.alignment.horizontal&&e.alignment.horizontal.forEach(function(t){var e=[];t.forEach(function(t){var n=t.node.scratch().cola;e.push({node:n.index,offset:t.offset?t.offset:0})}),C.push({type:"alignment",axis:"y",offsets:e})})),e.gapInequalities&&e.gapInequalities.forEach(function(t){var e=t.left.scratch().cola.index,n=t.right.scratch().cola.index;C.push({axis:t.axis,left:e,right:n,gap:t.gap,equality:t.equality})}),C.length>0&&_.constraints(C),_.groups(p.map(function(t,n){var r=c(e.nodeSpacing,t),i=function(e){return parseFloat(t.style("padding-"+e))},o=i("left")+r,s=i("right")+r,a=i("top")+r,l=i("bottom")+r;return t.scratch().cola={index:n,padding:Math.max(o,s,a,l),leaves:t.children().intersection(f).map(function(t){return t[0].scratch().cola.index}),fixed:t.locked()},t}).map(function(t){return t.scratch().cola.groups=t.children().intersection(p).map(function(t){return t.scratch().cola.index}),t.scratch().cola}));var k,T=void 0,P=void 0;if(null!=e.edgeLength?(T=e.edgeLength,P="linkDistance"):null!=e.edgeSymDiffLength?(T=e.edgeSymDiffLength,P="symmetricDiffLinkLengths"):null!=e.edgeJaccardLength?(T=e.edgeJaccardLength,P="jaccardLinkLengths"):(T=100,P="linkDistance"),_.links(h.stdFilter(function(t){return f.contains(t.source())&&f.contains(t.target())}).map(function(t){var e=t.scratch().cola={source:t.source()[0].scratch().cola.index,target:t.target()[0].scratch().cola.index};return null!=T&&(e.calcLength=c(T,t)),e})),_.size([g.w,g.h]),null!=T&&_[P](function(t){return t.calcLength}),e.flow){var A=void 0;(void 0===(k=e.flow)?"undefined":r(k))===r("")?A={axis:e.flow,minSeparation:50}:l(e.flow)?A={axis:"y",minSeparation:e.flow}:function(t){return null!=t&&(void 0===t?"undefined":r(t))===r({})}(e.flow)?((A=e.flow).axis=A.axis||"y",A.minSeparation=null!=A.minSeparation?A.minSeparation:50):A={axis:"y",minSeparation:50},_.flowLayout(A.axis,A.minSeparation)}return t.trigger({type:"layoutstart",layout:t}),_.avoidOverlaps(e.avoidOverlap).handleDisconnected(e.handleDisconnected).start(e.unconstrIter,e.userConstIter,e.allConstIter),e.infinite||setTimeout(function(){t.manuallyStopped||_.stop()},e.maxSimulationTime),this},h.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t.exports=h},function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.filter(function(t){return null!=t}).forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e,n){"use strict";t.exports={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1}},function(t,e,n){"use strict";var r=n(0),i=function(t){t&&t("layout","cola",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(t,e,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r="undefined"!==("undefined"==typeof window?"undefined":i(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)}:function(t){t()},t.exports=r},function(e,n){e.exports=t}])},t.exports=r(n(1282))},2508:function(t){self,t.exports=(()=>{"use strict";var t={347:(t,e,n)=>{var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(218),o=n(259),s=n(171),a=n(961),l=0;t.exports=function(t,e){var n=t;o.options=t;var u,c,h,d,p,f,g,m,v,y,b,_,x,w,S,E,C,k,T,P="cy-edge-bend-editing-cxt-add-bend-point"+l,A="cy-edge-bend-editing-cxt-remove-bend-point"+l,D="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+l,O="cy-edge-control-editing-cxt-add-control-point"+l,M="cy-edge-control-editing-cxt-remove-control-point"+l,I="cy-edge-bend-editing-cxt-remove-multiple-control-point"+l,L=null,N=null,R=!1,F={init:function(){a(e,o,t);var n=t,r=$(this),F="cy-node-edge-editing-stage"+l;l++;var B,j,z=$('<div id="'+F+'"></div>');r.find("#"+F).length<1&&r.append(z),(B=Konva.stages.length<l?new Konva.Stage({id:"node-edge-editing-stage",container:F,width:r.width(),height:r.height()}):Konva.stages[l-1]).getChildren().length<1?(j=new Konva.Layer,B.add(j)):j=B.getChildren()[0];var V={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(t){t.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(t){t.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(t){e.autounselectify(!1),R=!0,V.touchedAnchor=t.target,T=!1,V.edge.unselect();var n=o.syntax[V.edgeType].weight,r=o.syntax[V.edgeType].distance,i=V.edge;pt={edge:i,type:V.edgeType,weights:i.data(n)?[].concat(i.data(n)):[],distances:i.data(r)?[].concat(i.data(r)):[]},C=e.style()._private.coreStyle["active-bg-opacity"]?e.style()._private.coreStyle["active-bg-opacity"].value:.15,e.style().selector("core").style("active-bg-opacity",0).update(),at(),e.autoungrabify(!0),j.getStage().on("contentTouchend contentMouseup",V.eMouseUp),j.getStage().on("contentMouseout",V.eMouseOut)},eMouseUp:function(t){R=!1,V.touchedAnchor=void 0,T=!1,V.edge.select(),e.style().selector("core").style("active-bg-opacity",C).update(),lt(),e.autounselectify(!0),e.autoungrabify(!1),j.getStage().off("contentTouchend contentMouseup",V.eMouseUp),j.getStage().off("contentMouseout",V.eMouseOut)},eMouseOut:function(t){T=!0},clearAnchorsExcept:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=!1;this.anchors.forEach(function(r,i){e&&r===e?n=!0:(t.unbindListeners(r),r.destroy())}),n?this.anchors=[e]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(t){if(this.edge=t,this.edgeType=o.getEdgeType(t),t.hasClass("edgebendediting-hasbendpoints")||t.hasClass("edgecontrolediting-hascontrolpoints")){for(var e=o.getAnchorsAsArray(t),n=.65*it(t),r=(t.source().position(),t.target().position(),0);e&&r<e.length;r+=2)this.renderAnchorShape(e[r],e[r+1],n);j.draw()}},renderAnchorShape:function(t,n,r){var i=nt({x:t-r/2,y:n-r/2});r*=e.zoom();var o=new Konva.Rect({x:i.x,y:i.y,width:r,height:r,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(o),this.bindListeners(o),j.add(o)}},G=function(t,n){var r=t.target||t.cyTarget;if(!o.isIgnoredEdge(r)){var i,s,a,l,u=o.getEdgeType(r);"none"===u?(i=[],s=[]):(l=o.syntax[u].distance,i=r.data(a=o.syntax[u].weight)?[].concat(r.data(a)):r.data(a),s=r.data(l)?[].concat(r.data(l)):r.data(l));var c={edge:r,type:u,weights:i,distances:s};o.addAnchorPoint(void 0,void 0,n),et().undoable&&e.undoRedo().do("changeAnchorPoints",c)}rt(),r.select()},U=function(t){var n=V.edge,r=o.getEdgeType(n);if(!o.edgeTypeNoneShouldntHappen(r,"UiUtilities.js, cxtRemoveAnchorFcn")){var i={edge:n,type:r,weights:[].concat(n.data(o.syntax[r].weight)),distances:[].concat(n.data(o.syntax[r].distance))};o.removeAnchor(),et().undoable&&e.undoRedo().do("changeAnchorPoints",i),setTimeout(function(){rt(),n.select()},50)}},H=function(t){var n=V.edge,r=o.getEdgeType(n),i={edge:n,type:r,weights:[].concat(n.data(o.syntax[r].weight)),distances:[].concat(n.data(o.syntax[r].distance))};o.removeAllAnchors(),et().undoable&&e.undoRedo().do("changeAnchorPoints",i),setTimeout(function(){rt(),n.select()},50)},q=n.handleReconnectEdge,W=n.validateEdge,Y=n.actOnUnsuccessfulReconnection,K=[{id:P,content:n.addBendMenuItemTitle,selector:"edge",onClickFunction:function(t){G(t,"bend")},hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:A,content:n.removeBendMenuItemTitle,selector:"edge",onClickFunction:U,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:D,content:n.removeAllBendMenuItemTitle,selector:n.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:H,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:O,content:n.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(t){G(t,"control")},hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:M,content:n.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:U,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:I,content:n.removeAllControlMenuItemTitle,selector:n.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:H,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions}];if(e.contextMenus){var X=e.contextMenus("get");X.isActive()?X.appendMenuItems(K):e.contextMenus({menuItems:K})}var Q=i(function(){z.attr("height",r.height()).attr("width",r.width()).css({position:"absolute",top:0,left:0,"z-index":et().zIndex}),setTimeout(function(){var t=z.offset(),n=r.offset();z.css({top:-(t.top-n.top),left:-(t.left-n.left)}),j.getStage().setWidth(r.width()),j.getStage().setHeight(r.height()),e&&rt()},0)},250);function Z(){Q()}Z(),$(window).bind("resize",function(){Z()});var J,tt=r.data("cyedgeediting");function et(){return J||(J=r.data("cyedgeediting").options)}function nt(t){var n=e.pan(),r=e.zoom();return{x:t.x*r+n.x,y:t.y*r+n.y}}function rt(){V.clearAnchorsExcept(V.touchedAnchor),null!==L&&(L.destroy(),L=null),null!==N&&(N.destroy(),N=null),j.draw(),k&&(V.renderAnchorShapes(k),function(t){if(t){var n=o.getAnchorsAsArray(t);void 0===n&&(n=[]);var r=t.sourceEndpoint(),i=t.targetEndpoint();if(r.x&&i.x&&(n.unshift(r.y),n.unshift(r.x),n.push(i.x),n.push(i.y),n)){var s={x:n[2],y:n[3]},a={x:n[n.length-4],y:n[n.length-3]};!function(t,n,r,i,o){var s=n.x-r/2,a=n.y-r/2,l=i.x-r/2,u=i.y-r/2,c=o.x-r/2,h=o.y-r/2,d=nt({x:t.x-r/2,y:t.y-r/2}),p=nt({x:s,y:a});r=r*e.zoom()/2;var f=nt({x:l,y:u}),g=nt({x:c,y:h}),m=r,v=Math.sqrt(Math.pow(f.x-d.x,2)+Math.pow(f.y-d.y,2)),y=d.x+m/v*(f.x-d.x),b=d.y+m/v*(f.y-d.y),_=Math.sqrt(Math.pow(g.x-p.x,2)+Math.pow(g.y-p.y,2)),x=p.x+m/_*(g.x-p.x),w=p.y+m/_*(g.y-p.y);null===L&&(L=new Konva.Circle({x:y+r,y:b+r,radius:r,fill:"black"})),null===N&&(N=new Konva.Circle({x:x+r,y:w+r,radius:r,fill:"black"})),j.add(L),j.add(N),j.draw()}({x:n[0],y:n[1]},{x:n[n.length-2],y:n[n.length-1]},.65*it(t),s,a)}}}(k))}function it(t){var e=et().anchorShapeSizeFactor;return parseFloat(t.css("width"))<=2.5?2.5*e:parseFloat(t.css("width"))*e}function ot(t,e,n,r,i){return t>=r-n/2&&t<=r+n/2&&e>=i-n/2&&e<=i+n/2}function st(t,e,n){var r=o.getEdgeType(n);if("none"===r)return-1;if(null==n.data(o.syntax[r].weight)||0==n.data(o.syntax[r].weight).length)return-1;for(var i=o.getAnchorsAsArray(n),s=it(n),a=0;i&&a<i.length;a+=2)if(ot(t,e,s,i[a],i[a+1]))return a/2;return-1}function at(){w=e.panningEnabled(),S=e.zoomingEnabled(),E=e.boxSelectionEnabled(),e.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function lt(){e.zoomingEnabled(S).panningEnabled(w).boxSelectionEnabled(E)}null==tt&&(tt={}),tt.options=n;var ut=i(function(t,e,n,r){var i=t.data(o.syntax[e].weight),s=t.data(o.syntax[e].distance),a=o.convertToRelativePosition(t,r);i[n]=a.weight,s[n]=a.distance,t.data(o.syntax[e].weight,i),t.data(o.syntax[e].distance,s)},5);w=e.panningEnabled(),S=e.zoomingEnabled(),E=e.boxSelectionEnabled();var ct,ht,dt,pt,ft,gt,mt,vt,yt,bt=(Et=e.edges(":selected")).length;1===bt&&(k=Et[0]),e.bind("zoom pan",d=function(){k&&rt()}),e.on("data","edge",x=function(){k&&rt()}),e.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",u=function(){setTimeout(function(){rt()},50)}),e.on("remove","edge",c=function(){if(this.selected()){if(bt-=1,e.startBatch(),k&&k.removeClass("cy-edge-editing-highlight"),1===bt){var t=e.edges(":selected");1===t.length?(k=t[0]).addClass("cy-edge-editing-highlight"):k=void 0}else k=void 0;e.endBatch()}rt()}),e.on("add","edge",h=function(){this.selected()&&(bt+=1,e.startBatch(),k&&k.removeClass("cy-edge-editing-highlight"),1===bt?(k=this).addClass("cy-edge-editing-highlight"):k=void 0,e.endBatch()),rt()}),e.on("select","edge",p=function(){var t=this;0!=t.target().connectedEdges().length&&0!=t.source().connectedEdges().length&&(bt+=1,e.startBatch(),k&&k.removeClass("cy-edge-editing-highlight"),1===bt?(k=t).addClass("cy-edge-editing-highlight"):k=void 0,e.endBatch(),rt())}),e.on("unselect","edge",f=function(){if(bt-=1,e.startBatch(),k&&k.removeClass("cy-edge-editing-highlight"),1===bt){var t=e.edges(":selected");1===t.length?(k=t[0]).addClass("cy-edge-editing-highlight"):k=void 0}else k=void 0;e.endBatch(),rt()});var _t,xt,wt,St,Et,Ct=!1;e.on("tapstart",g=function(t){ht=t.position||t.cyPosition}),e.on("tapstart","edge",m=function(t){var n=this;if(k&&k.id()===n.id()){dt=n;var r=o.getEdgeType(n);"none"===r&&(r="bend");var i=function(t,e,n){var r=it(n),i=n._private.rscratch.allpts,o={x:i[0],y:i[1]},s={x:i[i.length-2],y:i[i.length-1]};return nt(o),nt(s),ot(t,e,r,o.x,o.y)?0:ot(t,e,r,s.x,s.y)?1:-1}(ht.x,ht.y,n);if(0==i||1==i){n.unselect(),gt=i,vt=0==i?dt.source():dt.target();var a=s.disconnectEdge(dt,e,t.renderedPosition,0==i?"source":"target");mt=a.dummyNode,dt=a.edge,at()}else ct=void 0,ft=!0}else ft=!1}),e.on("drag","node",_=function(){k&&rt()}),e.on("tapdrag",v=function(t){e.edges(":selected").length>0&&e.autounselectify(!1);var r=dt;if(void 0===dt||!o.isIgnoredEdge(r)){var i=o.getEdgeType(r);if(ft&&n.enableCreateAnchorOnDrag&&!R&&"none"!==i){var s=o.syntax[i].weight,a=o.syntax[i].distance;pt={edge:r,type:i,weights:r.data(s)?[].concat(r.data(s)):[],distances:r.data(a)?[].concat(r.data(a)):[]},r.unselect(),ct=o.addAnchorPoint(r,ht),dt=r,ft=void 0,Ct=!0,at()}if(R||void 0!==dt&&(void 0!==ct||void 0!==gt)){var l=t.position||t.cyPosition;-1!=gt&&mt?mt.position(l):null!=ct?ut(r,i,ct,l):R&&(void 0===V.touchedAnchorIndex&&ht&&(V.touchedAnchorIndex=st(ht.x,ht.y,V.edge)),void 0!==V.touchedAnchorIndex&&ut(V.edge,V.edgeType,V.touchedAnchorIndex,l)),t.target&&t.target[0]&&t.target.isNode()&&(yt=t.target)}}}),e.on("tapend",y=function(t){T&&j.getStage().fire("contentMouseup");var n=dt||V.edge;if(void 0!==n){var r=V.touchedAnchorIndex;if(null!=r){var i,a=n.source().position("x"),l=n.source().position("y"),u=n.target().position("x"),c=n.target().position("y"),h=o.getAnchorsAsArray(n),d=[a,l].concat(h).concat([u,c]),p=r+1,f=p-1,g=p+1,m={x:d[2*p],y:d[2*p+1]},v={x:d[2*f],y:d[2*f+1]},y={x:d[2*g],y:d[2*g+1]};if(m.x===v.x&&m.y===v.y||m.x===v.x&&m.y===v.y)i=!0;else{var b,_=(v.y-y.y)/(v.x-y.x),x=o.getIntersection(n,m,{srcPoint:v,tgtPoint:y,m1:_,m2:-1/_}),w=Math.sqrt(Math.pow(m.x-x.x,2)+Math.pow(m.y-x.y,2));"bend"===(b=o.getEdgeType(n))&&w<et().bendRemovalSensitivity&&(i=!0)}i&&o.removeAnchor(n,r)}else if(null!=mt&&(0==gt||1==gt)){var S=vt,E="valid",C=0==gt?"source":"target";if(yt){var k=0==gt?yt:n.source(),P=1==gt?yt:n.target();"function"==typeof W&&(E=W(n,k,P)),S="valid"===E?yt:vt}if(k=0==gt?S:n.source(),P=1==gt?S:n.target(),n=s.connectEdge(n,vt,C),vt.id()!==S.id())if("function"==typeof q){var A=q(k.id(),P.id(),n.data());if(A&&(s.copyEdge(n,A),o.initAnchorPoints(et().bendPositionsFunction,et().controlPositionsFunction,[A])),A&&et().undoable){var D={newEdge:A,oldEdge:n};e.undoRedo().do("removeReconnectedEdge",D),n=A}else A&&(e.remove(n),n=A)}else{var O=0==gt?{source:S.id()}:{target:S.id()},M=0==gt?{source:vt.id()}:{target:vt.id()};if(et().undoable&&S.id()!==vt.id()){var I={edge:n,location:O,oldLoc:M};n=e.undoRedo().do("reconnectEdge",I).edge}}"valid"!==E&&"function"==typeof Y&&Y(),n.select(),e.remove(mt)}}"none"===(b=o.getEdgeType(n))&&(b="bend"),void 0!==V.touchedAnchorIndex||Ct||(pt=void 0);var L=o.syntax[b].weight;void 0!==n&&void 0!==pt&&(n.data(L)?n.data(L).toString():null)!=pt.weights.toString()&&(Ct&&(n.select(),e.autounselectify(!0)),et().undoable&&e.undoRedo().do("changeAnchorPoints",pt)),ct=void 0,dt=void 0,pt=void 0,ft=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0,ht=void 0,Ct=!1,V.touchedAnchorIndex=void 0,lt(),setTimeout(function(){rt()},50)}),e.on("edgeediting.movestart",function(t,e){St=!1,null!=e[0]&&e.forEach(function(t){null==o.getAnchorsAsArray(t)||St||(xt={x:o.getAnchorsAsArray(t)[0],y:o.getAnchorsAsArray(t)[1]},_t={firstTime:!0,firstAnchorPosition:{x:xt.x,y:xt.y},edges:e},wt=t,St=!0)})}),e.on("edgeediting.moveend",function(t,n){if(null!=_t){var r=_t.firstAnchorPosition,i={x:o.getAnchorsAsArray(wt)[0],y:o.getAnchorsAsArray(wt)[1]};_t.positionDiff={x:-i.x+r.x,y:-i.y+r.y},delete _t.firstAnchorPosition,et().undoable&&e.undoRedo().do("moveAnchorPoints",_t),_t=void 0}}),e.on("cxttap",b=function(t){var r,i,s=t.target||t.cyTarget,a=!1;try{a=s.isEdge()}catch(t){}if(a?i=o.getEdgeType(r=s):(r=V.edge,i=V.edgeType),e.contextMenus){var l=e.contextMenus("get");if(!k||k.id()!=r.id()||o.isIgnoredEdge(r)||k!==r)return l.hideMenuItem(A),l.hideMenuItem(P),l.hideMenuItem(M),void l.hideMenuItem(O);var u=t.position||t.cyPosition,c=st(u.x,u.y,r);-1==c?(l.hideMenuItem(A),l.hideMenuItem(M),"control"===i&&a?(l.showMenuItem(O),l.hideMenuItem(P)):"bend"===i&&a?(l.showMenuItem(P),l.hideMenuItem(O)):a?(l.showMenuItem(P),l.showMenuItem(O)):(l.hideMenuItem(P),l.hideMenuItem(O)),o.currentCtxPos=u):(l.hideMenuItem(P),l.hideMenuItem(O),"control"===i?(l.showMenuItem(M),l.hideMenuItem(A),n.enableMultipleAnchorRemovalOption&&r.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&l.showMenuItem(I)):"bend"===i?(l.showMenuItem(A),l.hideMenuItem(M)):(l.hideMenuItem(A),l.hideMenuItem(M),l.hideMenuItem(I)),o.currentAnchorIndex=c),o.currentCtxEdge=r}}),e.on("cyedgeediting.changeAnchorPoints","edge",function(){e.startBatch(),e.edges().unselect(),e.trigger("bendPointMovement"),e.endBatch(),rt()});var kt=!1,Tt={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(n){if("function"==typeof et().moveSelectedAnchorsOnKeyEvents?et().moveSelectedAnchorsOnKeyEvents():et().moveSelectedAnchorsOnKeyEvents){var r,i,s=document.activeElement.tagName;if("TEXTAREA"!=s&&"INPUT"!=s){switch(n.keyCode){case 37:case 39:case 38:case 40:case 32:n.preventDefault()}if(n.keyCode<"37"||n.keyCode>"40")return;if(Tt[n.keyCode]=!0,e.edges(":selected").length!=e.elements(":selected").length||1!=e.edges(":selected").length)return;kt||(Et=e.edges(":selected"),e.trigger("edgeediting.movestart",[Et]),kt=!0);var a=3;if(n.altKey&&n.shiftKey)return;n.altKey?a=1:n.shiftKey&&(a=10);var l=0,u=0;l+=Tt[39]?a:0,u+=Tt[40]?a:0,r={x:l-=Tt[37]?a:0,y:u-=Tt[38]?a:0},(i=Et).forEach(function(e){var n=o.getAnchorsAsArray(e),i=[];if(null!=n){for(var s=0;s<n.length;s+=2)i.push({x:n[s]+r.x,y:n[s+1]+r.y});var a=o.getEdgeType(e);if(o.edgeTypeNoneShouldntHappen(a,"UiUtilities.js, moveAnchorPoints"))return;"bend"===a?t.bendPointPositionsSetterFunction(e,i):"control"===a&&t.controlPointPositionsSetterFunction(e,i)}}),o.initAnchorPoints(et().bendPositionsFunction,et().controlPositionsFunction,i),e.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(t){t.keyCode<"37"||t.keyCode>"40"||(t.preventDefault(),Tt[t.keyCode]=!1,("function"==typeof et().moveSelectedAnchorsOnKeyEvents?et().moveSelectedAnchorsOnKeyEvents():et().moveSelectedAnchorsOnKeyEvents)&&(e.trigger("edgeediting.moveend",[Et]),Et=void 0,kt=!1))},!0),r.data("cyedgeediting",tt)},unbind:function(){e.off("remove","node",c).off("add","node",h).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",u).off("select","edge",p).off("unselect","edge",f).off("tapstart",g).off("tapstart","edge",m).off("tapdrag",v).off("tapend",y).off("cxttap",b).off("drag","node",_).off("data","edge",x),e.unbind("zoom pan",d)}};return F[n]?F[n].apply($(e.container()),Array.prototype.slice.call(arguments,1)):"object"!=(void 0===n?"undefined":r(n))&&n?($.error("No such function `"+n+"` for cytoscape.js-edge-editing"),$(this)):F.init.apply($(e.container()),arguments)}},259:t=>{var e={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(t){this.ignoredClasses=t},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(t){return t?t.hasClass(this.syntax.bend.class)?"bend":t.hasClass(this.syntax.control.class)?"control":t.css("curve-style")===this.syntax.bend.edge?"bend":t.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(t)&&this.options.bendPositionsFunction(t).length>0?"bend":this.options.controlPositionsFunction(t)&&this.options.controlPositionsFunction(t).length>0?"control":"none":"none"},initAnchorPoints:function(t,e,n){for(var r=0;r<n.length;r++){var i=n[r],o=this.getEdgeType(i);if("none"!==o&&!this.isIgnoredEdge(i)){var s;"bend"===o?s=t.apply(this,i):"control"===o&&(s=e.apply(this,i));var a={weights:[],distances:[]};if(s)a=this.convertToRelativePositions(i,s);else{var l=i.data(this.syntax[o].weight),u=i.data(this.syntax[o].distance);l&&u&&(a={weights:l,distances:u})}a.distances.length>0?(i.data(this.syntax[o].weight,a.weights),i.data(this.syntax[o].distance,a.distances),i.addClass(this.syntax[o].class),a.distances.length>1&&i.addClass(this.syntax[o].multiClass)):(i.data(this.syntax[o].weight,[]),i.data(this.syntax[o].distance,[]),i.hasClass(this.syntax[o].class)&&i.removeClass(this.syntax[o].class),i.hasClass(this.syntax[o].multiClass)&&i.removeClass(this.syntax[o].multiClass))}}},isIgnoredEdge:function(t){var e=t.source().position("x"),n=t.source().position("y"),r=t.target().position("x"),i=t.target().position("y");if(e==r&&n==i||t.source().id()==t.target().id())return!0;for(var o=0;this.ignoredClasses&&o<this.ignoredClasses.length;o++)if(t.hasClass(this.ignoredClasses[o]))return!0;return!1},getLineDirection:function(t,e){return t.y==e.y&&t.x<e.x?1:t.y<e.y&&t.x<e.x?2:t.y<e.y&&t.x==e.x?3:t.y<e.y&&t.x>e.x?4:t.y==e.y&&t.x>e.x?5:t.y>e.y&&t.x>e.x?6:t.y>e.y&&t.x==e.x?7:8},getSrcTgtPointsAndTangents:function(t){var e=t.source(),n=t.target(),r=(n.position(),e.position(),e.position()),i=n.position(),o=(i.y-r.y)/(i.x-r.x);return{m1:o,m2:-1/o,srcPoint:r,tgtPoint:i}},getIntersection:function(t,e,n){void 0===n&&(n=this.getSrcTgtPointsAndTangents(t));var r,i,o=n.srcPoint,s=n.m1,a=n.m2;if(s==1/0||s==-1/0)r=o.x,i=e.y;else if(0==s)r=e.x,i=o.y;else{var l=o.y-s*o.x;i=s*(r=(e.y-a*e.x-l)/(s-a))+l}return{x:r,y:i}},getAnchorsAsArray:function(t){var e=this.getEdgeType(t);if("none"!==e&&t.css("curve-style")===this.syntax[e].edge){for(var n=[],r=t.pstyle(this.syntax[e].weightCss)?t.pstyle(this.syntax[e].weightCss).pfValue:[],i=t.pstyle(this.syntax[e].distanceCss)?t.pstyle(this.syntax[e].distanceCss).pfValue:[],o=Math.min(r.length,i.length),s=t.source().position(),a=t.target().position(),l=a.y-s.y,u=a.x-s.x,c=Math.sqrt(u*u+l*l),h={x:u/c,y:l/c},d=-h.y,p=h.x,f=0;f<o;f++){var g=r[f],m=i[f],v=1-g,y={x1:s.x,x2:a.x,y1:s.y,y2:a.y},b={x:y.x1*v+y.x2*g,y:y.y1*v+y.y2*g};n.push(b.x+d*m,b.y+p*m)}return n}},convertToRelativePosition:function(t,e,n){void 0===n&&(n=this.getSrcTgtPointsAndTangents(t));var r,i=this.getIntersection(t,e,n),o=i.x,s=i.y,a=n.srcPoint,l=n.tgtPoint;r=o!=a.x?(o-a.x)/(l.x-a.x):s!=a.y?(s-a.y)/(l.y-a.y):0;var u=Math.sqrt(Math.pow(s-e.y,2)+Math.pow(o-e.x,2)),c=this.getLineDirection(a,l),h=this.getLineDirection(i,e);return c-h!=-2&&c-h!=6&&0!=u&&(u*=-1),{weight:r,distance:u}},convertToRelativePositions:function(t,e){for(var n=this.getSrcTgtPointsAndTangents(t),r=[],i=[],o=0;e&&o<e.length;o++){var s=this.convertToRelativePosition(t,e[o],n);r.push(s.weight),i.push(s.distance)}return{weights:r,distances:i}},getDistancesString:function(t,e){for(var n="",r=t.data(this.syntax[e].distance),i=0;r&&i<r.length;i++)n=n+" "+r[i];return n},getWeightsString:function(t,e){for(var n="",r=t.data(this.syntax[e].weight),i=0;r&&i<r.length;i++)n=n+" "+r[i];return n},addAnchorPoint:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==t&&void 0!==e||(t=this.currentCtxEdge,e=this.currentCtxPos),void 0===n&&(n=this.getEdgeType(t));for(var r,i=this.syntax[n].weight,o=this.syntax[n].distance,s=this.convertToRelativePosition(t,e),a=s.weight,l=t.source().position("x"),u=t.source().position("y"),c=t.target().position("x"),h=t.target().position("y"),d=this.convertToRelativePosition(t,{x:l,y:u}).weight,p=this.convertToRelativePosition(t,{x:c,y:h}).weight,f=[d].concat(t.data(i)?t.data(i):[]).concat([p]),g=this.getAnchorsAsArray(t),m=1/0,v=[l,u].concat(g||[]).concat([c,h]),y=-1,b=0;b<f.length-1;b++){var _=f[b],x=f[b+1],w=this.compareWithPrecision(a,_,!0),S=this.compareWithPrecision(a,x),E=this.compareWithPrecision(a,x,!0),C=this.compareWithPrecision(a,_);if(w&&S||E&&C){var k={x:l=v[2*b],y:u=v[2*b+1]},T={x:c=v[2*b+2],y:h=v[2*b+3]},P=(u-h)/(l-c),A=this.getIntersection(t,e,{srcPoint:k,tgtPoint:T,m1:P,m2:-1/P}),D=Math.sqrt(Math.pow(e.x-A.x,2)+Math.pow(e.y-A.y,2));D<m&&(m=D,r=A,y=b)}}void 0!==r&&(e=r),s=this.convertToRelativePosition(t,e),void 0===r&&(s.distance=0);var O=t.data(i),M=t.data(o);return M=M||[],0===(O=O||[]).length&&(y=0),-1!=y&&(O.splice(y,0,s.weight),M.splice(y,0,s.distance)),t.data(i,O),t.data(o,M),t.addClass(this.syntax[n].class),(O.length>1||M.length>1)&&t.addClass(this.syntax[n].multiClass),y},removeAnchor:function(t,e){void 0!==t&&void 0!==e||(t=this.currentCtxEdge,e=this.currentAnchorIndex);var n=this.getEdgeType(t);if(!this.edgeTypeNoneShouldntHappen(n,"anchorPointUtilities.js, removeAnchor")){var r,i=this.syntax[n].weight,o=this.syntax[n].distance,s=t.data(i),a=t.data(o);"bend"===n?r=this.options.bendPositionsFunction(t):"control"===n&&(r=this.options.controlPositionsFunction(t)),s.splice(e,1),a.splice(e,1),r&&r.splice(e,1),1==s.length||1==a.length?t.removeClass(this.syntax[n].multiClass):0==s.length||0==a.length?(t.removeClass(this.syntax[n].class),t.data(i,[]),t.data(o,[])):(t.data(i,s),t.data(o,a))}},removeAllAnchors:function(t){void 0===t&&(t=this.currentCtxEdge);var e=this.getEdgeType(t);if(!this.edgeTypeNoneShouldntHappen(e,"anchorPointUtilities.js, removeAllAnchors")){t.removeClass(this.syntax[e].class),t.removeClass(this.syntax[e].multiClass);var n=this.syntax[e].distance;t.data(this.syntax[e].weight,[]),t.data(n,[]),"bend"===e&&this.options.bendPositionsFunction(t)?this.options.bendPointPositionsSetterFunction(t,[]):"control"===e&&this.options.controlPositionsFunction(t)&&this.options.controlPointPositionsSetterFunction(t,[])}},calculateDistance:function(t,e){var n=t.y-e.y;return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(n,2))},compareWithPrecision:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01;return Math.abs(t-e)<=r||(n?t<e:t>e)},edgeTypeNoneShouldntHappen:function(t,e){return"none"===t&&(console.log("In "+e+": edge type none should never happen here!!"),!0)}};t.exports=e},218:t=>{var e,n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=(e=Math.max,n=Date.now||function(){return(new Date).getTime()},function(t,i,o){var s,a,l,u,c,h,d,p,f,g=0,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");if(i=i<0?0:+i||0,!0===o){var y=!0;v=!1}else f=void 0===(p=o)?"undefined":r(p),!p||"object"!=f&&"function"!=f||(y=!!o.leading,m="maxWait"in o&&e(+o.maxWait||0,i),v="trailing"in o?!!o.trailing:v);function b(e,r){r&&clearTimeout(r),a=h=d=void 0,e&&(g=n(),l=t.apply(c,s),h||a||(s=c=void 0))}function _(){var t=i-(n()-u);t<=0||t>i?b(d,a):h=setTimeout(_,t)}function x(){b(v,h)}function w(){if(s=arguments,u=n(),c=this,d=v&&(h||!y),!1===m)var e=y&&!h;else{a||y||(g=u);var r=m-(u-g),o=r<=0||r>m;o?(a&&(a=clearTimeout(a)),g=u,l=t.apply(c,s)):a||(a=setTimeout(x,r))}return o&&h?h=clearTimeout(h):h||i===m||(h=setTimeout(_,i)),e&&(o=!0,l=t.apply(c,s)),!o||h||a||(s=c=void 0),l}return w.cancel=function(){h&&clearTimeout(h),a&&clearTimeout(a),g=0,a=h=d=void 0},w});t.exports=i},579:(t,e,n)=>{var r,i,o;i=n(259),n(218),o=function(t,e,r){var o=n(347);if(t&&e&&r){var s,a={bendPositionsFunction:function(t){return t.data("bendPointPositions")},controlPositionsFunction:function(t){return t.data("controlPointPositions")},bendPointPositionsSetterFunction:function(t,e){t.data("bendPointPositions",e)},controlPointPositionsSetterFunction:function(t,e){t.data("controlPointPositions",e)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},l=!1;t("core","edgeEditing",function(t){var e=this;return"initialized"===t?l:("get"!==t&&(s=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)if("bendRemovalSensitivity"==r){var i=e[r];isNaN(i)||(n[r]=i>=0&&i<=20?e[r]:i<0?0:20)}else n[r]=e[r];return n}(a,t),l=!0,e.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(t){return i.getDistancesString(t,"bend")},"segment-weights":function(t){return i.getWeightsString(t,"bend")},"edge-distances":"node-position"}),e.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(t){return i.getDistancesString(t,"control")},"control-point-weights":function(t){return i.getWeightsString(t,"control")},"edge-distances":"node-position"}),e.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),i.setIgnoredClasses(s.ignoredClasses),s.initAnchorsAutomatically&&i.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,e.edges(),s.ignoredClasses),o(s,e)),l?{getAnchorsAsArray:function(t){return i.getAnchorsAsArray(t)},initAnchorPoints:function(t){i.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,t)},deleteSelectedAnchor:function(t,e){i.removeAnchor(t,e)},getEdgeType:function(t){return i.getEdgeType(t)}}:void 0)})}},t.exports&&(t.exports=o),void 0===(r=(function(){return o}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&$&&Konva&&o(cytoscape,$,Konva)},171:t=>{t.exports={disconnectEdge:function(t,e,n,r){var i={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:n};return e.add(i),t=t.move("source"===r?{source:i.data.id}:{target:i.data.id})[0],{dummyNode:e.nodes("#"+i.data.id)[0],edge:t}},connectEdge:function(t,e,n){if(t.isEdge()&&e.isNode()){var r={};if("source"===n)r.source=e.id();else{if("target"!==n)return;r.target=e.id()}return t.move(r)[0]}},copyEdge:function(t,e){this.copyAnchors(t,e),this.copyStyle(t,e)},copyStyle:function(t,e){t&&e&&(e.data("line-color",t.data("line-color")),e.data("width",t.data("width")),e.data("cardinality",t.data("cardinality")))},copyAnchors:function(t,e){if(t.hasClass("edgebendediting-hasbendpoints")){var n=t.data("cyedgebendeditingDistances"),r=t.data("cyedgebendeditingWeights");e.data("cyedgebendeditingDistances",n),e.data("cyedgebendeditingWeights",r),e.addClass("edgebendediting-hasbendpoints")}else t.hasClass("edgecontrolediting-hascontrolpoints")&&(n=t.data("cyedgecontroleditingDistances"),r=t.data("cyedgecontroleditingWeights"),e.data("cyedgecontroleditingDistances",n),e.data("cyedgecontroleditingWeights",r),e.addClass("edgecontrolediting-hascontrolpoints"));t.hasClass("edgebendediting-hasmultiplebendpoints")?e.addClass("edgebendediting-hasmultiplebendpoints"):t.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&e.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:t=>{t.exports=function(t,e,n){if(null!=t.undoRedo){var r=t.undoRedo({defaultActions:!1,isDebug:!0});r.action("changeAnchorPoints",i,i),r.action("moveAnchorPoints",o,o),r.action("reconnectEdge",s,s),r.action("removeReconnectedEdge",a,a)}function i(n){var r,i,o,s,a=t.getElementById(n.edge.id()),l="none"!==n.type?n.type:e.getEdgeType(a);"none"!==n.type||n.set?(o=e.syntax[l].weight,s=e.syntax[l].distance,r=n.set?a.data(o):n.weights,i=n.set?a.data(s):n.distances):(r=[],i=[]);var u={edge:a,type:l,weights:r,distances:i,set:!0};if(n.set){var c=n.weights&&n.weights.length>0,h=c&&n.weights.length>1;c&&(a.data(o,n.weights),a.data(s,n.distances));var d=e.syntax[l].class,p=e.syntax[l].multiClass;c||h?c&&!h?(a.addClass(d),a.removeClass(p)):a.addClass(d+" "+p):a.removeClass(d+" "+p),c||(a.data(o,[]),a.data(s,[])),a.selected()?(a.unselect(),a.select()):a.select()}return a.trigger("cyedgeediting.changeAnchorPoints"),u}function o(t){if(t.firstTime)return delete t.firstTime,t;var r=t.edges,i=t.positionDiff,o={edges:r,positionDiff:{x:-i.x,y:-i.y}};return function(t,r){r.forEach(function(r){var i=e.getEdgeType(r),o=e.getAnchorsAsArray(r),s=[];if(null!=o){for(var a=0;a<o.length;a+=2)s.push({x:o[a]+t.x,y:o[a+1]+t.y});"bend"===i?n.bendPointPositionsSetterFunction(r,s):"control"===i&&n.controlPointPositionsSetterFunction(r,s)}}),e.initAnchorPoints(n.bendPositionsFunction,n.controlPositionsFunction,r)}(i,r),o}function s(t){var e=t.edge,n=t.location,r=t.oldLoc,i={edge:e=e.move(n)[0],location:r,oldLoc:n};return e.unselect(),i}function a(e){var n=e.oldEdge;(r=t.getElementById(n.data("id")))&&r.length>0&&(n=r);var r,i=e.newEdge;return(r=t.getElementById(i.data("id")))&&r.length>0&&(i=r),n.inside()&&(n=n.remove()[0]),i.removed()&&(i=i.restore()).unselect(),{oldEdge:i,newEdge:n}}}}},e={};return function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(579)})()},9049:function(t,e,n){var r;r=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.filter(function(t){return null!=t}).forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e,n){"use strict";var r=n(10),i=n(0);t.exports=function(t){return new r(i({cy:this},t))}},function(t,e,n){"use strict";t.exports={disableGestures:function(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,t),window.addEventListener("touchmove",this.preventDefault,t),window.addEventListener("wheel",this.preventDefault,t)}return this},resetGestures:function(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var t=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,t),window.removeEventListener("touchmove",this.preventDefault,t),window.removeEventListener("wheel",this.preventDefault,t)}return this},saveGestureState:function(){var t=this.cy;return this.lastPanningEnabled=t.panningEnabled(),this.lastZoomingEnabled=t.zoomingEnabled(),this.lastBoxSelectionEnabled=t.boxSelectionEnabled(),this}}},function(t,e,n){"use strict";t.exports={addCytoscapeListeners:function(){var t=this,e=this.cy,n=this.options;return this.addListener(e,"drag",function(){return t.grabbingNode=!0}),this.addListener(e,"free",function(){return t.grabbingNode=!1}),this.addListener(e,"mouseover","node",function(e){t.show(e.target)}),this.addListener(e,"tap","node",function(e){var n=e.target;n.same(t.handleNode)||t.show(n)}),this.addListener(e,"position","node",function(e){e.target.same(t.sourceNode)&&t.hide()}),this.addListener(e,"tapstart","node",function(e){var n=e.target;n.same(t.handleNode)?t.start(t.sourceNode):t.drawMode?t.start(n):n.same(t.sourceNode)&&t.hide()}),this.addListener(e,"tapdrag",function(e){t.update(e.position)}),this.addListener(e,"tapdragover","node",function(e){n.snap||t.preview(e.target)}),this.addListener(e,"tapdragout","node",function(e){n.snap||t.unpreview(e.target)}),this.addListener(e,"tapend",function(){t.stop()}),this.addListener(e,"remove",function(e){e.target.same(t.sourceNode)&&t.hide()}),this}}},function(t,e,n){"use strict";t.exports={preview:!0,hoverDelay:150,handleNodes:"node",snap:!1,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!1,disableBrowserGestures:!0,handlePosition:function(t){return"middle top"},handleInDrawMode:!1,edgeType:function(t,e){return"flat"},loopAllowed:function(t){return!1},nodeLoopOffset:-50,nodeParams:function(t,e){return{}},edgeParams:function(t,e,n){return{}},ghostEdgeParams:function(){return{}},show:function(t){},hide:function(t){},start:function(t){},complete:function(t,e,n){},stop:function(t){},cancel:function(t,e){},hoverover:function(t,e){},hoverout:function(t,e){},previewon:function(t,e,n){},previewoff:function(t,e,n){},drawon:function(){},drawoff:function(){}}},function(t,e,n){"use strict";t.exports={toggleDrawMode:function(t){var e=this.cy,n=this.options;return this.drawMode=null!=t?t:!this.drawMode,this.drawMode?(this.prevUngrabifyState=e.autoungrabify(),e.autoungrabify(!0),!n.handleInDrawMode&&this.handleShown()&&this.hide(),this.emit("drawon")):(e.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function(){return this.toggleDrawMode(!0)},disableDrawMode:function(){return this.toggleDrawMode(!1)}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0);function o(t,e,n){var o,s={};return i(s,e,t),i(s.data,e.data,t.data),s.classes=(void 0===(o=e.classes)?"undefined":r(o))===r("")?e.classes+" "+n:function(t){return(void 0===t?"undefined":r(t))===r([])&&null!=t.length}(e.classes)?e.classes.join(" ")+" "+n:n,s}t.exports={makeEdges:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy,n=this.options,r=this.presumptiveTargets,i=this.previewEles,s=this.active,a=this.sourceNode,l=this.targetNode,u=t?"eh-preview":"",c=e.collection(),h=n.edgeType(a,l);if(s&&h&&(!t||n.preview)){if(!l||0===l.size())return i.remove(),void this.emit("cancel",this.mp(),a,r);if(!t&&n.preview)return i.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),a,l,i);var d=a.position(),p=l.position(),f=void 0;if(f=a.same(l)?{x:d.x+n.nodeLoopOffset,y:d.y+n.nodeLoopOffset}:{x:(d.x+p.x)/2,y:(d.y+p.y)/2},"node"===h){var g=e.add(o({group:"nodes",position:f},n.nodeParams(a,l),u)),m=e.add(o({group:"edges",data:{source:a.id(),target:g.id()}},n.edgeParams(a,l,0),u)),v=e.add(o({group:"edges",data:{source:g.id(),target:l.id()}},n.edgeParams(a,l,1),u));c=c.merge(g).merge(m).merge(v)}else{var y=e.add(o({group:"edges",data:{source:a.id(),target:l.id()}},n.edgeParams(a,l,0),u));c=c.merge(y)}return t?(this.previewEles=c,c.style("events","no")):(c.style("events",""),this.emit("complete",this.mp(),a,l,c)),this}},makePreview:function(){return this.makeEdges(!0),this},removePreview:function(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function(){var t=this,e=this.sourceNode,n=this.ghostNode,r=this.cy,o=this.options,s=this.mx,a=this.my,l=void 0,u=void 0;if(e)return n&&0!==n.length&&!n.removed()||(u=this.ghostEles=r.collection(),r.batch(function(){(n=t.ghostNode=r.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var s=o.ghostEdgeParams();(l=r.add(i({},s,{group:"edges",data:i({},s.data,{source:e.id(),target:n.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),u.merge(n).merge(l)),n.position({x:s,y:a}),this},handleShown:function(){return this.handleNode.nonempty()&&this.handleNode.inside()},setHandleFor:function(t){var e=this,n=this.options,i=this.cy,o=r(n.handlePosition)===r("")?function(){return n.handlePosition}:n.handlePosition,s=t.position(),a=t.outerHeight(),l=t.outerWidth(),u=0,c=0,h=o(t).toLowerCase().split(/\s+/),d=h[0],p=h[1];"left"===d?u=-l/2:"right"===d&&(u=l/2),"top"===p?c=-a/2:"bottom"===p&&(c=a/2);var f={x:this.hx=s.x+u,y:this.hy=s.y+c};return this.handleShown()?this.handleNode.position(f):i.batch(function(){e.handleNode=i.add({classes:"eh-handle",position:f,grabbable:!1,selectable:!1}),e.handleNode.style("z-index",9007199254740991)}),this},removeHandle:function(){return this.handleShown()&&this.handleNode.remove(),this}}},function(t,e,n){"use strict";t.exports={disableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(t,e,n){"use strict";t.exports={enable:function(){return this.enabled=!0,this.emit("enable"),this},disable:function(){return this.enabled=!1,this.emit("disable"),this}}},function(t,e,n){"use strict";n(13);var r=Math.sqrt(2);t.exports={show:function(t){var e=this.options,n=this.drawMode;if(this.canStartOn(t)&&(!n||e.handleInDrawMode))return this.sourceNode=t,this.setHandleFor(t),this.emit("show",this.hp(),this.sourceNode),this},hide:function(){return this.removeHandle(),this.emit("hide",this.hp(),this.sourceNode),this},start:function(t){this.canStartOn(t)&&(this.active=!0,this.sourceNode=t,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents(),this.emit("start",this.hp(),t))},update:function(t){if(this.active){var e=t;return this.mx=e.x,this.my=e.y,this.updateEdge(),this.throttledSnap(),this}},preview:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.options,i=this.sourceNode,o=this.ghostNode,s=this.ghostEles,a=this.presumptiveTargets,l=this.previewEles,u=this.active,c=i,h=t.same(c),d=r.loopAllowed(t),p=t.same(o),f=!r.edgeType(c,t),g=t.same(this.handleNode),m=t.same(this.targetNode);if(!u||g||p||f||m||h&&!d)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var v=function(){e.targetNode=t,a.merge(t),t.addClass("eh-presumptive-target"),t.addClass("eh-target"),e.emit("hoverover",e.mp(),c,t),r.preview&&(t.addClass("eh-preview"),s.addClass("eh-preview-active"),i.addClass("eh-preview-active"),t.addClass("eh-preview-active"),e.makePreview(),e.emit("previewon",e.mp(),c,t,l))};return n&&r.hoverDelay>0?this.previewTimeout=setTimeout(v,r.hoverDelay):v(),!0},unpreview:function(t){if(this.active&&!t.same(this.handleNode)){var e=this.sourceNode,n=this.previewEles,r=this.ghostEles,i=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var o=e;return t.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),r.removeClass("eh-preview-active"),e.removeClass("eh-preview-active"),this.targetNode=i.collection(),this.removePreview(o,t),this.emit("hoverout",this.mp(),o,t),this.emit("previewoff",this.mp(),o,t,n),this}},stop:function(){if(this.active){var t=this.sourceNode,e=this.targetNode,n=this.ghostEles,r=this.presumptiveTargets;return clearTimeout(this.previewTimeout),t.removeClass("eh-source"),e.removeClass("eh-target eh-preview eh-hover"),r.removeClass("eh-presumptive-target"),this.makeEdges(),this.removeHandle(),n.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),t),this}},snap:function(){if(!this.active||!this.options.snap)return!1;var t=this.cy,e=this.targetNode,n=this.options.snapThreshold,i=this.mp(),o=this.handleNode,s=this.previewEles,a=this.ghostNode,l=function(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o},u=function(t){return function(t){return e=t.position(),l(e.x,e.y,(n=i).x,n.y);var e,n}(t)<=function(t){var e=function(t){return r*Math.max(t.outerWidth(),t.outerHeight())/2}(t)+n;return e*e}(t)},c=function(t){var e=t.position(),n=t.outerWidth()/2,r=t.outerHeight()/2,o=e.x,s=e.y,a=i.x,u=i.y,c=o-n,h=o+n,d=s-r,p=s+r,f=c<=a&&a<=h,g=d<=u&&u<=p;if(f&&g)return 0;if(f){var m=u-d,v=u-p;return Math.min(m*m,v*v)}if(g){var y=a-c,b=a-h;return Math.min(y*y,b*b)}return a<c&&u<d?l(a,u,c,d):a>h&&u<d?l(a,u,h,d):l(a,u,a<c&&u>p?c:h,p)},h=function(t){var e=i,n=t.outerWidth()/2,r=t.outerHeight()/2,o=t.position();return o.x-n<=e.x&&e.x<=o.x+n&&o.y-r<=e.y&&e.y<=o.y+r},d=t.nodes(function(t){return!function(t){return t.same(o)||t.same(s)||t.same(a)}(t)&&u(t)}).sort(function(t,e){return c(t)-c(e)}),p=!1;e.nonempty()&&!u(e)&&this.unpreview(e);for(var f=0;f<d.length;f++){var g=d[f];if((!g.isParent()||!h(g))&&(!g.isChild()||h(g.parent()))&&(g.same(e)||this.preview(g,!1))){p=!0;break}}return p},canStartOn:function(t){var e,n=this.options,r=this.previewEles,i=this.ghostEles,o=this.handleNode;return this.enabled&&!this.active&&!this.grabbingNode&&(null==t||!(function(t){return r.anySame(t)}(e=t)||function(t){return o.same(t)}(e)||function(t){return i.anySame(t)}(e))&&function(t){return t.filter(n.handleNodes).length>0}(t))},canStartDrawModeOn:function(t){return this.canStartOn(t)&&this.drawMode},canStartNonDrawModeOn:function(t){return this.canStartOn(t)&&!this.drawMode}}},function(t,e,n){"use strict";var r=n(4),i=n(0),o=n(14),s=n(2),a=n(3),l=n(5),u=n(6),c=n(8),h=n(9),d=n(11),p=n(7);function f(t){var e=t.cy;this.cy=e,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.handleNode=e.collection(),this.clearCollections(),this.hx=0,this.hy=0,this.hr=0,this.mx=0,this.my=0,this.options=i({},r,t),this.saveGestureState(),this.addListeners(),this.throttledSnap=o(this.snap.bind(this),1e3/t.snapFrequency),this.preventDefault=function(t){return t.preventDefault()};var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,s)}catch(a){}this.windowListenerOptions=!n||{capture:!0,passive:!1}}var g=f.prototype={};g.destroy=function(){this.removeListeners()},g.setOptions=function(t){i(this.options,t)},g.mp=function(){return{x:this.mx,y:this.my}},g.hp=function(){return{x:this.hx,y:this.hy}},g.clearCollections=function(){var t=this.cy;this.previewEles=t.collection(),this.ghostEles=t.collection(),this.ghostNode=t.collection(),this.sourceNode=t.collection(),this.targetNode=t.collection(),this.presumptiveTargets=t.collection()},[s,a,l,u,c,h,d,p].forEach(function(t){return i(g,t)}),t.exports=f},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e,n,i,o){return(void 0===n?"undefined":r(n))!==r("")&&(o=i=n,n=null),null==o&&(o=!1),{target:t,event:e,selector:n,callback:i,options:o}}function o(t){return t instanceof Element}t.exports={addListener:function(t,e,n,r,s){var a=i(t,e,n,r,s);return this.listeners.push(a),o(a.target)?a.target.addEventListener(a.event,a.callback,a.options):a.selector?a.target.addListener(a.event,a.selector,a.callback,a.options):a.target.addListener(a.event,a.callback,a.options),this},addListeners:function(){var t=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return t.destroy()}),this},removeListener:function(t,e,n,r,s){for(var a=i(t,e,n,r,s),l=this.listeners.length-1;l>=0;l--){var u=this.listeners[l];if(!(a.target!==u.target||a.event!==u.event||null!=a.selector&&a.selector!==u.selector||null!=a.callback&&a.callback!==u.callback)){this.listeners.splice(l,1),o(a.target)?a.target.removeEventListener(a.event,a.callback,a.options):a.selector?a.target.removeListener(a.event,a.selector,a.callback,a.options):a.target.removeListener(a.event,a.callback,a.options);break}}return this},removeListeners:function(){for(var t=this.listeners.length-1;t>=0;t--){var e=this.listeners[t];this.removeListener(e.target,e.event,e.selector,e.callback,e.options)}return this},emit:function(t,e){for(var n=this.options,r=this.cy,i=arguments.length,o=Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];r.emit({type:"eh"+t,position:e},o);var a=n[t];return null!=a&&a.apply(void 0,o),this}}},function(t,e,n){"use strict";var r=n(1),i=function(t){t&&t("core","edgehandles",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(e,n){e.exports=t},function(t,n){t.exports=e}])},t.exports=r(n(6301),n(2548))},8080:function(t){t.exports=function(t,e,n){function r(t,e,n){t.union(t.descendants()).filter(":childless").positions(function(t,r){"number"==typeof t&&(t=r);var i=t.position();return{x:i.x+e,y:i.y+n}})}if(n||t("collection","align",function(t,e,n){var i=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})}(this.nodes(":visible")),o=n||i[0];i=i.not(o);var s=0,a=0;"left"==(e=e||"none")?s=-1:"right"==e&&(s=1),"top"==(t=t||"none")?a=-1:"bottom"==t&&(a=1);for(var l=0;l<i.length;l++){var u=i[l],c=Object.assign({},u.position()),h=Object.assign({},u.position());"none"!=e&&(h.x=o.position("x")+s*(o.outerWidth()-u.outerWidth())/2),"none"!=t&&(h.y=o.position("y")+a*(o.outerHeight()-u.outerHeight())/2),r(u,h.x-c.x,h.y-c.y)}return this}),e.undoRedo){function i(t){var n={};return e.nodes().not(":parent").positions(function(e,r){"number"==typeof e&&(e=r),n[e.id()]={x:e.position("x"),y:e.position("y")};var i=t[e.id()];return{x:i.x,y:i.y}}),n}e.undoRedo(null,!0).action("align",function(t){var n;return t.firstTime?(n=function(){for(var t={},n=e.nodes(),r=0;r<n.length;r++){var i=n[r];t[i.id()]={x:i.position("x"),y:i.position("y")}}return t}(),t.nodes.align(t.horizontal,t.vertical,t.alignTo)):n=i(t),n},function(t){return i(t)})}}},5567:function(t){var e,n,r=(e=Math.max,n=Date.now||function(){return(new Date).getTime()},function(t,r,i){var o,s,a,l,u,c,h,d,p,f=0,g=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");if(r=r<0?0:+r||0,!0===i){var v=!0;m=!1}else p=typeof(d=i),!d||"object"!=p&&"function"!=p||(v=!!i.leading,g="maxWait"in i&&e(+i.maxWait||0,r),m="trailing"in i?!!i.trailing:m);function y(e,r){r&&clearTimeout(r),s=c=h=void 0,e&&(f=n(),a=t.apply(u,o),c||s||(o=u=void 0))}function b(){var t=r-(n()-l);t<=0||t>r?y(h,s):c=setTimeout(b,t)}function _(){y(m,c)}function x(){if(o=arguments,l=n(),u=this,h=m&&(c||!v),!1===g)var e=v&&!c;else{s||v||(f=l);var i=g-(l-f),d=i<=0||i>g;d?(s&&(s=clearTimeout(s)),f=l,a=t.apply(u,o)):s||(s=setTimeout(_,i))}return d&&c?c=clearTimeout(c):c||r===g||(c=setTimeout(b,r)),e&&(d=!0,a=t.apply(u,o)),!d||c||s||(o=u=void 0),a}return x.cancel=function(){c&&clearTimeout(c),s&&clearTimeout(s),f=0,s=c=h=void 0},x});t.exports=r},7150:function(t){t.exports=function(t,e,n){var r=t,i=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.documentElement.scrollTop,left:e.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),s=e.container(),a=o.getContext("2d");s.appendChild(o);var l=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=r.gridStackOrder};l();var u=function(){var t=e.zoom(),n=e.width(),i=e.height(),o=r.gridSpacing*t,s=e.pan(),l=s.x%o,u=s.y%o;a.strokeStyle=r.gridColor,a.lineWidth=r.lineWidth;var h='\t<svg width="'+n+'" height="'+i+'" xmlns="http://www.w3.org/2000/svg">\n            <defs>\n                <pattern id="horizontalLines" width="'+o+'" height="'+o+'" patternUnits="userSpaceOnUse">\n                    <path d="M '+o+' 0 L 0 0 0 0" fill="none" stroke="'+r.gridColor+'" stroke-width="'+r.lineWidth+'" />\n                </pattern>\n                <pattern id="verticalLines" width="'+o+'" height="'+o+'" patternUnits="userSpaceOnUse">\n                    <path d="M 0 0 L 0 0 0 '+o+'" fill="none" stroke="'+r.gridColor+'" stroke-width="'+r.lineWidth+'" />\n                </pattern>\n            </defs>\n            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, '+u+')" />\n            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate('+l+', 0)" />\n        </svg>\n',d=new Image;h=encodeURIComponent(h),d.onload=function(){c(),a.drawImage(d,0,0)},d.src="data:image/svg+xml,"+h},c=function(){var t=e.width(),n=e.height();a.clearRect(0,0,t,n)},h=n(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=r.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var t=i(o),n=i(s);o.style.top=-(t.top-n.top),o.style.left=-(t.left-n.left),u()},0)},250);return{initCanvas:h,resizeCanvas:h,resetCanvas:l,clearCanvas:c,drawGrid:u,changeOptions:function(t){r=t},sizeCanvas:u}}},8896:function(t){t.exports=function(t,e,n,r,i,o,s,a){var l=function(t){return function(e){t(e)}},u={snapToGridDuringDrag:new l(function(e){t[p(e)]("tapstart","node",r.onTapStartNode)}),resize:new l(function(e){t[p(e)]("ready",g),e?g():m()}),snapToGridOnRelease:new l(function(n){t[p(n)]("add","node",b),t[p(n)]("ready",v),t[p(n)]("free","node",e.onFreeNode),n?v():y()}),drawGrid:new l(function(e){t[p(e)]("zoom",_),t[p(e)]("pan",x),e?(i.initCanvas(),t.on("resize",i.resizeCanvas)):(i.clearCanvas(),i.resetCanvas(),t.off("resize",i.resizeCanvas))}),guidelines:new l(function(e){e?(o.resizeCanvas(),t.on("tapstart","node",T),t.on("grab",S),t.on("pan",P),t.on("drag","node",E),t.on("free",C),window.addEventListener("resize",k)):(t.off("tapstart","node",T),t.off("grab",S),t.off("pan",P),t.off("drag","node",E),t.off("free",C),o.resetCanvas(),window.removeEventListener("resize",k))}),parentPadding:new l(function(e){A(e),t[p(e)]("ready",A),t[p(e)]("add","node:parent",c(D,!0))})};function c(t,e){return function(n){var r=n.target||n.cyTarget;r.is(":parent")&&!e||t(r)}}function h(e){return function(){t.nodes().not(":parent").each(function(t,n){"number"==typeof t&&(t=n),e(t)})}}function d(e){return function(){t.nodes().each(function(t,n){"number"==typeof t&&(t=n),e(t)})}}function p(t){return t?"on":"off"}var f,g=h(n.resizeNode),m=(c(n.resizeNode),h(n.recoverNodeDimensions)),v=d(e.snapNodesTopDown),y=d(e.recoverSnapNode),b=c(e.snapNode,!0),_=function(){f.zoomDash&&i.drawGrid()},x=function(){f.panGrid&&i.drawGrid()},w=null,S=function(t){var e=t.target||t.cyTarget,n=e.selected()?t.cy.$(":selected"):e;w=o.getTopMostNodes(n.nodes()),o.lines.init(w)},E=function(t){this.id()==w.id()&&(o.lines.update(w),f.snapToAlignmentLocationDuringDrag&&o.lines.snapToAlignmentLocation(w))},C=function(t){f.snapToAlignmentLocationOnRelease&&o.lines.snapToAlignmentLocation(w),o.lines.destroy(),w=null},k=function(t){o.lines.resize()},T=function(t){o.getMousePos(t)},P=function(e){w&&(o.setMousePos(t.pan()),o.lines.init(w))},A=function(e){s.setPaddingOfParent(t.nodes(":parent"),e)},D=function(t){s.setPaddingOfParent(t,!0)},O={},M={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function I(t){for(var r in f=Object.extend({},t),t.guidelines=t.initPosAlignment||t.distributionGuidelines||t.geometricGuideline,t)if(O[r]!=t[r])if(u.hasOwnProperty(r))u[r](t[r]);else for(var a in M)M[a].indexOf(r)>=0&&("drawGrid"==a&&(i.changeOptions(t),t.drawGrid&&i.resizeCanvas()),"snapToGridOnRelease"==a&&(e.changeOptions(t),t.snapToGridOnRelease&&v()),"guidelines"==a&&o.changeOptions(t),"resize"==a&&(n.changeOptions(t),t.resize&&g()),"parentPadding"==a&&s.changeOptions(t));O=Object.extend({},O,t)}return{init:I,syncWithOptions:I}}},5713:function(){Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=Array.isArray(n[r])?n[r].slice():"object"==typeof n[r]?Object.extend(t[r],n[r]):n[r])}return t}},7441:function(t,e,n){t.exports=function(t,e,r){var i=n(6620),o=t,s=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.documentElement.scrollTop,left:e.left+document.documentElement.scrollLeft}},a=r(function(){l(),u.height=e.height(),u.width=e.width(),u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=o.guidelinesStackOrder,setTimeout(function(){u.height=e.height(),u.width=e.width();var t=s(u),n=s(c);u.style.top=-(t.top-n.top),u.style.left=-(t.left-n.left)},0)},250),l=function(){var t=e.width(),n=e.height();h.clearRect(0,0,t,n)},u=document.createElement("canvas"),c=e.container(),h=u.getContext("2d");c.appendChild(u);var d=function(){u.height=0,u.width=0,u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=o.guidelinesStackOrder};d();var p,f,g=null,m=null,v={},y={},b={h:null,v:null};v.getDims=function(t){var e=t.renderedPosition(),n=t.renderedWidth(),r=t.renderedHeight(),i=Number(t.renderedStyle("padding-left").replace("px","")),o=Number(t.renderedStyle("padding-right").replace("px","")),s=Number(t.renderedStyle("padding-top").replace("px","")),a=Number(t.renderedStyle("padding-bottom").replace("px",""));return{horizontal:{center:e.x,left:Math.round(e.x-(i+n/2)),right:Math.round(e.x+(o+n/2))},vertical:{center:e.y,top:Math.round(e.y-(s+r/2)),bottom:Math.round(e.y+(a+r/2))}}},v.init=function(t){g=i(),m=i(),p||(y.x=e.pan("x"),y.y=e.pan("y"),p=t.renderedPosition());var n=e.nodes(":visible");f=(f=t.union(t.ancestors())).union(t.descendants()),n.not(f).each(function(t,e){"number"==typeof t&&(t=e);var n=v.getDims(t);["left","center","right"].forEach(function(e){var r=n.horizontal[e];m.get(r)?m.get(r).push(t):m=m.insert(r,[t])}),["top","center","bottom"].forEach(function(e){var r=n.vertical[e];g.get(r)?g.get(r).push(t):g=g.insert(r,[t])})}),h.lineWidth=o.lineWidth,v.update(t)},v.destroy=function(){v.clear(),g=null,m=null,p=null,S={},b={h:null,v:null},T&&(T.unlock(),T=void 0)},v.clear=l,v.drawLine=function(t,e,n,r){h.setLineDash(r),h.beginPath(),h.moveTo(t.x,t.y),h.lineTo(e.x,e.y),h.strokeStyle=n,h.stroke()},v.drawArrow=function(t,e){"right"==e?(h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y-5),h.lineTo(t.x,t.y),h.lineTo(t.x-5,t.y+5),h.stroke()):"left"==e?(h.setLineDash([]),h.beginPath(),h.moveTo(t.x+5,t.y-5),h.lineTo(t.x,t.y),h.lineTo(t.x+5,t.y+5),h.stroke()):"top"==e?(h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y+5),h.lineTo(t.x,t.y),h.lineTo(t.x+5,t.y+5),h.stroke()):"bottom"==e&&(h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y-5),h.lineTo(t.x,t.y),h.lineTo(t.x+5,t.y-5),h.stroke())},v.drawCross=function(t){h.setLineDash([]),h.beginPath(),h.moveTo(t.x-5,t.y+5),h.lineTo(t.x+5,t.y-5),h.moveTo(t.x-5,t.y-5),h.lineTo(t.x+5,t.y+5),h.stroke()};var _=function(t,n){for(var r=t[0],i=v.getDims(r)[n].center,s=t[0],a=v.getDims(s)[n].center,l=0;l<t.length;l++){var u=t[l];v.getDims(u)[n].center<i&&(i=v.getDims(u)[n].center,r=u),v.getDims(u)[n].center>a&&(a=v.getDims(u)[n].center,s=u)}if("horizontal"==n)var c=(i+a)/2<v.getDims(t[1])[n].center?a+(.5*s.width()+o.guidelinesStyle.distGuidelineOffset)*e.zoom():i-(.5*r.width()+o.guidelinesStyle.distGuidelineOffset)*e.zoom();else c=(i+a)/2<v.getDims(t[1])[n].center?a+(.5*s.height()+o.guidelinesStyle.distGuidelineOffset)*e.zoom():i-(.5*r.height()+o.guidelinesStyle.distGuidelineOffset)*e.zoom();return c};function x(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})}v.horizontalDistribution=function(t){var n=null,r=null,i=v.getDims(t),s=i.horizontal.center,a=i.vertical.center;if(m.forEach(function(t,l){for(var u=0;u<l.length;u++){var c=l[u],h=v.getDims(c);if(Math.abs(h.vertical.center-i.vertical.center)<o.guidelinesStyle.range*e.zoom()&&h.horizontal.right==t&&i.horizontal.left-h.horizontal.right>o.guidelinesStyle.minDistRange){var d=Math.round(2*s)-t;m.forEach(function(t,i){for(var s=0;s<i.length;s++){var l=i[s];Math.abs(v.getDims(l).vertical.center-a)<o.guidelinesStyle.range*e.zoom()&&Math.abs(d-v.getDims(l).horizontal.left)<2*o.guidelinesTolerance&&(n=c,r=l)}},d-o.guidelinesTolerance,d+o.guidelinesTolerance)}}},s-o.guidelinesStyle.range*e.zoom(),s),n){b.hd=s-(v.getDims(r).horizontal.left+v.getDims(n).horizontal.right)/2,(!o.geometricGuideline||null==b.h||Math.abs(b.h)>Math.abs(b.hd))&&(b.h=b.hd);var l=_([n,t,r],"vertical");v.drawLine({x:v.getDims(n).horizontal.right,y:l},{x:i.horizontal.left,y:l},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(r).horizontal.left,y:l},{x:i.horizontal.right,y:l},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(n).horizontal.right,y:l},{x:v.getDims(n).horizontal.right,y:v.getDims(n).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(r).horizontal.left,y:l},{x:v.getDims(r).horizontal.left,y:v.getDims(r).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:i.horizontal.left,y:l},{x:i.horizontal.left,y:a},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:i.horizontal.right,y:l},{x:i.horizontal.right,y:a},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(n).horizontal.right,y:l},"left"),v.drawArrow({x:i.horizontal.left,y:l},"right"),v.drawArrow({x:i.horizontal.right,y:l},"left"),v.drawArrow({x:v.getDims(r).horizontal.left,y:l},"right")}else v.horizontalDistributionNext(t,"left")||v.horizontalDistributionNext(t,"right")},v.verticalDistribution=function(t){var n=null,r=null,i=v.getDims(t),s=i.horizontal.center,a=i.vertical.center;if(g.forEach(function(t,l){for(var u=0;u<l.length;u++){var c=l[u],h=v.getDims(c);if(Math.abs(h.horizontal.center-i.horizontal.center)<o.guidelinesStyle.range*e.zoom()&&h.vertical.bottom==t&&i.vertical.top-h.vertical.bottom>o.guidelinesStyle.minDistRange){var d=Math.round(2*a-t);g.forEach(function(t,i){for(var a=0;a<i.length;a++){var l=i[a];Math.abs(v.getDims(l).horizontal.center-s)<o.guidelinesStyle.range*e.zoom()&&Math.abs(d-v.getDims(l).vertical.top)<2*o.guidelinesTolerance&&(n=c,r=l)}},d-o.guidelinesTolerance,d+o.guidelinesTolerance)}}},a-o.guidelinesStyle.range*e.zoom(),a),n){b.vd=a-(v.getDims(n).vertical.bottom+v.getDims(r).vertical.top)/2,(!o.geometricGuideline||null==b.v||Math.abs(b.v)>Math.abs(b.vd))&&(b.v=b.vd);var l=_([n,t,r],"horizontal");v.drawLine({y:v.getDims(n).vertical.bottom,x:l},{y:i.vertical.top,x:l},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(r).vertical.top,x:l},{y:i.vertical.bottom,x:l},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(n).vertical.bottom,x:l},{y:v.getDims(n).vertical.bottom,x:v.getDims(n).horizontal.center},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(r).vertical.top,x:l},{y:v.getDims(r).vertical.top,x:v.getDims(r).horizontal.center},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({y:i.vertical.bottom,x:l},{y:i.vertical.bottom,x:s},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({y:i.vertical.top,x:l},{y:i.vertical.top,x:s},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawArrow({x:l,y:v.getDims(n).vertical.bottom},"top"),v.drawArrow({x:l,y:i.vertical.top},"bottom"),v.drawArrow({x:l,y:v.getDims(r).vertical.top},"bottom"),v.drawArrow({x:l,y:i.vertical.bottom},"top")}else v.verticalDistributionNext(t,"below")||v.verticalDistributionNext(t,"above")},v.searchForLine=function(t,n){var r,i,s,a,l,u,c,h=v.getDims(n)[t],d=Number.MAX_SAFE_INTEGER;for(var p in"horizontal"==t?(u=m,a="y",l="x",b.h=null):(u=g,a="x",l="y",b.v=null),s=n.renderedPosition(a),h)if(u.forEach(function(t,n){for(var r=0;r<n.length;r++){var u=n[r];if(o.centerToEdgeAlignment||"center"!=p&&u.renderedPosition(l)!=t||"center"==p&&u.renderedPosition(l)==t){var h=Math.abs(s-u.renderedPosition(a));h<d&&h<o.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(i=u,d=h,c=t)}}},(r=h[p])-Number(o.guidelinesTolerance),r+Number(o.guidelinesTolerance)),i){d=v.getDims(n)[t][p],"horizontal"==t?(b.h=d-c,v.drawLine({x:d,y:n.renderedPosition("y")},{x:d,y:i.renderedPosition("y")},o.guidelinesStyle.strokeStyle,o.guidelinesStyle.lineDash)):(b.v=d-c,v.drawLine({x:n.renderedPosition("x"),y:d},{x:i.renderedPosition("x"),y:d},o.guidelinesStyle.strokeStyle,o.guidelinesStyle.lineDash));break}},v.horizontalDistributionNext=function(t,n){var r=null,i=null,s=v.getDims(t),a=s.horizontal.center,l=s.vertical.center,u="right",c="left",h=a;"left"==n&&(u="left",c="right",h=a-o.guidelinesStyle.range*e.zoom());var d={left:function(t,e){return e-t>o.guidelinesStyle.minDistRange},right:function(t,e){return t-e>o.guidelinesStyle.minDistRange}};return m.forEach(function(t,a){for(var h=0;h<a.length;h++){var p=a[h],f=v.getDims(p);if(Math.abs(f.vertical.center-s.vertical.center)<o.guidelinesStyle.range*e.zoom()&&f.horizontal[c]==t&&d[n](f.horizontal[c],s.horizontal[u])){var g=f.horizontal[u]-(s.horizontal[u]-t);m.forEach(function(t,n){for(var s=0;s<n.length;s++){var a=n[s];Math.abs(v.getDims(a).vertical.center-l)<o.guidelinesStyle.range*e.zoom()&&Math.abs(g-v.getDims(a).horizontal[c])<2*o.guidelinesTolerance&&(r=p,i=a)}},g-o.guidelinesTolerance,g+o.guidelinesTolerance)}}},h,h+o.guidelinesStyle.range*e.zoom()),r?(b.hd=v.getDims(t).horizontal[u]-v.getDims(r).horizontal[c]-(v.getDims(r).horizontal[u]-v.getDims(i).horizontal[c]),(!o.geometricGuideline||null==b.h||Math.abs(b.h)>Math.abs(b.hd))&&(b.h=b.hd),v.drawDH(t,r,i,n),!0):(o.geometricGuideline||(b.h=null),!1)},v.drawDH=function(t,e,n,r){var i=v.getDims(t).vertical.center,s="right",a="left";"left"==r&&(s="left",a="right");var l=_([e,t,n],"vertical");v.drawLine({x:v.getDims(e).horizontal[a],y:l},{x:v.getDims(t).horizontal[s],y:l},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(t).horizontal[s],y:l},{x:v.getDims(t).horizontal[s],y:i},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(n).horizontal[a],y:l},{x:v.getDims(e).horizontal[s],y:l},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(n).horizontal[a],y:l},{x:v.getDims(n).horizontal[a],y:v.getDims(n).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(e).horizontal[a],y:l},{x:v.getDims(e).horizontal[a],y:v.getDims(e).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(e).horizontal[s],y:l},{x:v.getDims(e).horizontal[s],y:v.getDims(e).vertical.center},o.guidelinesStyle.horizontalDistColor,o.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(t).horizontal[s],y:l},a),v.drawArrow({x:v.getDims(e).horizontal[a],y:l},s),v.drawArrow({x:v.getDims(e).horizontal[s],y:l},a),v.drawArrow({x:v.getDims(n).horizontal[a],y:l},s)},v.verticalDistributionNext=function(t,n){var r=null,i=null,s=v.getDims(t),a=s.horizontal.center,l=s.vertical.center,u="top",c="bottom",h=l-o.guidelinesStyle.range*e.zoom();"above"==n&&(u="bottom",c="top",h=l);var d={below:function(t,e){return e-t>o.guidelinesStyle.minDistRange},above:function(t,e){return t-e>o.guidelinesStyle.minDistRange}};return g.forEach(function(t,l){for(var h=0;h<l.length;h++){var p=l[h],f=v.getDims(p);if(Math.abs(f.horizontal.center-s.horizontal.center)<o.guidelinesStyle.range*e.zoom()&&f.vertical[c]==t&&d[n](f.vertical[c],s.vertical[u])){var m=f.vertical[u]-(s.vertical[u]-t);g.forEach(function(t,n){for(var s=0;s<n.length;s++){var l=n[s];Math.abs(v.getDims(l).horizontal.center-a)<o.guidelinesStyle.range*e.zoom()&&Math.abs(m-v.getDims(l).vertical[c])<2*o.guidelinesTolerance&&(r=p,i=l)}},m-o.guidelinesTolerance,m+o.guidelinesTolerance)}}},h,h+o.guidelinesStyle.range*e.zoom()),r?(b.vd=v.getDims(t).vertical[u]-v.getDims(r).vertical[c]-(v.getDims(r).vertical[u]-v.getDims(i).vertical[c]),(!o.geometricGuideline||null==b.v||Math.abs(b.v)>Math.abs(b.vd))&&(b.v=b.vd),v.drawDV(t,r,i,n),!0):(o.geometricGuideline||(b.v=null),!1)},v.drawDV=function(t,e,n,r){var i=v.getDims(t),s=i.horizontal.center,a="top",l="bottom";"above"==r&&(a="bottom",l="top");var u=_([e,t,n],"horizontal");v.drawLine({x:u,y:i.vertical[a]},{x:u,y:v.getDims(e).vertical[l]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({x:u,y:v.getDims(e).vertical[a]},{x:u,y:v.getDims(n).vertical[l]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({x:s,y:i.vertical[a]},{x:u,y:i.vertical[a]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(e).horizontal.center,y:v.getDims(e).vertical[l]},{x:u,y:v.getDims(e).vertical[l]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(e).horizontal.center,y:v.getDims(e).vertical[a]},{x:u,y:v.getDims(e).vertical[a]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawLine({x:u,y:v.getDims(n).vertical[l]},{x:v.getDims(n).horizontal.center,y:v.getDims(n).vertical[l]},o.guidelinesStyle.verticalDistColor,o.guidelinesStyle.verticalDistLine),v.drawArrow({x:u,y:i.vertical[a]},l),v.drawArrow({x:u,y:v.getDims(e).vertical[l]},a),v.drawArrow({x:u,y:v.getDims(e).vertical[a]},l),v.drawArrow({x:u,y:v.getDims(n).vertical[l]},a)},v.update=function(t){v.clear(),o.initPosAlignment&&C(t),t.each(function(t,e){"number"==typeof t&&(t=e),o.geometricGuideline&&(v.searchForLine("horizontal",t),v.searchForLine("vertical",t)),o.distributionGuidelines&&(v.horizontalDistribution(t),v.verticalDistribution(t))})},v.resize=function(){a()};var w,S={},E={},C=function(t){var e=t.renderedPosition();Math.abs(p.y-e.y)<o.guidelinesTolerance?(v.drawLine({x:E.x,y:S.y},{x:e.x,y:S.y},o.guidelinesStyle.initPosAlignmentColor,o.guidelinesStyle.initPosAlignmentLine),v.drawCross(S.y==E.y?E:S)):Math.abs(p.x-e.x)<o.guidelinesTolerance&&(v.drawLine({x:S.x,y:E.y},{x:S.x,y:e.y},o.guidelinesStyle.initPosAlignmentColor,o.guidelinesStyle.initPosAlignmentLine),v.drawCross(S.x==E.x?E:S))};e.on("tapstart","node",function(){w=this});var k,T,P={x:0,y:0};return e.on("mousemove",function(t){k=t.renderedPosition||t.cyRenderedPosition,T&&T.each(function(t,e){if("number"==typeof t&&(t=e),t.locked()&&(Math.abs(k.x-P.x)>2*o.guidelinesTolerance||Math.abs(k.y-P.y)>2*o.guidelinesTolerance)){t.unlock();var n={};n.x=k.x-w.renderedPosition("x"),n.y=k.y-w.renderedPosition("y"),r=n,(i=x(t)).union(i.descendants()).filter(":childless").forEach(function(t,e){"number"==typeof t&&(t=e);var n={x:r.x+t.renderedPosition("x"),y:r.y+t.renderedPosition("y")};t.renderedPosition(n)})}var r,i})}),v.snapToAlignmentLocation=function(t){T=t,t.each(function(t,e){"number"==typeof t&&(t=e);var n=t.renderedPosition();b.h&&(P=k,n.x-=b.h,t.renderedPosition(n)),b.v&&(P=k,n.y-=b.v,t.renderedPosition(n)),(b.v||b.h)&&(b.h=null,b.v=null,T.lock())}),v.update(t)},{changeOptions:function(t){0==(o=t).guidelinesTolerance&&(o.guidelinesTolerance=.001)},lines:v,getTopMostNodes:x,getMousePos:function(t){E.x=(S=t.renderedPosition||t.cyRenderedPosition).x,E.y=S.y},setMousePos:function(t){E.x+=t.x-y.x,E.y+=t.y-y.y,y.x=t.x,y.y=t.y},resizeCanvas:a,resetCanvas:d}}},3091:function(t,e,n){var r;!function(){"use strict";var i=function(t){if(t){n(5713);var e=!1,r={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=n(5362),o=n(5343),s=n(7150),a=n(4993),l=n(8896),u=n(7441),c=n(3417),h=n(8080),d=n(5567);t("core","gridGuide",function(n){var p,f,g,m,v,y,b,_=this,x=function(t){return t.scratch("_gridGuide")||t.scratch("_gridGuide",{}),t.scratch("_gridGuide")}(_),w=Object.extend({},x.options||r,n);return x.options=w,x.initialized?(v=x.eventsController).syncWithOptions(w):(p=i(_,w.gridSpacing,w.snapToGridCenter),f=a(w.gridSpacing),g=o(_,p),m=s(w,_,d),y=u(w,_,d),b=c(w,_),v=l(_,p,f,g,m,y,b,w),h(t,_,e),e=!0,v.init(w),x.initialized=!0,x.eventsController=v),this})}};t.exports&&(t.exports=i),void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&i(cytoscape)}()},3417:function(t){t.exports=function(t,e){var n,r=t,i="_gridParentPadding";return{changeOptions:function(t){n=(r=t).parentSpacing<0?r.gridSpacing:r.parentSpacing,e.style().selector("."+i).style("compound-sizing-wrt-labels","exclude").style("padding-left",n).style("padding-right",n).style("padding-top",n).style("padding-bottom",n).update()},setPaddingOfParent:function(t,e){e?t.addClass(i):t.removeClass(i)}}}},4993:function(t){t.exports=function(t){var e=function(t){return t.scratch("_gridGuide")||t.scratch("_gridGuide",{}),t.scratch("_gridGuide")};return{resizeNode:function(n){var r=n.width(),i=n.height(),o=Math.round((r-t)/(2*t))*(2*t),s=Math.round((i-t)/(2*t))*(2*t);s=s>0?s+t:t,r==(o=o>0?o+t:t)&&i==s||(n.style({width:o,height:s}),e(n).resize={oldWidth:r,oldHeight:i})},recoverNodeDimensions:function(t){var n=e(t).resize;n&&t.style({width:n.oldWidth,height:n.oldHeight})},changeOptions:function(e){t=Number(e.gridSpacing)}}}},5343:function(t){t.exports=function(t,e){var n,r,i,o,s={onTapStartNode:function(e){if(!(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)){var o=e.target||e.cyTarget;r=o.selected()?e.cy.$(":selected"):o,i=e.position||e.cyPosition,o.grabbable()&&!o.locked()&&((n=o).lock(),t.on("tapdrag",l),t.on("tapend",a))}}},a=function(e){t.off("tapdrag",l),t.off("tapend",a),n.unlock(),e.preventDefault()},l=function(t){n.position();var s=(o=e.snapPos(o=t.position||t.cyPosition)).x-i.x,a=o.y-i.y;0==s&&0==a||(n.unlock(),r.union(r.descendants()).filter(":childless").positions(function(t,n){"number"==typeof t&&(t=n);var r=t.position();return e.snapPos({x:r.x+s,y:r.y+a})}),i=o,n.lock(),n.trigger("drag"))};return s}},5362:function(t){t.exports=function(t,e,n){var r={changeOptions:function(t){e=t.gridSpacing,n=t.snapToGridCenter?.5:0},snapPos:function(t){var r=n?Math.floor(t.x/e):Math.round(t.x/e),i=n?Math.floor(t.y/e):Math.round(t.y/e);return{x:(r+n)*e,y:(i+n)*e}},snapNode:function(t){var e=t.position(),n=r.snapPos(e);t.position(n)},snapNodesTopDown:function(e){t.startBatch(),e.union(e.descendants()).filter(":childless").positions(function(t,e){"number"==typeof t&&(t=e);var n=t.position();return r.snapPos(n)}),t.endBatch()},onFreeNode:function(t){var e,n=t.target||t.cyTarget;e=n.selected()?t.cy.$(":selected"):n,r.snapNodesTopDown(e)},recoverSnapNode:function(t){var e=function(t){return t.scratch("_gridGuide")||t.scratch("_gridGuide",{}),t.scratch("_gridGuide")}(t).snap;e&&t.position(e.oldPos)}};return r}},6685:function(t,e,n){var r;!function(){"use strict";var i=function(t,e){t&&e&&(e.fn.cyPanzoom=e.fn.cytoscapePanzoom=function(n){return s.apply(this,[n,t,e]),this},t("core","panzoom",function(n){return s.apply(this,[n,t,e]),this}))},o={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},s=function(t,e,n){var r=this,i=n.extend(!0,{},o,t),s=t,a={destroy:function(){var t=n(r.container()).find(".cy-panzoom");t.data("winbdgs").forEach(function(t){n(window).unbind(t.evt,t.fn)}),t.data("cybdgs").forEach(function(t){r.off(t.evt,t.fn)}),t.remove()},init:function(){return window,n(r.container()).each(function(){var t=n(this);t.cytoscape=e;var o=[],s=n(window),a=function(t,e){o.push({evt:t,fn:e}),s.bind(t,e)},l=function(t,e){for(var n=0;n<o.length;n++){var r=o[n];if(r.evt===t&&r.fn===e){o.splice(n,1);break}}s.unbind(t,e)},u=[],c=n('<div class="cy-panzoom"></div>');t.prepend(c),c.css("position","absolute"),c.data("winbdgs",o),c.data("cybdgs",u),i.zoomOnly&&c.addClass("cy-panzoom-zoom-only");var h=n('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+i.zoomInIcon+'"></span></div>');c.append(h);var d=n('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+i.zoomOutIcon+'"></span></div>');c.append(d);var p=n('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+i.resetIcon+'"></span></div>');c.append(p);var f=n('<div class="cy-panzoom-slider"></div>');c.append(f),f.append('<div class="cy-panzoom-slider-background"></div>');var g=n('<div class="cy-panzoom-slider-handle"><span class="icon '+i.sliderHandleIcon+'"></span></div>');f.append(g);var m=n('<div class="cy-panzoom-no-zoom-tick"></div>');f.append(m);var v=n('<div class="cy-panzoom-panner"></div>');c.append(v);var y=n('<div class="cy-panzoom-panner-handle"></div>');v.append(y);var b=n('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),_=n('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),x=n('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),w=n('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');v.append(b).append(_).append(x).append(w);var S=n('<div class="cy-panzoom-pan-indicator"></div>');function E(){clearInterval(P),l("mousemove",I),S.hide()}function C(){r.pan(),r.zoom(),k=t.width()/2,T=t.height()/2}v.append(S);var k,T,P,A=!1;function D(){A=!0,C()}function O(){A=!1}function M(t){A||C(),r.zoom({level:t,renderedPosition:{x:k,y:T}})}var I=function(t){t.stopPropagation(),t.preventDefault(),clearInterval(P);var e=function(t){var e={x:t.originalEvent.pageX-v.offset().left-v.width()/2,y:t.originalEvent.pageY-v.offset().top-v.height()/2},n=i.panDragAreaSize,r=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.min(r/n,1);return r<i.panInactiveArea?{x:NaN,y:NaN}:(e={x:e.x/r,y:e.y/r},o=Math.max(i.panMinPercentSpeed,o),{x:-1*e.x*(o*i.panDistance),y:-1*e.y*(o*i.panDistance)})}(t);isNaN(e.x)||isNaN(e.y)?S.hide():(function(t){var e=t,n=Math.sqrt(e.x*e.x+e.y*e.y),r=-1*e.x/n,o=-1*e.y/n,s=v.width(),a=v.height(),l=Math.max(i.panIndicatorMinOpacity,n/i.panDistance),u=255-Math.round(255*l);S.show().css({left:s/2*r+s/2,top:a/2*o+a/2,background:"rgb("+u+", "+u+", "+u+")"})}(e),P=setInterval(function(){r.panBy(e)},i.panSpeed))};y.bind("mousedown",function(t){I(t),a("mousemove",I)}),y.bind("mouseup",function(){E()}),a("mouseup blur",function(){E()}),f.bind("mousedown",function(){return!1});var L,N,R=!1;function F(t,e){void 0===e&&(e=0);var n=f.height()-g.height()-4,r=t.pageY-f.offset().top-e;r<2&&(r=2),r>n&&(r=n);var o=1-(r-2)/(n-2);g.css("top",r);var s=i.minZoom,a=i.maxZoom,l=Math.log(s)/Math.log(a),u=Math.pow(a,(1-l)*o+l);u<s?u=s:u>a&&(u=a),M(u)}function B(){var t=r.zoom(),e=i.maxZoom,n=Math.log(i.minZoom)/Math.log(e),o=1-(Math.log(t)/Math.log(e)-n)/(1-n),s=f.height()-g.height()-4,a=o*(s-2);a<2&&(a=2),a>s&&(a=s),g.css("top",a)}function j(t,e){var n;t.bind("mousedown",function(t){if(t.preventDefault(),t.stopPropagation(),0==t.button){var o=function(){var t=r.zoom(),n=r.zoom()*e;n<i.minZoom&&(n=i.minZoom),n>i.maxZoom&&(n=i.maxZoom),n==i.maxZoom&&t==i.maxZoom||n==i.minZoom&&t==i.minZoom||M(n)};return D(),o(),n=setInterval(o,i.zoomDelay),!1}}),a("mouseup blur",function(){clearInterval(n),O()})}g.bind("mousedown",L=function(t){var e=t.target===g[0]?t.offsetY:0;R=!0,D(),g.addClass("active");var n=0;return a("mousemove",N=function(t){var r=+new Date;return r>n+10&&(n=r,F(t,e),!1)}),a("mouseup",function(){l("mousemove",N),R=!1,g.removeClass("active"),O()}),!1}),f.bind("mousedown",function(t){t.target!==g[0]&&(L(t),F(t))}),B(),function(t,e){u.push({evt:"zoom",fn:e}),r.on("zoom",e)}(0,function(){R||B()}),function(){var t=i.maxZoom,e=Math.log(i.minZoom)/Math.log(t),n=1-(Math.log(1)/Math.log(t)-e)/(1-e);if(n>1||n<0)m.hide();else{var r=f.height()-g.height()-4,o=n*(r-2);o<2&&(o=2),o>r&&(o=r),m.css("top",o)}}(),j(h,1+i.zoomFactor),j(d,1-i.zoomFactor),p.bind("mousedown",function(t){if(0==t.button){var e=i.fitSelector?r.elements(i.fitSelector):r.elements();return 0===e.size()?r.reset():("function"==typeof i.animateOnFit?i.animateOnFit.call():i.animateOnFit)?r.animate({fit:{eles:e,padding:i.fitPadding}},{duration:i.fitAnimationDuration}):r.fit(e,i.fitPadding),!1}})})}};return a[s]?a[s].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof s&&s?(n.error("No such function `"+s+"` for jquery.cytoscapePanzoom"),n(this)):a.init.apply(this,arguments)};t.exports?t.exports=function(t,e){i(t,e||n(4173))}:void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&i(cytoscape,jQuery)}()},2598:function(t,e,n){var r;!function(){"use strict";var i=function(t){function e(t,e){void 0===t.scratch("_undoRedo")&&t.scratch("_undoRedo",{});var n=t.scratch("_undoRedo");return void 0===e?n:n[e]}function n(t,n,r){var i=e(t);i[n]=r,t.scratch("_undoRedo",i)}t&&t("core","undoRedo",function(t,r){var i=this,o=e(i,"instance")||function(t){return{options:{isDebug:!1,actions:{},undoableDrag:!0,stackSizeLimit:void 0,beforeUndo:function(){},afterUndo:function(){},beforeRedo:function(){},afterRedo:function(){},ready:function(){}},actions:{},undoStack:[],redoStack:[],reset:function(t,e){this.undoStack=t||[],this.redoStack=e||[]},undo:function(){if(!this.isUndoStackEmpty()){var e=this.undoStack.pop();t.trigger("beforeUndo",[e.name,e.args]);var n=this.actions[e.name]._undo(e.args);return this.redoStack.push({name:e.name,args:n}),t.trigger("afterUndo",[e.name,e.args,n]),n}this.options.isDebug&&console.log("Undoing cannot be done because undo stack is empty!")},redo:function(){if(!this.isRedoStackEmpty()){var e=this.redoStack.pop();t.trigger(e.firstTime?"beforeDo":"beforeRedo",[e.name,e.args]),e.args||(e.args={}),e.args.firstTime=!!e.firstTime;var n=this.actions[e.name]._do(e.args);return this.undoStack.push({name:e.name,args:n}),null!=this.options.stackSizeLimit&&this.undoStack.length>this.options.stackSizeLimit&&this.undoStack.shift(),t.trigger(e.firstTime?"afterDo":"afterRedo",[e.name,e.args,n]),n}this.options.isDebug&&console.log("Redoing cannot be done because redo stack is empty!")},do:function(t,e){return this.redoStack.length=0,this.redoStack.push({name:t,args:e,firstTime:!0}),this.redo()},undoAll:function(){for(;!this.isUndoStackEmpty();)this.undo()},redoAll:function(){for(;!this.isRedoStackEmpty();)this.redo()},action:function(t,e,n){return this.actions[t]={_do:e,_undo:n},this},removeAction:function(t){delete this.actions[t]},isUndoStackEmpty:function(){return 0===this.undoStack.length},isRedoStackEmpty:function(){return 0===this.redoStack.length},getUndoStack:function(){return this.undoStack},getRedoStack:function(){return this.redoStack}}}(i);if(n(i,"instance",o),t){for(var s in t)o.options.hasOwnProperty(s)&&(o.options[s]=t[s]);if(t.actions)for(var s in t.actions)o.actions[s]=t.actions[s]}if(!e(i,"isInitialized")&&!r){var a=function(t){function n(t,e,r){for(var i=r?e:function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})}(e),o=0;o<i.length;o++){var s=i[o],a=s.position("x"),l=s.position("y");s.isParent()||s.position({x:a+t.x,y:l+t.y}),n(t,s.children(),!0)}}function r(e){return"string"==typeof e?t.$(e):e}function i(t){return r(t).restore()}function o(e){var n={};return t.nodes().not(":parent").positions(function(t,r){"number"==typeof t&&(t=r),n[t.id()]={x:t.position("x"),y:t.position("y")};var i=e[t.id()];return{x:i.x,y:i.y}}),n}function s(t){var e={};if(t.firstTime){var r=null==t.parentData?null:t.parentData,i=t.nodes.union(t.nodes.descendants());e.elesToRestore=i.union(i.connectedEdges()),e.movedEles=t.nodes.move({parent:r}),n({x:t.posDiffX,y:t.posDiffY},e.movedEles)}else e.elesToRestore=t.movedEles.remove(),e.movedEles=t.elesToRestore.restore();return t.callback&&(e.callback=t.callback,t.callback(e.movedEles)),e}function a(t){var e={};if(t.firstTime){var r=null==t.parentData?null:t.parentData,i=t.nodes.union(t.nodes.descendants()),o={};i.forEach(function(t){t.parent().id()?o[t.id()]=t.parent():o[t.id()]=null});var s={};i.forEach(function(t){s[t.id()]={},s[t.id()].x=t.position("x"),s[t.id()].y=t.position("y")}),e.oldParent=o,e.oldPosition=s,e.newParent=r,e.movedEles=i,t.nodes.move({parent:r}).nodes(),n({x:t.posDiffX,y:t.posDiffY},e.movedEles)}else e.oldParent={},t.movedEles.forEach(function(t){t.parent().id()?e.oldParent[t.id()]=t.parent():e.oldParent[t.id()]=null}),e.oldPosition={},t.movedEles.forEach(function(t){e.oldPosition[t.id()]={},e.oldPosition[t.id()].x=t.position("x"),e.oldPosition[t.id()].y=t.position("y")}),e.newParent=t.oldParent,e.movedEles=t.movedEles,e.movedEles.forEach(function(n){"object"!=typeof e.newParent?n.move({parent:e.newParent}):null==e.newParent[n.id()]?n.move({parent:null}):n.move({parent:e.newParent[n.id()].id()}),n.position(t.oldPosition[n.id()])});return t.callback&&(e.callback=t.callback,t.callback(e.movedEles)),e}function l(n,r){for(var i=[],o=e(t,"instance").actions,s=0;s<n.length;s++)if(!o.hasOwnProperty((a=n[s]).name))throw"Action "+a.name+" does not exist as an undoable function";for(s=0;s<n.length;s++){var a,l;(a=n[s]).param.firstTime=n.firstTime,l="undo"==r?o[a.name]._undo(a.param):o[a.name]._do(a.param),i.unshift({name:a.name,param:l})}return i}return{add:{_do:function(e){return e.firstTime?t.add(e):i(e)},_undo:t.remove},remove:{_do:t.remove,_undo:i},restore:{_do:i,_undo:t.remove},select:{_do:function(t){return r(t).select()},_undo:function(t){return r(t).unselect()}},unselect:{_do:function(t){return r(t).unselect()},_undo:function(t){return r(t).select()}},move:{_do:function(t){var e=r(t.eles),n=e.nodes(),i=e.edges(),o=[],s=[],a=[];return n.forEach(function(t){o.push(t.parent().length>1?t.parent().id():null)}),i.forEach(function(t){s.push(t.source().id()),a.push(t.target().id())}),{oldNodesParents:o,newNodes:n.move(t.location),oldEdgesSources:s,oldEdgesTargets:a,newEdges:i.move(t.location)}},_undo:function(e){var n=t.collection(),r={};if(e.newNodes.length>0){r.parent=e.newNodes[0].parent().id();for(var i=0;i<e.newNodes.length;i++){var o=e.newNodes[i].move({parent:e.oldNodesParents[i]});n=n.union(o)}}else for(r.source=e.newEdges[0].source().id(),r.target=e.newEdges[0].target().id(),i=0;i<e.newEdges.length;i++){var s=e.newEdges[i].move({source:e.oldEdgesSources[i],target:e.oldEdgesTargets[i]});n=n.union(s)}return{eles:n,location:r}}},drag:{_do:function(e){return e.move&&(n(e.positionDiff,e.nodes),t.elements().unselect()),e},_undo:function(e){var r={positionDiff:e.positionDiff,nodes:e.nodes,move:!0};return n({x:-1*e.positionDiff.x,y:-1*e.positionDiff.y},e.nodes),t.elements().unselect(),r}},layout:{_do:function(e){if(e.firstTime){var n,i=function(){for(var e={},n=t.nodes(),r=0;r<n.length;r++){var i=n[r];e[i.id()]={x:i.position("x"),y:i.position("y")}}return e}();return(n=e.eles?r(e.eles).layout(e.options):t.layout(e.options))&&n.run&&n.run(),i}return o(e)},_undo:function(t){return o(t)}},changeParent:{_do:function(e){return t.nodes()[0].component?a(e):s(e)},_undo:function(e){return t.nodes()[0].component?a(e):s(e)}},batch:{_do:function(t){return l(t,"do")},_undo:function(t){return l(t,"undo")}}}}(i);for(var s in a)o.actions[s]=a[s];!function(t,n){var r=null;t.on("grab","node",function(){("function"==typeof n?n.call(this):n)&&((r={}).lastMouseDownPosition={x:this.position("x"),y:this.position("y")},r.node=this)}),t.on("free","node",function(){var i=e(t,"instance");if("function"==typeof n?n.call(this):n){if(null==r)return;var o=r.node,s=r.lastMouseDownPosition,a={x:o.position("x"),y:o.position("y")};if(a.x!=s.x||a.y!=s.y){var l,u={x:a.x-s.x,y:a.y-s.y};l=o.selected()?t.nodes(":visible").filter(":selected"):t.collection([o]),i.do("drag",{positionDiff:u,nodes:l,move:!1}),r=null}}})}(i,o.options.undoableDrag),n(i,"isInitialized",!0)}return o.options.ready(),o})};t.exports&&(t.exports=i),void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&i(cytoscape)}()},6934:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var i=r(n(6188)),o=r(n(7889));function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d="undefined"==typeof window?null:window,p=d?d.navigator:null,f=s(""),g=s({}),m=s(function(){}),v="undefined"==typeof HTMLElement?"undefined":s(HTMLElement),y=function(t){return t&&t.instanceString&&_(t.instanceString)?t.instanceString():null},b=function(t){return null!=t&&s(t)==f},_=function(t){return null!=t&&s(t)===m},x=function(t){return!C(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},w=function(t){return null!=t&&s(t)===g&&!x(t)&&t.constructor===Object},S=function(t){return null!=t&&s(t)===s(1)&&!isNaN(t)},E=function(t){return"undefined"===v?void 0:null!=t&&t instanceof HTMLElement},C=function(t){return k(t)||T(t)},k=function(t){return"collection"===y(t)&&t._private.single},T=function(t){return"collection"===y(t)&&!t._private.single},P=function(t){return"core"===y(t)},A=function(t){return"stylesheet"===y(t)},D=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},O=function(t){return function(t){return null!=t&&s(t)===g}(t)&&_(t.then)},M=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=this,o=arguments,s=e.apply(i,o),a=n.cache;return(r=a[s])||(r=a[s]=t.apply(i,o)),r};return n.cache={},n},I=M(function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),L=M(function(t){return t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),N=M(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),R=function(t){return D(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},F="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",B=function(t,e){return t<e?-1:t>e?1:0},j=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var s=i[o];t[s]=r[s]}}return t},z={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},V=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(w(o))throw Error("Tried to set map with object key");i<n.length-1?(null==e[o]&&(e[o]={}),e=e[o]):e[o]=t.value}},G=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(w(o))throw Error("Tried to get map with object key");if(null==(e=e[o]))return e}return e},U=d?d.performance:null,H=U&&U.now?function(){return U.now()}:function(){return Date.now()},q=function(){if(d){if(d.requestAnimationFrame)return function(t){d.requestAnimationFrame(t)};if(d.mozRequestAnimationFrame)return function(t){d.mozRequestAnimationFrame(t)};if(d.webkitRequestAnimationFrame)return function(t){d.webkitRequestAnimationFrame(t)};if(d.msRequestAnimationFrame)return function(t){d.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(H())},1e3/60)}}(),W=function(t){return q(t)},$=H,Y=65599,K=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,r=n;!(e=t.next()).done;)r=r*Y+e.value|0;return r},X=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return e*Y+t|0},Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(e<<5)+e+t|0},Z=function(t){return 2097152*t[0]+t[1]},J=function(t,e){return[X(t[0],e[0]),Q(t[1],e[1])]},tt=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return K({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},et=function(){return nt(arguments)},nt=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?tt(r):tt(r,e)}return e},rt=!0,it=null!=console.warn,ot=null!=console.trace,st=Number.MAX_SAFE_INTEGER||9007199254740991,at=function(){return!0},lt=function(){return!1},ut=function(){return 0},ct=function(){},ht=function(t){throw new Error(t)},dt=function(t){if(void 0===t)return rt;rt=!!t},pt=function(t){dt()&&(it?console.warn(t):(console.log(t),ot&&console.trace()))},ft=function(t){return null==t?t:x(t)?t.slice():w(t)?function(t){return j({},t)}(t):t},gt=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},mt={},vt=function(){return mt},yt=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var o=e[i],s=null==n?void 0:n[o];r[o]=void 0===s?t[o]:s}return r}},bt=function(t,e,n){for(var r=t.length-1;r>=0&&(t[r]!==e||(t.splice(r,1),!n));r--);},_t=function(t){t.splice(0,t.length)},xt=function(t,e,n){return n&&(e=N(n,e)),t[e]},wt=function(t,e,n,r){n&&(e=N(n,e)),t[e]=r},St="undefined"!=typeof Map?Map:function(){function t(){a(this,t),this._obj={}}return u(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),Et=function(){function t(e){if(a(this,t),this._obj=Object.create(null),this.size=0,null!=e){var n;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return u(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(e){return t.has(e)})}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Ct="undefined"!==("undefined"==typeof Set?"undefined":s(Set))?Set:Et,kt=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==e&&P(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new Ct,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var o=e.renderedPosition,s=t.pan(),a=t.zoom();i.position={x:(o.x-s.x)/a,y:(o.y-s.y)/a}}var l=[];x(e.classes)?l=e.classes:b(e.classes)&&(l=e.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];h&&""!==h&&i.classes.add(h)}this.createEmitter();var d=e.style||e.css;d&&(pt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d)),(void 0===n||n)&&this.restore()}else ht("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else ht("An element must have a core reference and parameters set")},Tt=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;w(e)&&!C(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||_(n)?r:n,n=_(n)?n:function(){};for(var o,s=this._private.cy,a=e=b(e)?this.filter(e):e,l=[],u=[],c={},h={},d={},p=0,f=this.byGroup(),g=f.nodes,m=f.edges,v=0;v<a.length;v++){var y=a[v],x=y.id();y.isNode()&&(l.unshift(y),t.bfs&&(d[x]=!0,u.push(y)),h[x]=0)}var S=function(){var e=t.bfs?l.shift():l.pop(),i=e.id();if(t.dfs){if(d[i])return"continue";d[i]=!0,u.push(e)}var s,a=h[i],f=c[i],v=null!=f?f.source():null,y=null!=f?f.target():null,b=null==f?void 0:e.same(v)?y[0]:v[0];if(!0===(s=n(e,f,b,p++,a)))return o=e,"break";if(!1===s)return"break";for(var _=e.connectedEdges().filter(function(t){return(!r||t.source().same(e))&&m.has(t)}),x=0;x<_.length;x++){var w=_[x],S=w.connectedNodes().filter(function(t){return!t.same(e)&&g.has(t)}),E=S.id();0===S.length||d[E]||(l.push(S=S[0]),t.bfs&&(d[E]=!0,u.push(S)),c[E]=w,h[E]=h[i]+1)}};t:for(;0!==l.length;){var E=S();switch(E){case"continue":continue;case"break":break t}}for(var k=s.collection(),T=0;T<u.length;T++){var P=u[T],A=c[P.id()];null!=A&&k.push(A),k.push(P)}return{path:s.collection(k),found:s.collection(o)}}},Pt={breadthFirstSearch:Tt({bfs:!0}),depthFirstSearch:Tt({dfs:!0})};Pt.bfs=Pt.breadthFirstSearch,Pt.dfs=Pt.depthFirstSearch;var At=yt({root:null,weight:function(t){return 1},directed:!1}),Dt={dijkstra:function(t){if(!w(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=At(t),r=n.root,i=n.weight,s=n.directed,a=this,l=i,u=b(r)?this.filter(r)[0]:r[0],c={},h={},d={},p=this.byGroup(),f=p.nodes,g=p.edges;g.unmergeBy(function(t){return t.isLoop()});for(var m=function(t){return c[t.id()]},v=function(t,e){c[t.id()]=e,y.updateItem(t)},y=new o(function(t,e){return m(t)-m(e)}),_=0;_<f.length;_++){var x=f[_];c[x.id()]=x.same(u)?0:1/0,y.push(x)}for(var S=function(t,e){for(var n,r=(s?t.edgesTo(e):t.edgesWith(e)).intersect(g),i=1/0,o=0;o<r.length;o++){var a=r[o],u=l(a);(u<i||!n)&&(i=u,n=a)}return{edge:n,dist:i}};y.size()>0;){var E=y.pop(),C=m(E),k=E.id();if(d[k]=C,C!==1/0)for(var T=E.neighborhood().intersect(f),P=0;P<T.length;P++){var A=T[P],D=A.id(),O=S(E,A),M=C+O.dist;M<m(A)&&(v(A,M),h[D]={node:E,edge:O.edge})}}return{distanceTo:function(t){var e=b(t)?f.filter(t)[0]:t[0];return d[e.id()]},pathTo:function(t){var e=b(t)?f.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);h[i];){var o=h[i];n.unshift(o.edge),n.unshift(o.node),i=(r=o.node).id()}return a.spawn(n)}}}},Ot={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,o=new Array(i),s=n,a=function(t){for(var e=0;e<o.length;e++)if(o[e].has(t))return e},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var u=r.sort(function(e,n){return t(e)-t(n)}),c=0;c<u.length;c++){var h=u[c],d=h.source()[0],p=h.target()[0],f=a(d),g=a(p),m=o[f],v=o[g];f!==g&&(s.merge(h),m.merge(v),o.splice(g,1))}return s}},Mt=yt({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),It={aStar:function(t){var e=this.cy(),n=Mt(t),r=n.root,i=n.goal,s=n.heuristic,a=n.directed,l=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var u,c,h=r.id(),d=i.id(),p={},f={},g={},m=new o(function(t,e){return f[t.id()]-f[e.id()]}),v=new Ct,y={},b={},_=function(t,e){m.push(t),v.add(e)};_(r,h),p[h]=0,f[h]=s(r);for(var x=0;m.size()>0;){if(c=(u=m.pop()).id(),v.delete(c),x++,c===d){for(var w=[],S=i,E=d,C=b[E];w.unshift(S),null!=C&&w.unshift(C),null!=(S=y[E]);)C=b[E=S.id()];return{found:!0,distance:p[c],path:this.spawn(w),steps:x}}g[c]=!0;for(var k=u._private.edges,T=0;T<k.length;T++){var P=k[T];if(this.hasElementWithId(P.id())&&(!a||P.data("source")===c)){var A=P.source(),D=P.target(),O=A.id()!==c?A:D,M=O.id();if(this.hasElementWithId(M)&&!g[M]){var I=p[c]+l(P);v.has(M)?I<p[M]&&(p[M]=I,f[M]=I+s(O),y[M]=u,b[M]=P):(p[M]=I,f[M]=I+s(O),_(O,M),y[M]=u,b[M]=P)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},Lt=yt({weight:function(t){return 1},directed:!1}),Nt={floydWarshall:function(t){for(var e=this.cy(),n=Lt(t),r=n.directed,i=n.weight,o=this.byGroup(),s=o.nodes,a=o.edges,l=s.length,u=l*l,c=function(t){return s.indexOf(t)},h=function(t){return s[t]},d=new Array(u),p=0;p<u;p++){var f=p%l;d[p]=(p-f)/l===f?0:1/0}for(var g=new Array(u),m=new Array(u),v=0;v<a.length;v++){var y=a[v],_=y.source()[0],x=y.target()[0];if(_!==x){var w=c(_),S=c(x),E=w*l+S,C=i(y);if(d[E]>C&&(d[E]=C,g[E]=S,m[E]=y),!r){var k=S*l+w;!r&&d[k]>C&&(d[k]=C,g[k]=w,m[k]=y)}}}for(var T=0;T<l;T++)for(var P=0;P<l;P++)for(var A=P*l+T,D=0;D<l;D++){var O=P*l+D,M=T*l+D;d[A]+d[M]<d[O]&&(d[O]=d[A]+d[M],g[O]=g[A])}var I=function(t){return c(function(t){return(b(t)?e.filter(t):t)[0]}(t))};return{distance:function(t,e){var n=I(t),r=I(e);return d[n*l+r]},path:function(t,n){var r=I(t),i=I(n),o=h(r);if(r===i)return o.collection();if(null==g[r*l+i])return e.collection();var s=e.collection();for(s.merge(o);r!==i;)s.merge(m[r*l+(r=g[r*l+i])]),s.merge(h(r));return s}}}},Rt=yt({weight:function(t){return 1},directed:!1,root:null}),Ft={bellmanFord:function(t){var e=this,n=Rt(t),r=n.directed,i=n.root,o=n.weight,s=this,a=this.cy(),l=this.byGroup(),u=l.edges,c=l.nodes,h=c.length,d=new St,p=!1;i=a.collection(i)[0],u.unmergeBy(function(t){return t.isLoop()});for(var f=u.length,g=function(t){var e=d.get(t.id());return e||(e={},d.set(t.id(),e)),e},m=function(t){return(b(t)?a.$(t):t)[0]},v=0;v<h;v++){var y=c[v],_=g(y);_.dist=y.same(i)?0:1/0,_.pred=null,_.edge=null}for(var x=!1,w=function(t,e,n,r,i,o){var s=r.dist+o;s<i.dist&&!n.same(r.edge)&&(i.dist=s,i.pred=t,i.edge=n,x=!0)},S=1;S<h;S++){x=!1;for(var E=0;E<f;E++){var C=u[E],k=C.source(),T=C.target(),P=o(C),A=g(k),D=g(T);w(k,0,C,A,D,P),r||w(T,0,C,D,A,P)}if(!x)break}if(x)for(var O=0;O<f;O++){var M=u[O],I=M.source(),L=M.target(),N=o(M),R=g(I).dist,F=g(L).dist;if(R+N<F||!r&&F+N<R){pt("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:function(t){return g(m(t)).dist},pathTo:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=m(t),o=[],a=r;;){if(null==a)return e.spawn();var l=g(a),u=l.edge,c=l.pred;if(o.unshift(a[0]),a.same(n)&&o.length>0)break;null!=u&&o.unshift(u),a=c}return s.spawn(o)},hasNegativeWeightCycle:p,negativeWeightCycles:[]}}},Bt=Math.sqrt(2),jt=function(t,e,n){0===n.length&&ht("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=e[r[1]],o=e[r[2]],s=n,a=s.length-1;a>=0;a--){var l=s[a],u=l[1],c=l[2];(e[u]===i&&e[c]===o||e[u]===o&&e[c]===i)&&s.splice(a,1)}for(var h=0;h<s.length;h++){var d=s[h];d[1]===o?(s[h]=d.slice(),s[h][1]=i):d[2]===o&&(s[h]=d.slice(),s[h][2]=i)}for(var p=0;p<e.length;p++)e[p]===o&&(e[p]=i);return s},zt=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=jt(i,t,e),n--}return e},Vt={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy(function(t){return t.isLoop()});var i=n.length,o=r.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),a=Math.floor(i/Bt);if(!(i<2)){for(var l=[],u=0;u<o;u++){var c=r[u];l.push([u,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,d=[],p=new Array(i),f=new Array(i),g=new Array(i),m=function(t,e){for(var n=0;n<i;n++)e[n]=t[n]},v=0;v<=s;v++){for(var y=0;y<i;y++)f[y]=y;var b=zt(f,l.slice(),i,a),_=b.slice();m(f,g);var x=zt(f,b,a,2),w=zt(g,_,a,2);x.length<=w.length&&x.length<h?(h=x.length,d=x,m(f,p)):w.length<=x.length&&w.length<h&&(h=w.length,d=w,m(g,p))}for(var S=this.spawn(d.map(function(t){return r[t[0]]})),E=this.spawn(),C=this.spawn(),k=p[0],T=0;T<p.length;T++){var P=n[T];p[T]===k?E.merge(P):C.merge(P)}var A=function(e){var n=t.spawn();return e.forEach(function(e){n.merge(e),e.connectedEdges().forEach(function(e){t.contains(e)&&!S.contains(e)&&n.merge(e)})}),n},D=[A(E),A(C)];return{cut:S,components:D,partition1:E,partition2:C}}ht("At least 2 nodes are required for Karger-Stein algorithm")}},Gt=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},Ut=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},Ht=function(t){return{x:t[0],y:t[1]}},qt=function(t,e){return Math.atan2(e,t)-Math.PI/2},Wt=Math.log2||function(t){return Math.log(t)/Math.log(2)},$t=function(t){return t>0?1:t<0?-1:0},Yt=function(t,e){return Math.sqrt(Kt(t,e))},Kt=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},Xt=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},Qt=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},Zt=function(t,e,n,r){return{x:Qt(t.x,e.x,n.x,r),y:Qt(t.y,e.y,n.y,r)}},Jt=function(t,e,n){return Math.max(t,Math.min(n,e))},te=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},ee=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},ne=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},re=function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)e=n=r=i=o[0];else if(2===o.length)e=r=o[0],i=n=o[1];else if(4===o.length){var s=h(o,4);e=s[0],n=s[1],r=s[2],i=s[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},ie=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},oe=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},se=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},ae=function(t,e){return se(t,e.x1,e.y1)&&se(t,e.x2,e.y2)},le=function(t,e,n,r,i,o,s){var a,l=ke(i,o),u=i/2,c=o/2,h=r-c-s;if((a=_e(t,e,n,r,n-u+l-s,h,n+u-l+s,h,!1)).length>0)return a;var d=n+u+s;if((a=_e(t,e,n,r,d,r-c+l-s,d,r+c-l+s,!1)).length>0)return a;var p=r+c+s;if((a=_e(t,e,n,r,n-u+l-s,p,n+u-l+s,p,!1)).length>0)return a;var f,g=n-u-s;if((a=_e(t,e,n,r,g,r-c+l-s,g,r+c-l+s,!1)).length>0)return a;var m=n-u+l,v=r-c+l;if((f=ye(t,e,n,r,m,v,l+s)).length>0&&f[0]<=m&&f[1]<=v)return[f[0],f[1]];var y=n+u-l,b=r-c+l;if((f=ye(t,e,n,r,y,b,l+s)).length>0&&f[0]>=y&&f[1]<=b)return[f[0],f[1]];var _=n+u-l,x=r+c-l;if((f=ye(t,e,n,r,_,x,l+s)).length>0&&f[0]>=_&&f[1]>=x)return[f[0],f[1]];var w=n-u+l,S=r+c-l;return(f=ye(t,e,n,r,w,S,l+s)).length>0&&f[0]<=w&&f[1]>=S?[f[0],f[1]]:[]},ue=function(t,e,n,r,i,o,s){var a=s,l=Math.min(n,i),u=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return l-a<=t&&t<=u+a&&c-a<=e&&e<=h+a},ce=function(t,e,n,r,i,o,s,a,l){var u=Math.min(n,s,i)-l,c=Math.max(n,s,i)+l,h=Math.min(r,a,o)-l,d=Math.max(r,a,o)+l;return!(t<u||t>c||e<h||e>d)},he=function(t,e,n,r,i,o,s,a){var l,u,c,h,d,p,f,g,m,v,y,b,_,x=[];u=9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*r*o-3*r*r-3*r*a-6*o*o+3*o*a,c=3*n*n-6*n*i+n*s-n*t+2*i*i+2*i*t-s*t+3*r*r-6*r*o+r*a-r*e+2*o*o+2*o*e-a*e,h=1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,0==(l=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+r*r-4*r*o+2*r*a+4*o*o-4*o*a+a*a)&&(l=1e-5),g=-27*(h/=l)+(u/=l)*(9*(c/=l)-u*u*2),p=(f=(3*c-u*u)/9)*f*f+(g/=54)*g,(d=x)[1]=0,b=u/3,p>0?(v=(v=g+Math.sqrt(p))<0?-Math.pow(-v,1/3):Math.pow(v,1/3),y=(y=g-Math.sqrt(p))<0?-Math.pow(-y,1/3):Math.pow(y,1/3),d[0]=-b+v+y,d[4]=d[2]=-(b+=(v+y)/2),b=Math.sqrt(3)*(-y+v)/2,d[3]=b,d[5]=-b):(d[5]=d[3]=0,0===p?(_=g<0?-Math.pow(-g,1/3):Math.pow(g,1/3),d[0]=2*_-b,d[4]=d[2]=-(_+b)):(m=(f=-f)*f*f,m=Math.acos(g/Math.sqrt(m)),_=2*Math.sqrt(f),d[0]=-b+_*Math.cos(m/3),d[2]=-b+_*Math.cos((m+2*Math.PI)/3),d[4]=-b+_*Math.cos((m+4*Math.PI)/3)));for(var w=[],S=0;S<6;S+=2)Math.abs(x[S+1])<1e-7&&x[S]>=0&&x[S]<=1&&w.push(x[S]);w.push(1),w.push(0);for(var E,C,k,T=-1,P=0;P<w.length;P++)E=Math.pow(1-w[P],2)*n+2*(1-w[P])*w[P]*i+w[P]*w[P]*s,C=Math.pow(1-w[P],2)*r+2*(1-w[P])*w[P]*o+w[P]*w[P]*a,k=Math.pow(E-t,2)+Math.pow(C-e,2),T>=0?k<T&&(T=k):T=k;return T},de=function(t,e,n,r,i,o){var s=[t-n,e-r],a=[i-n,o-r],l=a[0]*a[0]+a[1]*a[1],u=s[0]*s[0]+s[1]*s[1],c=s[0]*a[0]+s[1]*a[1],h=c*c/l;return c<0?u:h>l?(t-i)*(t-i)+(e-o)*(e-o):u-h},pe=function(t,e,n){for(var r,i,o,s,a=0,l=0;l<n.length/2;l++)if(i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],s=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],s=n[2*(l+1-n.length/2)+1]),(r=n[2*l])==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(s-i)+i>e&&a++}return a%2!=0},fe=function(t,e,n,r,i,o,s,a,l){var u,c=new Array(n.length);null!=a[0]?(u=Math.atan(a[1]/a[0]),a[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=a;for(var h,d=Math.cos(-u),p=Math.sin(-u),f=0;f<c.length/2;f++)c[2*f]=o/2*(n[2*f]*d-n[2*f+1]*p),c[2*f+1]=s/2*(n[2*f+1]*d+n[2*f]*p),c[2*f]+=r,c[2*f+1]+=i;if(l>0){var g=me(c,-l);h=ge(g)}else h=c;return pe(t,e,h)},ge=function(t){for(var e,n,r,i,o=new Array(t.length/2),s=0;s<t.length/4;s++){s<t.length/4-1?(e=t[4*(s+1)],n=t[4*(s+1)+1],r=t[4*(s+1)+2],i=t[4*(s+1)+3]):(e=t[0],n=t[1],r=t[2],i=t[3]);var a=_e(t[4*s],t[4*s+1],t[4*s+2],t[4*s+3],e,n,r,i,!0);o[2*s]=a[0],o[2*s+1]=a[1]}return o},me=function(t,e){for(var n,r,i,o,s=new Array(2*t.length),a=0;a<t.length/2;a++){a<t.length/2-1?(i=t[2*(a+1)],o=t[2*(a+1)+1]):(i=t[0],o=t[1]);var l=o-(r=t[2*a+1]),u=-(i-(n=t[2*a])),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;s[4*a]=n+h*e,s[4*a+1]=r+d*e,s[4*a+2]=i+h*e,s[4*a+3]=o+d*e}return s},ve=function(t,e,n,r,i,o,s){return t-=i,e-=o,(t/=n/2+s)*t+(e/=r/2+s)*e<=1},ye=function(t,e,n,r,i,o,s){var a=[n-t,r-e],l=[t-i,e-o],u=a[0]*a[0]+a[1]*a[1],c=2*(l[0]*a[0]+l[1]*a[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-s*s);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),p=(-c-Math.sqrt(h))/(2*u),f=Math.min(d,p),g=Math.max(d,p),m=[];if(f>=0&&f<=1&&m.push(f),g>=0&&g<=1&&m.push(g),0===m.length)return[];var v=m[0]*a[0]+t,y=m[0]*a[1]+e;return m.length>1?m[0]==m[1]?[v,y]:[v,y,m[1]*a[0]+t,m[1]*a[1]+e]:[v,y]},be=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},_e=function(t,e,n,r,i,o,s,a,l){var u=t-i,c=n-t,h=s-i,d=e-o,p=r-e,f=a-o,g=h*d-f*u,m=c*d-p*u,v=f*c-h*p;if(0!==v){var y=g/v,b=m/v;return-.001<=y&&y<=1.001&&-.001<=b&&b<=1.001||l?[t+y*c,e+y*p]:[]}return 0===g||0===m?be(t,n,s)===s?[s,a]:be(t,n,i)===i?[i,o]:be(i,s,n)===n?[n,r]:[]:[]},xe=function(t,e,n,r,i,o,s,a){var l,u,c,h,d=[],p=new Array(n.length),f=!0;if(null==o&&(f=!1),f){for(var g=0;g<p.length/2;g++)p[2*g]=n[2*g]*o+r,p[2*g+1]=n[2*g+1]*s+i;if(a>0){var m=me(p,-a);u=ge(m)}else u=p}else u=n;for(var v=0;v<u.length/2;v++)v<u.length/2-1?(c=u[2*(v+1)],h=u[2*(v+1)+1]):(c=u[0],h=u[1]),0!==(l=_e(t,e,r,i,u[2*v],u[2*v+1],c,h)).length&&d.push(l[0],l[1]);return d},we=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},Se=function(t,e){var n=Ce(t,e);return Ee(n)},Ee=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,s=-1/0,a=-1/0,l=0;l<r;l++)e=t[2*l],n=t[2*l+1],i=Math.min(i,e),s=Math.max(s,e),o=Math.min(o,n),a=Math.max(a,n);for(var u=2/(s-i),c=2/(a-o),h=0;h<r;h++)e=t[2*h]=t[2*h]*u,n=t[2*h+1]=t[2*h+1]*c,i=Math.min(i,e),s=Math.max(s,e),o=Math.min(o,n),a=Math.max(a,n);if(o<-1)for(var d=0;d<r;d++)n=t[2*d+1]=t[2*d+1]+(-1-o);return t},Ce=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),s=0;s<t;s++)i=s*n+r,o[2*s]=Math.cos(i),o[2*s+1]=Math.sin(-i);return o},ke=function(t,e){return Math.min(t/4,e/4,8)},Te=function(t,e){return Math.min(t/10,e/10,8)},Pe=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Ae=yt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),De={pageRank:function(t){for(var e=Ae(t),n=e.dampingFactor,r=e.precision,i=e.iterations,o=e.weight,s=this._private.cy,a=this.byGroup(),l=a.nodes,u=a.edges,c=l.length,h=u.length,d=new Array(c*c),p=new Array(c),f=(1-n)/c,g=0;g<c;g++){for(var m=0;m<c;m++)d[g*c+m]=0;p[g]=0}for(var v=0;v<h;v++){var y=u[v],b=y.data("source"),_=y.data("target");if(b!==_){var x=l.indexOfId(b),w=l.indexOfId(_),S=o(y);d[w*c+x]+=S,p[x]+=S}}for(var E=1/c+f,C=0;C<c;C++)if(0===p[C])for(var k=0;k<c;k++)d[k*c+C]=E;else for(var T=0;T<c;T++){var P=T*c+C;d[P]=d[P]/p[C]+f}for(var A,D=new Array(c),O=new Array(c),M=0;M<c;M++)D[M]=1;for(var I=0;I<i;I++){for(var L=0;L<c;L++)O[L]=0;for(var N=0;N<c;N++)for(var R=0;R<c;R++)O[N]+=d[N*c+R]*D[R];Xt(O),A=D,D=O,O=A;for(var F=0,B=0;B<c;B++){var j=A[B]-D[B];F+=j*j}if(F<r)break}return{rank:function(t){return t=s.collection(t)[0],D[l.indexOf(t)]}}}},Oe=yt({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Me={degreeCentralityNormalized:function(t){t=Oe(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},o={},s=0,a=0,l=0;l<r;l++){var u=n[l],c=u.id();t.root=u;var h=this.degreeCentrality(t);s<h.indegree&&(s=h.indegree),a<h.outdegree&&(a=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(t){return 0==s?0:(b(t)&&(t=e.filter(t)),i[t.id()]/s)},outdegree:function(t){return 0===a?0:(b(t)&&(t=e.filter(t)),o[t.id()]/a)}}}for(var d={},p=0,f=0;f<r;f++){var g=n[f];t.root=g;var m=this.degreeCentrality(t);p<m.degree&&(p=m.degree),d[g.id()]=m.degree}return{degree:function(t){return 0===p?0:(b(t)&&(t=e.filter(t)),d[t.id()]/p)}}},degreeCentrality:function(t){t=Oe(t);var e=this.cy(),n=this,r=t.root,i=t.weight,o=t.directed,s=t.alpha;if(r=e.collection(r)[0],o){for(var a=r.connectedEdges(),l=a.filter(function(t){return t.target().same(r)&&n.has(t)}),u=a.filter(function(t){return t.source().same(r)&&n.has(t)}),c=l.length,h=u.length,d=0,p=0,f=0;f<l.length;f++)d+=i(l[f]);for(var g=0;g<u.length;g++)p+=i(u[g]);return{indegree:Math.pow(c,1-s)*Math.pow(d,s),outdegree:Math.pow(h,1-s)*Math.pow(p,s)}}for(var m=r.connectedEdges().intersection(n),v=m.length,y=0,b=0;b<m.length;b++)y+=i(m[b]);return{degree:Math.pow(v,1-s)*Math.pow(y,s)}}};Me.dc=Me.degreeCentrality,Me.dcn=Me.degreeCentralityNormalised=Me.degreeCentralityNormalized;var Ie=yt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Le={closenessCentralityNormalized:function(t){for(var e=Ie(t),n=e.harmonic,r=e.weight,i=e.directed,o=this.cy(),s={},a=0,l=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<l.length;c++){for(var h=0,d=l[c],p=0;p<l.length;p++)if(c!==p){var f=u.distance(d,l[p]);h+=n?1/f:f}n||(h=1/h),a<h&&(a=h),s[d.id()]=h}return{closeness:function(t){return 0==a?0:(t=b(t)?o.filter(t)[0].id():t.id(),s[t]/a)}}},closenessCentrality:function(t){var e=Ie(t),n=e.root,r=e.weight,i=e.directed,o=e.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:r,directed:i}),a=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(n)){var h=s.distanceTo(c);a+=o?1/h:h}}return o?a:1/a}};Le.cc=Le.closenessCentrality,Le.ccn=Le.closenessCentralityNormalised=Le.closenessCentralityNormalized;var Ne=yt({weight:null,directed:!1}),Re={betweennessCentrality:function(t){for(var e=Ne(t),n=e.directed,r=e.weight,i=null!=r,s=this.cy(),a=this.nodes(),l={},u={},c=0,h=function(t,e){u[t]=e,e>c&&(c=e)},d=function(t){return u[t]},p=0;p<a.length;p++){var f=a[p],g=f.id();l[g]=n?f.outgoers().nodes():f.openNeighborhood().nodes(),h(g,0)}for(var m=function(t){for(var e=a[t].id(),n=[],u={},c={},p={},f=new o(function(t,e){return p[t]-p[e]}),g=0;g<a.length;g++){var m=a[g].id();u[m]=[],c[m]=0,p[m]=1/0}for(c[e]=1,p[e]=0,f.push(e);!f.empty();){var v=f.pop();if(n.push(v),i)for(var y=0;y<l[v].length;y++){var b,_=l[v][y],x=s.getElementById(v);b=x.edgesTo(_).length>0?x.edgesTo(_)[0]:_.edgesTo(x)[0];var w=r(b);_=_.id(),p[_]>p[v]+w&&(p[_]=p[v]+w,f.nodes.indexOf(_)<0?f.push(_):f.updateItem(_),c[_]=0,u[_]=[]),p[_]==p[v]+w&&(c[_]=c[_]+c[v],u[_].push(v))}else for(var S=0;S<l[v].length;S++){var E=l[v][S].id();p[E]==1/0&&(f.push(E),p[E]=p[v]+1),p[E]==p[v]+1&&(c[E]=c[E]+c[v],u[E].push(v))}}for(var C={},k=0;k<a.length;k++)C[a[k].id()]=0;for(;n.length>0;){for(var T=n.pop(),P=0;P<u[T].length;P++){var A=u[T][P];C[A]=C[A]+c[A]/c[T]*(1+C[T])}T!=a[t].id()&&h(T,d(T)+C[T])}},v=0;v<a.length;v++)m(v);var y={betweenness:function(t){var e=s.collection(t).id();return d(e)},betweennessNormalized:function(t){if(0==c)return 0;var e=s.collection(t).id();return d(e)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};Re.bc=Re.betweennessCentrality;var Fe=yt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Be=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},je=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var o=0;o<e;o++)t[o*e+r]=t[o*e+r]/n}},ze=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var s=0;s<n;s++)for(var a=0;a<n;a++)r[i*n+a]+=t[i*n+s]*e[s*n+a]}return r},Ve=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=ze(t,r,e);return t},Ge=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return je(r,e),r},Ue=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},He=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},qe=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=function(t){return Fe(t)}(t),o={},s=0;s<e.length;s++)o[e[s].id()]=s;for(var a,l=e.length,u=l*l,c=new Array(u),h=0;h<u;h++)c[h]=0;for(var d=0;d<n.length;d++){var p=n[d],f=o[p.source().id()],g=o[p.target().id()],m=Be(p,i.attributes);c[f*l+g]+=m,c[g*l+f]+=m}!function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n}(c,l,i.multFactor),je(c,l);for(var v=!0,y=0;v&&y<i.maxIterations;)v=!1,a=Ve(c,l,i.expandFactor),c=Ge(a,l,i.inflateFactor),Ue(c,a,u,4)||(v=!0),y++;return function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&He(t[e],t[n])&&t.splice(n,1);return t}(function(t,e,n,r){for(var i=[],o=0;o<e;o++){for(var s=[],a=0;a<e;a++)Math.round(1e3*t[o*e+a])/1e3>0&&s.push(n[a]);0!==s.length&&i.push(r.collection(s))}return i}(c,l,e,r))},We={markovClustering:qe,mcl:qe},$e=function(t){return t},Ye=function(t,e){return Math.abs(e-t)},Ke=function(t,e,n){return t+Ye(e,n)},Xe=function(t,e,n){return t+Math.pow(n-e,2)},Qe=function(t){return Math.sqrt(t)},Ze=function(t,e,n){return Math.max(t,Ye(e,n))},Je=function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$e,s=r,a=0;a<t;a++)s=i(s,e(a),n(a));return o(s)},tn={euclidean:function(t,e,n){return t>=2?Je(t,e,n,0,Xe,Qe):Je(t,e,n,0,Ke)},squaredEuclidean:function(t,e,n){return Je(t,e,n,0,Xe)},manhattan:function(t,e,n){return Je(t,e,n,0,Ke)},max:function(t,e,n){return Je(t,e,n,-1/0,Ze)}};function en(t,e,n,r,i,o){var s;return s=_(t)?t:tn[t]||tn.euclidean,0===e&&_(t)?s(i,o):s(e,n,r,i,o)}tn["squared-euclidean"]=tn.squaredEuclidean,tn.squaredeuclidean=tn.squaredEuclidean;var nn=yt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),rn=function(t){return nn(t)},on=function(t,e,n,r,i){var o="kMedoids"!==i?function(t){return n[t]}:function(t){return r[t](n)};return en(t,r.length,o,function(t){return r[t](e)},n,e)},sn=function(t,e,n){for(var r=n.length,i=new Array(r),o=new Array(r),s=new Array(e),a=null,l=0;l<r;l++)i[l]=t.min(n[l]).value,o[l]=t.max(n[l]).value;for(var u=0;u<e;u++){a=[];for(var c=0;c<r;c++)a[c]=Math.random()*(o[c]-i[c])+i[c];s[u]=a}return s},an=function(t,e,n,r,i){for(var o=1/0,s=0,a=0;a<e.length;a++){var l=on(n,t,e[a],r,i);l<o&&(o=l,s=a)}return s},ln=function(t,e,n){for(var r=[],i=null,o=0;o<e.length;o++)n[(i=e[o]).id()]===t&&r.push(i);return r},un=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},cn=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},hn=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];cn(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var o=0;o<e;o++)n[o]=t[Math.floor(Math.random()*t.length)];return n},dn=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=on("manhattan",e[i],t,n,"kMedoids");return r},pn=function(t,e,n,r,i){for(var o,s,a=0;a<e.length;a++)for(var l=0;l<t.length;l++)r[a][l]=Math.pow(n[a][l],i.m);for(var u=0;u<t.length;u++)for(var c=0;c<i.attributes.length;c++){o=0,s=0;for(var h=0;h<e.length;h++)o+=r[h][u]*i.attributes[c](e[h]),s+=r[h][u];t[u][c]=o/s}},fn=function(t,e,n,r,i){for(var o=0;o<t.length;o++)e[o]=t[o].slice();for(var s,a,l,u=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<r.length;h++){s=0;for(var d=0;d<n.length;d++)a=on(i.distance,r[h],n[c],i.attributes,"cmeans"),l=on(i.distance,r[h],n[d],i.attributes,"cmeans"),s+=Math.pow(a/l,u);t[h][c]=1/s}},gn=function(t){var e,n,r,i,o=this.cy(),s=this.nodes(),a=rn(t);r=new Array(s.length);for(var l=0;l<s.length;l++)r[l]=new Array(a.k);n=new Array(s.length);for(var u=0;u<s.length;u++)n[u]=new Array(a.k);for(var c=0;c<s.length;c++){for(var h=0,d=0;d<a.k;d++)n[c][d]=Math.random(),h+=n[c][d];for(var p=0;p<a.k;p++)n[c][p]=n[c][p]/h}e=new Array(a.k);for(var f=0;f<a.k;f++)e[f]=new Array(a.attributes.length);i=new Array(s.length);for(var g=0;g<s.length;g++)i[g]=new Array(a.k);for(var m=!0,v=0;m&&v<a.maxIterations;)m=!1,pn(e,s,n,i,a),fn(n,r,e,s,a),un(n,r,a.sensitivityThreshold)||(m=!0),v++;return{clusters:function(t,e,n,r){for(var i,o,s=new Array(n.k),a=0;a<s.length;a++)s[a]=[];for(var l=0;l<e.length;l++){i=-1/0,o=-1;for(var u=0;u<e[0].length;u++)e[l][u]>i&&(i=e[l][u],o=u);s[o].push(t[l])}for(var c=0;c<s.length;c++)s[c]=r.collection(s[c]);return s}(s,n,a,o),degreeOfMembership:n}},mn={kMeans:function(t){var e,n=this.cy(),r=this.nodes(),i=null,o=rn(t),a=new Array(o.k),l={};e=o.testMode?"number"==typeof o.testCentroids?sn(r,o.k,o.attributes):"object"===s(o.testCentroids)?o.testCentroids:sn(r,o.k,o.attributes):sn(r,o.k,o.attributes);for(var u,c=!0,h=0;c&&h<o.maxIterations;){for(var d=0;d<r.length;d++)l[(i=r[d]).id()]=an(i,e,o.distance,o.attributes,"kMeans");c=!1;for(var p=0;p<o.k;p++){var f=ln(p,r,l);if(0!==f.length){for(var g=o.attributes.length,m=e[p],v=new Array(g),y=new Array(g),b=0;b<g;b++){y[b]=0;for(var _=0;_<f.length;_++)y[b]+=o.attributes[b](i=f[_]);v[b]=y[b]/f.length,u=o.sensitivityThreshold,Math.abs(m[b]-v[b])<=u||(c=!0)}e[p]=v,a[p]=n.collection(f)}}h++}return a},kMedoids:function(t){var e,n,r=this.cy(),i=this.nodes(),o=null,a=rn(t),l=new Array(a.k),u={},c=new Array(a.k);a.testMode?"number"==typeof a.testCentroids||(e="object"===s(a.testCentroids)?a.testCentroids:hn(i,a.k)):e=hn(i,a.k);for(var h=!0,d=0;h&&d<a.maxIterations;){for(var p=0;p<i.length;p++)u[(o=i[p]).id()]=an(o,e,a.distance,a.attributes,"kMedoids");h=!1;for(var f=0;f<e.length;f++){var g=ln(f,i,u);if(0!==g.length){c[f]=dn(e[f],g,a.attributes);for(var m=0;m<g.length;m++)(n=dn(g[m],g,a.attributes))<c[f]&&(c[f]=n,e[f]=g[m],h=!0);l[f]=r.collection(g)}}d++}return l},fuzzyCMeans:gn,fcm:gn},vn=yt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),yn={single:"min",complete:"max"},bn=function(t,e,n,r,i){for(var o,s=0,a=1/0,l=i.attributes,u=function(t,e){return en(i.distance,l.length,function(e){return l[e](t)},function(t){return l[t](e)},t,e)},c=0;c<t.length;c++){var h=t[c].key,d=n[h][r[h]];d<a&&(s=h,a=d)}if("threshold"===i.mode&&a>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var p,f=e[s],g=e[r[s]];p="dendrogram"===i.mode?{left:f,right:g,key:f.key}:{value:f.value.concat(g.value),key:f.key},t[f.index]=p,t.splice(g.index,1),e[f.key]=p;for(var m=0;m<t.length;m++){var v=t[m];f.key===v.key?o=1/0:"min"===i.linkage?(o=n[f.key][v.key],n[f.key][v.key]>n[g.key][v.key]&&(o=n[g.key][v.key])):"max"===i.linkage?(o=n[f.key][v.key],n[f.key][v.key]<n[g.key][v.key]&&(o=n[g.key][v.key])):o="mean"===i.linkage?(n[f.key][v.key]*f.size+n[g.key][v.key]*g.size)/(f.size+g.size):"dendrogram"===i.mode?u(v.value,f.value):u(v.value[0],f.value[0]),n[f.key][v.key]=n[v.key][f.key]=o}for(var y=0;y<t.length;y++){var b=t[y].key;if(r[b]===f.key||r[b]===g.key){for(var _=b,x=0;x<t.length;x++){var w=t[x].key;n[b][w]<n[b][_]&&(_=w)}r[b]=_}t[y].index=y}return f.key=g.key=f.index=g.index=null,!0},_n=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},xn=function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return e.value?e.value.id():void 0},wn=function t(e,n,r){if(!e)return[];var i=[],o=[],s=[];return 0===n?(e.left&&_n(e.left,i),e.right&&_n(e.right,o),s=i.concat(o),[r.collection(s)]):1===n?e.value?[r.collection(e.value)]:(e.left&&_n(e.left,i),e.right&&_n(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))},Sn=function(t){for(var e=this.cy(),n=this.nodes(),r=function(t){var e=vn(t),n=yn[e.linkage];return null!=n&&(e.linkage=n),e}(t),i=r.attributes,o=function(t,e){return en(r.distance,i.length,function(e){return i[e](t)},function(t){return i[t](e)},t,e)},s=[],a=[],l=[],u=[],c=0;c<n.length;c++){var h={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};s[c]=h,u[c]=h,a[c]=[],l[c]=0}for(var d=0;d<s.length;d++)for(var p=0;p<=d;p++){var f;f="dendrogram"===r.mode?d===p?1/0:o(s[d].value,s[p].value):d===p?1/0:o(s[d].value[0],s[p].value[0]),a[d][p]=f,a[p][d]=f,f<a[d][l[d]]&&(l[d]=p)}for(var g,m=bn(s,u,a,l,r);m;)m=bn(s,u,a,l,r);return"dendrogram"===r.mode?(g=wn(s[0],r.dendrogramDepth,e),r.addDendrogram&&xn(s[0],e)):(g=new Array(s.length),s.forEach(function(t,n){t.key=t.index=null,g[n]=e.collection(t.value)})),g},En={hierarchicalClustering:Sn,hca:Sn},Cn=yt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),kn=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-en(t,r.length,function(t){return i(e,t)},function(t){return i(n,t)},e,n)},Tn=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var o=-1,s=-1/0,a=0;a<n.length;a++){var l=n[a];e[i*t+l]>s&&(o=l,s=e[i*t+l])}o>0&&r.push(o)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},Pn=function(t){for(var e,n,r,i,o,s,a=this.cy(),l=this.nodes(),u=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||ht("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some(function(t){return t===n})||S(n)||ht("Preference must be one of [".concat(r.map(function(t){return"'".concat(t,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Cn(t)}(t),c={},h=0;h<l.length;h++)c[l[h].id()]=h;n=(e=l.length)*e,r=new Array(n);for(var d=0;d<n;d++)r[d]=-1/0;for(var p=0;p<e;p++)for(var f=0;f<e;f++)p!==f&&(r[p*e+f]=kn(u.distance,l[p],l[f],u.attributes));i=function(t,e){return"median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e)):t=t.slice(e,n);for(var o=0,s=t.length-1;s>=0;s--)i?isFinite(t[s])||(t[s]=-1/0,o++):t.splice(s,1);r&&t.sort(function(t,e){return t-e});var a=t.length,l=Math.floor(a/2);return a%2!=0?t[l+1+o]:(t[l-1+o]+t[l+o])/2}(t):"mean"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=0,r=0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<e;i++){var o=t[i];isFinite(o)&&(n+=o,r++)}return n/r}(t):"min"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=1/0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r<e;r++){var i=t[r];isFinite(i)&&(n=Math.min(i,n))}return n}(t):"max"===e?function(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=-1/0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r<e;r++){var i=t[r];isFinite(i)&&(n=Math.max(i,n))}return n}(t):e}(r,u.preference);for(var g=0;g<e;g++)r[g*e+g]=i;o=new Array(n);for(var m=0;m<n;m++)o[m]=0;s=new Array(n);for(var v=0;v<n;v++)s[v]=0;for(var y=new Array(e),b=new Array(e),_=new Array(e),x=0;x<e;x++)y[x]=0,b[x]=0,_[x]=0;for(var w,E=new Array(e*u.minIterations),C=0;C<E.length;C++)E[C]=0;for(w=0;w<u.maxIterations;w++){for(var k=0;k<e;k++){for(var T=-1/0,P=-1/0,A=-1,D=0,O=0;O<e;O++)y[O]=o[k*e+O],(D=s[k*e+O]+r[k*e+O])>=T?(P=T,T=D,A=O):D>P&&(P=D);for(var M=0;M<e;M++)o[k*e+M]=(1-u.damping)*(r[k*e+M]-T)+u.damping*y[M];o[k*e+A]=(1-u.damping)*(r[k*e+A]-P)+u.damping*y[A]}for(var I=0;I<e;I++){for(var L=0,N=0;N<e;N++)y[N]=s[N*e+I],b[N]=Math.max(0,o[N*e+I]),L+=b[N];L-=b[I],b[I]=o[I*e+I],L+=b[I];for(var R=0;R<e;R++)s[R*e+I]=(1-u.damping)*Math.min(0,L-b[R])+u.damping*y[R];s[I*e+I]=(1-u.damping)*(L-b[I])+u.damping*y[I]}for(var F=0,B=0;B<e;B++){var j=s[B*e+B]+o[B*e+B]>0?1:0;E[w%u.minIterations*e+B]=j,F+=j}if(F>0&&(w>=u.minIterations-1||w==u.maxIterations-1)){for(var z=0,V=0;V<e;V++){_[V]=0;for(var G=0;G<u.minIterations;G++)_[V]+=E[G*e+V];0!==_[V]&&_[V]!==u.minIterations||z++}if(z===e)break}}for(var U=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r}(e,o,s),H=function(t,e,n){for(var r=Tn(t,e,n),i=0;i<n.length;i++){for(var o=[],s=0;s<r.length;s++)r[s]===n[i]&&o.push(s);for(var a=-1,l=-1/0,u=0;u<o.length;u++){for(var c=0,h=0;h<o.length;h++)c+=e[o[h]*t+o[u]];c>l&&(a=u,l=c)}n[i]=o[a]}return Tn(t,e,n)}(e,r,U),q={},W=0;W<U.length;W++)q[U[W]]=[];for(var $=0;$<l.length;$++){var Y=H[c[l[$].id()]];null!=Y&&q[Y].push(l[$])}for(var K=new Array(U.length),X=0;X<U.length;X++)K[X]=a.collection(q[U[X]]);return K},An={affinityPropagation:Pn,ap:Pn},Dn=yt({root:void 0,directed:!1}),On=function(){var t=this,e={},n=0,r=0,i=[],o=[],s={},a=function a(l,u,c){l===c&&(r+=1),e[u]={id:n,low:n++,cutVertex:!1};var h,d,p,f,g=t.getElementById(u).connectedEdges().intersection(t);0===g.size()?i.push(t.spawn(t.getElementById(u))):g.forEach(function(n){h=n.source().id(),d=n.target().id(),(p=h===u?d:h)!==c&&(f=n.id(),s[f]||(s[f]=!0,o.push({x:u,y:p,edge:n})),p in e?e[u].low=Math.min(e[u].low,e[p].id):(a(l,p,u),e[u].low=Math.min(e[u].low,e[p].low),e[u].id<=e[p].low&&(e[u].cutVertex=!0,function(n,r){for(var s=o.length-1,a=[],l=t.spawn();o[s].x!=n||o[s].y!=r;)a.push(o.pop().edge),s--;a.push(o.pop().edge),a.forEach(function(n){var r=n.connectedNodes().intersection(t);l.merge(n),r.forEach(function(n){var r=n.id(),i=n.connectedEdges().intersection(t);l.merge(n),l.merge(e[r].cutVertex?i.filter(function(t){return t.isLoop()}):i)})}),i.push(l)}(u,p))))})};t.forEach(function(t){if(t.isNode()){var n=t.id();n in e||(r=0,a(n,n),e[n].cutVertex=r>1)}});var l=Object.keys(e).filter(function(t){return e[t].cutVertex}).map(function(e){return t.getElementById(e)});return{cut:t.spawn(l),components:i}},Mn=function(){var t=this,e={},n=0,r=[],i=[],o=t.spawn(t),s=function s(a){if(i.push(a),e[a]={index:n,low:n++,explored:!1},t.getElementById(a).connectedEdges().intersection(t).forEach(function(t){var n=t.target().id();n!==a&&(n in e||s(n),e[n].explored||(e[a].low=Math.min(e[a].low,e[n].low)))}),e[a].index===e[a].low){for(var l=t.spawn();;){var u=i.pop();if(l.merge(t.getElementById(u)),e[u].low=e[a].index,e[u].explored=!0,u===a)break}var c=l.edgesWith(l),h=l.merge(c);r.push(h),o=o.difference(h)}};return t.forEach(function(t){if(t.isNode()){var n=t.id();n in e||s(n)}}),{cut:o,components:r}},In={};[Pt,Dt,Ot,It,Nt,Ft,Vt,De,Me,Le,Re,We,mn,En,An,{hierholzer:function(t){if(!w(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,o=Dn(t),s=o.root,a=o.directed,l=this,u=!1;s&&(i=b(s)?this.filter(s)[0].id():s[0].id());var c={},h={};l.forEach(a?function(t){var e=t.id();if(t.isNode()){var i=t.indegree(!0),o=t.outdegree(!0),s=i-o,a=o-i;1==s?n?u=!0:n=e:1==a?r?u=!0:r=e:(a>1||s>1)&&(u=!0),c[e]=[],t.outgoers().forEach(function(t){t.isEdge()&&c[e].push(t.id())})}else h[e]=[void 0,t.target().id()]}:function(t){var e=t.id();t.isNode()?(t.degree(!0)%2&&(n?r?u=!0:r=e:n=e),c[e]=[],t.connectedEdges().forEach(function(t){return c[e].push(t.id())})):h[e]=[t.source().id(),t.target().id()]});var d={found:!1,trail:void 0};if(u)return d;if(r&&n)if(a){if(i&&r!=i)return d;i=r}else{if(i&&r!=i&&n!=i)return d;i||(i=r)}else i||(i=l[0].id());var p=function(t){for(var e,n,r,i=t,o=[t];c[i].length;)e=c[i].shift(),n=h[e][0],i!=(r=h[e][1])?(c[r]=c[r].filter(function(t){return t!=e}),i=r):a||i==n||(c[n]=c[n].filter(function(t){return t!=e}),i=n),o.unshift(e),o.unshift(i);return o},f=[],g=[];for(g=p(i);1!=g.length;)0==c[g[0]].length?(f.unshift(l.getElementById(g.shift())),f.unshift(l.getElementById(g.shift()))):g=p(g.shift()).concat(g);for(var m in f.unshift(l.getElementById(g.shift())),c)if(c[m].length)return d;return d.found=!0,d.trail=this.spawn(f,!0),d}},{hopcroftTarjanBiconnected:On,htbc:On,htb:On,hopcroftTarjanBiconnectedComponents:On},{tarjanStronglyConnected:Mn,tsc:Mn,tscc:Mn,tarjanStronglyConnectedComponents:Mn}].forEach(function(t){j(In,t)});var Ln=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ln.prototype={fulfill:function(t){return Nn(this,1,"fulfillValue",t)},reject:function(t){return Nn(this,2,"rejectReason",t)},then:function(t,e){var n=new Ln;return this.onFulfilled.push(Bn(t,n,"fulfill")),this.onRejected.push(Bn(e,n,"reject")),Rn(this),n.proxy}};var Nn=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,Rn(t)),t},Rn=function(t){1===t.state?Fn(t,"onFulfilled",t.fulfillValue):2===t.state&&Fn(t,"onRejected",t.rejectReason)},Fn=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Bn=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(o){return void e.reject(o)}jn(e,i)}}},jn=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===s(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(o){return void e.reject(o)}if("function"!=typeof r)e.fulfill(n);else{var i=!1;try{r.call(n,function(r){i||(i=!0,r===n?e.reject(new TypeError("circular thenable chain")):t(e,r))},function(t){i||(i=!0,e.reject(t))})}catch(o){i||e.reject(o)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};Ln.all=function(t){return new Ln(function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},s=0;s<t.length;s++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then(function(t){o(e,t)},function(t){n(t)}):o(e,r)}(s)})},Ln.resolve=function(t){return new Ln(function(e,n){e(t)})},Ln.reject=function(t){return new Ln(function(e,n){n(t)})};var zn="undefined"!=typeof Promise?Promise:Ln,Vn=function(t,e,n){var r=P(t),i=!r,o=this._private=j({duration:1e3},e,n);if(o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&_(o.complete)&&o.completes.push(o.complete),i){var s=t.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(r){var a=t.pan();o.startPan={x:a.x,y:a.y},o.startZoom=t.zoom()}this.length=1,this[0]=this},Gn=Vn.prototype;j(Gn,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),C(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,s=t.startStyle[o];t.startStyle[o]=i,t.style[r]=s}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new zn(function(t,n){e.push(function(){t()})})}}),Gn.complete=Gn.completed,Gn.run=Gn.play,Gn.running=Gn.playing;var Un={};[{animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++)t[e]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,o=!n,s=!o;if(!i.styleEnabled())return this;var a=i.style();if(t=j({},t,e),0===Object.keys(t).length)return new Vn(r[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(s&&(t.style=a.getPropsList(t.style||t.css),t.css=void 0),s&&null!=t.renderedPosition){var l=t.renderedPosition,u=i.pan(),c=i.zoom();t.position=Ut(l,c,u)}if(o&&null!=t.panBy){var h=t.panBy,d=i.pan();t.pan={x:d.x+h.x,y:d.y+h.y}}var p=t.center||t.centre;if(o&&null!=p){var f=i.getCenterPan(p.eles,t.zoom);null!=f&&(t.pan=f)}if(o&&null!=t.fit){var g=t.fit,m=i.getFitViewport(g.eles||g.boundingBox,g.padding);null!=m&&(t.pan=m.pan,t.zoom=m.zoom)}if(o&&w(t.zoom)){var v=i.getZoomedViewport(t.zoom);null!=v?(v.zoomed&&(t.zoom=v.zoom),v.panned&&(t.pan=v.pan)):t.zoom=null}return new Vn(r[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=j({},t,e));for(var r=0;r<n.length;r++){var i=n[r],o=i.animated()&&(void 0===t.queue||t.queue);i.animation(t,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var o=n[i]._private,s=o.animation.current,a=0;a<s.length;a++)e&&(s[a]._private.duration=0);t&&(o.animation.queue=[]),e||(o.animation.current=[])}return r.notify("draw"),this}}},{data:function(t){return t=j({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=void 0!==this.length,o=i?this:[this],s=i?this[0]:this;if(b(e)){var a;if(r.allowGetting&&void 0===n)return s&&(r.beforeGet(s),a=s._private[r.field][e]),a;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var l=c({},e,n);r.beforeSet(this,l);for(var u=0,h=o.length;u<h;u++){var d=o[u];r.canSet(d)&&(d._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&w(e)){var p,f,g=e,m=Object.keys(g);r.beforeSet(this,g);for(var v=0;v<m.length;v++)if(f=g[p=m[v]],!r.immutableKeys[p])for(var y=0;y<o.length;y++){var x=o[y];r.canSet(x)&&(x._private[r.field][p]=f)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&_(e))this.on(r.bindingEvent,e);else if(r.allowGetting&&void 0===e){var S;return s&&(r.beforeGet(s),S=s._private[r.field]),S}return this}},removeData:function(t){return t=j({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(b(e)){for(var i=e.split(/\s+/),o=i.length,s=0;s<o;s++){var a=i[s];if(!D(a)&&!n.immutableKeys[a])for(var l=0,u=r.length;l<u;l++)r[l]._private[n.field][a]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var c=0,h=r.length;c<h;c++)for(var d=r[c]._private[n.field],p=Object.keys(d),f=0;f<p.length;f++){var g=p[f];!n.immutableKeys[g]&&(d[g]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new zn(function(t,e){var i=r.concat([function(e){n.off.apply(n,o),t(e)}]),o=i.concat([]);n.on.apply(n,i)})}}}].forEach(function(t){j(Un,t)});var Hn={animate:Un.animate(),animation:Un.animation(),animated:Un.animated(),clearQueue:Un.clearQueue(),delay:Un.delay(),delayAnimation:Un.delayAnimation(),stop:Un.stop()},qn={classes:function(t){if(void 0===t){var e=[];return this[0]._private.classes.forEach(function(t){return e.push(t)}),e}x(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],r=new Ct(t),i=0;i<this.length;i++){for(var o=this[i],s=o._private,a=s.classes,l=!1,u=0;u<t.length;u++)if(!a.has(t[u])){l=!0;break}l||(l=a.size!==t.length),l&&(s.classes=r,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){x(t)||(t=t.match(/\S+/g)||[]);for(var n=void 0===e,r=[],i=0,o=this.length;i<o;i++)for(var s=this[i],a=s._private.classes,l=!1,u=0;u<t.length;u++){var c=t[u],h=a.has(c),d=!1;e||n&&!h?(a.add(c),d=!0):(!e||n&&h)&&(a.delete(c),d=!0),!l&&d&&(r.push(s),l=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};qn.className=qn.classNames=qn.classes;var Wn={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:F,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Wn.variable="(?:[\\w-]|(?:\\\\"+Wn.metaChar+"))+",Wn.value=Wn.string+"|"+Wn.number,Wn.className=Wn.variable,Wn.id=Wn.variable,function(){var t,e,n;for(t=Wn.comparatorOp.split("|"),n=0;n<t.length;n++)Wn.comparatorOp+="|@"+(e=t[n]);for(t=Wn.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(Wn.comparatorOp+="|\\!"+e)}();var $n=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(t,e){return function(t,e){return-1*B(t,e)}(t.selector,e.selector)}),Yn=function(){for(var t,e={},n=0;n<$n.length;n++)e[(t=$n[n]).selector]=t.matches;return e}(),Kn="("+$n.map(function(t){return t.selector}).join("|")+")",Xn=function(t){return t.replace(new RegExp("\\\\("+Wn.metaChar+")","g"),function(t,e){return e})},Qn=function(t,e,n){t[t.length-1]=n},Zn=[{name:"group",query:!0,regex:"("+Wn.group+")",populate:function(t,e,n){var r=h(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:Kn,populate:function(t,e,n){var r=h(n,1);e.checks.push({type:7,value:r[0]})}},{name:"id",query:!0,regex:"\\#("+Wn.id+")",populate:function(t,e,n){var r=h(n,1);e.checks.push({type:8,value:Xn(r[0])})}},{name:"className",query:!0,regex:"\\.("+Wn.className+")",populate:function(t,e,n){var r=h(n,1);e.checks.push({type:9,value:Xn(r[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Wn.variable+")\\s*\\]",populate:function(t,e,n){var r=h(n,1);e.checks.push({type:4,field:Xn(r[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Wn.variable+")\\s*("+Wn.comparatorOp+")\\s*("+Wn.value+")\\s*\\]",populate:function(t,e,n){var r=h(n,3),i=r[0],o=r[1],s=r[2];s=null!=new RegExp("^"+Wn.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),e.checks.push({type:3,field:Xn(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Wn.boolOp+")\\s*("+Wn.variable+")\\s*\\]",populate:function(t,e,n){var r=h(n,2),i=r[0];e.checks.push({type:5,field:Xn(r[1]),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Wn.meta+")\\s*("+Wn.comparatorOp+")\\s*("+Wn.number+")\\s*\\]\\]",populate:function(t,e,n){var r=h(n,3),i=r[1],o=r[2];e.checks.push({type:6,field:Xn(r[0]),operator:i,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Wn.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,o=t[t.length-1];return null!=n&&(o.subject=n,t.currentSubject=null),o.edgeCount=r,o.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Wn.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:11,source:e,target:r}),Qn(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:12,source:e,target:o}),Qn(t,0,i),t.edgeCount++,o}},{name:"undirectedEdge",separator:!0,regex:Wn.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:10,nodes:[e,r]}),Qn(t,0,n),t.edgeCount++,r}var i={checks:[]},o={checks:[]};return i.checks.push({type:14,node:e,neighbor:o}),Qn(t,0,i),o}},{name:"child",separator:!0,regex:Wn.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:15,parent:t[t.length-1],child:r}),Qn(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},s={checks:[]},a={checks:[]},l={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:s}),s.checks=e.checks,e.checks=[{type:20}],l.checks.push({type:20}),o.checks.push({type:17,parent:l,child:a}),Qn(t,0,i),t.currentSubject=s,t.compoundCount++,a}var u={checks:[]},c={checks:[]},h=[{type:17,parent:u,child:c}];return u.checks=e.checks,e.checks=h,t.compoundCount++,c}},{name:"descendant",separator:!0,regex:Wn.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:16,ancestor:t[t.length-1],descendant:r}),Qn(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var i={checks:[]},o={checks:[]},s={checks:[]},a={checks:[]},l={checks:[]};return i.checks.push({type:19,left:t[t.length-1],right:o,subject:s}),s.checks=e.checks,e.checks=[{type:20}],l.checks.push({type:20}),o.checks.push({type:18,ancestor:l,descendant:a}),Qn(t,0,i),t.currentSubject=s,t.compoundCount++,a}var u={checks:[]},c={checks:[]},h=[{type:18,ancestor:u,descendant:c}];return u.checks=e.checks,e.checks=h,t.compoundCount++,c}},{name:"subject",modifier:!0,regex:Wn.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return pt("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];Zn.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Jn=function(t){for(var e,n,r,i=0;i<Zn.length;i++){var o=Zn[i],s=o.name,a=t.match(o.regexObj);if(null!=a){n=a,e=o,r=s,t=t.substring(a[0].length);break}}return{expr:e,match:n,name:r,remaining:t}},tr={parse:function(t){var e=this.inputText=t,n=this[0]={checks:[]};for(this.length=1,e=function(t){var e=t.match(/^\s+/);return e&&(t=t.substring(e[0].length)),t}(e);;){var r=Jn(e);if(null==r.expr)return pt("The selector `"+t+"`is invalid"),!1;var i=r.match.slice(1),o=r.expr.populate(this,n,i);if(!1===o)return!1;if(null!=o&&(n=o),(e=r.remaining).match(/^\s*$/))break}var s=this[this.length-1];null!=this.currentSubject&&(s.subject=this.currentSubject),s.edgeCount=this.edgeCount,s.compoundCount=this.compoundCount;for(var a=0;a<this.length;a++){var l=this[a];if(l.compoundCount>0&&l.edgeCount>0)return pt("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return pt("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&pt("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return b(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function(i,o){return i.checks.reduce(function(s,a,l){return s+(o===i&&0===l?"$":"")+function(i,o){var s=i.value;switch(i.type){case 0:var a=t(s);return a.substring(0,a.length-1);case 3:return"["+i.field+n(t(i.operator))+e(s)+"]";case 5:var l=i.field;return"["+t(i.operator)+l+"]";case 4:return"["+i.field+"]";case 6:return"[["+i.field+n(t(i.operator))+e(s)+"]]";case 7:return s;case 8:return"#"+s;case 9:return"."+s;case 17:case 15:return r(i.parent,o)+n(">")+r(i.child,o);case 18:case 16:return r(i.ancestor,o)+" "+r(i.descendant,o);case 19:var u=r(i.left,o),c=r(i.subject,o),h=r(i.right,o);return u+(u.length>0?" ":"")+c+h;case 20:return""}}(a,o)},"")},i="",o=0;o<this.length;o++){var s=this[o];i+=r(s,s.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i}},er=function(t,e,n){var r,i,o,s=b(t),a=S(t),l=b(n),u=!1,c=!1,h=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),c=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),u=!0),(s||l||u)&&(i=s||a?""+t:"",o=""+n),u&&(t=i=i.toLowerCase(),n=o=o.toLowerCase()),e){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=t===n;break;case">":h=!0,r=t>n;break;case">=":h=!0,r=t>=n;break;case"<":h=!0,r=t<n;break;case"<=":h=!0,r=t<=n;break;default:r=!1}return!c||null==t&&h||(r=!r),r},nr=function(t,e){return t.data(e)},rr=[],ir=function(t,e){return t.checks.every(function(t){return rr[t.type](t,e)})};rr[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},rr[7]=function(t,e){return function(t,e){return Yn[t](e)}(t.value,e)},rr[8]=function(t,e){var n=t.value;return e.id()===n},rr[9]=function(t,e){return e.hasClass(t.value)},rr[6]=function(t,e){var n=t.operator,r=t.value;return er(function(t,e){return t[e]()}(e,t.field),n,r)},rr[3]=function(t,e){var n=t.operator,r=t.value;return er(nr(e,t.field),n,r)},rr[5]=function(t,e){var n=t.operator;return function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(nr(e,t.field),n)},rr[4]=function(t,e){return void 0!==nr(e,t.field)},rr[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return ir(n,i)&&ir(r,o)||ir(r,i)&&ir(n,o)},rr[14]=function(t,e){return ir(t.node,e)&&e.neighborhood().some(function(e){return e.isNode()&&ir(t.neighbor,e)})},rr[11]=function(t,e){return ir(t.source,e.source())&&ir(t.target,e.target())},rr[12]=function(t,e){return ir(t.source,e)&&e.outgoers().some(function(e){return e.isNode()&&ir(t.target,e)})},rr[13]=function(t,e){return ir(t.target,e)&&e.incomers().some(function(e){return e.isNode()&&ir(t.source,e)})},rr[15]=function(t,e){return ir(t.child,e)&&ir(t.parent,e.parent())},rr[17]=function(t,e){return ir(t.parent,e)&&e.children().some(function(e){return ir(t.child,e)})},rr[16]=function(t,e){return ir(t.descendant,e)&&e.ancestors().some(function(e){return ir(t.ancestor,e)})},rr[18]=function(t,e){return ir(t.ancestor,e)&&e.descendants().some(function(e){return ir(t.descendant,e)})},rr[19]=function(t,e){return ir(t.subject,e)&&ir(t.left,e)&&ir(t.right,e)},rr[20]=function(){return!0},rr[1]=function(t,e){return t.value.has(e)},rr[2]=function(t,e){return(0,t.value)(e)};var or=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||b(t)&&t.match(/^\s*$/)||(C(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):_(t)?this.addQuery({checks:[{type:2,value:t}]}):b(t)?this.parse(t)||(this.invalid=!0):ht("A selector must be created from a string; found "))},sr=or.prototype;[tr,{matches:function(t){for(var e=0;e<this.length;e++)if(ir(this[e],t))return!0;return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++)if(ir(e[n],t))return!0;return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}}].forEach(function(t){return j(sr,t)}),sr.text=function(){return this.inputText},sr.size=function(){return this.length},sr.eq=function(t){return this[t]},sr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},sr.addQuery=function(t){this[this.length++]=t},sr.selector=sr.toString;var ar={allAre:function(t){var e=new or(t);return this.every(function(t){return e.matches(t)})},is:function(t){var e=new or(t);return this.some(function(t){return e.matches(t)})},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every(function(e){return t.hasElementWithId(e.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every(function(t){return e.hasElementWithId(t.id())})},contains:function(t){t=this.cy().collection(t);var e=this;return t.every(function(t){return e.hasElementWithId(t.id())})}};ar.allAreNeighbours=ar.allAreNeighbors,ar.has=ar.contains,ar.equal=ar.equals=ar.same;var lr,ur,cr=function(t,e){return function(n,r,i,o){var s,a=n;if(null==a?s="":C(a)&&1===a.length&&(s=a.id()),1===this.length&&s){var l=this[0]._private,u=l.traversalCache=l.traversalCache||{},c=u[e]=u[e]||[],h=tt(s);return c[h]||(c[h]=t.call(this,n,r,i,o))}return t.call(this,n,r,i,o)}},hr={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,!0).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++)e.push(n[r]);n=n.parent()}return this.spawn(e,!0).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isChild()}).filter(t)},children:cr(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,!0).filter(t)}};function dr(t,e,n,r){for(var i=[],o=new Ct,s=t.cy().hasCompoundNodes(),a=0;a<t.length;a++){var l=t[a];n?i.push(l):s&&r(i,o,l)}for(;i.length>0;){var u=i.shift();e(u),o.add(u.id()),s&&r(i,o,u)}return t}function pr(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function fr(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function gr(t,e,n){fr(t,e,n),pr(t,e,n)}hr.forEachDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return dr(this,t,e,pr)},hr.forEachUp=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return dr(this,t,e,fr)},hr.forEachUpAndDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return dr(this,t,e,gr)},hr.ancestors=hr.parents,(lr=ur={data:Un.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Un.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Un.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Un.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Un.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Un.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=lr.data,lr.removeAttr=lr.removeData;var mr,vr,yr=ur,br={};function _r(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(r,s))}return n}}}function xr(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var s=i[o][t](n);void 0===s||void 0!==r&&!e(s,r)||(r=s)}return r}}j(br,{degree:_r(function(t,e){return e.source().same(e.target())?2:1}),indegree:_r(function(t,e){return e.target().same(t)?1:0}),outdegree:_r(function(t,e){return e.source().same(t)?1:0})}),j(br,{minDegree:xr("degree",function(t,e){return t<e}),maxDegree:xr("degree",function(t,e){return t>e}),minIndegree:xr("indegree",function(t,e){return t<e}),maxIndegree:xr("indegree",function(t,e){return t>e}),minOutdegree:xr("outdegree",function(t,e){return t<e}),maxOutdegree:xr("outdegree",function(t,e){return t>e})}),j(br,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var wr=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var o=i._private.position,s={x:null!=e.x?e.x-o.x:0,y:null!=e.y?e.y-o.y:0};!i.isParent()||0===s.x&&0===s.y||i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},Sr={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){wr(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(mr=vr={position:Un.data(Sr),silentPosition:Un.data(j({},Sr,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){wr(t,e,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,e){if(w(t))e?this.silentPosition(t):this.position(t);else if(_(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o,s=this[i];(o=n(s,i))&&(e?s.silentPosition(o):s.position(o))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(w(t)?(r={x:S(t.x)?t.x:0,y:S(t.y)?t.y:0},n=e):b(t)&&S(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o],a=s.position(),l={x:a.x+r.x,y:a.y+r.y};n?s.silentPosition(l):s.position(l)}i.endBatch()}return this},silentShift:function(t,e){return w(t)?this.shift(t,!0):b(t)&&S(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),s=w(t)?t:void 0,a=void 0!==s||void 0!==e&&b(t);if(n&&n.isNode()){if(!a){var l=n.position();return s=Gt(l,i,o),void 0===t?s:s[t]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==e?c.position(t,(e-o[t])/i):void 0!==s&&c.position(Ut(s,i,o))}}else if(!a)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=w(t)?t:void 0,o=void 0!==i||void 0!==e&&b(t),s=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var a=n.position(),l=s?n.parent():null,u=l&&l.length>0;u&&(l=l[0]);var c=u?l.position():{x:0,y:0};return i={x:a.x-c.x,y:a.y-c.y},void 0===t?i:i[t]}for(var h=0;h<this.length;h++){var d=this[h],p=s?d.parent():null,f=p&&p.length>0;f&&(p=p[0]);var g=f?p.position():{x:0,y:0};void 0!==e?d.position(t,e+g[t]):void 0!==i&&d.position({x:i.x+g.x,y:i.y+g.y})}}else if(!o)return;return this}}).modelPosition=mr.point=mr.position,mr.modelPositions=mr.points=mr.positions,mr.renderedPoint=mr.renderedPosition,mr.relativePoint=mr.relativePosition;var Er,Cr,kr=vr;Er=Cr={},Cr.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,s=e.x2*r+i.x,a=e.y1*r+i.y,l=e.y2*r+i.y;return{x1:o,x2:s,y1:a,y2:l,w:s-o,h:l-a}},Cr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(e){if(e.isParent()){var n=e._private;n.compoundBoundsClean=!1,n.bbCache=null,t||e.emitAndNotify("bounds")}}),this):this},Cr.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),s=e.position;0!==o.w&&0!==o.h||((o={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=s.x-o.w/2,o.x2=s.x+o.w/2,o.y1=s.y-o.h/2,o.y2=s.y+o.h/2);var a=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(a=100*a/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=v(i.width.val-o.w,a,l),d=h.biasDiff,p=h.biasComplementDiff,f=v(i.height.val-o.h,u,c),g=f.biasDiff,m=f.biasComplementDiff;e.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(o.w,o.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(o.w,i.width.val),s.x=(-d+o.x1+o.x2+p)/2,e.autoHeight=Math.max(o.h,i.height.val),s.y=(-g+o.y1+o.y2+m)/2}function v(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean&&!t||(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var Tr=function(t){return t===1/0||t===-1/0?0:t},Pr=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Ar=function(t,e){return null==e?t:Pr(t,e.x1,e.y1,e.x2,e.y2)},Dr=function(t,e,n){return xt(t,e,n)},Or=function(t,e,n){if(!e.cy().headless()){var r,i,o=e._private,s=o.rstyle,a=s.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=s.srcX,i=s.srcY):"target"===n?(r=s.tgtX,i=s.tgtY):(r=s.midX,i=s.midY);var l=o.arrowBounds=o.arrowBounds||{},u=l[n]=l[n]||{};u.x1=r-a,u.y1=i-a,u.x2=r+a,u.y2=i+a,u.w=u.x2-u.x1,u.h=u.y2-u.y1,ne(u,1),Pr(t,u.x1,u.y1,u.x2,u.y2)}}},Mr=function(t,e,n){if(!e.cy().headless()){var r,i=e._private,o=i.rstyle;if(e.pstyle((r=n?n+"-":"")+"label").strValue){var s,a,l,u,c=e.pstyle("text-halign"),h=e.pstyle("text-valign"),d=Dr(o,"labelWidth",n),p=Dr(o,"labelHeight",n),f=Dr(o,"labelX",n),g=Dr(o,"labelY",n),m=e.pstyle(r+"text-margin-x").pfValue,v=e.pstyle(r+"text-margin-y").pfValue,y=e.isEdge(),b=e.pstyle(r+"text-rotation"),_=e.pstyle("text-outline-width").pfValue,x=e.pstyle("text-border-width").pfValue/2,w=e.pstyle("text-background-padding").pfValue,S=p,E=d,C=E/2,k=S/2;if(y)s=f-C,a=f+C,l=g-k,u=g+k;else{switch(c.value){case"left":s=f-E,a=f;break;case"center":s=f-C,a=f+C;break;case"right":s=f,a=f+E}switch(h.value){case"top":l=g-S,u=g;break;case"center":l=g-k,u=g+k;break;case"bottom":l=g,u=g+S}}s+=m-Math.max(_,x)-w-2,a+=m+Math.max(_,x)+w+2,l+=v-Math.max(_,x)-w-2,u+=v+Math.max(_,x)+w+2;var T=n||"main",P=i.labelBounds,A=P[T]=P[T]||{};A.x1=s,A.y1=l,A.x2=a,A.y2=u,A.w=a-s,A.h=u-l;var D=y&&"autorotate"===b.strValue;if(D||null!=b.pfValue&&0!==b.pfValue){var O=D?Dr(i.rstyle,"labelAngle",n):b.pfValue,M=Math.cos(O),I=Math.sin(O),L=(s+a)/2,N=(l+u)/2;if(!y){switch(c.value){case"left":L=a;break;case"right":L=s}switch(h.value){case"top":N=u;break;case"bottom":N=l}}var R=function(t,e){return{x:(t-=L)*M-(e-=N)*I+L,y:t*I+e*M+N}},F=R(s,l),B=R(s,u),j=R(a,l),z=R(a,u);s=Math.min(F.x,B.x,j.x,z.x),a=Math.max(F.x,B.x,j.x,z.x),l=Math.min(F.y,B.y,j.y,z.y),u=Math.max(F.y,B.y,j.y,z.y)}var V=T+"Rot",G=P[V]=P[V]||{};G.x1=s,G.y1=l,G.x2=a,G.y2=u,G.w=a-s,G.h=u-l,Pr(t,s,l,a,u),Pr(i.labelBounds.all,s,l,a,u)}return t}},Ir=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),(r+=n(t.includeTargetLabels))+n(t.includeOverlays)},Lr=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return function(t,e){var n={value:0,done:!1},r=0,i=t.length;return K({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},void 0)}([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},Nr=function(t,e){var n,r=t._private,i=t.isEdge(),o=(null==e?Fr:Ir(e))===Fr,s=Lr(t),a=r.bbCachePosKey===s,l=e.useCache&&a,u=function(t){return null==t._private.bbCache||t._private.styleDirty};if(!l||u(t)||i&&u(t.source())||u(t.target())?(a||t.recalculateRenderedStyle(l),n=function(t,e){var n,r,i,o,s,a,l,u=t._private.cy,c=u.styleEnabled(),h=u.headless(),d=te(),p=t._private,f=t.isNode(),g=t.isEdge(),m=p.rstyle,v=f&&c?t.pstyle("bounds-expansion").pfValue:[0],y=function(t){return"none"!==t.pstyle("display").value},b=!c||y(t)&&(!g||y(t.source())&&y(t.target()));if(b){var _=0;c&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(_=t.pstyle("overlay-padding").value);var x=0;if(c&&(x=t.pstyle("width").pfValue/2),f&&e.includeNodes){var w=t.position();s=w.x,a=w.y;var S=t.outerWidth()/2,E=t.outerHeight()/2;Pr(d,n=s-S,i=a-E,r=s+S,o=a+E)}else if(g&&e.includeEdges)if(c&&!h){var C=t.pstyle("curve-style").strValue;if(n=Math.min(m.srcX,m.midX,m.tgtX),r=Math.max(m.srcX,m.midX,m.tgtX),i=Math.min(m.srcY,m.midY,m.tgtY),o=Math.max(m.srcY,m.midY,m.tgtY),Pr(d,n-=x,i-=x,r+=x,o+=x),"haystack"===C){var k=m.haystackPts;if(k&&2===k.length){if((n=k[0].x)>(r=k[1].x)){var T=n;n=r,r=T}if((i=k[0].y)>(o=k[1].y)){var P=i;i=o,o=P}Pr(d,n-x,i-x,r+x,o+x)}}else if("bezier"===C||"unbundled-bezier"===C||"segments"===C||"taxi"===C){var A;switch(C){case"bezier":case"unbundled-bezier":A=m.bezierPts;break;case"segments":case"taxi":A=m.linePts}if(null!=A)for(var D=0;D<A.length;D++){var O=A[D];Pr(d,n=O.x-x,i=O.y-x,r=O.x+x,o=O.y+x)}}}else{var M=t.source().position(),I=t.target().position();if((n=M.x)>(r=I.x)){var L=n;n=r,r=L}if((i=M.y)>(o=I.y)){var N=i;i=o,o=N}Pr(d,n-=x,i-=x,r+=x,o+=x)}if(c&&e.includeEdges&&g&&(Or(d,t,"mid-source"),Or(d,t,"mid-target"),Or(d,t,"source"),Or(d,t,"target")),c&&"yes"===t.pstyle("ghost").value){var R=t.pstyle("ghost-offset-x").pfValue,F=t.pstyle("ghost-offset-y").pfValue;Pr(d,d.x1+R,d.y1+F,d.x2+R,d.y2+F)}var B=p.bodyBounds=p.bodyBounds||{};ie(B,d),re(B,v),ne(B,1),c&&Pr(d,(n=d.x1)-_,(i=d.y1)-_,(r=d.x2)+_,(o=d.y2)+_);var j=p.overlayBounds=p.overlayBounds||{};ie(j,d),re(j,v),ne(j,1);var z=p.labelBounds=p.labelBounds||{};null!=z.all?((l=z.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):z.all=te(),c&&e.includeLabels&&(e.includeMainLabels&&Mr(d,t,null),g&&(e.includeSourceLabels&&Mr(d,t,"source"),e.includeTargetLabels&&Mr(d,t,"target")))}return d.x1=Tr(d.x1),d.y1=Tr(d.y1),d.x2=Tr(d.x2),d.y2=Tr(d.y2),d.w=Tr(d.x2-d.x1),d.h=Tr(d.y2-d.y1),d.w>0&&d.h>0&&b&&(re(d,v),ne(d,1)),d}(t,Rr),r.bbCache=n,r.bbCachePosKey=s):n=r.bbCache,!o){var c=t.isNode();n=te(),(e.includeNodes&&c||e.includeEdges&&!c)&&Ar(n,e.includeOverlays?r.overlayBounds:r.bodyBounds),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?Ar(n,r.labelBounds.all):(e.includeMainLabels&&Ar(n,r.labelBounds.mainRot),e.includeSourceLabels&&Ar(n,r.labelBounds.sourceRot),e.includeTargetLabels&&Ar(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Rr={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},Fr=Ir(Rr),Br=yt(Rr);Cr.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=te();var n=Br(t=t||Rr);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],o=i._private,s=Lr(i);i.recalculateRenderedStyle(n.useCache&&o.bbCachePosKey===s&&!o.styleDirty)}this.updateCompoundBounds(!t.useCache);for(var a=0;a<this.length;a++)Ar(e,Nr(this[a],n))}else t=void 0===t?Rr:Br(t),e=Nr(this[0],t);return e.x1=Tr(e.x1),e.y1=Tr(e.y1),e.x2=Tr(e.x2),e.y2=Tr(e.y2),e.w=Tr(e.x2-e.x1),e.h=Tr(e.y2-e.y1),e},Cr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Cr.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(t){return t.isParent()}),e=e.not(i)),w(t)){var o=t;t=function(){return o}}n.startBatch(),e.forEach(function(e,n){return e._private.bbAtOldPos=t(e,n)}).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var s=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions(function(t){return t._private.bbAtOldPos}),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),s},Er.boundingbox=Er.bb=Er.boundingBox,Er.renderedBoundingbox=Er.renderedBoundingBox;var jr,zr,Vr=Cr;jr=zr={};var Gr=function(t){t.uppercaseName=R(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=R(t.outerName),jr[t.name]=function(){var e=this[0],n=e._private;if(e){if(!n.cy._private.styleEnabled)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var r=e.pstyle(t.name);switch(r.strValue){case"label":return e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0;default:return r.pfValue}}},jr["outer"+t.uppercaseName]=function(){var e=this[0];if(e)return e._private.cy._private.styleEnabled?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},jr["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},jr["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};Gr({name:"width"}),Gr({name:"height"}),zr.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},zr.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},zr.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Ur=zr,Hr={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},qr=Object.keys(Hr).reduce(function(t,e){var n=Hr[e],r=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,n.get)},t[r]=n.mult?function(){return function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map(function(t){return Gt(t,i,r)})}}(this,n.get)}:function(){return function(t,e){if(t.isEdge()){var n=t.cy();return Gt(e(t),n.zoom(),n.pan())}}(this,n.get)},t},{}),Wr=j({},kr,Vr,Ur,qr),$r=function(t,e){this.recycle(t,e)};function Yr(){return!1}function Kr(){return!0}$r.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Yr,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Kr:Yr):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Kr;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Kr;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Kr,this.stopPropagation()},isDefaultPrevented:Yr,isPropagationStopped:Yr,isImmediatePropagationStopped:Yr};var Xr=/^([^.]+)(\.(?:[^.]+))?$/,Qr={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Zr=Object.keys(Qr),Jr={};function ti(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr,e=arguments.length>1?arguments[1]:void 0,n=0;n<Zr.length;n++){var r=Zr[n];this[r]=t[r]||Qr[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ei=ti.prototype,ni=function(t,e,n,r,i,o,s){_(r)&&(i=r,r=null),s&&(o=null==o?s:j({},o,s));for(var a=x(n)?n:n.split(/\s+/),l=0;l<a.length;l++){var u=a[l];if(!D(u)){var c=u.match(Xr);if(c&&!1===e(t,u,c[1],c[2]?c[2]:null,r,i,o))break}}},ri=function(t,e){return t.addEventFields(t.context,e),new $r(e.type,e)};ei.on=ei.addListener=function(t,e,n,r,i){return ni(this,function(t,e,n,r,i,o,s){_(o)&&t.listeners.push({event:e,callback:o,type:n,namespace:r,qualifier:i,conf:s})},t,e,n,r,i),this},ei.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},ei.removeListener=ei.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var o=this.listeners,s=function(s){var a=o[s];ni(i,function(e,n,r,i,l,u){if((a.type===r||"*"===t)&&(!i&&".*"!==a.namespace||a.namespace===i)&&(!l||e.qualifierCompare(a.qualifier,l))&&(!u||a.callback===u))return o.splice(s,1),!1},t,e,n,r)},a=o.length-1;a>=0;a--)s(a);return this},ei.removeAllListeners=function(){return this.removeListener("*")},ei.emit=ei.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,x(e)||(e=[e]),function(t,e,n){if("event"!==y(n))if(w(n))e(t,ri(t,n));else for(var r=x(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!D(o)){var s=o.match(Xr);s&&e(t,ri(t,{type:s[1],namespace:s[2]?s[2]:null,target:t.context}))}}else e(t,n)}(this,function(t,o){null!=n&&(i=(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}]).length);for(var s=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,o)){var s=[o];null!=e&&function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])}(s,e),t.beforeEmit(t.context,i,o),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter(function(t){return t!==i}));var a=t.callbackContext(t.context,i,o),l=i.callback.apply(a,s);t.afterEmit(t.context,i,o),!1===l&&(o.stopPropagation(),o.preventDefault())}},a=0;a<i;a++)s(a);t.bubble(t.context)&&!o.isPropagationStopped()&&t.parent(t.context).emit(o,e)},t),this.emitting--,this};var ii={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&k(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},oi=function(t){return b(t)?new or(t):t},si={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new ti(ii,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=oi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};Un.eventAliasesOn(si);var ai={nodes:function(t){return this.filter(function(t){return t.isNode()}).filter(t)},edges:function(t){return this.filter(function(t){return t.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.push(r):e.push(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(b(t)||C(t))return new or(t).filter(this);if(_(t)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(e?t.apply(e,[i,r,this]):t(i,r,this))&&n.push(i)}return n}return this.spawn()},not:function(t){if(t){b(t)&&(t=this.filter(t));for(var e=this.spawn(),n=0;n<this.length;n++){var r=this[n];t.has(r)||e.push(r)}return e}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(b(t))return this.filter(t);for(var e=this.spawn(),n=this.length<t.length,r=n?this:t,i=n?t:this,o=0;o<r.length;o++){var s=r[o];i.has(s)&&e.push(s)}return e},xor:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=this.spawn(),r=t,i=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];e.hasElementWithId(i._private.data.id)||n.push(i)}};return i(this,r),i(r,this),n},diff:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=this.spawn(),r=this.spawn(),i=this.spawn(),o=t,s=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];e.hasElementWithId(o._private.data.id)?i.merge(o):n.push(o)}};return s(this,o,n),s(o,this,r),{left:n,right:r,both:i}},add:function(t){var e=this._private.cy;if(!t)return this;if(b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<t.length;i++){var o=t[i];!this.has(o)&&r.push(o)}return r},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&b(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,o=0;o<t.length;o++){var s=t[o],a=s._private.data.id;if(!i.has(a)){var l=this.length++;this[l]=s,i.set(a,{ele:s,index:l})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(e),this.length>1&&t!==this.length-1){var r=this.length-1,i=this[r],o=i._private.data.id;this[r]=void 0,this[t]=i,n.set(o,{ele:i,index:t})}return this.length--,this},unmergeOne:function(t){var e=this._private.map.get((t=t[0])._private.data.id);return e?(this.unmergeAt(e.index),this):this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(o)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n,r=-1/0,i=0;i<this.length;i++){var o=this[i],s=e?t.apply(e,[o,i,this]):t(o,i,this);s>r&&(r=s,n=o)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=0;i<this.length;i++){var o=this[i],s=e?t.apply(e,[o,i,this]):t(o,i,this);s<r&&(r=s,n=o)}return{value:r,ele:n}}},li=ai;li.u=li["|"]=li["+"]=li.union=li.or=li.add,li["\\"]=li["!"]=li["-"]=li.difference=li.relativeComplement=li.subtract=li.not,li.n=li["&"]=li["."]=li.and=li.intersection=li.intersect,li["^"]=li["(+)"]=li["(-)"]=li.symmetricDifference=li.symdiff=li.xor,li.fnFilter=li.filterFn=li.stdFilter=li.filter,li.complement=li.abscomp=li.absoluteComplement;var ui=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?st:0}var i=r(t)-r(e);if(0!==i)return i;function o(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var s=o(t)-o(e);if(0!==s)return s;var a=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==a?a:t.poolIndex()-e.poolIndex()},ci={forEach:function(t,e){if(_(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!_(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(ui)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:st-1}var r=e.target,i=e.source.zDepth(),o=r.zDepth();return Math.max(i,o,0)}}};ci.each=ci.forEach,"undefined"!=("undefined"==typeof Symbol?"undefined":s(Symbol))&&"undefined"!=s(Symbol.iterator)&&(ci[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return c({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,function(){return this})});var hi=yt({nodeDimensionsIncludeLabels:!1}),di={layoutDimensions:function(t){var e;if(t=hi(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes().filter(function(t){return!t.isParent()}),i=this.cy(),o=e.eles,s=function(t){return t.id()},a=M(n,s);t.emit({type:"layoutstart",layout:t}),t.animations=[];var l=e.spacingFactor&&1!==e.spacingFactor,u=function(){if(!l)return null;for(var t=te(),e=0;e<r.length;e++){var n=a(r[e],e);ee(t,n.x,n.y)}return t}(),c=M(function(t,n){var r,i,o,s,c,h=a(t,n);return l&&(r=Math.abs(e.spacingFactor),h={x:(s=(i=u).x1+i.w/2)+((o=h).x-s)*r,y:(c=i.y1+i.h/2)+(o.y-c)*r}),null!=e.transform&&(h=e.transform(t,h)),h},s);if(e.animate){for(var h=0;h<r.length;h++){var d=r[h],p=c(d,h);if(null==e.animateFilter||e.animateFilter(d,h)){var f=d.animation({position:p,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(f)}else d.position(p)}if(e.fit){var g=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}else if(void 0!==e.zoom&&void 0!==e.pan){var m=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(m)}t.animations.forEach(function(t){return t.play()}),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),zn.all(t.animations.map(function(t){return t.promise()})).then(function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})})}else r.positions(c),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(j({},t,{eles:this}))}};function pi(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[t])?r:r=o[t]=e(n)}function fi(t,e){return t=tt(t),function(n){return pi(t,e,n)}}function gi(t,e){t=tt(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return pi(t,n,e)}}di.createLayout=di.makeLayout=di.layout;var mi={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach(function(t){n(t),t.connectedEdges().forEach(n)}),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),e.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return t?r.emitAndNotify("style"):r.emit("style"),n.forEach(function(t){return t._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var n=this[e];n._private.styleDirty&&(n._private.styleDirty=!1,t.style().apply(n))}},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(w(t))r.applyBypass(this,t,!1),this.emitAndNotify("style");else if(b(t)){if(void 0===e){var i=this[0];return i?r.getStylePropertyValue(i,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++)n.removeAllBypasses(this[r],!1);else{t=t.split(/\s+/);for(var i=0;i<this.length;i++)n.removeBypasses(this[i],t,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++)i*=o[s].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function vi(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function yi(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||vi(i,r);var a=s.source,l=s.target;return n(a)&&(!o||vi(a,n))&&(a===l||n(l)&&(!o||vi(l,n)))}}}var bi=fi("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});mi.takesUpSpace=gi("takesUpSpace",yi({ok:bi}));var _i=fi("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&bi(t)}),xi=fi("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&bi(t)});mi.interactive=gi("interactive",yi({ok:_i,parentOk:xi,edgeOkViaNode:bi})),mi.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var wi=fi("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&bi(t)});mi.visible=gi("visible",yi({ok:wi,edgeOkViaNode:bi})),mi.hidden=function(){var t=this[0];if(t)return!t.visible()},mi.isBundledBezier=gi("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),mi.bypass=mi.css=mi.style,mi.renderedCss=mi.renderedStyle,mi.removeBypass=mi.removeCss=mi.removeStyle,mi.pstyle=mi.parsedStyle;var Si={};function Ei(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length&&_(e[0])){var o=e[0];this.on(t.event,o)}else if(0===e.length||1===e.length&&x(e[0])){for(var s=1===e.length?e[0]:null,a=0;a<this.length;a++){var l=this[a],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[t.field]=t.value,c&&n.push(l))}var d=this.spawn(n);d.updateStyle(),d.emit(t.event),s&&d.emit(s)}return this}}function Ci(t){Si[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},Si[t.on]=Ei({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Si[t.off]=Ei({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Ci({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ci({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ci({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ci({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Si.deselect=Si.unselect,Si.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Ci({field:"active",on:"activate",off:"unactivate"}),Ci({field:"pannable",on:"panify",off:"unpanify"}),Si.inactive=function(){var t=this[0];if(t)return!t._private.active};var ki={},Ti=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,s=i.connectedEdges(),a=0;a<s.length;a++){var l=s[a],u=l.source(),c=l.target();if(t.noIncomingEdges&&c===i&&u!==i||t.noOutgoingEdges&&u===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,!0).filter(e)}},Pi=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),s=0;s<o.length;s++){var a=o[s],l=a.source(),u=a.target();t.outgoing&&l===i?(n.push(a),n.push(u)):t.incoming&&u===i&&(n.push(a),n.push(l))}}return this.spawn(n,!0).filter(e)}},Ai=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var s=!1,a=0;a<o.length;a++){var l=o[a],u=l.id();i[u]||(i[u]=!0,r.push(l),s=!0)}if(!s)break;n=o}return this.spawn(r,!0).filter(e)}};function Di(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,!0).filter(e)}}function Oi(t){return function(e){var n=[],r=this._private.cy,i=t||{};b(e)&&(e=r.$(e));for(var o=0;o<e.length;o++)for(var s=e[o]._private.edges,a=0;a<s.length;a++){var l=s[a],u=l._private.data,c=this.hasElementWithId(u.source)&&e.hasElementWithId(u.target),h=e.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||h){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!h)continue}n.push(l)}}return this.spawn(n,!0)}}function Mi(t){return t=j({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var s=r[o]._private,a=s.source,l=a._private.data.id,u=s.data.target,c=a._private.edges,h=0;h<c.length;h++){var d=c[h],p=d._private.data,f=p.target,g=p.source,m=f===u&&g===l;(i.codirected&&m||!i.codirected&&(m||l===f&&u===g))&&n.push(d)}return this.spawn(n,!0).filter(e)}}ki.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},j(ki,{roots:Ti({noIncomingEdges:!0}),leaves:Ti({noOutgoingEdges:!0}),outgoers:cr(Pi({outgoing:!0}),"outgoers"),successors:Ai({outgoing:!0}),incomers:cr(Pi({incoming:!0}),"incomers"),predecessors:Ai({incoming:!0})}),j(ki,{neighborhood:cr(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),s=0;s<o.length;s++){var a=o[s],l=a.source(),u=a.target(),c=i===l?u:l;c.length>0&&e.push(c[0]),e.push(a[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),ki.neighbourhood=ki.neighborhood,ki.closedNeighbourhood=ki.closedNeighborhood,ki.openNeighbourhood=ki.openNeighborhood,j(ki,{source:cr(function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e},"source"),target:cr(function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e},"target"),sources:Di({attr:"source"}),targets:Di({attr:"target"})}),j(ki,{edgesWith:cr(Oi(),"edgesWith"),edgesTo:cr(Oi({thisIsSrc:!0}),"edgesTo")}),j(ki,{connectedEdges:cr(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++)e.push(i[o])}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:cr(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:cr(Mi(),"parallelEdges"),codirectedEdges:cr(Mi({codirected:!0}),"codirectedEdges")}),j(ki,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),o=[];null!=t&&i.empty()&&(i=t.sources());var s=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var a=function(){var t=n.collection();o.push(t);var r=i[0];s(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return s(e,t)}}),t.forEach(function(n){n.connectedEdges().forEach(function(n){e.has(n)&&t.has(n.source())&&t.has(n.target())&&t.merge(n)})})};do{a()}while(i.length>0);return o},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),ki.componentsOf=ki.components;var Ii=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==t){var r=new St,i=!1;if(e){if(e.length>0&&w(e[0])&&!k(e[0])){i=!0;for(var o=[],s=new Ct,a=0,l=e.length;a<l;a++){var u=e[a];null==u.data&&(u.data={});var c=u.data;if(null==c.id)c.id=gt();else if(t.hasElementWithId(c.id)||s.has(c.id))continue;var h=new kt(t,u,!1);o.push(h),s.add(c.id)}e=o}}else e=[];this.length=0;for(var d=0,p=e.length;d<p;d++){var f=e[d][0];if(null!=f){var g=f._private.data.id;n&&r.has(g)||(n&&r.set(g,{index:this.length,ele:f}),this[this.length]=f,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(t){this.lazyMap=t},rebuildMap:function(){for(var t=this.lazyMap=new St,e=this.eles,n=0;n<e.length;n++){var r=e[n];t.set(r.id(),{index:n,ele:r})}}},n&&(this._private.map=r),i&&this.restore()}else ht("A collection must have a reference to the core")},Li=kt.prototype=Ii.prototype=Object.create(Array.prototype);Li.instanceString=function(){return"collection"},Li.spawn=function(t,e){return new Ii(this.cy(),t,e)},Li.spawnSelf=function(){return this.spawn(this)},Li.cy=function(){return this._private.cy},Li.renderer=function(){return this._private.cy.renderer()},Li.element=function(){return this[0]},Li.collection=function(){return T(this)?this:new Ii(this._private.cy,[this])},Li.unique=function(){return new Ii(this._private.cy,this,!0)},Li.hasElementWithId=function(t){return this._private.map.has(t=""+t)},Li.getElementById=function(t){var e=this._private.cy,n=this._private.map.get(t=""+t);return n?n.ele:new Ii(e)},Li.$id=Li.getElementById,Li.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Li.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},Li.indexOfId=function(t){return this._private.map.get(t=""+t).index},Li.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(w(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,s={},a=t.data.source,l=t.data.target;null!=a&&a!=i.source&&(s.source=""+a,o=!0),null!=l&&l!=i.target&&(s.target=""+l,o=!0),o&&(e=e.move(s))}else{var u=t.data.parent;!("parent"in t.data)||null==u&&null==i.parent||u==i.parent||(void 0===u&&(u=null),null!=u&&(u=""+u),e=e.move({parent:u}))}}t.position&&e.position(t.position);var c=function(n,i,o){var s=t[n];null!=s&&s!==r[n]&&(s?e[i]():e[o]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var h={data:ft(r.data),position:ft(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};h.classes="";var d=0;return r.classes.forEach(function(t){return h.classes+=0==d++?t:" "+t}),h}}},Li.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Li.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new kt(t,r,!1);e.push(i)}return new Ii(t,e)},Li.copy=Li.clone,Li.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=i.cy(),s=o._private,a=[],l=[],u=0,c=i.length;u<c;u++){var h=i[u];r&&!h.removed()||(h.isNode()?a.push(h):l.push(h))}t=a.concat(l);var d=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var p=t[e],f=p._private,g=f.data;if(p.clearTraversalCache(),r||f.removed)if(void 0===g.id)g.id=gt();else if(S(g.id))g.id=""+g.id;else{if(D(g.id)||!b(g.id)){ht("Can not create element with invalid string ID `"+g.id+"`"),d();continue}if(o.hasElementWithId(g.id)){ht("Can not create second element with ID `"+g.id+"`"),d();continue}}var m=g.id;if(p.isNode()){var v=f.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(p.isEdge()){for(var y=p,_=["source","target"],x=_.length,w=!1,E=0;E<x;E++){var C=_[E],k=g[C];S(k)&&(k=g[C]=""+g[C]),null==k||""===k?(ht("Can not create edge `"+m+"` with unspecified "+C),w=!0):o.hasElementWithId(k)||(ht("Can not create edge `"+m+"` with nonexistant "+C+" `"+k+"`"),w=!0)}if(w){d();continue}var T=o.getElementById(g.source),P=o.getElementById(g.target);T.same(P)?T._private.edges.push(y):(T._private.edges.push(y),P._private.edges.push(y)),y._private.source=T,y._private.target=P}f.map=new St,f.map.set(m,{ele:p,index:0}),f.removed=!1,r&&o.addToPool(p)}for(var A=0;A<a.length;A++){var O=a[A],M=O._private.data;S(M.parent)&&(M.parent=""+M.parent);var I=M.parent,L=null!=I;if(L){var N=o.getElementById(I);if(N.empty())M.parent=void 0;else{for(var R=!1,F=N;!F.empty();){if(O.same(F)){R=!0,M.parent=void 0;break}F=F.parent()}R||(N[0]._private.children.push(O),O._private.parent=N[0],s.hasCompoundNodes=!0)}}}if(t.length>0){for(var B=t.length===i.length?i:new Ii(o,t),j=0;j<B.length;j++){var z=B[j];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}(s.hasCompoundNodes?o.collection().merge(B).merge(B.connectedNodes()).merge(B.parent()):B).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?B.emitAndNotify("add"):r&&B.emit("add")}return i},Li.removed=function(){var t=this[0];return t&&t._private.removed},Li.inside=function(){var t=this[0];return t&&!t._private.removed},Li.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},o=n._private.cy;function s(t){for(var e=t._private.edges,n=0;n<e.length;n++)l(e[n])}function a(t){for(var e=t._private.children,n=0;n<e.length;n++)l(e[n])}function l(t){var n=i[t.id()];e&&t.removed()||n||(i[t.id()]=!0,t.isNode()?(r.push(t),s(t),a(t)):r.unshift(t))}for(var u=0,c=n.length;u<c;u++){var h=n[u];l(h)}function d(t,e){bt(t._private.edges,e),t.clearTraversalCache()}function p(t){t.clearTraversalCache()}var f=[];function g(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();bt(n,e),e._private.parent=null,f.ids[r]||(f.ids[r]=!0,f.push(t))}f.ids={},n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var m=0;m<r.length;m++){var v=r[m];if(v.isEdge()){var y=v.source()[0],b=v.target()[0];d(y,v),d(b,v);for(var _=v.parallelEdges(),x=0;x<_.length;x++){var w=_[x];p(w),w.isBundledBezier()&&w.dirtyBoundingBoxCache()}}else{var S=v.parent();0!==S.length&&g(S,v)}e&&(v._private.removed=!0)}var E=o._private.elements;o._private.hasCompoundNodes=!1;for(var C=0;C<E.length;C++){var k=E[C];if(k.isParent()){o._private.hasCompoundNodes=!0;break}}var T=new Ii(this.cy(),r);T.size()>0&&(t?T.emitAndNotify("remove"):e&&T.emit("remove"));for(var P=0;P<f.length;P++){var A=f[P];e&&A.removed()||A.updateStyle()}return T},Li.move=function(t){var e=this._private.cy,n=this,r=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var i=r(t.source),o=r(t.target),s=null!=i&&e.hasElementWithId(i),a=null!=o&&e.hasElementWithId(o);(s||a)&&(e.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],r=e._private.data;e.isEdge()&&(s&&(r.source=i),a&&(r.target=o))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==t.parent){var l=r(t.parent);if(null===l||e.hasElementWithId(l)){var u=null===l?void 0:l;e.batch(function(){var t=n.remove(!1,!1);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var r=n[e],i=r._private.data;r.isNode()&&(i.parent=u)}t.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[In,Hn,qn,ar,hr,yr,br,Wr,si,ai,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},ci,di,mi,Si,ki].forEach(function(t){j(Li,t)});var Ni={add:function(t){var e,n=this;if(C(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],o=0;o<r.length;o++)i.push(r[o].json());e=new Ii(n,i)}}else if(x(t))e=new Ii(n,t);else if(w(t)&&(x(t.nodes)||x(t.edges))){for(var s=t,a=[],l=["nodes","edges"],u=0,c=l.length;u<c;u++){var h=l[u],d=s[h];if(x(d))for(var p=0,f=d.length;p<f;p++){var g=j({group:h},d[p]);a.push(g)}}e=new Ii(n,a)}else e=new kt(n,t).collection();return e},remove:function(t){return C(t)||b(t)&&(t=this.$(t)),t.remove()}},Ri=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),s=e(n,.5*r,o),a=e(n,r,s),l=1/6*(i.dv+2*(o.dv+s.dv)+a.dv);return n.x=n.x+1/6*(i.dx+2*(o.dx+s.dx)+a.dx)*r,n.v=n.v+l*r,n}return function t(e,r,i){var o,s,a,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,l.tension=e,l.friction=r,s=(o=null!==i)?(c=t(e,r))/i*.016:.016;a=n(a||l,s),u.push(1+a.x),c+=16,Math.abs(a.x)>1e-4&&Math.abs(a.v)>1e-4;);return o?function(t){return u[t*(u.length-1)|0]}:c}}(),Fi=function(t,e,n,r){var i=function(t,e,n,r){var i=4,o=.001,s=1e-7,a=10,l=11,u=1/(l-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var d=c?new Float32Array(l):new Array(l);function p(t,e){return 1-3*e+3*t}function f(t,e){return 3*e-6*t}function g(t){return 3*t}function m(t,e,n){return((p(e,n)*t+f(e,n))*t+g(e))*t}function v(t,e,n){return 3*p(e,n)*t*t+2*f(e,n)*t+g(e)}function y(e,r){for(var o=0;o<i;++o){var s=v(r,t,n);if(0===s)return r;r-=(m(r,t,n)-e)/s}return r}function b(){for(var e=0;e<l;++e)d[e]=m(e*u,t,n)}function _(e,r,i){var o,l,u=0;do{(o=m(l=r+(i-r)/2,t,n)-e)>0?i=l:r=l}while(Math.abs(o)>s&&++u<a);return l}function x(e){for(var r=0,i=1,s=l-1;i!==s&&d[i]<=e;++i)r+=u;--i;var a=r+(e-d[i])/(d[i+1]-d[i])*u,c=v(a,t,n);return c>=o?y(e,a):0===c?a:_(e,r,r+u)}var w=!1;function S(){w=!0,t===e&&n===r||b()}var E=function(i){return w||S(),t===e&&n===r?i:0===i?0:1===i?1:m(x(i),e,r)};E.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var C="generateBezier("+[t,e,n,r]+")";return E.toString=function(){return C},E}(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},Bi={linear:function(t,e,n){return t+(e-t)*n},ease:Fi(.25,.1,.25,1),"ease-in":Fi(.42,0,1,1),"ease-out":Fi(0,0,.58,1),"ease-in-out":Fi(.42,0,.58,1),"ease-in-sine":Fi(.47,0,.745,.715),"ease-out-sine":Fi(.39,.575,.565,1),"ease-in-out-sine":Fi(.445,.05,.55,.95),"ease-in-quad":Fi(.55,.085,.68,.53),"ease-out-quad":Fi(.25,.46,.45,.94),"ease-in-out-quad":Fi(.455,.03,.515,.955),"ease-in-cubic":Fi(.55,.055,.675,.19),"ease-out-cubic":Fi(.215,.61,.355,1),"ease-in-out-cubic":Fi(.645,.045,.355,1),"ease-in-quart":Fi(.895,.03,.685,.22),"ease-out-quart":Fi(.165,.84,.44,1),"ease-in-out-quart":Fi(.77,0,.175,1),"ease-in-quint":Fi(.755,.05,.855,.06),"ease-out-quint":Fi(.23,1,.32,1),"ease-in-out-quint":Fi(.86,0,.07,1),"ease-in-expo":Fi(.95,.05,.795,.035),"ease-out-expo":Fi(.19,1,.22,1),"ease-in-out-expo":Fi(1,0,0,1),"ease-in-circ":Fi(.6,.04,.98,.335),"ease-out-circ":Fi(.075,.82,.165,1),"ease-in-out-circ":Fi(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return Bi.linear;var r=Ri(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":Fi};function ji(t,e,n,r,i){if(1===r)return n;if(e===n)return n;var o=i(e,n,r);return null==t||((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max))),o}function zi(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function Vi(t,e,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var s=zi(t,i),a=zi(e,i);if(S(s)&&S(a))return ji(o,s,a,n,r);if(x(s)&&x(a)){for(var l=[],u=0;u<a.length;u++){var c=s[u],h=a[u];if(null!=c&&null!=h){var d=ji(o,c,h,n,r);l.push(d)}else l.push(h)}return l}}function Gi(t,e,n,r){var i=!r,o=t._private,s=e._private,a=s.easing,l=s.startTime,u=(r?t:t.cy()).style();if(!s.easingImpl)if(null==a)s.easingImpl=Bi.linear;else{var c,h,d;c=b(a)?u.parse("transition-timing-function",a).value:a,b(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map(function(t){return+t})),d.length>0?("spring"===h&&d.push(s.duration),s.easingImpl=Bi[h].apply(null,d)):s.easingImpl=Bi[h]}var p,f=s.easingImpl;if(p=0===s.duration?1:(n-l)/s.duration,s.applying&&(p=s.progress),p<0?p=0:p>1&&(p=1),null==s.delay){var g=s.startPosition,m=s.position;if(m&&i&&!t.locked()){var v={};Ui(g.x,m.x)&&(v.x=Vi(g.x,m.x,p,f)),Ui(g.y,m.y)&&(v.y=Vi(g.y,m.y,p,f)),t.position(v)}var y=s.startPan,_=s.pan,x=o.pan,w=null!=_&&r;w&&(Ui(y.x,_.x)&&(x.x=Vi(y.x,_.x,p,f)),Ui(y.y,_.y)&&(x.y=Vi(y.y,_.y,p,f)),t.emit("pan"));var S=s.startZoom,E=s.zoom,C=null!=E&&r;C&&(Ui(S,E)&&(o.zoom=Jt(o.minZoom,Vi(S,E,p,f),o.maxZoom)),t.emit("zoom")),(w||C)&&t.emit("viewport");var k=s.style;if(k&&k.length>0&&i){for(var T=0;T<k.length;T++){var P=k[T],A=P.name,D=s.startStyle[A],O=Vi(D,P,p,f,u.properties[D.name]);u.overrideBypass(t,A,O)}t.emit("style")}}return s.progress=p,p}function Ui(t,e){return!(null==t||null==e||!(S(t)&&S(e)||t&&e))}function Hi(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function qi(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,o=i.animation.current,s=i.animation.queue,a=!1;if(0===o.length){var l=s.shift();l&&o.push(l)}for(var u=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},c=o.length-1;c>=0;c--){var h=o[c],d=h._private;d.stopped?(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||Hi(0,h,t),Gi(e,h,t,n),d.applying&&(d.applying=!1),u(d.frames),null!=d.step&&d.step(t),h.completed()&&(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.completes)),a=!0)}return n||0!==o.length||0!==s.length||r.push(e),a}for(var o=!1,s=0;s<n.length;s++){var a=i(n[s]);o=o||a}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var Wi={animate:Un.animate(),animation:Un.animation(),animated:Un.animated(),clearQueue:Un.clearQueue(),delay:Un.delay(),delayAnimation:Un.delayAnimation(),stop:Un.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender(function(e,n){qi(n,t)},e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&W(function(n){qi(n,t),e()})}()}}},$i={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&k(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},Yi=function(t){return b(t)?new or(t):t},Ki={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new ti($i,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,Yi(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,Yi(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,Yi(e),n),this},once:function(t,e,n){return this.emitter().one(t,Yi(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};Un.eventAliasesOn(Ki);var Xi={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};Xi.jpeg=Xi.jpg;var Qi={layout:function(t){if(null!=t)if(null!=t.name){var e,n=t.name,r=this.extension("layout",n);if(null!=r)return e=b(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$(),new r(j({},t,{cy:this,eles:e}));ht("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else ht("A `name` must be specified to make a layout");else ht("Layout options must be specified to make a layout")}};Qi.createLayout=Qi.makeLayout=Qi.layout;var Zi={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach(function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}})}},Ji=yt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),to={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);if(null!=e){void 0!==t.wheelSensitivity&&pt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=Ji(t);n.cy=this,this._private.renderer=new e(n),this.notify("init")}else ht("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};to.invalidateDimensions=to.resize;var eo={collection:function(t,e){return b(t)?this.$(t):C(t)?t.collection():x(t)?new Ii(this,t,e):new Ii(this)},nodes:function(t){var e=this.$(function(t){return t.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(t){return t.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};eo.elements=eo.filter=eo.$;var no={apply:function(t){for(var e=this._private.cy.collection(),n=0;n<t.length;n++){var r=t[n],i=this.getContextMeta(r);if(!i.empty){var o=this.getContextStyle(i),s=this.applyContextStyle(i,o,r);r._private.appliedInitStyle?this.updateTransitions(r,s.diffProps):r._private.appliedInitStyle=!0,this.updateStyleHints(r)&&e.push(r)}}return e},getPropertiesDiff:function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var o=[],s={},a=0;a<this.length;a++){var l=this[a],u="t"===e[a],c="t"===t[a]!==u,h=l.mappedProperties.length>0;if(c||u&&h){var d=void 0;c&&h||c?d=l.properties:h&&(d=l.mappedProperties);for(var p=0;p<d.length;p++){for(var f=d[p],g=f.name,m=!1,v=a+1;v<this.length&&("t"!==e[v]||!(m=null!=this[v].properties[f.name]));v++);s[g]||m||(s[g]=!0,o.push(g))}}}return n[r]=o,o},getContextMeta:function(t){for(var e,n="",r=t._private.styleCxtKey||"",i=0;i<this.length;i++){var o=this[i];n+=o.selector&&o.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},getContextStyle:function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if("t"===e[i])for(var s=0;s<o.properties.length;s++){var a=o.properties[s];r[a.name]=a}}return n[e]=r,r},applyContextStyle:function(t,e,n){for(var r=t.diffPropNames,i={},o=this.types,s=0;s<r.length;s++){var a=r[s],l=e[a],u=n.pstyle(a);if(!l){if(!u)continue;l=u.bypass?{name:a,deleteBypassed:!0}:{name:a,delete:!0}}if(u!==l){if(l.mapped===o.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(n))===c.prevFnValue)continue}var h=i[a]={prev:u};this.applyParsedProperty(n,l),h.next=n.pstyle(a),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(t){var e,n=t._private,r=this,i=r.propertyGroupKeys,o=function(t,e,n){return r.getPropertiesHash(t,e,n)},s=n.styleKey;if(t.removed())return!1;var a="nodes"===n.group,l=t._private.style;e=Object.keys(l);for(var u=0;u<i.length;u++)n.styleKeys[i[u]]=[9261,5381];for(var c,h=function(t,e){return n.styleKeys[e][0]=X(t,n.styleKeys[e][0])},d=function(t,e){return n.styleKeys[e][1]=Q(t,n.styleKeys[e][1])},p=function(t,e){h(t,e),d(t,e)},f=function(t,e){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);h(r,e),d(r,e)}},g=0;g<e.length;g++){var m=e[g],v=l[m];if(null!=v){var y=this.properties[m],b=y.type,_=y.groupKey,x=void 0;null!=y.hashOverride?x=y.hashOverride(t,v):null!=v.pfValue&&(x=v.pfValue);var w=null==y.enums?v.value:null,S=null!=x,E=v.units;!b.number||!S&&null==w||b.multiple?f(v.strValue,_):(p(-128<(c=S?x:w)&&c<128&&Math.floor(c)!==c?2e9-(1024*c|0):c,_),S||null==E||f(E,_))}}for(var C=[9261,5381],k=0;k<i.length;k++){var T=n.styleKeys[i[k]];C[0]=X(T[0],C[0]),C[1]=Q(T[1],C[1])}n.styleKey=2097152*C[0]+C[1];var P=n.styleKeys;n.labelDimsKey=Z(P.labelDimensions);var A=o(t,["label"],P.labelDimensions);if(n.labelKey=Z(A),n.labelStyleKey=Z(J(P.commonLabel,A)),!a){var D=o(t,["source-label"],P.labelDimensions);n.sourceLabelKey=Z(D),n.sourceLabelStyleKey=Z(J(P.commonLabel,D));var O=o(t,["target-label"],P.labelDimensions);n.targetLabelKey=Z(O),n.targetLabelStyleKey=Z(J(P.commonLabel,O))}if(a){var M=n.styleKeys,I=M.pie,L=[M.nodeBody,M.nodeBorder,M.backgroundImage,M.compound,I].filter(function(t){return null!=t}).reduce(J,[9261,5381]);n.nodeKey=Z(L),n.hasPie=null!=I&&9261!==I[0]&&5381!==I[1]}return s!==n.styleKey},clearStyleHints:function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},applyParsedProperty:function(t,e){var n,r=this,i=e,o=t._private.style,s=r.types,a=r.properties[i.name].type,l=i.bypass,u=o[i.name],c=u&&u.bypass,h=t._private,d=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},p=function(){var e=d(u),n=d(i);r.checkTriggers(t,i.name,e,n)};if(i&&"pie"===i.name.substr(0,3)&&pt("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",l)),i.delete)return o[i.name]=void 0,p(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,p(),!0):(p(),!0);if(i.deleteBypass)return u?!!u.bypass&&(o[i.name]=u.bypassed,p(),!0):(p(),!0);var f=function(){pt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case s.mapData:for(var g,m=i.field.split("."),v=h.data,y=0;y<m.length&&v;y++)v=v[m[y]];if(null==v)return f(),!1;if(!S(v))return pt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((g=0===b?0:(v-i.fieldMin)/b)<0?g=0:g>1&&(g=1),a.color){var _=i.valueMin[0],x=i.valueMin[1],w=i.valueMax[1],E=i.valueMin[2],C=i.valueMax[2],k=null==i.valueMin[3]?1:i.valueMin[3],T=null==i.valueMax[3]?1:i.valueMax[3],P=[Math.round(_+(i.valueMax[0]-_)*g),Math.round(x+(w-x)*g),Math.round(E+(C-E)*g),Math.round(k+(T-k)*g)];n={bypass:i.bypass,name:i.name,value:P,strValue:"rgb("+P[0]+", "+P[1]+", "+P[2]+")"}}else{if(!a.number)return!1;n=this.parse(i.name,i.valueMin+(i.valueMax-i.valueMin)*g,i.bypass,"mapping")}if(!n)return f(),!1;n.mapping=i,i=n;break;case s.data:for(var A=i.field.split("."),D=h.data,O=0;O<A.length&&D;O++)D=D[A[O]];if(null!=D&&(n=this.parse(i.name,D,i.bypass,"mapping")),!n)return f(),!1;n.mapping=i,i=n;break;case s.fn:var M=null!=i.fnValue?i.fnValue:(0,i.value)(t);if(i.prevFnValue=M,null==M)return pt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,M,i.bypass,"mapping")))return pt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=ft(i),i=n;break;case void 0:break;default:return!1}return l?(i.bypassed=c?u.bypassed:u,o[i.name]=i):c?u.bypassed=i:o[i.name]=i,p(),!0},cleanElements:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,o=Object.keys(i),s=0;s<o.length;s++){var a=o[s],l=i[a];null!=l&&(l.bypass?l.bypassed=null:i[a]=null)}else r._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var a={},l=!1,u=0;u<i.length;u++){var c=i[u],h=t.pstyle(c),d=e[c];if(d){var p=d.prev,f=null!=d.next?d.next:h,g=!1,m=void 0;p&&(S(p.pfValue)&&S(f.pfValue)?m=p.pfValue+1e-6*(g=f.pfValue-p.pfValue):S(p.value)&&S(f.value)?m=p.value+1e-6*(g=f.value-p.value):x(p.value)&&x(f.value)&&(g=p.value[0]!==f.value[0]||p.value[1]!==f.value[1]||p.value[2]!==f.value[2],m=p.strValue),g&&(a[c]=f.strValue,this.applyBypass(t,c,m),l=!0))}}if(!l)return;r.transitioning=!0,new zn(function(e){s>0?t.delayAnimation(s).play().promise().then(e):e()}).then(function(){return t.animation({style:a,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},checkTrigger:function(t,e,n,r,i,o){var s=this.properties[e],a=i(s);null!=a&&a(n,r)&&o(s)},checkZOrderTrigger:function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(t){return t.triggersZOrder},function(){i._private.cy.notify("zorder",t)})},checkBoundsTrigger:function(t,e,n,r){this.checkTrigger(t,e,n,r,function(t){return t.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"curve-style"!==e||"bezier"!==n&&"bezier"!==r||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach(function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()})})},checkTriggers:function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)}},ro={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var o=0;o<this.properties.length;o++){var s=this.parse(this.properties[o].name,n,!0);s&&i.push(s)}}else if(b(e)){var a=this.parse(e,n,!0);a&&i.push(a)}else{if(!w(e))return!1;var l=e;r=n;for(var u=Object.keys(l),c=0;c<u.length;c++){var h=u[c],d=l[h];if(void 0===d&&(d=l[L(h)]),void 0!==d){var p=this.parse(h,d,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var f=!1,g=0;g<t.length;g++){for(var m=t[g],v={},y=void 0,_=0;_<i.length;_++){var x=i[_];if(r){var S=m.pstyle(x.name);y=v[x.name]={prev:S}}f=this.applyParsedProperty(m,ft(x))||f,r&&(y.next=m.pstyle(x.name))}f&&this.updateStyleHints(m),r&&this.updateTransitions(m,v,!0)}return f},overrideBypass:function(t,e,n){e=I(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],s=this.properties[e].type,a=s.color,l=s.mutiple,u=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=a?"rgb("+n.join(",")+")":l?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,u,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},s=0;s<e.length;s++){var a=e[s],l=this.properties[a],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(a,"",!0),h=o[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}},io={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(d&&e&&d.getComputedStyle)return d.getComputedStyle(e).getPropertyValue(t)}},oo={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],o=this.getStylePropertyValue(t,i.name,e);null!=o&&(n[i.name]=o,n[L(i.name)]=o)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,o=t.pstyle(r.name);if(o){var s=o.value,a=o.units,l=o.strValue;if(n&&i.number&&null!=s&&S(s)){var u=t.cy().zoom(),c=function(t){return t*u},h=function(t,e){return c(t)+e},d=x(s);return(d?a.every(function(t){return null!=t}):null!=a)?d?s.map(function(t,e){return h(t,a[e])}).join(" "):h(s,a):d?s.map(function(t){return b(t)?t:""+c(t)}).join(" "):""+c(s)}if(null!=l)return l}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,o=t.pstyle(i);void 0!==o&&(o=w(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],a=n[s],l=r[s]||r[I(s)],u=this.parse(l.name,a);u&&e.push(u)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,o,s,a,l=n.slice();for(s=0;s<e.length;s++)if(null!=(r=t.pstyle(e[s],!1)))if(null!=r.pfValue)l[0]=X(o,l[0]),l[1]=Q(o,l[1]);else for(i=r.strValue,a=0;a<i.length;a++)o=i.charCodeAt(a),l[0]=X(o,l[0]),l[1]=Q(o,l[1]);return l}};oo.getPropertiesHash=oo.getNonDefaultPropertiesHash;var so={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,o=Object.keys(i);this.selector(r);for(var s=0;s<o.length;s++){var a=o[s];this.css(a,i[a])}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},s=0;s<i.length;s++){var a=i[s];o[a.name]=a.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}},ao={appendFromString:function(t){var e,n,r,i=""+t;function o(){i=i.length>e.length?i.substr(e.length):""}function s(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");!i.match(/^\s*$/);){var a=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!a){pt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}e=a[0];var l=a[1];if("core"!==l&&new or(l).invalid)pt("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),o();else{var u=a[2],c=!1;n=u;for(var h=[];!n.match(/^\s*$/);){var d=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!d){pt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}r=d[0];var p=d[1],f=d[2];this.properties[p]?this.parse(p,f)?(h.push({name:p,val:f}),s()):(pt("Skipping property: Invalid property definition in: "+r),s()):(pt("Skipping property: Invalid property name in: "+r),s())}if(c){o();break}this.selector(l);for(var g=0;g<h.length;g++){var m=h[g];this.css(m.name,m.val)}o()}}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},lo={};!function(){var t=F,e=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(e){var n=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+n+")\\s*\\,\\s*("+n+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];lo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return b(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var e=t.length;return 1===e||2===e||4===e}}};var i={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||0==t&&0!=e||0!=t&&0==e},any:function(t,e){return t!=e},emptyNonEmpty:function(t,e){var n=D(t),r=D(e);return n&&!r||!n&&r}},o=lo.types,s=[{name:"label",type:o.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any}],a=[{name:"source-label",type:o.text,triggersBounds:i.any},{name:"source-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:o.size,triggersBounds:i.any}],l=[{name:"target-label",type:o.text,triggersBounds:i.any},{name:"target-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:o.size,triggersBounds:i.any}],u=[{name:"font-family",type:o.fontFamily,triggersBounds:i.any},{name:"font-style",type:o.fontStyle,triggersBounds:i.any},{name:"font-weight",type:o.fontWeight,triggersBounds:i.any},{name:"font-size",type:o.size,triggersBounds:i.any},{name:"text-transform",type:o.textTransform,triggersBounds:i.any},{name:"text-wrap",type:o.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:o.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:o.size,triggersBounds:i.any},{name:"text-outline-width",type:o.size,triggersBounds:i.any},{name:"line-height",type:o.positiveNumber,triggersBounds:i.any}],c=[{name:"text-valign",type:o.valign,triggersBounds:i.any},{name:"text-halign",type:o.halign,triggersBounds:i.any},{name:"color",type:o.color},{name:"text-outline-color",type:o.color},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-background-color",type:o.color},{name:"text-background-opacity",type:o.zeroOneNumber},{name:"text-background-padding",type:o.size,triggersBounds:i.any},{name:"text-border-opacity",type:o.zeroOneNumber},{name:"text-border-color",type:o.color},{name:"text-border-width",type:o.size,triggersBounds:i.any},{name:"text-border-style",type:o.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:o.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:o.justification}],h=[{name:"events",type:o.bool},{name:"text-events",type:o.bool}],d=[{name:"display",type:o.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:o.visibility,triggersZOrder:i.any},{name:"opacity",type:o.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:o.zeroOneNumber},{name:"min-zoomed-font-size",type:o.size},{name:"z-compound-depth",type:o.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:o.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:o.nonNegativeInt,triggersZOrder:i.any}],p=[{name:"overlay-padding",type:o.size,triggersBounds:i.any},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero}],f=[{name:"transition-property",type:o.propList},{name:"transition-duration",type:o.time},{name:"transition-delay",type:o.time},{name:"transition-timing-function",type:o.easing}],g=function(t,e){return"label"===e.value?-t.poolIndex():e.pfValue},m=[{name:"height",type:o.nodeSize,triggersBounds:i.any,hashOverride:g},{name:"width",type:o.nodeSize,triggersBounds:i.any,hashOverride:g},{name:"shape",type:o.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:o.polygonPointList,triggersBounds:i.any},{name:"background-color",type:o.color},{name:"background-fill",type:o.fill},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-blacken",type:o.nOneOneNumber},{name:"background-gradient-stop-colors",type:o.colors},{name:"background-gradient-stop-positions",type:o.percentages},{name:"background-gradient-direction",type:o.gradientDirection},{name:"padding",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:o.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:o.boundsExpansion,triggersBounds:i.any}],v=[{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size,triggersBounds:i.any},{name:"border-style",type:o.borderStyle}],y=[{name:"background-image",type:o.urls},{name:"background-image-crossorigin",type:o.bgCrossOrigin},{name:"background-image-opacity",type:o.zeroOneNumbers},{name:"background-image-containment",type:o.bgContainment},{name:"background-image-smoothing",type:o.bools},{name:"background-position-x",type:o.bgPos},{name:"background-position-y",type:o.bgPos},{name:"background-width-relative-to",type:o.bgRelativeTo},{name:"background-height-relative-to",type:o.bgRelativeTo},{name:"background-repeat",type:o.bgRepeat},{name:"background-fit",type:o.bgFit},{name:"background-clip",type:o.bgClip},{name:"background-width",type:o.bgWH},{name:"background-height",type:o.bgWH},{name:"background-offset-x",type:o.bgPos},{name:"background-offset-y",type:o.bgPos}],_=[{name:"position",type:o.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:o.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:o.size,triggersBounds:i.any},{name:"min-width-bias-left",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:o.size,triggersBounds:i.any},{name:"min-height-bias-top",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:o.sizeMaybePercent,triggersBounds:i.any}],x=[{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"line-fill",type:o.fill},{name:"line-cap",type:o.lineCap},{name:"line-opacity",type:o.zeroOneNumber},{name:"line-dash-pattern",type:o.numbers},{name:"line-dash-offset",type:o.number},{name:"line-gradient-stop-colors",type:o.colors},{name:"line-gradient-stop-positions",type:o.percentages},{name:"curve-style",type:o.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:o.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:o.size,triggersBounds:i.any},{name:"control-point-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:o.numbers,triggersBounds:i.any},{name:"taxi-turn",type:o.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:o.size,triggersBounds:i.any},{name:"taxi-direction",type:o.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:o.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:o.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:o.angle,triggersBounds:i.any},{name:"loop-sweep",type:o.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:o.size,triggersBounds:i.any},{name:"target-distance-from-node",type:o.size,triggersBounds:i.any}],w=[{name:"ghost",type:o.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:o.zeroOneNumber}],S=[{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size},{name:"outside-texture-bg-color",type:o.color},{name:"outside-texture-bg-opacity",type:o.zeroOneNumber}],E=[];lo.pieBackgroundN=16,E.push({name:"pie-size",type:o.sizeMaybePercent});for(var C=1;C<=lo.pieBackgroundN;C++)E.push({name:"pie-"+C+"-background-color",type:o.color}),E.push({name:"pie-"+C+"-background-size",type:o.percent}),E.push({name:"pie-"+C+"-background-opacity",type:o.zeroOneNumber});var k=[],T=lo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:o.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:o.color},{name:"arrow-fill",type:o.arrowFill}].forEach(function(t){T.forEach(function(e){k.push({name:e+"-"+t.name,type:t.type,triggersBounds:t.triggersBounds})})},{});var P=lo.properties=[].concat(h,f,d,p,w,c,u,s,a,l,m,v,y,E,_,x,k,S),A=lo.propertyGroups={behavior:h,transition:f,visibility:d,overlay:p,ghost:w,commonLabel:c,labelDimensions:u,mainLabel:s,sourceLabel:a,targetLabel:l,nodeBody:m,nodeBorder:v,backgroundImage:y,pie:E,compound:_,edgeLine:x,edgeArrow:k,core:S},O=lo.propertyGroupNames={};(lo.propertyGroupKeys=Object.keys(A)).forEach(function(t){O[t]=A[t].map(function(t){return t.name}),A[t].forEach(function(e){return e.groupKey=t})});var M=lo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];lo.propertyNames=P.map(function(t){return t.name});for(var I=0;I<P.length;I++){var L=P[I];P[L.name]=L}for(var N=0;N<M.length;N++){var R=M[N],B={name:R.name,alias:!0,pointsTo:P[R.pointsTo]};P.push(B),P[R.name]=B}}(),lo.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},lo.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=j({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(t,e){for(var n=1;n<=lo.pieBackgroundN;n++)t[e.name.replace("{{i}}",n)]=e.value;return t},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(t,e){return lo.arrowPrefixes.forEach(function(n){t[n+"-"+e.name]=e.value}),t},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,s=this.parse(o,e[o]);n[o]=s}}return t.defaultProperties=n,t.defaultProperties},lo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var uo={parse:function(t,e,n,r){if(_(e))return this.parseImplWarn(t,e,n,r);var i,o=et(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),s=this.propCache=this.propCache||[];return(i=s[o])||(i=s[o]=this.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(i=ft(i))&&(i.value=ft(i.value)),i},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||pt("The style property `".concat(t,": ").concat(e,"` is invalid")),!i||"width"!==i.name&&"height"!==i.name||"label"!==e||pt("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(t,e,n,r){t=I(t);var i=this.properties[t],o=e,s=this.types;if(!i)return null;if(void 0===e)return null;i.alias&&(t=(i=i.pointsTo).name);var a=b(e);a&&(e=e.trim());var l,u,c=i.type;if(!c)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(_(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};if(!a||r||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(l=new RegExp(s.data.regex).exec(e)))return!n&&{name:t,value:l,strValue:""+e,mapped:s.data,field:l[1],bypass:n};if(e.length>=10&&"m"===e[0]&&(u=new RegExp(s.mapData.regex).exec(e))){if(n)return!1;if(c.multiple)return!1;var h=s.mapData;if(!c.color&&!c.number)return!1;var d=this.parse(t,u[4]);if(!d||d.mapped)return!1;var p=this.parse(t,u[5]);if(!p||p.mapped)return!1;if(d.pfValue===p.pfValue||d.strValue===p.strValue)return pt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(c.color){var f=d.value,g=p.value;if(!(f[0]!==g[0]||f[1]!==g[1]||f[2]!==g[2]||f[3]!==g[3]&&(null!=f[3]&&1!==f[3]||null!=g[3]&&1!==g[3])))return!1}return{name:t,value:u,strValue:""+e,mapped:h,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:d.value,valueMax:p.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var m;if(m=a?e.split(/\s+/):x(e)?e:[e],c.evenMultiple&&m.length%2!=0)return null;for(var v=[],y=[],w=[],E="",C=!1,k=0;k<m.length;k++){var T=this.parse(t,m[k],n,"multiple");C=C||b(T.value),v.push(T.value),w.push(null!=T.pfValue?T.pfValue:T.value),y.push(T.units),E+=(k>0?" ":"")+T.strValue}return c.validate&&!c.validate(v,y)?null:c.singleEnum&&C?1===v.length&&b(v[0])?{name:t,value:v[0],strValue:v[0],bypass:n}:null:{name:t,value:v,pfValue:w,strValue:E,bypass:n,units:y}}var P,A,D=function(){for(var r=0;r<c.enums.length;r++)if(c.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(c.number){var O,M="px";if(c.units&&(O=c.units),c.implicitUnits&&(M=c.implicitUnits),!c.unitless)if(a){var L="px|em"+(c.allowPercent?"|\\%":"");O&&(L=O);var N=e.match("^("+F+")("+L+")?$");N&&(e=N[1],O=N[2]||M)}else O&&!c.implicitUnits||(O=M);if(e=parseFloat(e),isNaN(e)&&void 0===c.enums)return null;if(isNaN(e)&&void 0!==c.enums)return e=o,D();if(c.integer&&(!S(P=e)||Math.floor(P)!==P))return null;if(void 0!==c.min&&(e<c.min||c.strictMin&&e===c.min)||void 0!==c.max&&(e>c.max||c.strictMax&&e===c.max))return null;var R={name:t,value:e,strValue:""+e+(O||""),units:O,bypass:n};return R.pfValue=c.unitless||"px"!==O&&"em"!==O?e:"px"!==O&&O?this.getEmSizeInPixels()*e:e,"ms"!==O&&"s"!==O||(R.pfValue="ms"===O?e:1e3*e),"deg"!==O&&"rad"!==O||(R.pfValue="rad"===O?e:Math.PI*e/180),"%"===O&&(R.pfValue=e/100),R}if(c.propList){var B=[],j=""+e;if("none"===j);else{for(var V=j.split(/\s*,\s*|\s+/),G=0;G<V.length;G++){var U=V[G].trim();this.properties[U]?B.push(U):pt("`"+U+"` is not a valid property name")}if(0===B.length)return null}return{name:t,value:B,strValue:0===B.length?"none":B.join(" "),bypass:n}}if(c.color){var H=(x(A=e)?A:null)||function(t){return z[t.toLowerCase()]}(A)||function(t){var e,n,r;if((4===t.length||7===t.length)&&"#"===t[0])return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}(A)||function(t){var e,n=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}if((r[1]||r[2]||r[3])&&!(r[1]&&r[2]&&r[3]))return;var s=n[4];if(void 0!==s){if((s=parseFloat(s))<0||s>1)return;e.push(s)}}return e}(A)||function(t){var e,n,r,i,o,s,a,l;function u(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var c=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)s=a=l=Math.round(255*i);else{var h=i<.5?i*(1+r):i+r-i*r,d=2*i-h;s=Math.round(255*u(d,h,n+1/3)),a=Math.round(255*u(d,h,n)),l=Math.round(255*u(d,h,n-1/3))}e=[s,a,l,o]}return e}(A);return H?{name:t,value:H,pfValue:H,strValue:"rgb("+H[0]+","+H[1]+","+H[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var q=D();if(q)return q}for(var W=c.regexes?c.regexes:[c.regex],$=0;$<W.length;$++){var Y=new RegExp(W[$]).exec(e);if(Y)return{name:t,value:c.singleRegexMatchValue?Y[1]:Y,strValue:""+e,bypass:n}}return null}return c.string?{name:t,value:""+e,strValue:""+e,bypass:n}:c.enums?D():null}},co=function t(e){if(!(this instanceof t))return new t(e);P(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):ht("A style must have a core reference")},ho=co.prototype;ho.instanceString=function(){return"style"},ho.clear=function(){for(var t=this._private,e=t.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach(function(t){var e=t[0]._private;e.styleDirty=!0,e.appliedInitStyle=!1}),this},ho.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ho.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},ho.selector=function(t){var e="core"===t?null:new or(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},ho.css=function(){var t=this,e=arguments;if(1===e.length)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],o=n[i.name];void 0===o&&(o=n[L(i.name)]),void 0!==o&&this.cssRule(i.name,o)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},ho.style=ho.css,ho.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},ho.append=function(t){return A(t)?t.appendToStyle(this):x(t)?this.appendFromJson(t):b(t)&&this.appendFromString(t),this},co.fromJson=function(t,e){var n=new co(t);return n.fromJson(e),n},co.fromString=function(t,e){return new co(t).fromString(e)},[no,ro,io,oo,so,ao,lo,uo].forEach(function(t){j(ho,t)}),co.types=ho.types,co.properties=ho.properties,co.propertyGroups=ho.propertyGroups,co.propertyGroupNames=ho.propertyGroupNames,co.propertyGroupKeys=ho.propertyGroupKeys;var po={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return e.style=A(t)?t.generateStyle(this):x(t)?co.fromJson(this,t):b(t)?co.fromString(this,t):co(this),e.style},updateStyle:function(){this.mutableElements().updateStyle()}},fo={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(b(o[0]))return s[t=o[0]];if(w(o[0])){if(!this._private.panningEnabled)return this;i=(n=o[0]).y,S(r=n.x)&&(s.x=r),S(i)&&(s.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[1],"x"!==(t=o[0])&&"y"!==t||!S(e)||(s[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,o,s,a=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:w(t)&&(s=(i=a[0]).y,S(o=i.x)&&(l.x+=o),S(s)&&(l.y+=s),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!S(r)||(l[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){var n,r;if(S(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled&&(b(t)?t=this.$(t):w(r=t)&&S(r.x1)&&S(r.x2)&&S(r.y1)&&S(r.y2)?((n={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):C(t)||(t=this.mutableElements()),!C(t)||!t.empty())){n=n||t.boundingBox();var i,o=this.width(),s=this.height();if(e=S(e)?e:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:i=(i=(i=Math.min((o-2*e)/n.w,(s-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i,pan:{x:(o-i*(n.x1+n.x2))/2,y:(s-i*(n.y1+n.y2))/2}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return S(t)&&S(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):S(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:S(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,o=r.zoom,s=!1;return r.zoomingEnabled||(s=!0),S(t)?n=t:w(t)&&(n=t.level,null!=t.position?e=Gt(t.position,o,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(s=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,!s&&S(n)&&n!==o&&(null==e||S(e.x)&&S(e.y))?null!=e?{zoomed:!0,panned:!0,zoom:n,pan:{x:-n/o*(e.x-i.x)+e.x,y:-n/o*(e.y-i.y)+e.y}}:{zoomed:!0,panned:!1,zoom:n,pan:i}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],o=!1,s=!1;if(!t)return this;if(S(t.zoom)||(n=!1),w(t.pan)||(r=!1),!n&&!r)return this;if(n){var a=t.zoom;a<e.minZoom||a>e.maxZoom||!e.zoomingEnabled?o=!0:(e.zoom=a,i.push("zoom"))}if(r&&(!o||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;S(l.x)&&(e.pan.x=l.x,s=!1),S(l.y)&&(e.pan.y=l.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(b(t)){var n=t;t=this.mutableElements().filter(n)}else C(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),o=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(o-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=d.getComputedStyle(r),{width:r.clientWidth-(e=function(e){return parseFloat(t.getPropertyValue(e))})("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};fo.centre=fo.center,fo.autolockNodes=fo.autolock,fo.autoungrabifyNodes=fo.autoungrabify;var go={data:Un.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Un.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Un.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Un.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};go.attr=go.data,go.removeAttr=go.removeData;var mo=function(t){var e=this,n=(t=j({},t)).container;n&&!E(n)&&E(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var o=void 0!==d&&void 0!==n&&!t.headless,s=t;s.layout=j({name:o?"grid":"null"},s.layout),s.renderer=j({name:o?"canvas":"null"},s.renderer);var a=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},l=this._private={container:n,ready:!1,options:s,elements:new Ii(this),listeners:[],aniEles:new Ii(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:a(!0,s.zoomingEnabled),userZoomingEnabled:a(!0,s.userZoomingEnabled),panningEnabled:a(!0,s.panningEnabled),userPanningEnabled:a(!0,s.userPanningEnabled),boxSelectionEnabled:a(!0,s.boxSelectionEnabled),autolock:a(!1,s.autolock,s.autolockNodes),autoungrabify:a(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:a(!1,s.autounselectify),styleEnabled:void 0===s.styleEnabled?o:s.styleEnabled,zoom:S(s.zoom)?s.zoom:1,pan:{x:w(s.pan)&&S(s.pan.x)?s.pan.x:0,y:w(s.pan)&&S(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom}),l.styleEnabled&&e.setStyle([]);var u=j({},s,s.renderer);e.initRenderer(u),function(t,e){if(t.some(O))return zn.all(t).then(e);e(t)}([s.style,s.elements],function(t){var n=t[0],o=t[1];l.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(w(t)||x(t))&&e.add(t),e.one("layoutready",function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")}).one("layoutstop",function(){e.one("done",r),e.emit("done")});var o=j({},e._private.options.layout);o.eles=e.elements(),e.layout(o).run()}(o,function(){e.startAnimationLoop(),l.ready=!0,_(s.ready)&&e.on("ready",s.ready);for(var t=0;t<i.length;t++)e.on("ready",i[t]);r&&(r.readies=[]),e.emit("ready")},s.done)})},vo=mo.prototype;j(vo,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!E(t)&&E(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(j({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return ft(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(w(t)){if(e.startBatch(),t.elements){var i={},o=function(t,n){for(var r=[],o=[],s=0;s<t.length;s++){var a=t[s];if(a.data.id){var l=""+a.data.id,u=e.getElementById(l);i[l]=!0,0!==u.length?o.push({ele:u,json:a}):n?(a.group=n,r.push(a)):r.push(a)}else pt("cy.json() cannot handle elements without an ID attribute")}e.add(r);for(var c=0;c<o.length;c++){var h=o[c];h.ele.json(h.json)}};if(x(t.elements))o(t.elements);else for(var s=["nodes","edges"],a=0;a<s.length;a++){var l=s[a],u=t.elements[l];x(u)&&o(u,l)}var c=e.collection();r.filter(function(t){return!i[t.id()]}).forEach(function(t){t.isParent()?c.merge(t):t.remove()}),c.forEach(function(t){return t.children().move({parent:null})}),c.forEach(function(t){return function(t){return e.getElementById(t.id())}(t).remove()})}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],d=0;d<h.length;d++){var p=h[d];null!=t[p]&&e[p](t[p])}return e.endBatch(),this}var f={};t?f.elements=this.elements().map(function(t){return t.json()}):(f.elements={},r.forEach(function(t){var e=t.group();f.elements[e]||(f.elements[e]=[]),f.elements[e].push(t.json())})),this._private.styleEnabled&&(f.style=e.style().json()),f.data=ft(e.data());var g=n.options;return f.zoomingEnabled=n.zoomingEnabled,f.userZoomingEnabled=n.userZoomingEnabled,f.zoom=n.zoom,f.minZoom=n.minZoom,f.maxZoom=n.maxZoom,f.panningEnabled=n.panningEnabled,f.userPanningEnabled=n.userPanningEnabled,f.pan=ft(n.pan),f.boxSelectionEnabled=n.boxSelectionEnabled,f.renderer=ft(g.renderer),f.hideEdgesOnViewport=g.hideEdgesOnViewport,f.textureOnViewport=g.textureOnViewport,f.wheelSensitivity=g.wheelSensitivity,f.motionBlur=g.motionBlur,f}}),vo.$id=vo.getElementById,[Ni,Wi,Ki,Xi,Qi,Zi,to,eo,po,fo,go].forEach(function(t){j(vo,t)});var yo={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},bo=function(t){return t.scratch("breadthfirst")},_o=function(t,e){return t.scratch("breadthfirst",e)};function xo(t){this.options=j({},yo,t)}xo.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().filter(function(t){return!t.isParent()}),s=i,a=n.directed,l=n.maximal||n.maximalAdjustments>0,u=te(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(C(n.roots))t=n.roots;else if(x(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var d=r.getElementById(n.roots[h]);c.push(d)}t=r.collection(c)}else if(b(n.roots))t=r.$(n.roots);else if(a)t=o.roots();else{var p=i.components();t=r.collection();for(var f=function(e){var n=p[e],r=n.maxDegree(!1),i=n.filter(function(t){return t.degree(!1)===r});t=t.add(i)},g=0;g<p.length;g++)f(g)}var m=[],v={},y=function(t,e){null==m[e]&&(m[e]=[]);var n=m[e].length;m[e].push(t),_o(t,{index:n,depth:e})};s.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=t[0],s=o.id();y(o,i),v[s]=!0}});for(var _=[],w=0;w<o.length;w++){var S=o[w];v[S.id()]||_.push(S)}var E=function(t){for(var e=m[t],n=0;n<e.length;n++){var r=e[n];null!=r?_o(r,{depth:t,index:n}):(e.splice(n,1),n--)}},k=function(){for(var t=0;t<m.length;t++)E(t)},T=function(t,e){for(var n=bo(t),r=t.incomers().filter(function(t){return t.isNode()&&i.has(t)}),o=-1,s=t.id(),a=0;a<r.length;a++){var l=bo(r[a]);o=Math.max(o,l.depth)}return n.depth<=o&&(e[s]?null:(function(t,e){var n=bo(t);m[n.depth][n.index]=null,y(t,e)}(t,o+1),e[s]=!0,!0))};if(a&&l){var P=[],A={},D=function(t){return P.push(t)};for(o.forEach(function(t){return P.push(t)});P.length>0;){var O=P.shift(),M=T(O,A);if(M)O.outgoers().filter(function(t){return t.isNode()&&i.has(t)}).forEach(D);else if(null===M){pt("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}k();var I=0;if(n.avoidOverlap)for(var L=0;L<o.length;L++){var N=o[L].layoutDimensions(n);I=Math.max(I,N.w,N.h)}for(var R={},F=function(t){if(R[t.id()])return R[t.id()];for(var e=bo(t).depth,n=t.neighborhood(),r=0,i=0,s=0;s<n.length;s++){var a=n[s];if(!a.isEdge()&&!a.isParent()&&o.has(a)){var l=bo(a);if(null!=l){var u=l.index,c=l.depth;null!=u&&null!=c&&c<e&&(r+=u/m[c].length,i++)}}}return r/=i=Math.max(1,i),0===i&&(r=0),R[t.id()]=r,r},j=function(t,e){var n=F(t)-F(e);return 0===n?B(t.id(),e.id()):n},z=0;z<m.length;z++)m[z].sort(j),E(z);for(var V=[],G=0;G<_.length;G++)V.push(_[G]);m.unshift(V),k();for(var U=0,H=0;H<m.length;H++)U=Math.max(m[H].length,U);var q=u.x1+u.w/2,W=u.x1+u.h/2,$=m.reduce(function(t,e){return Math.max(t,e.length)},0);return i.nodes().layoutPositions(this,n,function(t){var e=bo(t),r=e.depth,i=e.index,o=m[r].length,s=Math.max(u.w/((n.grid?$:o)+1),I),a=Math.max(u.h/(m.length+1),I),l=Math.min(u.w/2/m.length,u.h/2/m.length);if(l=Math.max(l,I),n.circle){var c=l*r+l-(m.length>0&&m[0].length<=3?l/2:0),h=2*Math.PI/m[r].length*i;return 0===r&&1===m[0].length&&(c=1),{x:q+c*Math.cos(h),y:W+c*Math.sin(h)}}return{x:q+(i+1-(o+1)/2)*s,y:(r+1)*a}}),this};var wo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function So(t){this.options=j({},wo,t)}So.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var s,a=te(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l=a.x1+a.w/2,u=a.y1+a.h/2,c=(void 0===e.sweep?2*Math.PI-2*Math.PI/o.length:e.sweep)/Math.max(1,o.length-1),h=0,d=0;d<o.length;d++){var p=o[d].layoutDimensions(e);h=Math.max(h,p.w,p.h)}if(s=S(e.radius)?e.radius:o.length<=1?0:Math.min(a.h,a.w)/2-h,o.length>1&&e.avoidOverlap){h*=1.75;var f=Math.cos(c)-Math.cos(0),g=Math.sin(c)-Math.sin(0),m=Math.sqrt(h*h/(f*f+g*g));s=Math.max(m,s)}return r.nodes().layoutPositions(this,e,function(t,n){var r=e.startAngle+n*c*(i?1:-1),o=s*Math.cos(r),a=s*Math.sin(r);return{x:l+o,y:u+a}}),this};var Eo,Co={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function ko(t){this.options=j({},Co,t)}ko.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),s=te(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),a=s.x1+s.w/2,l=s.y1+s.h/2,u=[],c=0,h=0;h<o.length;h++){var d,p=o[h];d=e.concentric(p),u.push({value:d,node:p}),p._private.scratch.concentric=d}o.updateStyle();for(var f=0;f<o.length;f++){var g=o[f].layoutDimensions(e);c=Math.max(c,g.w,g.h)}u.sort(function(t,e){return e.value-t.value});for(var m=e.levelWidth(o),v=[[]],y=v[0],b=0;b<u.length;b++){var _=u[b];y.length>0&&Math.abs(y[0].value-_.value)>=m&&v.push(y=[]),y.push(_)}var x=c+e.minNodeSpacing;if(!e.avoidOverlap){var w=v.length>0&&v[0].length>1,S=Math.min(s.w,s.h)/2-x;x=Math.min(x,S/(v.length+w?1:0))}for(var E=0,C=0;C<v.length;C++){var k=v[C],T=void 0===e.sweep?2*Math.PI-2*Math.PI/k.length:e.sweep,P=k.dTheta=T/Math.max(1,k.length-1);if(k.length>1&&e.avoidOverlap){var A=Math.cos(P)-Math.cos(0),D=Math.sin(P)-Math.sin(0),O=Math.sqrt(x*x/(A*A+D*D));E=Math.max(O,E)}k.r=E,E+=x}if(e.equidistant){for(var M=0,I=0,L=0;L<v.length;L++)M=Math.max(M,v[L].r-I);I=0;for(var N=0;N<v.length;N++){var R=v[N];0===N&&(I=R.r),R.r=I,I+=M}}for(var F={},B=0;B<v.length;B++)for(var j=v[B],z=j.dTheta,V=j.r,G=0;G<j.length;G++){var U=j[G],H=e.startAngle+(n?1:-1)*z*G,q={x:a+V*Math.cos(H),y:l+V*Math.sin(H)};F[U.node.id()]=q}return i.nodes().layoutPositions(this,e,function(t){var e=t.id();return F[e]}),this};var To={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Po(t){this.options=j({},To,t),this.options.layout=this}Po.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),Eo=!0===t.debug;var r=Ao(e,n,t);Eo&&(void 0)(r),t.randomize&&Mo(r);var i=$(),o=function(){Lo(r,e,t),!0===t.fit&&e.fit(t.padding)},s=function(e){return!(n.stopped||e>=t.numIter||(No(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},a=function(){if(!0===t.animate||!1===t.animate)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var e=t.eles.nodes(),i=Io(r,t,e);e.layoutPositions(n,t,i)}},l=0,u=!0;if(!0===t.animate)!function e(){for(var n=0;u&&n<t.refresh;)u=s(l),l++,n++;u?($()-i>=t.animationThreshold&&o(),W(e)):($o(r,t),a())}();else{for(;u;)u=s(l),l++;$o(r,t),a()}return this},Po.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Po.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Ao=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:te(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},s=n.eles.components(),a={},l=0;l<s.length;l++)for(var u=s[l],c=0;c<u.length;c++)a[u[c].id()]=l;for(l=0;l<o.nodeSize;l++){var h=(m=i[l]).layoutDimensions(n);(O={}).isLocked=m.locked(),O.id=m.data("id"),O.parentId=m.data("parent"),O.cmptId=a[m.id()],O.children=[],O.positionX=m.position("x"),O.positionY=m.position("y"),O.offsetX=0,O.offsetY=0,O.height=h.w,O.width=h.h,O.maxX=O.positionX+O.width/2,O.minX=O.positionX-O.width/2,O.maxY=O.positionY+O.height/2,O.minY=O.positionY-O.height/2,O.padLeft=parseFloat(m.style("padding")),O.padRight=parseFloat(m.style("padding")),O.padTop=parseFloat(m.style("padding")),O.padBottom=parseFloat(m.style("padding")),O.nodeRepulsion=_(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,o.layoutNodes.push(O),o.idToIndex[O.id]=l}var d=[],p=0,f=-1,g=[];for(l=0;l<o.nodeSize;l++){var m,v=(m=o.layoutNodes[l]).parentId;null!=v?o.layoutNodes[o.idToIndex[v]].children.push(m.id):(d[++f]=m.id,g.push(m.id))}for(o.graphSet.push(g);p<=f;){var y=d[p++],b=o.layoutNodes[o.idToIndex[y]].children;if(b.length>0)for(o.graphSet.push(b),l=0;l<b.length;l++)d[++f]=b[l]}for(l=0;l<o.graphSet.length;l++){var x=o.graphSet[l];for(c=0;c<x.length;c++)o.indexToGraph[o.idToIndex[x[c]]]=l}for(l=0;l<o.edgeSize;l++){var w=r[l],S={};S.id=w.data("id"),S.sourceId=w.data("source"),S.targetId=w.data("target");var E=_(n.idealEdgeLength)?n.idealEdgeLength(w):n.idealEdgeLength,C=_(n.edgeElasticity)?n.edgeElasticity(w):n.edgeElasticity,k=o.idToIndex[S.sourceId],T=o.idToIndex[S.targetId];if(o.indexToGraph[k]!=o.indexToGraph[T]){for(var P=Do(S.sourceId,S.targetId,o),A=o.graphSet[P],D=0,O=o.layoutNodes[k];-1===A.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],D++;for(O=o.layoutNodes[T];-1===A.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],D++;E*=D*n.nestingFactor}S.idealLength=E,S.elasticity=C,o.layoutEdges.push(S)}return o},Do=function(t,e,n){var r=Oo(t,e,0,n);return 2>r.count?0:r.graph},Oo=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var s=0,a=0;a<o.length;a++){var l=i.layoutNodes[i.idToIndex[o[a]]].children;if(0!==l.length){var u=t(e,n,i.indexToGraph[i.idToIndex[l[0]]],i);if(0!==u.count){if(1!==u.count)return u;if(2==++s)break}}}return{count:s,graph:r}},Mo=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},Io=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,o){var s=t.layoutNodes[t.idToIndex[n.data("id")]];return e.boundingBox?{x:r.x1+(s.positionX-i.x1)/i.w*r.w,y:r.y1+(s.positionY-i.y1)/i.h*r.h}:{x:s.positionX,y:s.positionY}}},Lo=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=Io(t,n,i);i.positions(o),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},No=function(t,e,n){Ro(t,e),Vo(t),Go(t,e),Uo(t),Ho(t)},Ro=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,o=0;o<i;o++)for(var s=t.layoutNodes[t.idToIndex[r[o]]],a=o+1;a<i;a++)Bo(s,t.layoutNodes[t.idToIndex[r[a]]],t,e)},Fo=function(t){return-t+2*t*Math.random()},Bo=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,o=e.positionY-t.positionY;0===i&&0===o&&(i=Fo(1),o=Fo(1));var s=jo(t,e,i,o);if(s>0)var a=(u=r.nodeOverlap*s)*i/(g=Math.sqrt(i*i+o*o)),l=u*o/g;else{var u,c=zo(t,i,o),h=zo(e,-1*i,-1*o),d=h.x-c.x,p=h.y-c.y,f=d*d+p*p,g=Math.sqrt(f);a=(u=(t.nodeRepulsion+e.nodeRepulsion)/f)*d/g,l=u*p/g}t.isLocked||(t.offsetX-=a,t.offsetY-=l),e.isLocked||(e.offsetX+=a,e.offsetY+=l)}},jo=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},zo=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,s=t.width||1,a=n/e,l=o/s,u={};return 0===e&&0<n||0===e&&0>n?(u.x=r,u.y=i+o/2,u):0<e&&-1*l<=a&&a<=l?(u.x=r+s/2,u.y=i+s*n/2/e,u):0>e&&-1*l<=a&&a<=l?(u.x=r-s/2,u.y=i-s*n/2/e,u):0<n&&(a<=-1*l||a>=l)?(u.x=r+o*e/2/n,u.y=i+o/2,u):0>n&&(a<=-1*l||a>=l)?(u.x=r-o*e/2/n,u.y=i-o/2,u):u},Vo=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.layoutNodes[t.idToIndex[r.sourceId]],o=t.layoutNodes[t.idToIndex[r.targetId]],s=o.positionX-i.positionX,a=o.positionY-i.positionY;if(0!==s||0!==a){var l=zo(i,s,a),u=zo(o,-1*s,-1*a),c=u.x-l.x,h=u.y-l.y,d=Math.sqrt(c*c+h*h),p=Math.pow(r.idealLength-d,2)/r.elasticity;if(0!==d)var f=p*c/d,g=p*h/d;else f=0,g=0;i.isLocked||(i.offsetX+=f,i.offsetY+=g),o.isLocked||(o.offsetX-=f,o.offsetY-=g)}}},Go=function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,s=t.clientWidth/2;else{var a=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[r[0]]].parentId]];o=a.positionX,s=a.positionY}for(var l=0;l<i;l++){var u=t.layoutNodes[t.idToIndex[r[l]]];if(!u.isLocked){var c=o-u.positionX,h=s-u.positionY,d=Math.sqrt(c*c+h*h);if(d>1){var p=e.gravity*h/d;u.offsetX+=e.gravity*c/d,u.offsetY+=p}}}}},Uo=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],s=t.layoutNodes[t.idToIndex[o]],a=s.children;if(0<a.length&&!s.isLocked){for(var l=s.offsetX,u=s.offsetY,c=0;c<a.length;c++){var h=t.layoutNodes[t.idToIndex[a[c]]];h.offsetX+=l,h.offsetY+=u,n[++i]=a[c]}s.offsetX=0,s.offsetY=0}}},Ho=function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=qo(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Wo(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},qo=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},Wo=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o?t(i,n):void 0}},$o=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId;(r[s]=r[s]||[]).push(o)}var a=0;for(i=0;i<r.length;i++)if(g=r[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var u=g[l];g.x1=Math.min(g.x1,u.positionX-u.width/2),g.x2=Math.max(g.x2,u.positionX+u.width/2),g.y1=Math.min(g.y1,u.positionY-u.height/2),g.y2=Math.max(g.y2,u.positionY+u.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,a+=g.w*g.h}r.sort(function(t,e){return e.w*e.h-t.w*t.h});var c=0,h=0,d=0,p=0,f=Math.sqrt(a)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var g;if(g=r[i]){for(l=0;l<g.length;l++)(u=g[l]).isLocked||(u.positionX+=c-g.x1,u.positionY+=h-g.y1);c+=g.w+e.componentSpacing,d+=g.w+e.componentSpacing,p=Math.max(p,g.h),d>f&&(h+=p+e.componentSpacing,c=0,d=0,p=0)}}},Yo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ko(t){this.options=j({},Yo,t)}Ko.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=te(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)r.nodes().layoutPositions(this,e,function(t){return{x:o.x1,y:o.y1}});else{var s=i.size(),a=Math.sqrt(s*o.h/o.w),l=Math.round(a),u=Math.round(o.w/o.h*a),c=function(t){if(null==t)return Math.min(l,u);Math.min(l,u)==l?l=t:u=t},h=function(t){if(null==t)return Math.max(l,u);Math.max(l,u)==l?l=t:u=t},d=e.rows,p=null!=e.cols?e.cols:e.columns;if(null!=d&&null!=p)l=d,u=p;else if(null!=d&&null==p)l=d,u=Math.ceil(s/l);else if(null==d&&null!=p)u=p,l=Math.ceil(s/u);else if(u*l>s){var f=c(),g=h();(f-1)*g>=s?c(f-1):(g-1)*f>=s&&h(g-1)}else for(;u*l<s;){var m=c(),v=h();(v+1)*m>=s?h(v+1):c(m+1)}var y=o.w/u,b=o.h/l;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var _=0;_<i.length;_++){var x=i[_],w=x._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var S=x.layoutDimensions(e),E=e.avoidOverlapPadding,C=S.h+E;y=Math.max(y,S.w+E),b=Math.max(b,C)}for(var k={},T=function(t,e){return!!k["c-"+t+"-"+e]},P=function(t,e){k["c-"+t+"-"+e]=!0},A=0,D=0,O=function(){++D>=u&&(D=0,A++)},M={},I=0;I<i.length;I++){var L=i[I],N=e.position(L);if(N&&(void 0!==N.row||void 0!==N.col)){var R={row:N.row,col:N.col};if(void 0===R.col)for(R.col=0;T(R.row,R.col);)R.col++;else if(void 0===R.row)for(R.row=0;T(R.row,R.col);)R.row++;M[L.id()]=R,P(R.row,R.col)}}i.layoutPositions(this,e,function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var i=M[t.id()];if(i)n=i.col*y+y/2+o.x1,r=i.row*b+b/2+o.y1;else{for(;T(A,D);)O();n=D*y+y/2+o.x1,r=A*b+b/2+o.y1,P(A,D),O()}return{x:n,y:r}})}return this};var Xo={ready:function(){},stop:function(){}};function Qo(t){this.options=j({},Xo,t)}Qo.prototype.run=function(){var t=this.options,e=t.eles;return this.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},Qo.prototype.stop=function(){return this};var Zo={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Jo(t){this.options=j({},Zo,t)}Jo.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=_(t.positions);return e.layoutPositions(this,t,function(e,r){var i=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i}),this};var ts={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function es(t){this.options=j({},ts,t)}es.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=te(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.nodes().layoutPositions(this,t,function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var ns=[{name:"breadthfirst",impl:xo},{name:"circle",impl:So},{name:"concentric",impl:ko},{name:"cose",impl:Po},{name:"grid",impl:Ko},{name:"null",impl:Qo},{name:"preset",impl:Jo},{name:"random",impl:es}];function rs(t){this.options=t,this.notifications=0}var is=function(){},os=function(){throw new Error("A headless instance can not render images")};rs.prototype={recalculateRenderedStyle:is,notify:function(){this.notifications++},init:is,isHeadless:function(){return!0},png:os,jpg:os};var ss={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,s){return i.x-n/2-s<=t&&t<=i.x+n/2+s&&i.y-n/2-s<=e&&e<=i.y+n/2+s},r=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),s=t*Math.sin(r)+e*Math.cos(r);return{x:o*n+i.x,y:s*n+i.y}},i=function(t,e,n,i){for(var o=[],s=0;s<t.length;s+=2)o.push(r(t[s],t[s+1],e,n,i));return o},o=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},s=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},a=function(r,a){b(a)&&(a=t[a]),t[r]=j({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,s,a){var l=o(i(this.points,n+2*a,r,s));return pe(t,e,l)},roughCollide:n,draw:function(t,n,r,o){var s=i(this.points,n,r,o);e.arrowShapeImpl("polygon")(t,s)},spacing:function(t){return 0},gap:s},a)};a("none",{collide:lt,roughCollide:lt,draw:ct,spacing:ut,gap:ut}),a("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),a("arrow","triangle"),a("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,o,s,a){var l=i(this.points,n,o,s),u=this.controlPoint,c=r(u[0],u[1],n,o,s);e.arrowShapeImpl(this.name)(t,l,c)},gap:function(t){return.8*s(t)}}),a("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,s,a,l){var u=o(i(this.points,n+2*l,r,s)),c=o(i(this.pointsTee,n+2*l,r,s));return pe(t,e,u)||pe(t,e,c)},draw:function(t,n,r,o,s){var a=i(this.points,n,r,o),l=i(this.pointsTee,n,r,o);e.arrowShapeImpl(this.name)(t,a,l)}}),a("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,e,n,r,s,a,l){var u=s,c=Math.pow(u.x-t,2)+Math.pow(u.y-e,2)<=Math.pow((n+2*l)*this.radius,2),h=o(i(this.points,n+2*l,r,s));return pe(t,e,h)||c},draw:function(t,n,r,o,s){var a=i(this.pointsTr,n,r,o);e.arrowShapeImpl(this.name)(t,a,o.x,o.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),a("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,r,s,a,l){var u=o(i(this.points,n+2*l,r,s)),c=o(i(this.crossLinePts(n,a),n+2*l,r,s));return pe(t,e,u)||pe(t,e,c)},draw:function(t,n,r,o,s){var a=i(this.points,n,r,o),l=i(this.crossLinePts(n,s),n,r,o);e.arrowShapeImpl(this.name)(t,a,l)}}),a("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*s(t)}}),a("circle",{radius:.15,collide:function(t,e,n,r,i,o,s){var a=i;return Math.pow(a.x-t,2)+Math.pow(a.y-e,2)<=Math.pow((n+2*s)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),a("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),a("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),a("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),a("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},as={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],s=r[4],a=n.pan(),l=n.zoom();return[((t-i)/s-a.x)/l,((e-o)/s-a.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=d.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i=r("padding-left"),o=r("padding-right"),s=r("padding-top"),a=r("padding-bottom"),l=r("border-left-width"),u=r("border-right-width"),c=r("border-top-width"),h=(r("border-bottom-width"),t.clientWidth);return this.containerBB=[e.left+i+l,e.top+s+c,h-(i+o),t.clientHeight-(s+a),e.width/(h+(l+u))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,o,s=this,a=this,l=a.getCachedZSortedEles(),u=[],c=a.cy.zoom(),h=a.cy.hasCompoundNodes(),d=(r?24:8)/c,p=(r?8:2)/c,f=(r?8:2)/c,g=1/0;function m(t,e){if(t.isNode()){if(o)return;o=t,u.push(t)}if(t.isEdge()&&(null==e||e<g))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<u.length;n++)if(u[n].isEdge()){u[n]=t,i=t,g=null!=e?e:g;break}}else u.push(t),i=t,g=null!=e?e:g}function v(n){var r=n.outerWidth()+2*p,i=n.outerHeight()+2*p,o=r/2,l=i/2,u=n.position();if(u.x-o<=t&&t<=u.x+o&&u.y-l<=e&&e<=u.y+l&&a.nodeShapes[s.getNodeShape(n)].checkPoint(t,e,0,r,i,u.x,u.y))return m(n,0),!0}function y(n){var r,i=n._private,o=i.rscratch,l=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,p=l/2+d,f=p*p,g=2*p,y=i.source,b=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var _=o.allpts,x=0;x+3<_.length;x+=2)if(ue(t,e,_[x],_[x+1],_[x+2],_[x+3],g)&&f>(r=de(t,e,_[x],_[x+1],_[x+2],_[x+3])))return m(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(_=o.allpts,x=0;x+5<o.allpts.length;x+=4)if(ce(t,e,_[x],_[x+1],_[x+2],_[x+3],_[x+4],_[x+5],g)&&f>(r=he(t,e,_[x],_[x+1],_[x+2],_[x+3],_[x+4],_[x+5])))return m(n,r),!0;y=y||i.source,b=b||i.target;var w=s.getArrowWidth(l,c),S=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(x=0;x<S.length;x++){var E=S[x],C=a.arrowShapes[n.pstyle(E.name+"-arrow-shape").value],k=n.pstyle("width").pfValue;if(C.roughCollide(t,e,w,E.angle,{x:E.x,y:E.y},k,d)&&C.collide(t,e,w,E.angle,{x:E.x,y:E.y},k,d))return m(n),!0}h&&u.length>0&&(v(y),v(b))}function b(t,e,n){return xt(t,e,n)}function _(n,r){var i,o=n._private,s=f;i=r?r+"-":"",n.boundingBox();var a=o.labelBounds[r||"main"],l=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var u=b(o.rscratch,"labelX",r),c=b(o.rscratch,"labelY",r),h=b(o.rscratch,"labelAngle",r),d=n.pstyle(i+"text-margin-x").pfValue,p=n.pstyle(i+"text-margin-y").pfValue,g=a.x1-s-d,v=a.x2+s-d,y=a.y1-s-p,_=a.y2+s-p;if(h){var x=Math.cos(h),w=Math.sin(h),S=function(t,e){return{x:(t-=u)*x-(e-=c)*w+u,y:t*w+e*x+c}},E=S(g,y),C=S(g,_),k=S(v,y),T=S(v,_);if(pe(t,e,[E.x+d,E.y+p,k.x+d,k.y+p,T.x+d,T.y+p,C.x+d,C.y+p]))return m(n),!0}else if(se(a,t,e))return m(n),!0}}n&&(l=l.interactive);for(var x=l.length-1;x>=0;x--){var w=l[x];w.isNode()?v(w)||_(w):y(w)||_(w)||_(w,"source")||_(w,"target")}return u},getAllInBox:function(t,e,n,r){for(var i,o=this.getCachedZSortedEles().interactive,s=[],a=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),h=te({x1:t=a,y1:e=u,x2:n=l,y2:r=c}),d=0;d<o.length;d++){var p=o[d];if(p.isNode()){var f=p,g=f.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});oe(h,g)&&!ae(g,h)&&s.push(f)}else{var m=p,v=m._private,y=v.rscratch;if(null!=y.startX&&null!=y.startY&&!se(h,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!se(h,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var b=v.rstyle.bezierPts||v.rstyle.linePts||v.rstyle.haystackPts,_=!0,x=0;x<b.length;x++)if(!se(h,(i=b[x]).x,i.y)){_=!1;break}_&&s.push(m)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||s.push(m)}}return s}},ls={calculateArrowAngles:function(t){var e,n,r,i,o,s,a=t._private.rscratch,l="haystack"===a.edgeType,u="bezier"===a.edgeType,c="multibezier"===a.edgeType,h="segments"===a.edgeType,d="compound"===a.edgeType,p="self"===a.edgeType;l?(r=a.haystackPts[0],i=a.haystackPts[1],o=a.haystackPts[2],s=a.haystackPts[3]):(r=a.arrowStartX,i=a.arrowStartY,o=a.arrowEndX,s=a.arrowEndY),f=a.midX,g=a.midY,h?(e=r-a.segpts[0],n=i-a.segpts[1]):c||d||p||u?(e=r-Qt((k=a.allpts)[0],k[2],k[4],.1),n=i-Qt(k[1],k[3],k[5],.1)):(e=r-f,n=i-g),a.srcArrowAngle=qt(e,n);var f=a.midX,g=a.midY;if(l&&(f=(r+o)/2,g=(i+s)/2),e=o-r,n=s-i,h)if((k=a.allpts).length/2%2==0)e=k[m=k.length/2]-k[v=m-2],n=k[m+1]-k[v+1];else{var m,v,y=2+(m=k.length/2-1);e=k[m]-k[v=m-2],n=k[m+1]-k[v+1]}else if(c||d||p){var b,_,x,w,S,E,C,k=a.allpts;a.ctrlpts.length/2%2==0?(b=Qt(k[E=k.length/2-1],k[S=E+2],k[C=S+2],0),_=Qt(k[E+1],k[S+1],k[C+1],0),x=Qt(k[E],k[S],k[C],1e-4),w=Qt(k[E+1],k[S+1],k[C+1],1e-4)):(b=Qt(k[E=(S=k.length/2-1)-2],k[S],k[C=S+2],.4999),_=Qt(k[E+1],k[S+1],k[C+1],.4999),x=Qt(k[E],k[S],k[C],.5),w=Qt(k[E+1],k[S+1],k[C+1],.5)),e=x-b,n=w-_}if(a.midtgtArrowAngle=qt(e,n),a.midDispX=e,a.midDispY=n,e*=-1,n*=-1,h&&((k=a.allpts).length/2%2==0||(e=-(k[y=2+(m=k.length/2-1)]-k[m]),n=-(k[y+1]-k[m+1]))),a.midsrcArrowAngle=qt(e,n),h)e=o-a.segpts[a.segpts.length-2],n=s-a.segpts[a.segpts.length-1];else if(c||d||p||u){var T=(k=a.allpts).length;e=o-Qt(k[T-6],k[T-4],k[T-2],.9),n=s-Qt(k[T-5],k[T-3],k[T-1],.9)}else e=o-f,n=s-g;a.tgtArrowAngle=qt(e,n)}};ls.getArrowWidth=ls.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var us={};function cs(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2)e.push({x:t[n],y:t[n+1]});return e}}us.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var s=r.source,a=r.target,l=s.position(),u=a.position(),c=s.width(),h=a.width(),d=s.height(),p=a.height(),f=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*f+l.x,i.source.y*d*f+l.y,i.target.x*h*f+u.x,i.target.y*p*f+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},us.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,o=e.vectorNormInverse,s=t.pstyle("edge-distances").value,a=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(a.pfValue.length,l.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<u;c++){var h=a.pfValue[c],d=l.pfValue[c],p=1-h,f="node-position"===s?r:i,g={x:f.x1*p+f.x2*h,y:f.y1*p+f.y2*h};n.segpts.push(g.x+o.x*d,g.y+o.y*d)}},us.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,s=e.srcPos,a=t.pstyle("control-point-distances"),l=a?a.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,p=h;r&&(d=0,p=l);var f=u-Math.PI/2,g=f-c/2,m=f+c/2,v=String(u+"_"+c);d=void 0===o[v]?o[v]=0:++o[v],i.ctrlpts=[s.x+1.4*Math.cos(g)*p*(d/3+1),s.y+1.4*Math.sin(g)*p*(d/3+1),s.x+1.4*Math.cos(m)*p*(d/3+1),s.y+1.4*Math.sin(m)*p*(d/3+1)]},us.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,s=e.tgtPos,a=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),p=n,f=h;r&&(p=0,f=d?d.pfValue[0]:void 0);var g={x:o.x-a/2,y:o.y-l/2},m={x:s.x-u/2,y:s.y-c/2},v={x:Math.min(g.x,m.x),y:Math.min(g.y,m.y)},y=Math.max(.5,Math.log(.01*a)),b=Math.max(.5,Math.log(.01*u));i.ctrlpts=[v.x,v.y-(1+Math.pow(50,1.12)/100)*f*(p/3+1)*y,v.x-(1+Math.pow(50,1.12)/100)*f*(p/3+1)*b,v.y]},us.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},us.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,s=e.vectorNormInverse,a=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=t.pstyle("control-point-weights"),p=h&&d?Math.min(h.value.length,d.value.length):1,f=h?h.pfValue[0]:void 0,g=d.value[0],m=r;o.edgeType=m?"multibezier":"bezier",o.ctrlpts=[];for(var v=0;v<p;v++){var y,b=(.5-e.eles.length/2+n)*c*(i?-1:1),_=$t(b);m&&(f=h?h.pfValue[v]:c,g=d.value[v]);var x=void 0!==(y=r?f:void 0!==f?_*f:void 0)?y:b,w=1-g,S="node-position"===u?a:l,E={x:S.x1*w+S.x2*g,y:S.y1*w+S.y2*g};o.ctrlpts.push(E.x+s.x*x,E.y+s.y*x)}},us.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r=e.posPts,i=e.srcW,o=e.srcH,s=e.tgtW,a=e.tgtH,l="node-position"!==t.pstyle("edge-distances").value,u=t.pstyle("taxi-direction").value,c=u,h=t.pstyle("taxi-turn"),d="%"===h.units,p=h.pfValue,f=p<0,g=t.pstyle("taxi-turn-min-distance").pfValue,m=l?(o+a)/2:0,v=r.x2-r.x1,y=r.y2-r.y1,b=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},_=b(v,l?(i+s)/2:0),x=b(y,m),w=!1;"auto"===c?u=Math.abs(_)>Math.abs(x)?"horizontal":"vertical":"upward"===c||"downward"===c?(u="vertical",w=!0):"leftward"!==c&&"rightward"!==c||(u="horizontal",w=!0);var S,E="vertical"===u,C=E?x:_,k=E?y:v,T=$t(k),P=!1;w&&(d||f)||!("downward"===c&&k<0||"upward"===c&&k>0||"leftward"===c&&k>0||"rightward"===c&&k<0)||(C=(T*=-1)*Math.abs(C),P=!0);var A=function(t){return Math.abs(t)<g||Math.abs(t)>=Math.abs(C)},D=A(S=d?(p<0?1+p:p)*C:(p<0?C:0)+p*T),O=A(Math.abs(C)-Math.abs(S));if(!D&&!O||P)if(E){var M=r.y1+S+(l?o/2*T:0);n.segpts=[r.x1,M,r.x2,M]}else{var I=r.x1+S+(l?i/2*T:0);n.segpts=[I,r.y1,I,r.y2]}else if(E){var L=Math.abs(k)<=o/2,N=Math.abs(v)<=s/2;if(L){var R=(r.x1+r.x2)/2;n.segpts=[R,r.y1,R,r.y2]}else if(N){var F=(r.y1+r.y2)/2;n.segpts=[r.x1,F,r.x2,F]}else n.segpts=[r.x1,r.y2]}else{var B=Math.abs(k)<=i/2,j=Math.abs(y)<=a/2;if(B){var z=(r.y1+r.y2)/2;n.segpts=[r.x1,z,r.x2,z]}else if(j){var V=(r.x1+r.x2)/2;n.segpts=[V,r.y1,V,r.y2]}else n.segpts=[r.x2,r.y1]}},us.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,o=e.srcW,s=e.srcH,a=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,h=!S(n.startX)||!S(n.startY),d=!S(n.arrowStartX)||!S(n.arrowStartY),p=!S(n.endX)||!S(n.endY),f=!S(n.arrowEndX)||!S(n.arrowEndY),g=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,m=Yt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),v=m<g,y=Yt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=y<g,_=!1;if(h||d||v){_=!0;var x={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},w=Math.sqrt(x.x*x.x+x.y*x.y),E={x:x.x/w,y:x.y/w},C=Math.max(o,s),k={x:n.ctrlpts[0]+2*E.x*C,y:n.ctrlpts[1]+2*E.y*C},T=u.intersectLine(r.x,r.y,o,s,k.x,k.y,0);v?(n.ctrlpts[0]=n.ctrlpts[0]+E.x*(g-m),n.ctrlpts[1]=n.ctrlpts[1]+E.y*(g-m)):(n.ctrlpts[0]=T[0]+E.x*g,n.ctrlpts[1]=T[1]+E.y*g)}if(p||f||b){_=!0;var P={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},A=Math.sqrt(P.x*P.x+P.y*P.y),D={x:P.x/A,y:P.y/A},O=Math.max(o,s),M={x:n.ctrlpts[0]+2*D.x*O,y:n.ctrlpts[1]+2*D.y*O},I=c.intersectLine(i.x,i.y,a,l,M.x,M.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+D.x*(g-y),n.ctrlpts[1]=n.ctrlpts[1]+D.y*(g-y)):(n.ctrlpts[0]=I[0]+D.x*g,n.ctrlpts[1]=I[1]+D.y*g)}_&&this.findEndpoints(t)}},us.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(e.midX=e.allpts[r=e.allpts.length/2-1],e.midY=e.allpts[r+1]):(e.midX=Qt(e.allpts[r=e.allpts.length/2-3],e.allpts[r+2],e.allpts[r+4],.5),e.midY=Qt(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}},us.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||S(e.startX)&&S(e.startY)&&S(e.endX)&&S(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,pt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},us.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new St,get:function(t){var e=this.map.get(t[0]);return null!=e?e.get(t[1]):null},set:function(t,e){var n=this.map.get(t[0]);null==n&&(n=new St,this.map.set(t[0],n)),n.set(t[1],e)}},o=[],s=[],a=0;a<t.length;a++){var l=t[a],u=l._private,c=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==c){var h="unbundled-bezier"===c||"segments"===c||"straight"===c||"taxi"===c,d="unbundled-bezier"===c||"bezier"===c,p=u.target,f=[u.source.poolIndex(),p.poolIndex()].sort(),g=i.get(f);null==g&&(i.set(f,g={eles:[]}),o.push(f)),g.eles.push(l),h&&(g.hasUnbundled=!0),d&&(g.hasBezier=!0)}else s.push(l)}for(var m=function(t){var s=i.get(o[t]),a=void 0;if(!s.hasUnbundled){var l=s.eles[0].parallelEdges().filter(function(t){return t.isBundledBezier()});_t(s.eles),l.forEach(function(t){return s.eles.push(t)}),s.eles.sort(function(t,e){return t.poolIndex()-e.poolIndex()})}var u=s.eles[0],c=u.source(),h=u.target();if(c.poolIndex()>h.poolIndex()){var d=c;c=h,h=d}var p=s.srcPos=c.position(),f=s.tgtPos=h.position(),g=s.srcW=c.outerWidth(),m=s.srcH=c.outerHeight(),v=s.tgtW=h.outerWidth(),y=s.tgtH=h.outerHeight(),b=s.srcShape=n.nodeShapes[e.getNodeShape(c)],_=s.tgtShape=n.nodeShapes[e.getNodeShape(h)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var x=0;x<s.eles.length;x++){var w=s.eles[x],E=w[0]._private.rscratch,C=w.pstyle("curve-style").value,k="unbundled-bezier"===C||"segments"===C||"taxi"===C,T=!c.same(w.source());if(!s.calculatedIntersection&&c!==h&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var P=b.intersectLine(p.x,p.y,g,m,f.x,f.y,0),A=s.srcIntn=P,D=_.intersectLine(f.x,f.y,v,y,p.x,p.y,0),O=s.tgtIntn=D,M=s.intersectionPts={x1:P[0],x2:D[0],y1:P[1],y2:D[1]},I=s.posPts={x1:p.x,x2:f.x,y1:p.y,y2:f.y},L=D[1]-P[1],N=D[0]-P[0],R=Math.sqrt(N*N+L*L),F=s.vector={x:N,y:L},B=s.vectorNorm={x:F.x/R,y:F.y/R},j={x:-B.y,y:B.x};s.nodesOverlap=!S(R)||_.checkPoint(P[0],P[1],0,v,y,f.x,f.y)||b.checkPoint(D[0],D[1],0,g,m,p.x,p.y),s.vectorNormInverse=j,a={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:f,tgtPos:p,srcW:v,srcH:y,tgtW:g,tgtH:m,srcIntn:O,tgtIntn:A,srcShape:_,tgtShape:b,posPts:{x1:I.x2,y1:I.y2,x2:I.x1,y2:I.y1},intersectionPts:{x1:M.x2,y1:M.y2,x2:M.x1,y2:M.y1},vector:{x:-F.x,y:-F.y},vectorNorm:{x:-B.x,y:-B.y},vectorNormInverse:{x:-j.x,y:-j.y}}}var z=T?a:s;E.nodesOverlap=z.nodesOverlap,E.srcIntn=z.srcIntn,E.tgtIntn=z.tgtIntn,r&&(c.isParent()||c.isChild()||h.isParent()||h.isChild())&&(c.parents().anySame(h)||h.parents().anySame(c)||c.same(h)&&c.isParent())?e.findCompoundLoopPoints(w,z,x,k):c===h?e.findLoopPoints(w,z,x,k):"segments"===C?e.findSegmentsPoints(w,z):"taxi"===C?e.findTaxiPoints(w,z):"straight"===C||!k&&s.eles.length%2==1&&x===Math.floor(s.eles.length/2)?e.findStraightEdgePoints(w):e.findBezierPoints(w,z,x,k,T),e.findEndpoints(w),e.tryToCorrectInvalidPoints(w,z),e.checkForInvalidEdgeWarning(w),e.storeAllpts(w),e.storeEdgeProjections(w),e.calculateArrowAngles(w),e.recalculateEdgeLabelProjections(w),e.calculateLabelAngles(w)}},v=0;v<o.length;v++)m(v);this.findHaystackPoints(s)}},us.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),cs(e.segpts)},us.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),cs(e.ctrlpts)},us.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var hs={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*r),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var s=e.pfValue[0];s=-Math.PI/2+s;var a=2*Math.max(r,i),l=[n.x+Math.cos(s)*a,n.y+Math.sin(s)*a];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,l[0],l[1],0)},findEndpoints:function(t){var e,n,r,i,o,s=this,a=t.source()[0],l=t.target()[0],u=a.position(),c=l.position(),h=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,p=t.pstyle("target-distance-from-node").pfValue,f=t.pstyle("source-distance-from-node").pfValue,g=t.pstyle("curve-style").value,m=t._private.rscratch,v=m.edgeType,y="self"===v||"compound"===v,b="bezier"===v||"multibezier"===v||y,_="bezier"!==v,x="straight"===v||"segments"===v,w="segments"===v,E=b||_||x,C=y||"taxi"===g,k=t.pstyle("source-endpoint"),T=C?"outside-to-node":k.value,P=t.pstyle("target-endpoint"),A=C?"outside-to-node":P.value;if(m.srcManEndpt=k,m.tgtManEndpt=P,b){var D=[m.ctrlpts[0],m.ctrlpts[1]];n=_?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:D,r=D}else if(x){var O=w?m.segpts.slice(0,2):[c.x,c.y];n=w?m.segpts.slice(m.segpts.length-2):[u.x,u.y],r=O}if("inside-to-node"===A)e=[c.x,c.y];else if(P.units)e=this.manualEndptToPx(l,P);else if("outside-to-line"===A)e=m.tgtIntn;else if("outside-to-node"===A||"outside-to-node-or-label"===A?i=n:"outside-to-line"!==A&&"outside-to-line-or-label"!==A||(i=[u.x,u.y]),e=s.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===A||"outside-to-line-or-label"===A){var M=l._private.rscratch,I=M.labelX,L=M.labelY,N=M.labelWidth/2,R=M.labelHeight/2,F=l.pstyle("text-valign").value;"top"===F?L-=R:"bottom"===F&&(L+=R);var B=l.pstyle("text-halign").value;"left"===B?I-=N:"right"===B&&(I+=N);var j=xe(i[0],i[1],[I-N,L-R,I+N,L-R,I+N,L+R,I-N,L+R],c.x,c.y);if(j.length>0){var z=u,V=Kt(z,Ht(e)),G=Kt(z,Ht(j)),U=V;G<V&&(e=j,U=G),j.length>2&&Kt(z,{x:j[2],y:j[3]})<U&&(e=[j[2],j[3]])}}var H=we(e,n,s.arrowShapes[h].spacing(t)+p),q=we(e,n,s.arrowShapes[h].gap(t)+p);if(m.endX=q[0],m.endY=q[1],m.arrowEndX=H[0],m.arrowEndY=H[1],"inside-to-node"===T)e=[u.x,u.y];else if(k.units)e=this.manualEndptToPx(a,k);else if("outside-to-line"===T)e=m.srcIntn;else if("outside-to-node"===T||"outside-to-node-or-label"===T?o=r:"outside-to-line"!==T&&"outside-to-line-or-label"!==T||(o=[c.x,c.y]),e=s.nodeShapes[this.getNodeShape(a)].intersectLine(u.x,u.y,a.outerWidth(),a.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===T||"outside-to-line-or-label"===T){var W=a._private.rscratch,$=W.labelX,Y=W.labelY,K=W.labelWidth/2,X=W.labelHeight/2,Q=a.pstyle("text-valign").value;"top"===Q?Y-=X:"bottom"===Q&&(Y+=X);var Z=a.pstyle("text-halign").value;"left"===Z?$-=K:"right"===Z&&($+=K);var J=xe(o[0],o[1],[$-K,Y-X,$+K,Y-X,$+K,Y+X,$-K,Y+X],u.x,u.y);if(J.length>0){var tt=c,et=Kt(tt,Ht(e)),nt=Kt(tt,Ht(J)),rt=et;nt<et&&(e=[J[0],J[1]],rt=nt),J.length>2&&Kt(tt,{x:J[2],y:J[3]})<rt&&(e=[J[2],J[3]])}}var it=we(e,r,s.arrowShapes[d].spacing(t)+f),ot=we(e,r,s.arrowShapes[d].gap(t)+f);m.startX=ot[0],m.startY=ot[1],m.arrowStartX=it[0],m.arrowStartY=it[1],E&&(m.badLine=!(S(m.startX)&&S(m.startY)&&S(m.endX)&&S(m.endY)))},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}}},ds={};function ps(t,e,n){for(var r=function(t,e,n,r){return Qt(t,e,n,r)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],s),y:r(n[1],n[3],n[5],s)})}}ds.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)ps(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var o=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var s=n.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},ds.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var fs={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!D(e)){var n,r,i=t._private,o=t.width(),s=t.height(),a=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(u){case"left":n=l.x-o/2-a;break;case"right":n=l.x+o/2+a;break;default:n=l.x}switch(c){case"top":r=l.y-s/2-a;break;case"bottom":r=l.y+s/2+a;break;default:r=l.y}h.labelX=n,h.labelY=r,d.labelX=n,d.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},gs=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},ms=function(t,e){return gs(e.x-t.x,e.y-t.y)};fs.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){var s=function(t,e,r){wt(n.rscratch,t,e,r),wt(n.rstyle,t,e,r)};s("labelX",null,(e={x:r.midX,y:r.midY}).x),s("labelY",null,e.y);var a=gs(r.midDispX,r.midDispY);s("labelAutoAngle",null,a);var l=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<r.allpts.length;o+=4)e.push({p0:{x:r.allpts[o],y:r.allpts[o+1]},p1:{x:r.allpts[o+2],y:r.allpts[o+3]},p2:{x:r.allpts[o+4],y:r.allpts[o+5]},startDist:0,length:0,segments:[]});var s=n.rstyle.bezierPts,a=i.bezierProjPcts.length;function l(t,e,n,r,i){var o=Yt(e,n),s=t.segments[t.segments.length-1];t.segments.push({p0:e,p1:n,t0:r,t1:i,startDist:s?s.startDist+s.length:0,length:o}),t.length+=o}for(var u=0;u<e.length;u++){var c=e[u],h=e[u-1];h&&(c.startDist=h.startDist+h.length),l(c,c.p0,s[u*a],0,i.bezierProjPcts[0]);for(var d=0;d<a-1;d++)l(c,s[u*a+d],s[u*a+d+1],i.bezierProjPcts[d],i.bezierProjPcts[d+1]);l(c,s[u*a+a-1],c.p2,i.bezierProjPcts[a-1],1)}return t.cache=e},u=function(n){var i,a="source"===n;if(o[n]){var u=t.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=l(),d=0,p=0,f=0;f<h.length;f++){for(var g=h[a?f:h.length-1-f],m=0;m<g.segments.length;m++){var v=g.segments[a?m:g.segments.length-1-m];if(d=p,(p+=v.length)>=u||f===h.length-1&&m===g.segments.length-1){c={cp:g,segment:v};break}}if(c)break}var y=c.cp,b=c.segment,_=(u-d)/b.length,x=b.t1-b.t0,w=a?b.t0+x*_:b.t1-x*_;w=Jt(0,w,1),e=Zt(y.p0,y.p1,y.p2,w),i=function(t,e,n,r){var i=Jt(0,r-.001,1),o=Jt(0,r+.001,1),s=Zt(t,e,n,i),a=Zt(t,e,n,o);return ms(s,a)}(y.p0,y.p1,y.p2,w);break;case"straight":case"segments":case"haystack":for(var S,E,C,k,T=0,P=r.allpts.length,A=0;A+3<P&&(a?(C={x:r.allpts[A],y:r.allpts[A+1]},k={x:r.allpts[A+2],y:r.allpts[A+3]}):(C={x:r.allpts[P-2-A],y:r.allpts[P-1-A]},k={x:r.allpts[P-4-A],y:r.allpts[P-3-A]}),E=T,!((T+=S=Yt(C,k))>=u));A+=2);var D=(u-E)/S;D=Jt(0,D,1),e=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Yt(t,e);return n=null==n?0:n,{x:t.x+i/s*(r=null!=r?r:n*s),y:t.y+o/s*r}}(C,k,D),i=ms(C,k)}s("labelX",n,e.x),s("labelY",n,e.y),s("labelAutoAngle",n,i)}};u("source"),u("target"),this.applyLabelDimensions(t)}},fs.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},fs.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,a=xt(n.rscratch,"labelWrapCachedLines",e)||[],l="wrap"!==s?1:Math.max(a.length,1),u=i.height/l,c=u*o,h=i.width,d=i.height+(l-1)*(o-1)*u;wt(n.rstyle,"labelWidth",e,h),wt(n.rscratch,"labelWidth",e,h),wt(n.rstyle,"labelHeight",e,d),wt(n.rscratch,"labelHeight",e,d),wt(n.rscratch,"labelLineHeight",e,c)},fs.getLabelText=function(t,e){var n=t._private,r=t.pstyle((e?e+"-":"")+"label").strValue,i=t.pstyle("text-transform").value,o=function(t,r){return r?(wt(n.rscratch,t,e,r),r):xt(n.rscratch,t,e)};if(!r)return"";"none"==i||("uppercase"==i?r=r.toUpperCase():"lowercase"==i&&(r=r.toLowerCase()));var s=t.pstyle("text-wrap").value;if("wrap"===s){var a=o("labelKey");if(null!=a&&o("labelWrapKey")===a)return o("labelWrapCachedText");for(var l=r.split("\n"),u=t.pstyle("text-max-width").pfValue,c="anywhere"===t.pstyle("text-overflow-wrap").value,h=[],d=/[\s\u200b]+/,p=c?"":" ",f=0;f<l.length;f++){var g=l[f],m=this.calculateLabelDimensions(t,g).width;if(c){var v=g.split("").join("\u200b");g=v}if(m>u){for(var y=g.split(d),b="",_=0;_<y.length;_++){var x=y[_];this.calculateLabelDimensions(t,0===b.length?x:b+p+x).width<=u?b+=x+p:(b&&h.push(b),b=x+p)}b.match(/^[\s\u200b]+$/)||h.push(b)}else h.push(g)}o("labelWrapCachedLines",h),r=o("labelWrapCachedText",h.join("\n")),o("labelWrapKey",a)}else if("ellipsis"===s){var w=t.pstyle("text-max-width").pfValue,S="",E=!1;if(this.calculateLabelDimensions(t,r).width<w)return r;for(var C=0;C<r.length&&!(this.calculateLabelDimensions(t,S+r[C]+"\u2026").width>w);C++)S+=r[C],C===r.length-1&&(E=!0);return E||(S+="\u2026"),S}return r},fs.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},fs.calculateLabelDimensions=function(t,e){var n=tt(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var o=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,a=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,u=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=document.createElement("canvas"),c=this.labelCalcCanvasContext=u.getContext("2d");var h=u.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}c.font="".concat(o," ").concat(l," ").concat(s,"px ").concat(a);for(var d=0,p=0,f=e.split("\n"),g=0;g<f.length;g++){var m=c.measureText(f[g]),v=Math.ceil(m.width),y=s;d=Math.max(v,d),p+=y}return r[n]={width:d+=0,height:p+=0}},fs.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=t.pstyle((e?e+"-":"")+"text-rotation"),o=i.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:i.pfValue},fs.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var vs={},ys=!1;vs.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return ys||(pt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ys=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var bs={};[as,ls,us,hs,ds,fs,vs,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++){var i=t[r],o=i._private,s=o.rstyle;s.clean=!1,s.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(t){r(t.target)}).on("style.* background.*",function(t){r(t.target,!1)});var i=function(i){if(i){var o=n.onUpdateEleCalcsFns;e.cleanStyle();for(var s=0;s<e.length;s++){var a=e[s],l=a._private.rstyle;a.isNode()&&!l.cleanConnected&&(r(a.connectedEdges()),l.cleanConnected=!0)}if(o)for(var u=0;u<o.length;u++)(0,o[u])(i,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(t){return t._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var o=0;o<t.length;o++){var s=t[o],a=s._private,l=a.rstyle;!s.isEdge()||n(s.source())&&n(s.target())||(l.clean=!1),e&&l.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===a.group?i.push(s):r.push(s),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],h=c._private.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var p=0;p<r.length;p++){var f=r[p]._private,g=f.rstyle,m=f.rscratch;g.srcX=m.arrowStartX,g.srcY=m.arrowStartY,g.tgtX=m.arrowEndX,g.tgtY=m.arrowEndY,g.midX=m.midX,g.midY=m.midY,g.labelAngle=m.labelAngle,g.sourceLabelAngle=m.sourceLabelAngle,g.targetLabelAngle=m.targetLabelAngle}}}},{updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i;t.drag.push(i=e[n])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(ui),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}}].forEach(function(t){j(bs,t)});var _s={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[t]=r[t]||{}).image=new Image;return o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0}),"data:"===t.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=e),o.src=t,o}},xs={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},binder:function(t){var e=this,n=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==e.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(s){}e.supportsPassiveEvents=r}var o=function(r,i,o){var s=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(s[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:s}),(t.addEventListener||t.on).apply(t,s),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=function(t){return t.selected()},n=function(e,n,r,i){null==e&&(e=t.cy);for(var o=0;o<n.length;o++)e.emit({originalEvent:r,type:n[o],position:i})},r=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},o=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.pannable()){for(var i=0;n&&i<n.length;i++)if((e=n[i]).isNode()&&e.isParent()&&!e.pannable()){r=!1;break}}else r=!0;return r},s=function(t){t[0]._private.rscratch.inDragLayer=!0},a=function(t){t[0]._private.rscratch.isGrabTarget=!0},l=function(t,e){var n=e.addToList;n.has(t)||(n.merge(t),function(t){t[0]._private.grabbed=!0}(t))},u=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(s),e.neighborhood().stdFilter(function(t){return!r||t.isEdge()}).forEach(s)),n.addToList&&e.forEach(function(t){l(t,n)}),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(s),n.connectedEdges().forEach(s)),e.addToList&&e.addToList.unmerge(n)}}(e,n),d(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},c=u,h=function(e){e&&(t.getCachedZSortedEles().forEach(function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)}),t.updateCachedGrabbedEles())},d=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(s),r.forEach(s)),e.addToList&&r.forEach(function(t){l(t,e)})}}},p=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},f="undefined"!=typeof MutationObserver,g="undefined"!=typeof ResizeObserver;f?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++)if(r[i]===t.container){t.destroy();break}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(e){t.destroy()});var m=i(function(){t.cy.resize()},100);f&&(t.styleObserver=new MutationObserver(m),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",m),g&&(t.resizeObserver=new ResizeObserver(m),t.resizeObserver.observe(t.container));var v=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,function(e){t.registerBinding(e,"transitionend",v),t.registerBinding(e,"animationend",v),t.registerBinding(e,"scroll",v)}),t.registerBinding(t.container,"contextmenu",function(t){t.preventDefault()});var y=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],s=n[3],a=e.touches?e.touches:[e],l=!1,u=0;u<a.length;u++){var c=a[u];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+s){l=!0;break}}if(!l)return!1;for(var h=t.container,d=e.target.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}return!!p};t.registerBinding(t.container,"mousedown",function(e){if(y(e)){e.preventDefault(),p(),t.hoverData.capture=!0,t.hoverData.which=e.which;var r=t.cy,i=[e.clientX,e.clientY],o=t.projectIntoViewport(i[0],i[1]),s=t.selection,l=t.findNearestElements(o[0],o[1],!0,!1),h=l[0],d=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i,3==e.which){t.hoverData.cxtStarted=!0;var f={originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}};h?(h.activate(),h.emit(f),t.hoverData.down=h):r.emit(f),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(h&&h.activate(),null!=h&&t.nodeIsGrabbable(h)){var g=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(a(h),h.selected()){d=t.dragData.possibleDragElements=r.collection();var m=r.$(function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)});u(m,{addToList:d}),h.emit(g("grabon")),m.forEach(function(t){t.emit(g("grab"))})}else d=t.dragData.possibleDragElements=r.collection(),c(h,{addToList:d}),h.emit(g("grabon")).emit(g("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=h,t.hoverData.downs=l,t.hoverData.downTime=(new Date).getTime(),n(h,["mousedown","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==h?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):h.pannable()&&(s[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:e,type:"taphold",position:{x:o[0],y:o[1]}})}},t.tapholdDuration)}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}},!1),t.registerBinding(window,"mousemove",function(e){if(t.hoverData.capture||y(e)){var i=!1,s=t.cy,a=s.zoom(),l=[e.clientX,e.clientY],c=t.projectIntoViewport(l[0],l[1]),d=t.hoverData.mdownPos,p=t.hoverData.mdownGPos,f=t.selection,g=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(g=t.findNearestElement(c[0],c[1],!0,!1));var m,v=t.hoverData.last,b=t.hoverData.down,_=[c[0]-f[2],c[1]-f[3]],x=t.dragData.possibleDragElements;if(p){var w=l[0]-p[0],E=l[1]-p[1];t.hoverData.isOverThresholdDrag=m=w*w+E*E>=t.desktopTapThreshold2}var C=r(e);m&&(t.hoverData.tapholdCancelled=!0),i=!0,n(g,["mousemove","vmousemove","tapdrag"],e,{x:c[0],y:c[1]});var k=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||s.emit({originalEvent:e,type:"boxstart",position:{x:c[0],y:c[1]}}),f[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(m){var T={originalEvent:e,type:"cxtdrag",position:{x:c[0],y:c[1]}};b?b.emit(T):s.emit(T),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&g===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:c[0],y:c[1]}}),t.hoverData.cxtOver=g,g&&g.emit({originalEvent:e,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(t.hoverData.dragging){if(i=!0,s.panningEnabled()&&s.userPanningEnabled()){var P;if(t.hoverData.justStartedPan){var A=t.hoverData.mdownPos;P={x:(c[0]-A[0])*a,y:(c[1]-A[1])*a},t.hoverData.justStartedPan=!1}else P={x:_[0]*a,y:_[1]*a};s.panBy(P),s.emit("dragpan"),t.hoverData.dragged=!0}c=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=f[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==v||(v&&n(v,["mouseout","tapdragout"],e,{x:c[0],y:c[1]}),g&&n(g,["mouseover","tapdragover"],e,{x:c[0],y:c[1]}),t.hoverData.last=g),b)if(m){if(s.boxSelectionEnabled()&&C)b&&b.grabbed()&&(h(x),b.emit("freeon"),x.emit("free"),t.dragData.didDrag&&(b.emit("dragfreeon"),x.emit("dragfree"))),k();else if(b&&b.grabbed()&&t.nodeIsDraggable(b)){var D=!t.dragData.didDrag;D&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var O=s.collection();t.hoverData.draggingEles||u(x,{inDragLayer:!0});var M={x:0,y:0};if(S(_[0])&&S(_[1])&&(M.x+=_[0],M.y+=_[1],D)){var I=t.hoverData.dragDelta;I&&S(I[0])&&S(I[1])&&(M.x+=I[0],M.y+=I[1])}for(var L=0;L<x.length;L++){var N=x[L];t.nodeIsDraggable(N)&&N.grabbed()&&O.push(N)}t.hoverData.draggingEles=!0,O.silentShift(M).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(_[0]),e.push(_[1])):(e[0]+=_[0],e[1]+=_[1])}();i=!0}else m&&(t.hoverData.dragging||!s.boxSelectionEnabled()||!C&&s.panningEnabled()&&s.userPanningEnabled()?!t.hoverData.selecting&&s.panningEnabled()&&s.userPanningEnabled()&&o(b,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,f[4]=0,t.data.bgActivePosistion=Ht(d),t.redrawHint("select",!0),t.redraw()):k(),b&&b.pannable()&&b.active()&&b.unactivate());return f[2]=c[0],f[3]=c[1],i?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}},!1),t.registerBinding(window,"mouseup",function(i){if(t.hoverData.capture){t.hoverData.capture=!1;var o=t.cy,s=t.projectIntoViewport(i.clientX,i.clientY),a=t.selection,l=t.findNearestElement(s[0],s[1],!0,!1),u=t.dragData.possibleDragElements,c=t.hoverData.down,d=r(i);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,c&&c.unactivate(),3===t.hoverData.which){var p={originalEvent:i,type:"cxttapend",position:{x:s[0],y:s[1]}};if(c?c.emit(p):o.emit(p),!t.hoverData.cxtDragged){var f={originalEvent:i,type:"cxttap",position:{x:s[0],y:s[1]}};c?c.emit(f):o.emit(f)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(l,["mouseup","tapend","vmouseup"],i,{x:s[0],y:s[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||n(c,["click","tap","vclick"],i,{x:s[0],y:s[1]}),null!=c||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(i)||(o.$(e).unselect(["tapunselect"]),u.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=u=o.collection()),l!=c||t.dragData.didDrag||t.hoverData.selecting||null!=l&&l._private.selectable&&(t.hoverData.dragging||("additive"===o.selectionType()||d?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):d||(o.$(e).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var g=o.collection(t.getAllInBox(a[0],a[1],a[2],a[3]));t.redrawHint("select",!0),g.length>0&&t.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:i,position:{x:s[0],y:s[1]}}),"additive"===o.selectionType()||d||o.$(e).unmerge(g).unselect(),g.emit("box").stdFilter(function(t){return t.selectable()&&!t.selected()}).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!a[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var m=c&&c.grabbed();h(u),m&&(c.emit("freeon"),u.emit("free"),t.dragData.didDrag&&(c.emit("dragfreeon"),u.emit("dragfree")))}}a[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var b,_,x,w,E,C,k,T,P,A,D,O,M,I=function(e){if(!t.scrollingPage){var n=t.cy,r=n.zoom(),i=n.pan(),o=t.projectIntoViewport(e.clientX,e.clientY),s=[o[0]*r+i.x,o[1]*r+i.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])e.preventDefault();else if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){var a;e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),a=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,a*=t.wheelSensitivity,1===e.deltaMode&&(a*=33);var l=n.zoom()*Math.pow(10,a);"gesturechange"===e.type&&(l=t.gestureStartZoom*e.scale),n.zoom({level:l,renderedPosition:{x:s[0],y:s[1]}}),n.emit("gesturechange"===e.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",I,!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(e){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||e.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(e){t.hasTouchStarted||I(e)},!0),t.registerBinding(t.container,"mouseout",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),t.registerBinding(t.container,"mouseover",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var L,N,R,F,B=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},j=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",L=function(e){if(t.hasTouchStarted=!0,y(e)){p(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(e.touches[0]){var s=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(e.touches[1]&&(s=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),i[2]=s[0],i[3]=s[1]),e.touches[2]&&(s=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),i[4]=s[0],i[5]=s[1]),e.touches[1]){t.touchData.singleTouchMoved=!0,h(t.dragData.touchDragEles);var l=t.findContainerClientCoords();D=l[2],O=l[3],_=e.touches[0].clientY-(A=l[1]),x=e.touches[1].clientX-(P=l[0]),w=e.touches[1].clientY-A,M=0<=(b=e.touches[0].clientX-P)&&b<=D&&0<=x&&x<=D&&0<=_&&_<=O&&0<=w&&w<=O;var d=r.pan(),f=r.zoom();if(E=B(b,_,x,w),C=j(b,_,x,w),T=[((k=[(b+x)/2,(_+w)/2])[0]-d.x)/f,(k[1]-d.y)/f],C<4e4&&!e.touches[2]){var g=t.findNearestElement(i[0],i[1],!0,!0),m=t.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):m&&m.isNode()?(m.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=m):r.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2])r.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var v=t.findNearestElements(i[0],i[1],!0,!0),S=v[0];if(null!=S&&(S.activate(),t.touchData.start=S,t.touchData.starts=v,t.nodeIsGrabbable(S))){var I=t.dragData.touchDragEles=r.collection(),L=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),S.selected()?(L=r.$(function(e){return e.selected()&&t.nodeIsGrabbable(e)}),u(L,{addToList:I})):c(S,{addToList:I}),a(S);var N=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};S.emit(N("grabon")),L?L.forEach(function(t){t.emit(N("grab"))}):S.emit(N("grab"))}n(S,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==S&&(t.data.bgActivePosistion={x:s[0],y:s[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})},t.tapholdDuration)}if(e.touches.length>=1){for(var R=t.touchData.startPosition=[],F=0;F<i.length;F++)R[F]=o[F]=i[F];var z=e.touches[0];t.touchData.startGPosition=[z.clientX,z.clientY]}}},!1),t.registerBinding(window,"touchmove",N=function(e){var r=t.touchData.capture;if(r||y(e)){var i=t.selection,s=t.cy,a=t.touchData.now,l=t.touchData.earlier,c=s.zoom();if(e.touches[0]){var d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);a[0]=d[0],a[1]=d[1]}e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),a[2]=d[0],a[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),a[4]=d[0],a[5]=d[1]);var p,f=t.touchData.startGPosition;if(r&&e.touches[0]&&f){for(var g=[],m=0;m<a.length;m++)g[m]=a[m]-l[m];var v=e.touches[0].clientX-f[0],k=e.touches[0].clientY-f[1];p=v*v+k*k>=t.touchTapThreshold2}if(r&&t.touchData.cxt){e.preventDefault();var D=j(R=e.touches[0].clientX-P,F=e.touches[0].clientY-A,z=e.touches[1].clientX-P,V=e.touches[1].clientY-A);if(D/C>=2.25||D>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var O={originalEvent:e,type:"cxttapend",position:{x:a[0],y:a[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(O),t.touchData.start=null):s.emit(O)}}if(r&&t.touchData.cxt){O={originalEvent:e,type:"cxtdrag",position:{x:a[0],y:a[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(O):s.emit(O),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var I=t.findNearestElement(a[0],a[1],!0,!0);t.touchData.cxtOver&&I===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:a[0],y:a[1]}}),t.touchData.cxtOver=I,I&&I.emit({originalEvent:e,type:"cxtdragover",position:{x:a[0],y:a[1]}}))}else if(r&&e.touches[2]&&s.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||s.emit({originalEvent:e,type:"boxstart",position:{x:a[0],y:a[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(a[0]+a[2]+a[4])/3,i[3]=(a[1]+a[3]+a[5])/3):(i[0]=(a[0]+a[2]+a[4])/3,i[1]=(a[1]+a[3]+a[5])/3,i[2]=(a[0]+a[2]+a[4])/3+1,i[3]=(a[1]+a[3]+a[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(r&&e.touches[1]&&!t.touchData.didSelect&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),et=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var L=0;L<et.length;L++){var N=et[L]._private;N.grabbed=!1,N.rscratch.inDragLayer=!1}}var R,F,z,V,G=t.touchData.start,U=B(R=e.touches[0].clientX-P,F=e.touches[0].clientY-A,z=e.touches[1].clientX-P,V=e.touches[1].clientY-A),H=U/E;if(M){var q=(R-b+(z-x))/2,W=(F-_+(V-w))/2,$=s.zoom(),Y=$*H,K=s.pan(),X=T[0]*$+K.x,Q=T[1]*$+K.y,Z={x:-Y/$*(X-K.x-q)+X,y:-Y/$*(Q-K.y-W)+Q};G&&G.active()&&(h(et=t.dragData.touchDragEles),t.redrawHint("drag",!0),t.redrawHint("eles",!0),G.unactivate().emit("freeon"),et.emit("free"),t.dragData.didDrag&&(G.emit("dragfreeon"),et.emit("dragfree"))),s.viewport({zoom:Y,pan:Z,cancelOnFailedZoom:!0}),s.emit("pinchzoom"),E=U,b=R,_=F,x=z,w=V,t.pinching=!0}e.touches[0]&&(d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),a[0]=d[0],a[1]=d[1]),e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),a[2]=d[0],a[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),a[4]=d[0],a[5]=d[1])}else if(e.touches[0]&&!t.touchData.didSelect){var J=t.touchData.start,tt=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(I=t.findNearestElement(a[0],a[1],!0,!0)),r&&null!=J&&e.preventDefault(),r&&null!=J&&t.nodeIsDraggable(J))if(p){var et=t.dragData.touchDragEles,nt=!t.dragData.didDrag;nt&&u(et,{inDragLayer:!0}),t.dragData.didDrag=!0;var rt={x:0,y:0};S(g[0])&&S(g[1])&&(rt.x+=g[0],rt.y+=g[1],nt&&(t.redrawHint("eles",!0),(it=t.touchData.dragDelta)&&S(it[0])&&S(it[1])&&(rt.x+=it[0],rt.y+=it[1]))),t.hoverData.draggingEles=!0,et.silentShift(rt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==l[0]&&t.touchData.startPosition[1]==l[1]&&t.redrawHint("eles",!0),t.redraw()}else{var it;0===(it=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(it.push(g[0]),it.push(g[1])):(it[0]+=g[0],it[1]+=g[1])}if(n(J||I,["touchmove","tapdrag","vmousemove"],e,{x:a[0],y:a[1]}),J&&J.grabbed()||I==tt||(tt&&tt.emit({originalEvent:e,type:"tapdragout",position:{x:a[0],y:a[1]}}),I&&I.emit({originalEvent:e,type:"tapdragover",position:{x:a[0],y:a[1]}})),t.touchData.last=I,r)for(L=0;L<a.length;L++)a[L]&&t.touchData.startPosition[L]&&p&&(t.touchData.singleTouchMoved=!0);r&&(null==J||J.pannable())&&s.panningEnabled()&&s.userPanningEnabled()&&(o(J,t.touchData.starts)&&(e.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Ht(t.touchData.startPosition)),t.swipePanning?(s.panBy({x:g[0]*c,y:g[1]*c}),s.emit("dragpan")):p&&(t.swipePanning=!0,s.panBy({x:v*c,y:k*c}),s.emit("dragpan"),J&&(J.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),a[0]=d[0],a[1]=d[1])}for(m=0;m<a.length;m++)l[m]=a[m];r&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",R=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",F=function(r){var i=t.touchData.start;if(t.touchData.capture){0===r.touches.length&&(t.touchData.capture=!1),r.preventDefault();var o=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var s,a=t.cy,l=a.zoom(),u=t.touchData.now,c=t.touchData.earlier;if(r.touches[0]){var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=d[0],u[1]=d[1]}if(r.touches[1]&&(d=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),u[2]=d[0],u[3]=d[1]),r.touches[2]&&(d=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),u[4]=d[0],u[5]=d[1]),i&&i.unactivate(),t.touchData.cxt){if(s={originalEvent:r,type:"cxttapend",position:{x:u[0],y:u[1]}},i?i.emit(s):a.emit(s),!t.touchData.cxtDragged){var p={originalEvent:r,type:"cxttap",position:{x:u[0],y:u[1]}};i?i.emit(p):a.emit(p)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&a.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var f=a.collection(t.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,t.redrawHint("select",!0),a.emit({type:"boxend",originalEvent:r,position:{x:u[0],y:u[1]}}),f.emit("box").stdFilter(function(t){return t.selectable()&&!t.selected()}).select().emit("boxselect"),f.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),r.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=i){var m=i._private.grabbed;h(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),m&&(i.emit("freeon"),g.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]}),i.unactivate(),t.touchData.start=null}else{var v=t.findNearestElement(u[0],u[1],!0,!0);n(v,["touchend","tapend","vmouseup","tapdragout"],r,{x:u[0],y:u[1]})}var y=t.touchData.startPosition[0]-u[0],b=t.touchData.startPosition[1]-u[1],_=(y*y+b*b)*l*l;t.touchData.singleTouchMoved||(i||a.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:u[0],y:u[1]})),null!=i&&!t.dragData.didDrag&&i._private.selectable&&_<t.touchTapThreshold2&&!t.pinching&&("single"===a.selectionType()?(a.$(e).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var x=0;x<u.length;x++)c[x]=u[x];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),r.touches.length<2&&(1===r.touches.length&&(t.touchData.startGPosition=[r.touches[0].clientX,r.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var z=[],V=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},G=function(t){for(var e=0;e<z.length;e++)if(z[e].event.pointerId===t.pointerId)return void z.splice(e,1)},U=function(t){t.touches=z.map(function(t){return t.touch})},H=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",function(t){H(t)||(t.preventDefault(),function(t){z.push(function(t){return{event:t,touch:V(t)}}(t))}(t),U(t),L(t))}),t.registerBinding(t.container,"pointerup",function(t){H(t)||(G(t),U(t),F(t))}),t.registerBinding(t.container,"pointercancel",function(t){H(t)||(G(t),U(t),R())}),t.registerBinding(t.container,"pointermove",function(t){H(t)||(t.preventDefault(),function(t){var e=z.filter(function(e){return e.event.pointerId===t.pointerId})[0];e.event=t,e.touch=V(t)}(t),U(t),N(t))})}}},ws={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,s){return xe(i,o,this.points,t,e,n/2,r/2,s)},checkPoint:function(t,e,n,r,i,o,s){return fe(t,e,this.points,o,s,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,s){return function(t,e,n,r,i,o){var s=n-t,a=r-e;s/=i,a/=o;var l=Math.sqrt(s*s+a*a),u=l-1;if(u<0)return[];var c=u/l;return[(n-t)*c+t,(r-e)*c+e]}(i,o,t,e,n/2+s,r/2+s)},checkPoint:function(t,e,n,r,i,o,s){return ve(t,e,r,i,o,s,n)}}},generateRoundPolygon:function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var i,o=2*r;i=r<e.length/2-1?2*(r+1):0,n[4*r]=e[o],n[4*r+1]=e[o+1];var s=e[i]-e[o],a=e[i+1]-e[o+1],l=Math.sqrt(s*s+a*a);n[4*r+2]=s/l,n[4*r+3]=a/l}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("round-polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,o,s){return function(t,e,n,r,i,o,s,a){for(var l,u=[],c=new Array(n.length),h=o/2,d=s/2,p=Te(o,s),f=0;f<n.length/4;f++){var g,m;m=0===f?n.length-2:4*f-2,g=4*f+2;var v=r+h*n[4*f],y=i+d*n[4*f+1],b=p/Math.tan(Math.acos(-n[m]*n[g]-n[m+1]*n[g+1])/2),_=v-b*n[m],x=y-b*n[m+1],w=v+b*n[g],S=y+b*n[g+1];0===f?(c[n.length-2]=_,c[n.length-1]=x):(c[4*f-2]=_,c[4*f-1]=x),c[4*f]=w,c[4*f+1]=S;var E=n[m+1],C=-n[m];E*n[g]+C*n[g+1]<0&&(E*=-1,C*=-1),0!==(l=ye(t,e,r,i,_+E*p,x+C*p,p)).length&&u.push(l[0],l[1])}for(var k=0;k<c.length/4;k++)0!==(l=_e(t,e,r,i,c[4*k],c[4*k+1],c[4*k+2],c[4*k+3],!1)).length&&u.push(l[0],l[1]);if(u.length>2){for(var T=[u[0],u[1]],P=Math.pow(T[0]-t,2)+Math.pow(T[1]-e,2),A=1;A<u.length/2;A++){var D=Math.pow(u[2*A]-t,2)+Math.pow(u[2*A+1]-e,2);D<=P&&(T[0]=u[2*A],T[1]=u[2*A+1],P=D)}return T}return u}(i,o,this.points,t,e,n,r)},checkPoint:function(t,e,n,r,i,o,s){return function(t,e,n,r,i,o,s){for(var a=new Array(n.length),l=o/2,u=s/2,c=Te(o,s),h=c*c,d=0;d<n.length/4;d++){var p,f;f=0===d?n.length-2:4*d-2,p=4*d+2;var g=r+l*n[4*d],m=i+u*n[4*d+1],v=c/Math.tan(Math.acos(-n[f]*n[p]-n[f+1]*n[p+1])/2),y=g-v*n[f],b=m-v*n[f+1],_=g+v*n[p],x=m+v*n[p+1];a[4*d]=y,a[4*d+1]=b,a[4*d+2]=_,a[4*d+3]=x;var w=n[f+1],S=-n[f];w*n[p]+S*n[p+1]<0&&(w*=-1,S*=-1);var E=b+S*c;if(Math.pow(y+w*c-t,2)+Math.pow(E-e,2)<=h)return!0}return pe(t,e,a)}(t,e,this.points,o,s,r,i)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Se(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,s){return le(i,o,t,e,n,r,s)},checkPoint:function(t,e,n,r,i,o,s){var a=ke(r,i),l=2*a;return!!(fe(t,e,this.points,o,s,r,i-l,[0,-1],n)||fe(t,e,this.points,o,s,r-l,i,[0,-1],n)||ve(t,e,l,l,o-r/2+a,s-i/2+a,n)||ve(t,e,l,l,o+r/2-a,s-i/2+a,n)||ve(t,e,l,l,o+r/2-a,s+i/2-a,n)||ve(t,e,l,l,o-r/2+a,s+i/2-a,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Se(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,s=t/2,a=n-s,l=n+s,u=r-o,c=r+o;return{topLeft:[a,u+i,a+i,u,a+i,u+i],topRight:[l-i,u,l,u+i,l-i,u+i],bottomRight:[l,c-i,l-i,c,l-i,c-i],bottomLeft:[a+i,c,a,c-i,a+i,c-i]}},intersectLine:function(t,e,n,r,i,o,s){var a=this.generateCutTrianglePts(n+2*s,r+2*s,t,e),l=[].concat.apply([],[a.topLeft.splice(0,4),a.topRight.splice(0,4),a.bottomRight.splice(0,4),a.bottomLeft.splice(0,4)]);return xe(i,o,l,t,e)},checkPoint:function(t,e,n,r,i,o,s){if(fe(t,e,this.points,o,s,r,i-2*this.cornerLength,[0,-1],n))return!0;if(fe(t,e,this.points,o,s,r-2*this.cornerLength,i,[0,-1],n))return!0;var a=this.generateCutTrianglePts(r,i,o,s);return pe(t,e,a.topLeft)||pe(t,e,a.topRight)||pe(t,e,a.bottomRight)||pe(t,e,a.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Se(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,s){var a=this.generateBarrelBezierPts(n+2*s,r+2*s,t,e),l=function(t){var e=Zt({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=Zt({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),r=Zt({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},u=[].concat(l(a.topLeft),l(a.topRight),l(a.bottomRight),l(a.bottomLeft));return xe(i,o,u,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,o=t/2,s=n-o,a=n+o,l=r-i,u=r+i,c=Pe(t,e),h=c.heightOffset,d=c.widthOffset,p=c.ctrlPtOffsetPct*t,f={topLeft:[s,l+h,s+p,l,s+d,l],topRight:[a-d,l,a-p,l,a,l+h],bottomRight:[a,u-h,a-p,u,a-d,u],bottomLeft:[s+d,u,s+p,u,s,u-h]};return f.topLeft.isTop=!0,f.topRight.isTop=!0,f.bottomLeft.isBottom=!0,f.bottomRight.isBottom=!0,f},checkPoint:function(t,e,n,r,i,o,s){var a=Pe(r,i),l=a.widthOffset;if(fe(t,e,this.points,o,s,r,i-2*a.heightOffset,[0,-1],n))return!0;if(fe(t,e,this.points,o,s,r-2*l,i,[0,-1],n))return!0;for(var u=this.generateBarrelBezierPts(r,i,o,s),c=function(t,e,n){var r,i,o=n[4],s=n[2],a=n[0],l=n[5],u=n[1],c=Math.min(o,a),h=Math.max(o,a),d=Math.min(l,u),p=Math.max(l,u);if(c<=t&&t<=h&&d<=e&&e<=p){var f=[(r=o)-2*(i=s)+a,2*(i-r),r],g=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),s=2*t;return[(-e+o)/s,(-e-o)/s]}(f[0],f[1],f[2],t).filter(function(t){return 0<=t&&t<=1});if(g.length>0)return g[0]}return null},h=Object.keys(u),d=0;d<h.length;d++){var p=u[h[d]],f=c(t,e,p);if(null!=f){var g=Qt(p[5],p[3],p[1],f);if(p.isTop&&g<=e)return!0;if(p.isBottom&&e<=g)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Se(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,o,s){var a=e-(r/2+s),l=_e(i,o,t,e,t-(n/2+s),a,t+(n/2+s),a,!1);return l.length>0?l:le(i,o,t,e,n,r,s)},checkPoint:function(t,e,n,r,i,o,s){var a=ke(r,i),l=2*a;if(fe(t,e,this.points,o,s,r,i-l,[0,-1],n))return!0;if(fe(t,e,this.points,o,s,r-l,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n;return!!pe(t,e,[o-u,s-c,o-u,s,o+u,s,o+u,s-c])||!!ve(t,e,l,l,o+r/2-a,s+i/2-a,n)||!!ve(t,e,l,l,o-r/2+a,s+i/2-a,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Se(3,0)),this.generateRoundPolygon("round-triangle",Se(3,0)),this.generatePolygon("rectangle",Se(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",Se(5,0)),this.generateRoundPolygon("round-pentagon",Se(5,0)),this.generatePolygon("hexagon",Se(6,0)),this.generateRoundPolygon("round-hexagon",Se(6,0)),this.generatePolygon("heptagon",Se(7,0)),this.generateRoundPolygon("round-heptagon",Se(7,0)),this.generatePolygon("octagon",Se(8,0)),this.generateRoundPolygon("round-octagon",Se(8,0));var r=new Array(20),i=Ce(5,0),o=Ce(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var a=0;a<o.length/2;a++)o[2*a]*=s,o[2*a+1]*=s;for(a=0;a<5;a++)r[4*a]=i[2*a],r[4*a+1]=i[2*a+1],r[4*a+2]=o[2*a],r[4*a+3]=o[2*a+1];r=Ee(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}},Ss={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||vt();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&ht("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(t,e){return e.priority-t.priority})}}},Es=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};Ss.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,W(function n(r){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){Es(t,!0,r);var i=$();t.render(t.renderOptions);var o=t.lastDrawTime=$();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else Es(t,!1,r);t.skipFrame=!1,W(n)}}))};var Cs=function(t){this.init(t)},ks=Cs.prototype;ks.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],ks.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(d){var r=d.document,i=r.head,o="__________cytoscape_container",s=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(o)<0&&(n.className=(n.className||"")+" "+o),!s){var a=r.createElement("style");a.id="__________cytoscape_stylesheet",a.innerHTML="."+o+" { position: relative; }",i.insertBefore(a,i.children[0])}"static"===d.getComputedStyle(n).getPropertyValue("position")&&pt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=S(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},ks.notify=function(t,e){var n=this;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&n.cy.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},ks.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(i){}},ks.isHeadless=function(){return!1},[ss,bs,_s,xs,ws,Ss].forEach(function(t){j(ks,t)});var Ts=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=i(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold);n.beforeRender(function(i,o){var s=$(),a=n.averageRedrawTime,l=n.lastRedrawTime,u=[],c=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=$(),p=d-s,f=d-o;if(l<16.666666666666668){if(f>=t.deqFastCost*(16.666666666666668-(i?a:0)))break}else if(i){if(p>=t.deqCost*l||p>=t.deqAvgCost*a)break}else if(f>=16.666666666666668*t.deqNoDrawCost)break;var g=t.deq(e,h,c);if(!(g.length>0))break;for(var m=0;m<g.length;m++)u.push(g[m])}u.length>0&&(t.onDeqd(e,u),!i&&t.shouldRedraw(e,u,h,c)&&r())},(t.priority||ct)(e))}}},Ps=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;a(this,t),this.idsByKey=new St,this.keyForId=new St,this.cachesByLvl=new St,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return u(t,[{key:"getIdsFor",value:function(t){null==t&&ht("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new Ct,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new St,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach(function(n){return e.deleteCache(t,n)})}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),As={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Ds=yt({getKey:null,doesEleInvalidateKey:lt,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:at,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Os=function(t,e){this.renderer=t,this.onDequeues=[];var n=Ds(e);j(this,n),this.lookup=new Ps(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},Ms=Os.prototype;Ms.reasons=As,Ms.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},Ms.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},Ms.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new o(function(t,e){return e.reqs-t.reqs})},Ms.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Ms.getElement=function(t,e,n,r,i){var o=this,s=this.renderer,a=s.cy.zoom(),l=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed())return null;if(!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(Wt(a*n))),r<-4)r=-4;else if(a>=7.99||r>3)return null;var u=Math.pow(2,r),c=e.h*u,h=e.w*u,d=s.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,d))return null;var p,f=l.get(t,r);if(f&&f.invalidated&&(f.invalidated=!1,f.texture.invalidatedWidth-=f.width),f)return f;if(p=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||h>1024)return null;var g=o.getTextureQueue(p),m=g[g.length-2],v=function(){return o.recycleTexture(p,h)||o.addTexture(p,h)};m||(m=g[g.length-1]),m||(m=v()),m.width-m.usedWidth<h&&(m=v());for(var y,b=function(t){return t&&t.scaledLabelShown===d},_=i&&i===As.dequeue,x=i&&i===As.highQuality,w=i&&i===As.downscale,S=r+1;S<=3;S++){var E=l.get(t,S);if(E){y=E;break}}var C=y&&y.level===r+1?y:null,k=function(){m.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,m.usedWidth,0,h,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,h,p),b(C))k();else if(b(y)){if(!x)return o.queueElement(t,y.level-1),y;for(var T=y.level;T>r;T--)C=o.getElement(t,e,n,T,As.downscale);k()}else{var P;if(!_&&!x&&!w)for(var A=r-1;A>=-4;A--){var D=l.get(t,A);if(D){P=D;break}}if(b(P))return o.queueElement(t,r),P;m.context.translate(m.usedWidth,0),m.context.scale(u,u),this.drawElement(m.context,t,e,d,!1),m.context.scale(1/u,1/u),m.context.translate(-m.usedWidth,0)}return f={x:m.usedWidth,texture:m,level:r,scale:u,width:h,height:c,scaledLabelShown:d},m.usedWidth+=Math.ceil(h+8),m.eleCaches.push(f),l.set(t,r,f),o.checkTextureFullness(m),f},Ms.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},Ms.invalidateElement=function(t){var e=this.lookup,n=[];if(e.isInvalid(t)){for(var r=-4;r<=3;r++){var i=e.getForCachedKey(t,r);i&&n.push(i)}if(e.invalidate(t))for(var o=0;o<n.length;o++){var s=n[o],a=s.texture;a.invalidatedWidth+=s.width,s.invalidated=!0,this.checkTextureUtility(a)}this.removeFromQueue(t)}},Ms.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},Ms.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?bt(e,t):t.fullnessChecks++},Ms.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;bt(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];r.deleteCache(s.key,s.level)}_t(i),this.getRetiredTextureQueue(e).push(t)},Ms.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},Ms.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var o=r[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,_t(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),bt(r,o),n.push(o),o}},Ms.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),o=r[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),r[i]=s}},Ms.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,o=0;o<1&&e.size()>0;o++){var s=e.pop(),a=s.key,l=s.eles[0],u=i.hasCache(l,s.level);if(n[a]=null,!u){r.push(s);var c=this.getBoundingBox(l);this.getElement(l,c,t,s.level,As.dequeue)}}return r},Ms.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=st,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},Ms.onDequeue=function(t){this.onDequeues.push(t)},Ms.offDequeue=function(t){bt(this.onDequeues,t)},Ms.setupDequeueing=Ts({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var o=e[i].eles,s=0;s<o.length;s++){var a=o[s].boundingBox();if(oe(a,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var Is=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=$()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=i(function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)},50),n.beforeRender(function(t,n){e.skipping=n-e.lastInvalidationTime<=250},n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new o(function(t,e){return e.reqs-t.reqs}),e.setupDequeueing()},Ls=Is.prototype,Ns=0,Rs=Math.pow(2,53)-1;Ls.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),s={id:Ns=++Ns%Rs,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},a=s.context,l=-s.bb.x1,u=-s.bb.y1;return a.scale(n,n),a.translate(l,u),s},Ls.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(Wt(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var s,a,l=r.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[];if(r.levelIsComplete(n,t))return c;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return a=l[e],!0},i=function(t){if(!a)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var s=c[o];s.invalid&&bt(c,s)}}();var h=function(e){var i=(e=e||{}).after;if(function(){if(!s){s=te();for(var e=0;e<t.length;e++)n=s,r=t[e].boundingBox(),n.x1=Math.min(n.x1,r.x1),n.x2=Math.max(n.x2,r.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,r.y1),n.y2=Math.max(n.y2,r.y2),n.h=n.y2-n.y1}var n,r}(),s.w*u*(s.h*u)>16e6)return null;var o=r.makeLayer(s,n);if(null!=i){var a=c.indexOf(i)+1;c.splice(a,0,o)}else(void 0===e.insert||e.insert)&&c.unshift(o);return o};if(r.skipping&&!o)return null;for(var d=null,p=t.length/1,f=!o,g=0;g<t.length;g++){var m=t[g],v=m._private.rscratch,y=v.imgLayerCaches=v.imgLayerCaches||{},b=y[n];if(b)d=b;else{if((!d||d.eles.length>=p||!ae(d.bb,m.boundingBox()))&&!(d=h({insert:!0,after:d})))return null;a||f?r.queueLayer(d,m):r.drawEleInLayer(d,m,n,e),d.eles.push(m),y[n]=d}}return a||(f?null:c)},Ls.getEleLevelForLayerLevel=function(t,e){return t},Ls.drawEleInLayer=function(t,e,n,r){var i=this.renderer,o=t.context,s=e.boundingBox();0!==s.w&&0!==s.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,n,!0),i.setImgSmoothing(o,!0))},Ls.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===e.length},Ls.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,s=0;s<e.length;s++)if(i.eles[0]===e[s]){o=s;break}if(o<0)this.invalidateLayer(i);else{var a=o;for(s=0;s<i.eles.length;s++)if(i.eles[s]!==e[a+s]){this.invalidateLayer(i);break}}}},Ls.updateElementsInLayers=function(t,e){for(var n=k(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],o=n?t[r]:t[r].ele,s=o._private.rscratch,a=s.imgLayerCaches=s.imgLayerCaches||{},l=-4;l<=2;l++){var u=a[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||e(u,o,i))}},Ls.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},Ls.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=$(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(t,n,r){e.invalidateLayer(t)}))},Ls.invalidateLayer=function(t){if(this.lastInvalidationTime=$(),!t.invalid){var e=t.level,n=t.eles;bt(this.layersByLevel[e],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var r=0;r<n.length;r++){var i=n[r]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}},Ls.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])})},Ls.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},Ls.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},Ls.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},Ls.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}this.requestRedraw()}},Ls.requestRedraw=i(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),Ls.setupDequeueing=Ts({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:ct,shouldRedraw:at,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var Fs,Bs={};function js(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function zs(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Vs(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++)t.lineTo((a=r[i]).x,a.y);var o=n,s=n[0];for(t.moveTo(s.x,s.y),i=1;i<o.length;i++){var a;t.lineTo((a=o[i]).x,a.y)}t.closePath&&t.closePath()}function Gs(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var o=e,s=o[0];t.moveTo(s.x,s.y);for(var a=0;a<o.length;a++){var l=o[a];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function Us(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}Bs.arrowShapeImpl=function(t){return(Fs||(Fs={polygon:js,"triangle-backcurve":zs,"triangle-tee":Vs,"circle-triangle":Gs,"triangle-cross":Vs,circle:Us}))[t]};var Hs={drawElement:function(t,e,n,r,i,o){e.isNode()?this.drawNode(t,e,n,r,i,o):this.drawEdge(t,e,n,r,i,o)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,o,s,a){var l=this,u=n.getBoundingBox(e);if(0!==u.w&&0!==u.h){var c=n.getElement(e,u,r,i,o);if(null!=c){var h=a(l,e);if(0===h)return;var d,p,f,g,m,v,y=s(l,e),b=u.x1,_=u.y1,x=u.w,w=u.h;if(0!==y){var S=n.getRotationPoint(e);t.translate(f=S.x,g=S.y),t.rotate(y),(m=l.getImgSmoothing(t))||l.setImgSmoothing(t,!0);var E=n.getRotationOffset(e);d=E.x,p=E.y}else d=b,p=_;1!==h&&(t.globalAlpha=(v=t.globalAlpha)*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,p,x,w),1!==h&&(t.globalAlpha=v),0!==y&&(t.rotate(-y),t.translate(-f,-g),m||l.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},qs=function(){return 0},Ws=function(t,e){return t.getTextAngle(e,null)},$s=function(t,e){return t.getTextAngle(e,"source")},Ys=function(t,e){return t.getTextAngle(e,"target")},Ks=function(t,e){return e.effectiveOpacity()},Xs=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};Hs.drawCachedElement=function(t,e,n,r,i,o){var s=this,a=s.data,l=a.eleTxrCache,u=a.lblTxrCache,c=a.slbTxrCache,h=a.tlbTxrCache,d=e.boundingBox(),p=!0===o?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&e.visible()&&(!r||oe(d,r))){var f=e.isEdge(),g=e.element()._private.rscratch.badLine;s.drawCachedElementPortion(t,e,l,n,i,p,qs,Ks),f&&g||s.drawCachedElementPortion(t,e,u,n,i,p,Ws,Xs),f&&!g&&(s.drawCachedElementPortion(t,e,c,n,i,p,$s,Xs),s.drawCachedElementPortion(t,e,h,n,i,p,Ys,Xs)),s.drawElementOverlay(t,e)}},Hs.drawElements=function(t,e){for(var n=0;n<e.length;n++)this.drawElement(t,e[n])},Hs.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++)this.drawCachedElement(t,e[i],n,r)},Hs.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,n,r)}},Hs.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var o=0;o<i.length;o++){var s=i[o],a=s.bb;0!==a.w&&0!==a.h&&t.drawImage(s.canvas,a.x1,a.y1,a.w,a.h)}else this.drawCachedElements(t,e,n,r)};var Qs={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,a=e._private.rscratch;if((!o||e.visible())&&!a.badLine&&null!=a.allpts&&!isNaN(a.allpts[0])){var l;n&&t.translate(-(l=n).x1,-l.y1);var u=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,f=u*c,g=u*c,m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;t.lineWidth=d,t.lineCap=p,s.eleStrokeStyle(t,e,n),s.drawEdgePath(e,t,a.allpts,h),t.lineCap="butt"},v=function(){i&&s.drawEdgeOverlay(t,e)},y=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;s.drawArrowheads(t,e,n)},b=function(){s.drawElementText(t,e,null,r)};t.lineJoin="round";var _="yes"===e.pstyle("ghost").value;if(_){var x=e.pstyle("ghost-offset-x").pfValue,w=e.pstyle("ghost-offset-y").pfValue,S=e.pstyle("ghost-opacity").value,E=f*S;t.translate(x,w),m(E),y(E),t.translate(-x,-w)}m(),y(),v(),b(),n&&t.translate(l.x1,l.y1)}},drawEdgeOverlay:function(t,e){if(e.visible()){var n=e.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),o=e._private.rscratch,s=2*e.pstyle("overlay-padding").pfValue,a=e.pstyle("overlay-color").value;t.lineWidth=s,t.lineCap="self"!==o.edgeType||i?"round":"butt",r.colorStrokeStyle(t,a[0],a[1],a[2],n),r.drawEdgePath(e,t,o.allpts,"solid")}}},drawEdgePath:function(t,e,n,r){var i,o=t._private.rscratch,s=e,a=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$");o.pathCacheKey&&o.pathCacheKey===h?(i=e=o.pathCache,a=!0):(i=e=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(s.setLineDash)switch(r){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash(u),s.lineDashOffset=c;break;case"solid":s.setLineDash([])}if(!a&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)e.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<n.length;p+=2)e.lineTo(n[p],n[p+1])}e=s,l?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(t,e,n,r,i,o,s){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var a=e.pstyle(n+"-arrow-shape").value;if("none"!==a){var l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",u=e.pstyle(n+"-arrow-fill").value,c=e.pstyle("width").pfValue,h=e.pstyle("opacity").value;void 0===s&&(s=h);var d=t.globalCompositeOperation;1===s&&"hollow"!==u||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(e,t,l,c,a,r,i,o),t.globalCompositeOperation=d);var p=e.pstyle(n+"-arrow-color").value;this.colorFillStyle(t,p[0],p[1],p[2],s),this.colorStrokeStyle(t,p[0],p[1],p[2],s),this.drawArrowShape(e,t,u,c,a,r,i,o)}}},drawArrowShape:function(t,e,n,r,i,o,s,a){var l,u=this,c=this.usePaths()&&"triangle-cross"!==i,h=!1,d=e,p={x:o,y:s},f=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,f),m=u.arrowShapes[i];if(c){var v=u.arrowPathCache=u.arrowPathCache||[],y=tt(i),b=v[y];null!=b?(l=e=b,h=!0):(l=e=new Path2D,v[y]=l)}h||(e.beginPath&&e.beginPath(),c?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,g,a,p,r),e.closePath&&e.closePath()),e=d,c&&(e.translate(o,s),e.rotate(a),e.scale(g,g)),"filled"!==n&&"both"!==n||(c?e.fill(l):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(m.matchEdgeWidth?r:1)/(c?g:1),e.lineJoin="miter",c?e.stroke(l):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-a),e.translate(-o,-s))}},Zs={safeDrawImage:function(t,e,n,r,i,o,s,a,l,u){i<=0||o<=0||l<=0||u<=0||t.drawImage(e,n,r,i,o,s,a,l,u)},drawInscribedImage:function(t,e,n,r,i){var o=this,s=n.position(),a=s.x,l=s.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),h=c(n,"background-fit","value",r),d=c(n,"background-repeat","value",r),p=n.width(),f=n.height(),g=2*n.padding(),m=p+("inner"===c(n,"background-width-relative-to","value",r)?0:g),v=f+("inner"===c(n,"background-height-relative-to","value",r)?0:g),y=n._private.rscratch,b="node"===c(n,"background-clip","value",r),_=c(n,"background-image-opacity","value",r)*i,x=c(n,"background-image-smoothing","value",r),w=e.width||e.cachedW,S=e.height||e.cachedH;null!=w&&null!=S||(document.body.appendChild(e),w=e.cachedW=e.width||e.offsetWidth,S=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var E=w,C=S;if("auto"!==c(n,"background-width","value",r)&&(E="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*m:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(C="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*v:c(n,"background-height","pfValue",r)),0!==E&&0!==C){if("contain"===h)E*=k=Math.min(m/E,v/C),C*=k;else if("cover"===h){var k;E*=k=Math.max(m/E,v/C),C*=k}var T=a-m/2,P=c(n,"background-position-x","units",r),A=c(n,"background-position-x","pfValue",r);T+="%"===P?(m-E)*A:A;var D=c(n,"background-offset-x","units",r),O=c(n,"background-offset-x","pfValue",r);T+="%"===D?(m-E)*O:O;var M=l-v/2,I=c(n,"background-position-y","units",r),L=c(n,"background-position-y","pfValue",r);M+="%"===I?(v-C)*L:L;var N=c(n,"background-offset-y","units",r),R=c(n,"background-offset-y","pfValue",r);M+="%"===N?(v-C)*R:R,y.pathCache&&(T-=a,M-=l,a=0,l=0);var F=t.globalAlpha;t.globalAlpha=_;var B=o.getImgSmoothing(t),j=!1;if("no"===x&&B?(o.setImgSmoothing(t,!1),j=!0):"yes"!==x||B||(o.setImgSmoothing(t,!0),j=!0),"no-repeat"===d)b&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,a,l,m,v),t.clip())),o.safeDrawImage(t,e,0,0,w,S,T,M,E,C),b&&t.restore();else{var z=t.createPattern(e,d);t.fillStyle=z,o.nodeShapes[o.getNodeShape(n)].draw(t,a,l,m,v),t.translate(T,M),t.fill(),t.translate(-T,-M)}t.globalAlpha=F,j&&o.setImgSmoothing(t,B)}}},Js={};function ta(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}Js.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(Wt(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},Js.drawElementText=function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this;if(null==r){if(o&&!s.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var a=e.pstyle("label");if(!a||!a.value)return;var l=s.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),d=e.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var p,f=!n;n&&t.translate(-(p=n).x1,-p.y1),null==i?(s.drawText(t,e,null,f,o),e.isEdge()&&(s.drawText(t,e,"source",f,o),s.drawText(t,e,"target",f,o))):s.drawText(t,e,i,f,o),n&&t.translate(p.x1,p.y1)},Js.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return this.fontCaches.push(e={context:t}),e},Js.setupTextStyle=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,a=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*a,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+s+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],a),this.colorStrokeStyle(t,c[0],c[1],c[2],l)},Js.getTextAngle=function(t,e){var n=t._private.rscratch,r=t.pstyle((e?e+"-":"")+"text-rotation"),i=xt(n,"labelAngle",e);return"autorotate"===r.strValue?t.isEdge()?i:0:"none"===r.strValue?0:r.pfValue},Js.drawText=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private,s=o.rscratch,a=i?e.effectiveOpacity():1;if(!i||0!==a&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var l,u,c=xt(s,"labelX",n),h=xt(s,"labelY",n),d=this.getLabelText(e,n);if(null!=d&&""!==d&&!isNaN(c)&&!isNaN(h)){this.setupTextStyle(t,e,i);var p,f=n?n+"-":"",g=xt(s,"labelWidth",n),m=xt(s,"labelHeight",n),v=e.pstyle(f+"text-margin-x").pfValue,y=e.pstyle(f+"text-margin-y").pfValue,b=e.isEdge(),_=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;switch(b&&(_="center",x="center"),c+=v,h+=y,0!==(p=r?this.getTextAngle(e,n):0)&&(t.translate(l=c,u=h),t.rotate(p),c=0,h=0),x){case"top":break;case"center":h+=m/2;break;case"bottom":h+=m}var w=e.pstyle("text-background-opacity").value,S=e.pstyle("text-border-opacity").value,E=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue;if(w>0||E>0&&S>0){var k=c-C;switch(_){case"left":k-=g;break;case"center":k-=g/2}var T=h-m-C,P=g+2*C,A=m+2*C;if(w>0){var D=t.fillStyle,O=e.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+w*a+")";var M=e.pstyle("text-background-shape").strValue;0===M.indexOf("round")?ta(t,k,T,P,A,2):t.fillRect(k,T,P,A),t.fillStyle=D}if(E>0&&S>0){var I=t.strokeStyle,L=t.lineWidth,N=e.pstyle("text-border-color").value,R=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+S*a+")",t.lineWidth=E,t.setLineDash)switch(R){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=E/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(k,T,P,A),"double"===R){var F=E/2;t.strokeRect(k+F,T+F,P-2*F,A-2*F)}t.setLineDash&&t.setLineDash([]),t.lineWidth=L,t.strokeStyle=I}}var B=2*e.pstyle("text-outline-width").pfValue;if(B>0&&(t.lineWidth=B),"wrap"===e.pstyle("text-wrap").value){var j=xt(s,"labelWrapCachedLines",n),z=xt(s,"labelLineHeight",n),V=g/2,G=this.getLabelJustification(e);switch("auto"===G||("left"===_?"left"===G?c+=-g:"center"===G&&(c+=-V):"center"===_?"left"===G?c+=-V:"right"===G&&(c+=V):"right"===_&&("center"===G?c+=V:"right"===G&&(c+=g))),x){case"top":h-=(j.length-1)*z;break;case"center":case"bottom":h-=(j.length-1)*z}for(var U=0;U<j.length;U++)B>0&&t.strokeText(j[U],c,h),t.fillText(j[U],c,h),h+=z}else B>0&&t.strokeText(d,c,h),t.fillText(d,c,h);0!==p&&(t.rotate(-p),t.translate(-l,-u))}}};for(var ea={drawNode:function(t,e,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=e._private,c=u.rscratch,h=e.position();if(S(h.x)&&S(h.y)&&(!a||e.visible())){var d,p,f=a?e.effectiveOpacity():1,g=l.usePaths(),m=!1,v=e.padding();r=e.width()+2*v,i=e.height()+2*v,n&&t.translate(-(p=n).x1,-p.y1);for(var y=e.pstyle("background-image"),b=y.value,_=new Array(b.length),x=new Array(b.length),w=0,E=0;E<b.length;E++){var C=b[E],k=_[E]=null!=C&&"none"!==C;if(k){var T=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);w++,x[E]=l.getCachedImage(C,T,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var P=e.pstyle("background-blacken").value,A=e.pstyle("border-width").pfValue,D=e.pstyle("background-opacity").value*f,O=e.pstyle("border-color").value,M=e.pstyle("border-style").value,I=e.pstyle("border-opacity").value*f;t.lineJoin="miter";var L=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;l.eleFillStyle(t,e,n)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;l.colorStrokeStyle(t,O[0],O[1],O[2],e)},R=e.pstyle("shape").strValue,F=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(h.x,h.y);var B=l.nodePathCache=l.nodePathCache||[],j=et("polygon"===R?R+","+F.join(","):R,""+i,""+r),z=B[j];null!=z?(m=!0,c.pathCache=d=z):(d=new Path2D,B[j]=c.pathCache=d)}var V=function(){if(!m){var n=h;g&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(e)].draw(d||t,n.x,n.y,r,i)}g?t.fill(d):t.fill()},G=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=u.backgrounding,o=0,s=0;s<x.length;s++){var a=e.cy().style().getIndexedStyle(e,"background-image-containment","value",s);r&&"over"===a||!r&&"inside"===a?o++:_[s]&&x[s].complete&&!x[s].error&&(o++,l.drawInscribedImage(t,x[s],e,s,n))}u.backgrounding=!(o===w),i!==u.backgrounding&&e.updateStyle(!1)},U=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;l.hasPie(e)&&(l.drawPie(t,e,o),n&&(g||l.nodeShapes[l.getNodeShape(e)].draw(t,h.x,h.y,r,i)))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=(P>0?P:-P)*e,r=P>0?0:255;0!==P&&(l.colorFillStyle(t,r,r,r,n),g?t.fill(d):t.fill())},q=function(){if(A>0){if(t.lineWidth=A,t.lineCap="butt",t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(g?t.stroke(d):t.stroke(),"double"===M){t.lineWidth=A/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(d):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}},W=function(){s&&l.drawNodeOverlay(t,e,h,r,i)},$=function(){l.drawElementText(t,e,null,o)},Y="yes"===e.pstyle("ghost").value;if(Y){var K=e.pstyle("ghost-offset-x").pfValue,X=e.pstyle("ghost-offset-y").pfValue,Q=e.pstyle("ghost-opacity").value,Z=Q*f;t.translate(K,X),L(Q*D),V(),G(Z,!0),N(Q*I),q(),U(0!==P||0!==A),G(Z,!1),H(Z),t.translate(-K,-X)}L(),V(),G(f,!0),N(),q(),U(0!==P||0!==A),G(f,!1),H(),g&&t.translate(-h.x,-h.y),$(),W(),n&&t.translate(p.x1,p.y1)}},drawNodeOverlay:function(t,e,n,r,i){if(e.visible()){var o=e.pstyle("overlay-padding").pfValue,s=e.pstyle("overlay-opacity").value,a=e.pstyle("overlay-color").value;if(s>0){if(n=n||e.position(),null==r||null==i){var l=e.padding();r=e.width()+2*l,i=e.height()+2*l}this.colorFillStyle(t,a[0],a[1],a[2],s),this.nodeShapes.roundrectangle.draw(t,n.x,n.y,r+2*o,i+2*o),t.fill()}}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),s=r.x,a=r.y,l=e.width(),u=e.height(),c=Math.min(l,u)/2,h=0;this.usePaths()&&(s=0,a=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var p=e.pstyle("pie-"+d+"-background-size").value,f=e.pstyle("pie-"+d+"-background-color").value,g=e.pstyle("pie-"+d+"-background-opacity").value*n,m=p/100;m+h>1&&(m=1-h);var v=1.5*Math.PI+2*Math.PI*h,y=v+2*Math.PI*m;0===p||h>=1||h+m>1||(t.beginPath(),t.moveTo(s,a),t.arc(s,a,c,v,y),t.closePath(),this.colorFillStyle(t,f[0],f[1],f[2],g),t.fill(),h+=m)}}},na={getPixelRatio:function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&n.push(e={context:t}),e},createGradientStyleFor:function(t,e,n,r,i){var o,s=this.usePaths(),a=n.pstyle(e+"-gradient-stop-colors").value,l=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),d=Yt(u,h),p=Yt(c,h);o=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,p))}else{var f=s?{x:0,y:0}:n.position(),g=n.paddedWidth(),m=n.paddedHeight();o=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(g,m))}else if(n.isEdge()){var v=n.sourceEndpoint(),y=n.targetEndpoint();o=t.createLinearGradient(v.x,v.y,y.x,y.y)}else{var b=s?{x:0,y:0}:n.position(),_=n.paddedWidth()/2,x=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=t.createLinearGradient(b.x,b.y-x,b.x,b.y+x);break;case"to-top":o=t.createLinearGradient(b.x,b.y+x,b.x,b.y-x);break;case"to-left":o=t.createLinearGradient(b.x+_,b.y,b.x-_,b.y);break;case"to-right":o=t.createLinearGradient(b.x-_,b.y,b.x+_,b.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(b.x-_,b.y-x,b.x+_,b.y+x);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(b.x-_,b.y+x,b.x+_,b.y-x);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(b.x+_,b.y-x,b.x-_,b.y+x);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(b.x+_,b.y+x,b.x-_,b.y-x)}}if(!o)return null;for(var w=l.length===a.length,S=a.length,E=0;E<S;E++)o.addColorStop(w?l[E]:E/(S-1),"rgba("+a[E][0]+","+a[E][1]+","+a[E][2]+","+i+")");return o},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],s=e.getPixelRatio();t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(s=e.motionBlurPxRatio);var a,l=i*s,u=o*s;if(l!==e.canvasWidth||u!==e.canvasHeight){e.fontCaches=null;var c=n.canvasContainer;c.style.width=i+"px",c.style.height=o+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)(a=n.canvases[h]).width=l,a.height=u,a.style.width=i+"px",a.style.height=o+"px";for(h=0;h<e.BUFFER_COUNT;h++)(a=n.bufferCanvases[h]).width=l,a.height=u,a.style.width=i+"px",a.style.height=o+"px";e.textureMult=1,s<=1&&(a=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,a.width=l*e.textureMult,a.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||vt()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,s=this,a=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,l=s.cy,u=s.data,c=u.canvasNeedsRedraw,h=s.textureOnViewport&&!e&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),d=void 0!==t.motionBlur?t.motionBlur:s.motionBlur,p=s.motionBlurPxRatio,f=l.hasCompoundNodes(),g=s.hoverData.draggingEles,m=d=d&&!e&&s.motionBlurEnabled&&!(s.hoverData.selecting||s.touchData.selecting);e||(s.prevPxRatio!==a&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=a),!e&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),d&&(null==s.mbFrames&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(m=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!h&&(c[s.NODE]=!0,c[s.SELECT_BOX]=!0);var v=l.style(),y=l.zoom(),b=void 0!==i?i:y,_=l.pan(),x={x:_.x,y:_.y},w={zoom:y,pan:{x:_.x,y:_.y}},S=s.prevViewport;void 0===S||w.zoom!==S.zoom||w.pan.x!==S.pan.x||w.pan.y!==S.pan.y||g&&!f||(s.motionBlurPxRatio=1),o&&(x=o),b*=a,x.x*=a,x.y*=a;var E=s.getCachedZSortedEles();function C(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,s.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function k(t,r){var a,l,c,h;s.clearingMotionBlur||t!==u.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]&&t!==u.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]?(a=x,l=b,c=s.canvasWidth,h=s.canvasHeight):(a={x:_.x*p,y:_.y*p},l=y*p,c=s.canvasWidth*p,h=s.canvasHeight*p),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?C(t,0,0,c,h):e||void 0!==r&&!r||t.clearRect(0,0,c,h),n||(t.translate(a.x,a.y),t.scale(l,l)),o&&t.translate(o.x,o.y),i&&t.scale(i,i)}if(h||(s.textureDrawLastFrame=!1),h){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=l.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var T=s.data.bufferContexts[s.TEXTURE_BUFFER];T.setTransform(1,0,0,1,0,0),T.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:T,drawOnlyNodeLayer:!0,forcedPxRatio:a*s.textureMult}),(w=s.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:s.canvasWidth,height:s.canvasHeight}).mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}c[s.DRAG]=!1,c[s.NODE]=!1;var P=s.textureCache.texture;w=s.textureCache.viewport,(R=u.contexts[s.NODE]).setTransform(1,0,0,1,0,0),d?C(R,0,0,w.width,w.height):R.clearRect(0,0,w.width,w.height);var A=v.core("outside-texture-bg-color").value,D=v.core("outside-texture-bg-opacity").value;s.colorFillStyle(R,A[0],A[1],A[2],D),R.fillRect(0,0,w.width,w.height),y=l.zoom(),k(R,!1),R.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/a,w.height/w.zoom/a),R.drawImage(P,w.mpan.x,w.mpan.y,w.width/w.zoom/a,w.height/w.zoom/a)}else s.textureOnViewport&&!e&&(s.textureCache=null);var O=l.extent(),M=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),I=s.hideEdgesOnViewport&&M,L=[];if(L[s.NODE]=!c[s.NODE]&&d&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,L[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),L[s.DRAG]=!c[s.DRAG]&&d&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,L[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),c[s.NODE]||n||r||L[s.NODE]){var N=d&&!L[s.NODE]&&1!==p;k(R=e||(N?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:u.contexts[s.NODE]),d&&!N?"motionBlur":void 0),I?s.drawCachedNodes(R,E.nondrag,a,O):s.drawLayeredElements(R,E.nondrag,a,O),s.debug&&s.drawDebugPoints(R,E.nondrag),n||d||(c[s.NODE]=!1)}if(!r&&(c[s.DRAG]||n||L[s.DRAG])&&(N=d&&!L[s.DRAG]&&1!==p,k(R=e||(N?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:u.contexts[s.DRAG]),d&&!N?"motionBlur":void 0),I?s.drawCachedNodes(R,E.drag,a,O):s.drawCachedElements(R,E.drag,a,O),s.debug&&s.drawDebugPoints(R,E.drag),n||d||(c[s.DRAG]=!1)),s.showFps||!r&&c[s.SELECT_BOX]&&!n){var R;if(k(R=e||u.contexts[s.SELECT_BOX]),1==s.selection[4]&&(s.hoverData.selecting||s.touchData.selecting)){y=s.cy.zoom();var F=v.core("selection-box-border-width").value/y;R.lineWidth=F,R.fillStyle="rgba("+v.core("selection-box-color").value[0]+","+v.core("selection-box-color").value[1]+","+v.core("selection-box-color").value[2]+","+v.core("selection-box-opacity").value+")",R.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),F>0&&(R.strokeStyle="rgba("+v.core("selection-box-border-color").value[0]+","+v.core("selection-box-border-color").value[1]+","+v.core("selection-box-border-color").value[2]+","+v.core("selection-box-opacity").value+")",R.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(u.bgActivePosistion&&!s.hoverData.selecting){y=s.cy.zoom();var B=u.bgActivePosistion;R.fillStyle="rgba("+v.core("active-bg-color").value[0]+","+v.core("active-bg-color").value[1]+","+v.core("active-bg-color").value[2]+","+v.core("active-bg-opacity").value+")",R.beginPath(),R.arc(B.x,B.y,v.core("active-bg-size").pfValue/y,0,2*Math.PI),R.fill()}var j=s.lastRedrawTime;if(s.showFps&&j){j=Math.round(j);var z=Math.round(1e3/j);R.setTransform(1,0,0,1,0,0),R.fillStyle="rgba(255, 0, 0, 0.75)",R.strokeStyle="rgba(255, 0, 0, 0.75)",R.lineWidth=1,R.fillText("1 frame = "+j+" ms = "+z+" fps",0,20),R.strokeRect(0,30,250,20),R.fillRect(0,30,250*Math.min(z/60,1),20)}n||(c[s.SELECT_BOX]=!1)}if(d&&1!==p){var V=u.contexts[s.DRAG],G=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],U=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!m?t.clearRect(0,0,s.canvasWidth,s.canvasHeight):C(t,0,0,s.canvasWidth,s.canvasHeight),t.drawImage(e,0,0,s.canvasWidth*p,s.canvasHeight*p,0,0,s.canvasWidth,s.canvasHeight)};(c[s.NODE]||L[s.NODE])&&(U(u.contexts[s.NODE],s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],L[s.NODE]),c[s.NODE]=!1),(c[s.DRAG]||L[s.DRAG])&&(U(V,G,L[s.DRAG]),c[s.DRAG]=!1)}s.prevViewport=w,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),d&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!h,s.mbFrames=0,c[s.NODE]=!0,c[s.DRAG]=!0,s.redraw()},100)),e||l.emit("render")}},ra={drawPolygonPath:function(t,e,n,r,i,o){var s=r/2,a=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*o[0],n+a*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+s*o[2*l],n+a*o[2*l+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,o){var s=r/2,a=i/2,l=Te(r,i);t.beginPath&&t.beginPath();for(var u=0;u<o.length/4;u++){var c,h;h=0===u?o.length-2:4*u-2,c=4*u+2;var d=e+s*o[4*u],p=n+a*o[4*u+1],f=l/Math.tan(Math.acos(-o[h]*o[c]-o[h+1]*o[c+1])/2),g=d-f*o[h],m=p-f*o[h+1],v=d+f*o[c],y=p+f*o[c+1];0===u?t.moveTo(g,m):t.lineTo(g,m),t.arcTo(d,p,v,y,l)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var o=r/2,s=i/2,a=ke(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+o,n-s,e+o,n,a),t.arcTo(e+o,n+s,e,n+s,a),t.arcTo(e-o,n+s,e-o,n,a),t.arcTo(e-o,n-s,e,n-s,a),t.lineTo(e,n-s),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var o=r/2,s=i/2,a=ke(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.lineTo(e+o,n-s),t.lineTo(e+o,n),t.arcTo(e+o,n+s,e,n+s,a),t.arcTo(e-o,n+s,e-o,n,a),t.lineTo(e-o,n-s),t.lineTo(e,n-s),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var o=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-o+8,n-s),t.lineTo(e+o-8,n-s),t.lineTo(e+o,n-s+8),t.lineTo(e+o,n+s-8),t.lineTo(e+o-8,n+s),t.lineTo(e-o+8,n+s),t.lineTo(e-o,n+s-8),t.lineTo(e-o,n-s+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var o=r/2,s=i/2,a=e-o,l=e+o,u=n-s,c=n+s,h=Pe(r,i),d=h.widthOffset,p=h.heightOffset,f=h.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(a,u+p),t.lineTo(a,c-p),t.quadraticCurveTo(a+f,c,a+d,c),t.lineTo(l-d,c),t.quadraticCurveTo(l-f,c,l,c-p),t.lineTo(l,u+p),t.quadraticCurveTo(l-f,u,l-d,u),t.lineTo(a+d,u),t.quadraticCurveTo(a+f,u,a,u+p),t.closePath()}},ia=Math.sin(0),oa=Math.cos(0),sa={},aa={},la=Math.PI/40,ua=0*Math.PI;ua<2*Math.PI;ua+=la)sa[ua]=Math.sin(ua),aa[ua]=Math.cos(ua);ra.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,s,a=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=la)o=e-a*sa[u]*ia+a*aa[u]*oa,s=n+l*aa[u]*ia+l*sa[u]*oa,0===u?t.moveTo(o,s):t.lineTo(o,s);t.closePath()};var ca={};function ha(t){var e=t.indexOf(",");return t.substr(e+1)}function da(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new zn(function(r,i){try{e.toBlob(function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(o){i(o)}});case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}(ha(r()),n);case"base64":return ha(r());case"base64uri":default:return r()}}ca.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},ca.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],o=t.full?Math.ceil(n.h):r[3],s=S(t.maxWidth)||S(t.maxHeight),a=this.getPixelRatio(),l=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,l=t.scale;else if(s){var u=1/0,c=1/0;S(t.maxWidth)&&(u=l*t.maxWidth/i),S(t.maxHeight)&&(c=l*t.maxHeight/o),i*=l=Math.min(u,c),o*=l}s||(i*=a,o*=a,l*=a);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var d=h.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o),d.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var f=e.pan(),g={x:f.x*l,y:f.y*l};l*=e.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,o),d.fill())}return h},ca.png=function(t){return da(t,this.bufferCanvasImage(t),"image/png")},ca.jpg=function(t){return da(t,this.bufferCanvasImage(t),"image/jpeg")};var pa=ga,fa=ga.prototype;function ga(t){var e=this;e.data={canvases:new Array(fa.CANVAS_LAYERS),contexts:new Array(fa.CANVAS_LAYERS),canvasNeedsRedraw:new Array(fa.CANVAS_LAYERS),bufferCanvases:new Array(fa.BUFFER_COUNT),bufferContexts:new Array(fa.CANVAS_LAYERS)},e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};p&&p.userAgent.match(/msie|trident|edge/i)&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var o=0;o<fa.CANVAS_LAYERS;o++){var s=e.data.canvases[o]=document.createElement("canvas");e.data.contexts[o]=s.getContext("2d"),Object.keys(i).forEach(function(t){s.style[t]=i[t]}),s.style.position="absolute",s.setAttribute("data-id","layer"+o),s.style.zIndex=String(fa.CANVAS_LAYERS-o),e.data.canvasContainer.appendChild(s),e.data.canvasNeedsRedraw[o]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[fa.NODE].setAttribute("data-id","layer"+fa.NODE+"-node"),e.data.canvases[fa.SELECT_BOX].setAttribute("data-id","layer"+fa.SELECT_BOX+"-selectbox"),e.data.canvases[fa.DRAG].setAttribute("data-id","layer"+fa.DRAG+"-drag"),o=0;o<fa.BUFFER_COUNT;o++)e.data.bufferCanvases[o]=document.createElement("canvas"),e.data.bufferContexts[o]=e.data.bufferCanvases[o].getContext("2d"),e.data.bufferCanvases[o].style.position="absolute",e.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),e.data.bufferCanvases[o].style.zIndex=String(-o-1),e.data.bufferCanvases[o].style.visibility="hidden";e.pathsEnabled=!0;var a=te(),l=function(t){return{x:-t.w/2,y:-t.h/2}},u=function(t){return t.boundingBox(),t[0]._private.bodyBounds},c=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||a},h=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||a},d=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||a},f=function(t,e){return e},g=function(t,e,n){var r=t?t+"-":"";return{x:e.x+n.pstyle(r+"text-margin-x").pfValue,y:e.y+n.pstyle(r+"text-margin-y").pfValue}},m=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},v=e.data.eleTxrCache=new Os(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,n,r,i,o){return e.drawElement(t,n,r,!1,!1,o)},getBoundingBox:u,getRotationPoint:function(t){return{x:((e=u(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return l(u(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),y=e.data.lblTxrCache=new Os(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"main",o)},getBoundingBox:c,getRotationPoint:function(t){return g("",m(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=c(t),n=l(c(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},isVisible:f}),b=e.data.slbTxrCache=new Os(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"source",o)},getBoundingBox:h,getRotationPoint:function(t){return g("source",m(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return l(h(t))},isVisible:f}),_=e.data.tlbTxrCache=new Os(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,n,r,i,o){return e.drawElementText(t,n,r,i,"target",o)},getBoundingBox:d,getRotationPoint:function(t){return g("target",m(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return l(d(t))},isVisible:f}),x=e.data.lyrTxrCache=new Is(e);e.onUpdateEleCalcs(function(t,e){v.invalidateElements(e),y.invalidateElements(e),b.invalidateElements(e),_.invalidateElements(e),x.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var w=function(t){for(var e=0;e<t.length;e++)x.enqueueElementRefinement(t[e].ele)};v.onDequeue(w),y.onDequeue(w),b.onDequeue(w),_.onDequeue(w)}fa.CANVAS_LAYERS=3,fa.SELECT_BOX=0,fa.DRAG=1,fa.NODE=2,fa.BUFFER_COUNT=3,fa.TEXTURE_BUFFER=0,fa.MOTIONBLUR_BUFFER_NODE=1,fa.MOTIONBLUR_BUFFER_DRAG=2,fa.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[fa.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[fa.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[fa.SELECT_BOX]=e}};var ma="undefined"!=typeof Path2D;fa.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},fa.usePaths=function(){return ma&&this.pathsEnabled},fa.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},fa.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},fa.makeOffscreenCanvas=function(t,e){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":s(OffscreenCanvas))?n=new OffscreenCanvas(t,e):((n=document.createElement("canvas")).width=t,n.height=e),n},[Bs,Hs,Qs,Zs,Js,ea,na,ra,ca,{nodeShapeImpl:function(t,e,n,r,i,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,s);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}}].forEach(function(t){j(fa,t)});var va=[{type:"layout",extensions:ns},{type:"renderer",extensions:[{name:"null",impl:rs},{name:"base",impl:Cs},{name:"canvas",impl:pa}]}],ya={},ba={};function _a(t,e,n){var r=n,i=function(n){ht("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(mo.prototype[e])return i(e);mo.prototype[e]=n}else if("collection"===t){if(Ii.prototype[e])return i(e);Ii.prototype[e]=n}else if("layout"===t){for(var o=function(t){this.options=t,n.call(this,t),w(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},s=o.prototype=Object.create(n.prototype),a=[],l=0;l<a.length;l++){var u=a[l];s[u]=s[u]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=n.prototype.stop;s.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var h=function(t){return t._private.cy},d={addEventFields:function(t,e){e.layout=t,e.cy=h(t),e.target=t},bubble:function(){return!0},parent:function(t){return h(t)}};j(s,{createEmitter:function(){return this._private.emitter=new ti(d,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),Un.eventAliasesOn(s),r=o}else if("renderer"===t&&"null"!==e&&"base"!==e){var p=xa("renderer","base"),f=p.prototype,g=n,m=n.prototype,v=function(){p.apply(this,arguments),g.apply(this,arguments)},y=v.prototype;for(var b in f){var _=f[b];if(null!=m[b])return i(b);y[b]=_}for(var x in m)y[x]=m[x];f.clientFunctions.forEach(function(t){y[t]=y[t]||function(){ht("Renderer does not implement `renderer."+t+"()` on its prototype")}}),r=v}return V({map:ya,keys:[t,e],value:r})}function xa(t,e){return G({map:ya,keys:[t,e]})}function wa(t,e,n,r,i){return V({map:ba,keys:[t,e,n,r],value:i})}function Sa(t,e,n,r){return G({map:ba,keys:[t,e,n,r]})}var Ea=function(){return 2===arguments.length?xa.apply(null,arguments):3===arguments.length?_a.apply(null,arguments):4===arguments.length?Sa.apply(null,arguments):5===arguments.length?wa.apply(null,arguments):void ht("Invalid extension access syntax")};mo.prototype.extension=Ea,va.forEach(function(t){t.extensions.forEach(function(e){_a(t.type,e.name,e.impl)})});var Ca=function t(){if(!(this instanceof t))return new t;this.length=0},ka=Ca.prototype;ka.instanceString=function(){return"stylesheet"},ka.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},ka.css=function(t,e){var n=this.length-1;if(b(t))this[n].properties.push({name:t,value:e});else if(w(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var s=i[o],a=r[s];if(null!=a){var l=co.properties[s]||co.properties[L(s)];null!=l&&this[n].properties.push({name:l.name,value:a})}}return this},ka.style=ka.css,ka.generateStyle=function(t){var e=new co(t);return this.appendToStyle(e)},ka.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.properties;t.selector(n.selector);for(var i=0;i<r.length;i++){var o=r[i];t.css(o.name,o.value)}}return t};var Ta=function(t){return void 0===t&&(t={}),w(t)?new mo(t):b(t)?Ea.apply(Ea,arguments):void 0};Ta.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Ta),t.apply(null,e),this},Ta.warnings=function(t){return dt(t)},Ta.version="3.19.0",Ta.stylesheet=Ta.Stylesheet=Ca,t.exports=Ta},6620:function(t){"use strict";function e(t,e,n,r,i,o){this._color=t,this.key=e,this.value=n,this.left=r,this.right=i,this._count=o}function n(t){return new e(t._color,t.key,t.value,t.left,t.right,t._count)}function r(t,n){return new e(t,n.key,n.value,n.left,n.right,n._count)}function i(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function o(t,e){this._compare=t,this.root=e}t.exports=function(t){return new o(t||p,null)};var s=o.prototype;function a(t,e){var n;return e.left&&(n=a(t,e.left))?n:(n=t(e.key,e.value))||(e.right?a(t,e.right):void 0)}function l(t,e,n,r){if(e(t,r.key)<=0){var i;if(r.left&&(i=l(t,e,n,r.left)))return i;if(i=n(r.key,r.value))return i}if(r.right)return l(t,e,n,r.right)}function u(t,e,n,r,i){var o,s=n(t,i.key),a=n(e,i.key);if(s<=0){if(i.left&&(o=u(t,e,n,r,i.left)))return o;if(a>0&&(o=r(i.key,i.value)))return o}if(a>0&&i.right)return u(t,e,n,r,i.right)}function c(t,e){this.tree=t,this._stack=e}Object.defineProperty(s,"keys",{get:function(){var t=[];return this.forEach(function(e,n){t.push(e)}),t}}),Object.defineProperty(s,"values",{get:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(t,n){for(var s=this._compare,a=this.root,l=[],u=[];a;){var c=s(t,a.key);l.push(a),u.push(c),a=c<=0?a.left:a.right}l.push(new e(0,t,n,null,null,1));for(var h=l.length-2;h>=0;--h)a=l[h],l[h]=u[h]<=0?new e(a._color,a.key,a.value,l[h+1],a.right,a._count+1):new e(a._color,a.key,a.value,a.left,l[h+1],a._count+1);for(h=l.length-1;h>1;--h){var d=l[h-1];if(a=l[h],1===d._color||1===a._color)break;var p=l[h-2];if(p.left===d)if(d.left===a){if(!(f=p.right)||0!==f._color){p._color=0,p.left=d.right,d._color=1,d.right=p,l[h-2]=d,l[h-1]=a,i(p),i(d),h>=3&&((g=l[h-3]).left===p?g.left=d:g.right=d);break}d._color=1,p.right=r(1,f),p._color=0,h-=1}else{if(!(f=p.right)||0!==f._color){d.right=a.left,p._color=0,p.left=a.right,a._color=1,a.left=d,a.right=p,l[h-2]=a,l[h-1]=d,i(p),i(d),i(a),h>=3&&((g=l[h-3]).left===p?g.left=a:g.right=a);break}d._color=1,p.right=r(1,f),p._color=0,h-=1}else if(d.right===a){if(!(f=p.left)||0!==f._color){p._color=0,p.right=d.left,d._color=1,d.left=p,l[h-2]=d,l[h-1]=a,i(p),i(d),h>=3&&((g=l[h-3]).right===p?g.right=d:g.left=d);break}d._color=1,p.left=r(1,f),p._color=0,h-=1}else{var f;if(!(f=p.left)||0!==f._color){var g;d.left=a.right,p._color=0,p.right=a.left,a._color=1,a.right=d,a.left=p,l[h-2]=a,l[h-1]=d,i(p),i(d),i(a),h>=3&&((g=l[h-3]).right===p?g.right=a:g.left=a);break}d._color=1,p.left=r(1,f),p._color=0,h-=1}}return l[0]._color=1,new o(s,l[0])},s.forEach=function(t,e,n){if(this.root)switch(arguments.length){case 1:return a(t,this.root);case 2:return l(e,this._compare,t,this.root);case 3:if(this._compare(e,n)>=0)return;return u(e,n,this._compare,t,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new c(this,t)}}),Object.defineProperty(s,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new c(this,t)}}),s.at=function(t){if(t<0)return new c(this,[]);for(var e=this.root,n=[];;){if(n.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new c(this,n);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new c(this,[])},s.ge=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o<=0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new c(this,r)},s.gt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o<0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new c(this,r)},s.lt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o>0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new c(this,r)},s.le=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var o=e(t,n.key);r.push(n),o>=0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new c(this,r)},s.find=function(t){for(var e=this._compare,n=this.root,r=[];n;){var i=e(t,n.key);if(r.push(n),0===i)return new c(this,r);n=i<=0?n.left:n.right}return new c(this,[])},s.remove=function(t){var e=this.find(t);return e?e.remove():this},s.get=function(t){for(var e=this._compare,n=this.root;n;){var r=e(t,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var h=c.prototype;function d(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function p(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new c(this.tree,this._stack.slice())},h.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var s=new Array(t.length);s[s.length-1]=new e((l=t[t.length-1])._color,l.key,l.value,l.left,l.right,l._count);for(var a=t.length-2;a>=0;--a){var l;s[a]=(l=t[a]).left===t[a+1]?new e(l._color,l.key,l.value,s[a+1],l.right,l._count):new e(l._color,l.key,l.value,l.left,s[a+1],l._count)}if((l=s[s.length-1]).left&&l.right){var u=s.length;for(l=l.left;l.right;)s.push(l),l=l.right;var c=s[u-1];for(s.push(new e(l._color,c.key,c.value,l.left,l.right,l._count)),s[u-1].key=l.key,s[u-1].value=l.value,a=s.length-2;a>=u;--a)s[a]=new e((l=s[a])._color,l.key,l.value,l.left,s[a+1],l._count);s[u-1].left=s[u]}if(0===(l=s[s.length-1])._color){var h=s[s.length-2];for(h.left===l?h.left=null:h.right===l&&(h.right=null),s.pop(),a=0;a<s.length;++a)s[a]._count--;return new o(this.tree._compare,s[0])}if(l.left||l.right){for(l.left?d(l,l.left):l.right&&d(l,l.right),l._color=1,a=0;a<s.length-1;++a)s[a]._count--;return new o(this.tree._compare,s[0])}if(1===s.length)return new o(this.tree._compare,null);for(a=0;a<s.length;++a)s[a]._count--;var p=s[s.length-2];return function(t){for(var e,o,s,a,l=t.length-1;l>=0;--l){if(e=t[l],0===l)return void(e._color=1);if((o=t[l-1]).left===e){if((s=o.right).right&&0===s.right._color)return a=(s=o.right=n(s)).right=n(s.right),o.right=s.left,s.left=o,s.right=a,s._color=o._color,e._color=1,o._color=1,a._color=1,i(o),i(s),l>1&&((u=t[l-2]).left===o?u.left=s:u.right=s),void(t[l-1]=s);if(s.left&&0===s.left._color)return a=(s=o.right=n(s)).left=n(s.left),o.right=a.left,s.left=a.right,a.left=o,a.right=s,a._color=o._color,o._color=1,s._color=1,e._color=1,i(o),i(s),i(a),l>1&&((u=t[l-2]).left===o?u.left=a:u.right=a),void(t[l-1]=a);if(1===s._color){if(0===o._color)return o._color=1,void(o.right=r(0,s));o.right=r(0,s);continue}s=n(s),o.right=s.left,s.left=o,s._color=o._color,o._color=0,i(o),i(s),l>1&&((u=t[l-2]).left===o?u.left=s:u.right=s),t[l-1]=s,t[l]=o,l+1<t.length?t[l+1]=e:t.push(e),l+=2}else{if((s=o.left).left&&0===s.left._color)return a=(s=o.left=n(s)).left=n(s.left),o.left=s.right,s.right=o,s.left=a,s._color=o._color,e._color=1,o._color=1,a._color=1,i(o),i(s),l>1&&((u=t[l-2]).right===o?u.right=s:u.left=s),void(t[l-1]=s);if(s.right&&0===s.right._color)return a=(s=o.left=n(s)).right=n(s.right),o.left=a.right,s.right=a.left,a.right=o,a.left=s,a._color=o._color,o._color=1,s._color=1,e._color=1,i(o),i(s),i(a),l>1&&((u=t[l-2]).right===o?u.right=a:u.left=a),void(t[l-1]=a);if(1===s._color){if(0===o._color)return o._color=1,void(o.left=r(0,s));o.left=r(0,s);continue}var u;s=n(s),o.left=s.right,s.right=o,s._color=o._color,o._color=0,i(o),i(s),l>1&&((u=t[l-2]).right===o?u.right=s:u.left=s),t[l-1]=s,t[l]=o,l+1<t.length?t[l+1]=e:t.push(e),l+=2}}}(s),p.left===l?p.left=null:p.right=null,new o(this.tree._compare,s[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var n=this.tree.root;return n?n._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var r=e.length-2;r>=0;--r)e[r+1]===e[r].right&&(++t,e[r].left&&(t+=e[r].left._count));return t},enumerable:!0}),h.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),h.update=function(t){var n=this._stack;if(0===n.length)throw new Error("Can't update empty node!");var r=new Array(n.length),i=n[n.length-1];r[r.length-1]=new e(i._color,i.key,t,i.left,i.right,i._count);for(var s=n.length-2;s>=0;--s)r[s]=(i=n[s]).left===n[s+1]?new e(i._color,i.key,i.value,r[s+1],i.right,i._count):new e(i._color,i.key,i.value,i.left,r[s+1],i._count);return new o(this.tree._compare,r[0])},h.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},7889:function(t,e,n){t.exports=n(1396)},1396:function(t,e){var n,r,i;(function(){var o,s,a,l,u,c,h,d,p,f,g,m,v,y,b;a=Math.floor,f=Math.min,s=function(t,e){return t<e?-1:t>e?1:0},p=function(t,e,n,r,i){var o;if(null==n&&(n=0),null==i&&(i=s),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)i(e,t[o=a((n+r)/2)])<0?r=o:n=o+1;return[].splice.apply(t,[n,n-n].concat(e)),e},c=function(t,e,n){return null==n&&(n=s),t.push(e),y(t,0,t.length-1,n)},u=function(t,e){var n,r;return null==e&&(e=s),n=t.pop(),t.length?(r=t[0],t[0]=n,b(t,0,e)):r=n,r},d=function(t,e,n){var r;return null==n&&(n=s),r=t[0],t[0]=e,b(t,0,n),r},h=function(t,e,n){var r;return null==n&&(n=s),t.length&&n(t[0],e)<0&&(e=(r=[t[0],e])[0],t[0]=r[1],b(t,0,n)),e},l=function(t,e){var n,r,i,o,l;for(null==e&&(e=s),o=[],n=0,r=(i=(function(){l=[];for(var e=0,n=a(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)l.push(e);return l}).apply(this).reverse()).length;n<r;n++)o.push(b(t,i[n],e));return o},v=function(t,e,n){var r;if(null==n&&(n=s),-1!==(r=t.indexOf(e)))return y(t,0,r,n),b(t,r,n)},g=function(t,e,n){var r,i,o,a;if(null==n&&(n=s),!(r=t.slice(0,e)).length)return r;for(l(r,n),i=0,o=(a=t.slice(e)).length;i<o;i++)h(r,a[i],n);return r.sort(n).reverse()},m=function(t,e,n){var r,i,o,a,c,h,d,g,m;if(null==n&&(n=s),10*e<=t.length){if(!(o=t.slice(0,e).sort(n)).length)return o;for(i=o[o.length-1],a=0,h=(d=t.slice(e)).length;a<h;a++)n(r=d[a],i)<0&&(p(o,r,0,null,n),o.pop(),i=o[o.length-1]);return o}for(l(t,n),m=[],c=0,g=f(e,t.length);0<=g?c<g:c>g;0<=g?++c:--c)m.push(u(t,n));return m},y=function(t,e,n,r){var i,o,a;for(null==r&&(r=s),i=t[n];n>e&&r(i,o=t[a=n-1>>1])<0;)t[n]=o,n=a;return t[n]=i},b=function(t,e,n){var r,i,o,a,l;for(null==n&&(n=s),i=t.length,l=e,o=t[e],r=2*e+1;r<i;)(a=r+1)<i&&!(n(t[r],t[a])<0)&&(r=a),t[e]=t[r],r=2*(e=r)+1;return t[e]=o,y(t,l,e,n)},o=function(){function t(t){this.cmp=null!=t?t:s,this.nodes=[]}return t.push=c,t.pop=u,t.replace=d,t.pushpop=h,t.heapify=l,t.updateItem=v,t.nlargest=g,t.nsmallest=m,t.prototype.push=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pop=function(){return u(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return d(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return h(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return l(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return v(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),r=[],void 0===(i="function"==typeof(n=function(){return o})?n.apply(e,r):n)||(t.exports=i)}).call(this)},4173:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(r,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,l=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},u=o.push,c=o.indexOf,h={},d=h.toString,p=h.hasOwnProperty,f=p.toString,g=f.call(Object),m={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},b=r.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function x(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in _)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var S=function(t,e){return new S.fn.init(t,e)};function E(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!v(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}S.fn=S.prototype={jquery:"3.6.0",constructor:S,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(t){return this.pushStack(S.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},S.extend=S.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(u&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,s[e]=S.extend(u,o,r)):void 0!==r&&(s[e]=r));return s},S.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t)||(e=s(t))&&("function"!=typeof(n=p.call(e,"constructor")&&e.constructor)||f.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){x(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(E(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(E(Object(t))?S.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(E(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return l(s)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=o[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){h["[object "+e+"]"]=e.toLowerCase()});var C=function(t){var e,n,r,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_="sizzle"+1*new Date,x=t.document,w=0,S=0,E=lt(),C=lt(),k=lt(),T=lt(),P=function(t,e){return t===e&&(h=!0),0},A={}.hasOwnProperty,D=[],O=D.pop,M=D.push,I=D.push,L=D.slice,N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\[[\\x20\\t\\r\\n\\f]*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",z=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),q=new RegExp(F+"|>"),W=new RegExp(z),$=new RegExp("^"+B+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){d()},st=_t(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(D=L.call(x.childNodes),x.childNodes)}catch(Ct){I={apply:D.length?function(t,e){M.apply(t,L.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function at(t,e,r,i){var o,a,u,c,h,f,v,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return r;if(!i&&(d(e),e=e||p,g)){if(11!==x&&(h=J.exec(t)))if(o=h[1]){if(9===x){if(!(u=e.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&b(e,u)&&u.id===o)return r.push(u),r}else{if(h[2])return I.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return I.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!T[t+" "]&&(!m||!m.test(t))&&(1!==x||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===x&&(q.test(t)||H.test(t))){for((y=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=_)),a=(f=s(t)).length;a--;)f[a]=(c?"#"+c:":scope")+" "+bt(f[a]);v=f.join(",")}try{return I.apply(r,y.querySelectorAll(v)),r}catch(w){T(t,!0)}finally{c===_&&e.removeAttribute("id")}}}return l(t.replace(G,"$1"),e,r,i)}function lt(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ut(t){return t[_]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(Ct){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function dt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ut(function(e){return e=+e,ut(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},o=at.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!K.test(t&&t.namespaceURI||e&&e.nodeName||"HTML")},d=at.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:x;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,g=!o(p),x!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.scope=ct(function(t){return f.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),n.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ct(function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(p.getElementsByClassName),n.getById=ct(function(t){return f.appendChild(t).id=_,!p.getElementsByName||!p.getElementsByName(_).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=Z.test(p.querySelectorAll))&&(ct(function(t){var e;f.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+R+")"),t.querySelectorAll("[id~="+_+"-]").length||m.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ct(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",z)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(f.compareDocumentPosition),b=e||Z.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==p||t.ownerDocument==x&&b(x,t)?-1:e==p||e.ownerDocument==x&&b(x,e)?1:c?N(c,t)-N(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t==p?-1:e==p?1:i?-1:o?1:c?N(c,t)-N(c,e):0;if(i===o)return dt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?dt(s[r],a[r]):s[r]==x?-1:a[r]==x?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&g&&!T[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(Ct){T(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var i=r.attrHandle[e.toLowerCase()],o=i&&A.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},at.escape=function(t){return(t+"").replace(rt,it)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(P),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return c=null,t},i=at.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=at.selectors={cacheLength:50,createPseudo:ut,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+F+"|$)"))&&E(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=at.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(V," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(b=(p=(u=(c=(h=(d=m)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&u[1])&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===e){c[t]=[w,p,b];break}}else if(y&&(b=p=(u=(c=(h=(d=e)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&u[1]),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((c=(h=d[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[w,b]),d!==e)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return i[_]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,n){for(var r,o=i(t,e),s=o.length;s--;)t[r=N(t,o[s])]=!(n[r]=o[s])}):function(t){return i(t,0,n)}):i}},pseudos:{not:ut(function(t){var e=[],n=[],r=a(t.replace(G,"$1"));return r[_]?ut(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:ut(function(t){return function(e){return at(t,e).length>0}}),contains:ut(function(t){return t=t.replace(et,nt),function(e){return(e.textContent||i(e)).indexOf(t)>-1}}),lang:ut(function(t){return $.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt(function(){return[0]}),last:mt(function(t,e){return[e-1]}),eq:mt(function(t,e,n){return[n<0?n+e:n]}),even:mt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:mt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:mt(function(t,e,n){for(var r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t}),gt:mt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ft(e);function yt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function _t(t,e,n){var r=e.dir,i=e.next,o=i||r,s=n&&"parentNode"===o,a=S++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,l){var u,c,h,d=[w,a];if(l){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(c=(h=e[_]||(e[_]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((u=c[o])&&u[0]===w&&u[1]===a)return d[2]=u[2];if(c[o]=d,d[2]=t(e,n,l))return!0}return!1}}function xt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function wt(t,e,n,r,i){for(var o,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),u&&e.push(a)));return s}function St(t,e,n,r,i,o){return r&&!r[_]&&(r=St(r)),i&&!i[_]&&(i=St(i,o)),ut(function(o,s,a,l){var u,c,h,d=[],p=[],f=s.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)at(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!o&&e?g:wt(g,d,t,a,l),v=n?i||(o?t:f||r)?[]:s:m;if(n&&n(m,v,a,l),r)for(u=wt(v,p),r(u,[],a,l),c=u.length;c--;)(h=u[c])&&(v[p[c]]=!(m[p[c]]=h));if(o){if(i||t){if(i){for(u=[],c=v.length;c--;)(h=v[c])&&u.push(m[c]=h);i(null,v=[],u,l)}for(c=v.length;c--;)(h=v[c])&&(u=i?N(o,h):d[c])>-1&&(o[u]=!(s[u]=h))}}else v=wt(v===s?v.splice(f,v.length):v),i?i(null,s,v,l):I.apply(s,v)})}function Et(t){for(var e,n,i,o=t.length,s=r.relative[t[0].type],a=s||r.relative[" "],l=s?1:0,c=_t(function(t){return t===e},a,!0),h=_t(function(t){return N(e,t)>-1},a,!0),d=[function(t,n,r){var i=!s&&(r||n!==u)||((e=n).nodeType?c(t,n,r):h(t,n,r));return e=null,i}];l<o;l++)if(n=r.relative[t[l].type])d=[_t(xt(d),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[_]){for(i=++l;i<o&&!r.relative[t[i].type];i++);return St(l>1&&xt(d),l>1&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(G,"$1"),n,l<i&&Et(t.slice(l,i)),i<o&&Et(t=t.slice(i)),i<o&&bt(t))}d.push(n)}return xt(d)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,s=at.tokenize=function(t,e){var n,i,o,s,a,l,u,c=C[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],u=r.preFilter;a;){for(s in n&&!(i=U.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),n=!1,(i=H.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(G," ")}),a=a.slice(n.length)),r.filter)!(i=Y[s].exec(a))||u[s]&&!(i=u[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):C(t,l).slice(0)},a=at.compile=function(t,e){var n,i=[],o=[],a=k[t+" "];if(!a){for(e||(e=s(t)),n=e.length;n--;)(a=Et(e[n]))[_]?i.push(a):o.push(a);(a=k(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,s,a,l,c){var h,f,m,v=0,y="0",b=o&&[],_=[],x=u,S=o||i&&r.find.TAG("*",c),E=w+=null==x?1:Math.random()||.1,C=S.length;for(c&&(u=s==p||s||c);y!==C&&null!=(h=S[y]);y++){if(i&&h){for(f=0,s||h.ownerDocument==p||(d(h),a=!g);m=t[f++];)if(m(h,s||p,a)){l.push(h);break}c&&(w=E)}n&&((h=!m&&h)&&v--,o&&b.push(h))}if(v+=y,n&&y!==v){for(f=0;m=e[f++];)m(b,_,s,a);if(o){if(v>0)for(;y--;)b[y]||_[y]||(_[y]=O.call(l));_=wt(_)}I.apply(l,_),c&&!o&&_.length>0&&v+e.length>1&&at.uniqueSort(l)}return c&&(w=E,u=x),b};return n?ut(o):o}(o,i))).selector=t}return a},l=at.select=function(t,e,n,i){var o,l,u,c,h,d="function"==typeof t&&t,p=!i&&s(t=d.selector||t);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===e.nodeType&&g&&r.relative[l[1].type]){if(!(e=(r.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=Y.needsContext.test(t)?0:l.length;o--&&!r.relative[c=(u=l[o]).type];)if((h=r.find[c])&&(i=h(u.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(o,1),!(t=i.length&&bt(l)))return I.apply(n,i),n;break}}return(d||a(t,p))(i,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=_.split("").sort(P).join("")===_,n.detectDuplicates=!!h,d(),n.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ht(R,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),at}(r);S.find=C,S.expr=C.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=C.uniqueSort,S.text=C.getText,S.isXMLDoc=C.isXML,S.contains=C.contains,S.escapeSelector=C.escape;var k=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&S(t).is(n))break;r.push(t)}return r},T=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},P=S.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,n){return v(e)?S.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?S.grep(t,function(t){return t===e!==n}):"string"!=typeof e?S.grep(t,function(t){return c.call(e,t)>-1!==n}):S.filter(e,t,n)}S.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?S.find.matchesSelector(r,t)?[r]:[]:S.find.matches(t,S.grep(e,function(t){return 1===t.nodeType}))},S.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(S(t).filter(function(){for(e=0;e<r;e++)if(S.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)S.find(t,i[e],n);return r>1?S.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&P.test(t)?S(t):t||[],!1).length}});var M,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:I.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(S.merge(this,S.parseHTML(r[1],(e=e instanceof S?e[0]:e)&&e.nodeType?e.ownerDocument||e:b,!0)),D.test(r[1])&&S.isPlainObject(e))for(r in e)v(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this)}).prototype=S.fn,M=S(b);var L=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&S(t);if(!P.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(S(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return T((t.parentNode||{}).firstChild,t)},children:function(t){return T(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(A(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},function(t,e){S.fn[t]=function(n,r){var i=S.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=S.filter(r,i)),this.length>1&&(N[t]||S.uniqueSort(i),L.test(t)&&i.reverse()),this.pushStack(i)}});var F=/[^\x20\t\r\n\f]+/g;function B(t){return t}function j(t){throw t}function z(t,e,n,r){var i;try{t&&v(i=t.promise)?i.call(t).done(e).fail(n):t&&v(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return S.each(t.match(F)||[],function(t,n){e[n]=!0}),e}(t):S.extend({},t);var e,n,r,i,o=[],s=[],a=-1,l=function(){for(i=i||t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){S.each(n,function(n,r){v(r)?t.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&e(r)})}(arguments),n&&!e&&l()),this},remove:function(){return S.each(arguments,function(t,e){for(var n;(n=S.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(t){return t?S.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},S.extend({Deferred:function(t){var e=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return S.Deferred(function(n){S.each(e,function(e,r){var i=v(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,n,i){var o=0;function s(t,e,n,i){return function(){var a=this,l=arguments,u=function(){var r,u;if(!(t<o)){if((r=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");v(u=r&&("object"==typeof r||"function"==typeof r)&&r.then)?i?u.call(r,s(o,e,B,i),s(o,e,j,i)):(o++,u.call(r,s(o,e,B,i),s(o,e,j,i),s(o,e,B,e.notifyWith))):(n!==B&&(a=void 0,l=[r]),(i||e.resolveWith)(a,l))}},c=i?u:function(){try{u()}catch(r){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(r,c.stackTrace),t+1>=o&&(n!==j&&(a=void 0,l=[r]),e.rejectWith(a,l))}};t?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),r.setTimeout(c))}}return S.Deferred(function(r){e[0][3].add(s(0,r,v(i)?i:B,r.notifyWith)),e[1][3].add(s(0,r,v(t)?t:B)),e[2][3].add(s(0,r,v(n)?n:j))}).promise()},promise:function(t){return null!=t?S.extend(t,i):i}},o={};return S.each(e,function(t,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add(function(){n=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=a.call(arguments),o=S.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?a.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(z(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||v(i[n]&&i[n].then)))return o.then();for(;n--;)z(i[n],s(n),o.reject);return o.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&V.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){r.setTimeout(function(){throw t})};var G=S.Deferred();function U(){b.removeEventListener("DOMContentLoaded",U),r.removeEventListener("load",U),S.ready()}S.fn.ready=function(t){return G.then(t).catch(function(t){S.readyException(t)}),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==t&&--S.readyWait>0||G.resolveWith(b,[S]))}}),S.ready.then=G.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(S.ready):(b.addEventListener("DOMContentLoaded",U),r.addEventListener("load",U));var H=function(t,e,n,r,i,o,s){var a=0,l=t.length,u=null==n;if("object"===w(n))for(a in i=!0,n)H(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,v(r)||(s=!0),u&&(s?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(S(t),n)})),e))for(;a<l;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:u?e.call(t):l?e(t[0],n):o},q=/^-ms-/,W=/-([a-z])/g;function $(t,e){return e.toUpperCase()}function Y(t){return t.replace(q,"ms-").replace(W,$)}var K=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=S.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},K(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[Y(e)]=n;else for(r in e)i[Y(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in r?[e]:e.match(F)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||S.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var Q=new X,Z=new X,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(n)}catch(i){}Z.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return Z.hasData(t)||Q.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return Q.access(t,e,n)},_removeData:function(t,e){Q.remove(t,e)}}),S.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=Y(r.slice(5)),et(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Z.set(this,t)}):H(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Z.get(o,t))||void 0!==(n=et(o,t))?n:void 0;this.each(function(){Z.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Z.remove(this,t)})}}),S.extend({queue:function(t,e,n){var r;if(t)return r=Q.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=Q.access(t,e,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=S.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=S._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){S.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:S.Callbacks("once memory").add(function(){Q.remove(t,[e+"queue",n])})})}}),S.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?S.queue(this[0],t):void 0===e?this:this.each(function(){var n=S.queue(this,t,e);S._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&S.dequeue(this,t)})},dequeue:function(t){return this.each(function(){S.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=S.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Q.get(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],ot=b.documentElement,st=function(t){return S.contains(t.ownerDocument,t)},at={composed:!0};ot.getRootNode&&(st=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(at)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===S.css(t,"display")};function ut(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return S.css(t,e,"")},l=a(),u=n&&n[3]||(S.cssNumber[e]?"":"px"),c=t.nodeType&&(S.cssNumber[e]||"px"!==u&&+l)&&rt.exec(S.css(t,e));if(c&&c[3]!==u){for(u=u||c[3],c=+(l/=2)||1;s--;)S.style(t,e,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;S.style(t,e,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var ct={};function ht(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=S.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function dt(t,e){for(var n,r,i=[],o=0,s=t.length;o<s;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&lt(r)&&(i[o]=ht(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}S.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){lt(this)?S(this).show():S(this).hide()})}});var pt,ft,gt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i;pt=b.createDocumentFragment().appendChild(b.createElement("div")),(ft=b.createElement("input")).setAttribute("type","radio"),ft.setAttribute("checked","checked"),ft.setAttribute("name","t"),pt.appendChild(ft),m.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",m.option=!!pt.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?S.merge([t],n):n}function _t(t,e){for(var n=0,r=t.length;n<r;n++)Q.set(t[n],"globalEval",!e||Q.get(e[n],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,m.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var xt=/<|&#?\w+;/;function wt(t,e,n,r,i){for(var o,s,a,l,u,c,h=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((o=t[p])||0===o)if("object"===w(o))S.merge(d,o.nodeType?[o]:o);else if(xt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(mt.exec(o)||["",""])[1].toLowerCase(),s.innerHTML=(l=yt[a]||yt._default)[1]+S.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;S.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(r&&S.inArray(o,r)>-1)i&&i.push(o);else if(u=st(o),s=bt(h.appendChild(o),"script"),u&&_t(s),n)for(c=0;o=s[c++];)vt.test(o.type||"")&&n.push(o);return h}var St=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function Ct(){return!1}function kt(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function Tt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Tt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ct;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return S().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),t.each(function(){S.event.add(this,e,i,r,n)})}function Pt(t,e,n){n?(Q.set(t,e,!1),S.event.add(t,e,{namespace:!1,handler:function(t){var r,i,o=Q.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(S.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=a.call(arguments),Q.set(this,e,o),r=n(this,e),this[e](),o!==(i=Q.get(this,e))||r?Q.set(this,e,!1):i={},o!==i)return t.stopImmediatePropagation(),t.preventDefault(),i&&i.value}else o.length&&(Q.set(this,e,{value:S.event.trigger(S.extend(o[0],S.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Q.get(t,e)&&S.event.add(t,e,Et)}S.event={global:{},add:function(t,e,n,r,i){var o,s,a,l,u,c,h,d,p,f,g,m=Q.get(t);if(K(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(ot,i),n.guid||(n.guid=S.guid++),(l=m.events)||(l=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(F)||[""]).length;u--;)p=g=(a=St.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=S.event.special[p]||{},h=S.event.special[p=(i?h.delegateType:h.bindType)||p]||{},c=S.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,f,s)||t.addEventListener&&t.addEventListener(p,s)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),S.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,s,a,l,u,c,h,d,p,f,g,m=Q.hasData(t)&&Q.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(F)||[""]).length;u--;)if(p=g=(a=St.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=S.event.special[p]||{},d=l[p=(r?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,m.handle)||S.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)S.event.remove(t,p+e[u],n,r,!0);S.isEmptyObject(l)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=new Array(arguments.length),l=S.event.fix(t),u=(Q.get(this,"events")||Object.create(null))[l.type]||[],c=S.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(s=S.event.handlers.call(this,l,u),e=0;(i=s[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,r,i,o,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?S(i,this).index(u)>-1:S.find(i,this,null,[u]).length),s[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&A(e,"input")&&Pt(e,"click",Et),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&A(e,"input")&&Pt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&A(e,"input")&&Q.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(t,e){S.event.special[t]={setup:function(){return Pt(this,t,kt),!1},trigger:function(){return Pt(this,t),!0},_default:function(){return!0},delegateType:e}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){S.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||S.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),S.fn.extend({on:function(t,e,n,r){return Tt(this,t,e,n,r)},one:function(t,e,n,r){return Tt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,S(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ct),this.each(function(){S.event.remove(this,t,n,e)})}});var At=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Nt(t,e){var n,r,i,o,s,a;if(1===e.nodeType){if(Q.hasData(t)&&(a=Q.get(t).events))for(i in Q.remove(e,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)S.event.add(e,i,a[i][n]);Z.hasData(t)&&(o=Z.access(t),s=S.extend({},o),Z.set(e,s))}}function Rt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ft(t,e,n,r){e=l(e);var i,o,s,a,u,c,h=0,d=t.length,p=d-1,f=e[0],g=v(f);if(g||d>1&&"string"==typeof f&&!m.checkClone&&Dt.test(f))return t.each(function(i){var o=t.eq(i);g&&(e[0]=f.call(this,i,o.html())),Ft(o,e,n,r)});if(d&&(o=(i=wt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=S.map(bt(i,"script"),It)).length;h<d;h++)u=i,h!==p&&(u=S.clone(u,!0,!0),a&&S.merge(s,bt(u,"script"))),n.call(t[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,S.map(s,Lt),h=0;h<a;h++)vt.test((u=s[h]).type||"")&&!Q.access(u,"globalEval")&&S.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):x(u.textContent.replace(Ot,""),u,c))}return t}function Bt(t,e,n){for(var r,i=e?S.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(bt(r)),r.parentNode&&(n&&st(r)&&_t(bt(r,"script")),r.parentNode.removeChild(r));return t}S.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),l=st(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(s=bt(a),r=0,i=(o=bt(t)).length;r<i;r++)Rt(o[r],s[r]);if(e)if(n)for(o=o||bt(t),s=s||bt(a),r=0,i=o.length;r<i;r++)Nt(o[r],s[r]);else Nt(t,a);return(s=bt(a,"script")).length>0&&_t(s,!l&&bt(t,"script")),a},cleanData:function(t){for(var e,n,r,i=S.event.special,o=0;void 0!==(n=t[o]);o++)if(K(n)){if(e=n[Q.expando]){if(e.events)for(r in e.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,e.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Bt(this,t,!0)},remove:function(t){return Bt(this,t)},text:function(t){return H(this,function(t){return void 0===t?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ft(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)})},prepend:function(){return Ft(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return S.clone(this,t,e)})},html:function(t){return H(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!yt[(mt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,function(e){var n=this.parentNode;S.inArray(this,t)<0&&(S.cleanData(bt(this)),n&&n.replaceChild(e,this))},t)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){S.fn[t]=function(t){for(var n,r=[],i=S(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),S(i[s])[e](n),u.apply(r,n.get());return this.pushStack(r)}});var jt=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Vt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Gt=new RegExp(it.join("|"),"i");function Ut(t,e,n){var r,i,o,s,a=t.style;return(n=n||zt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||st(t)||(s=S.style(t,e)),!m.pixelBoxStyles()&&jt.test(s)&&Gt.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Ht(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(u).appendChild(c);var t=r.getComputedStyle(c);n="1%"!==t.top,l=12===e(t.marginLeft),c.style.right="60%",s=36===e(t.right),i=36===e(t.width),c.style.position="absolute",o=12===e(c.offsetWidth/3),ot.removeChild(u),c=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,s,a,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",ot.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,ot.removeChild(t)),a}}))}();var qt=["Webkit","Moz","ms"],Wt=b.createElement("div").style,$t={};function Yt(t){return S.cssProps[t]||$t[t]||(t in Wt?t:$t[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=qt.length;n--;)if((t=qt[n]+e)in Wt)return t}(t)||t)}var Kt=/^(none|table(?!-c[ea]).+)/,Xt=/^--/,Qt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,n){var r=rt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function te(t,e,n,r,i,o){var s="width"===e?1:0,a=0,l=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=S.css(t,n+it[s],!0,i)),r?("content"===n&&(l-=S.css(t,"padding"+it[s],!0,i)),"margin"!==n&&(l-=S.css(t,"border"+it[s]+"Width",!0,i))):(l+=S.css(t,"padding"+it[s],!0,i),"padding"!==n?l+=S.css(t,"border"+it[s]+"Width",!0,i):a+=S.css(t,"border"+it[s]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))||0),l}function ee(t,e,n){var r=zt(t),i=(!m.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,r),o=i,s=Ut(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(jt.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&A(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===S.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+te(t,e,n||(i?"border":"content"),o,r,s)+"px"}function ne(t,e,n,r,i){return new ne.prototype.init(t,e,n,r,i)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ut(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=Y(e),l=Xt.test(e),u=t.style;if(l||(e=Yt(a)),s=S.cssHooks[e]||S.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:u[e];"string"==(o=typeof n)&&(i=rt.exec(n))&&i[1]&&(n=ut(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(S.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,r){var i,o,s,a=Y(e);return Xt.test(e)||(e=Yt(a)),(s=S.cssHooks[e]||S.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=Ut(t,e,r)),"normal"===i&&e in Zt&&(i=Zt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(t,e){S.cssHooks[e]={get:function(t,n,r){if(n)return!Kt.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ee(t,e,r):Vt(t,Qt,function(){return ee(t,e,r)})},set:function(t,n,r){var i,o=zt(t),s=!m.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===S.css(t,"boxSizing",!1,o),l=r?te(t,e,r,a,o):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-te(t,e,"border",!1,o)-.5)),l&&(i=rt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=S.css(t,e)),Jt(0,n,l)}}}),S.cssHooks.marginLeft=Ht(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Ut(t,"marginLeft"))||t.getBoundingClientRect().left-Vt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(t,e){S.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+it[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(S.cssHooks[t+e].set=Jt)}),S.fn.extend({css:function(t,e){return H(this,function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=zt(t),i=e.length;s<i;s++)o[e[s]]=S.css(t,e[s],!1,r);return o}return void 0!==n?S.style(t,e,n):S.css(t,e)},t,e,arguments.length>1)}}),S.Tween=ne,(ne.prototype={constructor:ne,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var t=ne.propHooks[this.prop];return t&&t.get?t.get(this):ne.propHooks._default.get(this)},run:function(t){var e,n=ne.propHooks[this.prop];return this.pos=e=this.options.duration?S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ne.propHooks._default.set(this),this}}).init.prototype=ne.prototype,(ne.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ne.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},S.fx=ne.prototype.init,S.fx.step={};var re,ie,oe=/^(?:toggle|show|hide)$/,se=/queueHooks$/;function ae(){ie&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ae):r.setTimeout(ae,S.fx.interval),S.fx.tick())}function le(){return r.setTimeout(function(){re=void 0}),re=Date.now()}function ue(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=it[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ce(t,e,n){for(var r,i=(he.tweeners[e]||[]).concat(he.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function he(t,e,n){var r,i,o=0,s=he.prefilters.length,a=S.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=re||le(),n=Math.max(0,u.startTime+u.duration-e),r=1-(n/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(r);return a.notifyWith(t,[u,r,n]),r<1&&s?n:(s||a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||le(),duration:n.duration,tweens:[],createTween:function(e,n){var r=S.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return e?(a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u,e])):a.rejectWith(t,[u,e]),this}}),c=u.props;for(function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=Y(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=S.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);o<s;o++)if(r=he.prefilters[o].call(u,t,c,u.opts))return v(r.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,ce,u),v(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(F);for(var n,r=0,i=t.length;r<i;r++)(he.tweeners[n=t[r]]=he.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,l,u,c,h="width"in e||"height"in e,d=this,p={},f=t.style,g=t.nodeType&&lt(t),m=Q.get(t,"fxshow");for(r in n.queue||(null==(s=S._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,S.queue(t,"fx").length||s.empty.fire()})})),e)if(oe.test(i=e[r])){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}p[r]=m&&m[r]||S.style(t,r)}if((l=!S.isEmptyObject(e))||!S.isEmptyObject(p))for(r in h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=m&&m.display)&&(u=Q.get(t,"display")),"none"===(c=S.css(t,"display"))&&(u?c=u:(dt([t],!0),u=t.style.display||u,c=S.css(t,"display"),dt([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(t,"float")&&(l||(d.done(function(){f.display=u}),null==u&&(u="none"===(c=f.display)?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=Q.access(t,"fxshow",{display:u}),o&&(m.hidden=!g),g&&dt([t],!0),d.done(function(){for(r in g||dt([t]),Q.remove(t,"fxshow"),p)S.style(t,r,p[r])})),l=ce(g?m[r]:0,r,d),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),S.speed=function(t,e,n){var r=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in S.fx.speeds?S.fx.speeds[r.duration]:S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(t,e,n,r){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),s=function(){var e=he(this,S.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=S.timers,s=Q.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&se.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||S.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Q.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=S.timers,s=r?r.length:0;for(n.finish=!0,S.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),S.each(["toggle","show","hide"],function(t,e){var n=S.fn[e];S.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,r,i)}}),S.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){S.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),re=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ie||(ie=!0,ae())},S.fx.stop=function(){ie=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,e){return t=S.fx&&S.fx.speeds[t]||t,this.queue(e=e||"fx",function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}})},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var de,pe=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return H(this,S.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){S.removeAttr(this,t)})}}),S.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?S.prop(t,e,n):(1===o&&S.isXMLDoc(t)||(i=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?de:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=S.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&A(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(F);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),de={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(t,e){var n=pe[e]||S.find.attr;pe[e]=function(t,e,r){var i,o,s=e.toLowerCase();return r||(o=pe[s],pe[s]=i,i=null!=n(t,e,r)?s:null,pe[s]=o),i}});var fe=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;function me(t){return(t.match(F)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}S.fn.extend({prop:function(t,e){return H(this,S.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[S.propFix[t]||t]})}}),S.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(t)||(i=S.propHooks[e=S.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):fe.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(t){return null},set:function(t){}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,l=0;if(v(t))return this.each(function(e){S(this).addClass(t.call(this,e,ve(this)))});if((e=ye(t)).length)for(;n=this[l++];)if(i=ve(n),r=1===n.nodeType&&" "+me(i)+" "){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=me(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,l=0;if(v(t))return this.each(function(e){S(this).removeClass(t.call(this,e,ve(this)))});if(!arguments.length)return this.attr("class","");if((e=ye(t)).length)for(;n=this[l++];)if(i=ve(n),r=1===n.nodeType&&" "+me(i)+" "){for(s=0;o=e[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(a=me(r))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):v(t)?this.each(function(n){S(this).toggleClass(t.call(this,n,ve(this),e),e)}):this.each(function(){var e,i,o,s;if(r)for(i=0,o=S(this),s=ye(t);e=s[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ve(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Q.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+me(ve(n))+" ").indexOf(e)>-1)return!0;return!1}});var be=/\r/g;S.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=v(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,S(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=S.map(i,function(t){return null==t?"":t+""})),(e=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(be,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:me(S.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:i.length;for(r=o<0?l:s?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(e=S(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=S.makeArray(e),s=i.length;s--;)((r=i[s]).selected=S.inArray(S.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=S.inArray(S(t).val(),e)>-1}},m.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in r;var _e=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};S.extend(S.event,{trigger:function(t,e,n,i){var o,s,a,l,u,c,h,d,f=[n||b],g=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(s=d=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!_e.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),u=g.indexOf(":")<0&&"on"+g,(t=t[S.expando]?t:new S.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:S.makeArray(e,[t]),h=S.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!y(n)){for(_e.test((l=h.delegateType||g)+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(n.ownerDocument||b)&&f.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)d=s,t.type=o>1?l:h.bindType||g,(c=(Q.get(s,"events")||Object.create(null))[t.type]&&Q.get(s,"handle"))&&c.apply(s,e),(c=u&&s[u])&&c.apply&&K(s)&&(t.result=c.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!K(n)||u&&v(n[g])&&!y(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,xe),n[g](),t.isPropagationStopped()&&d.removeEventListener(g,xe),S.event.triggered=void 0,a&&(n[u]=a)),t.result}},simulate:function(t,e,n){var r=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(r,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each(function(){S.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){S.event.simulate(e,t.target,S.event.fix(t))};S.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,e);i||r.addEventListener(t,n,!0),Q.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,e)-1;i?Q.access(r,e,i):(r.removeEventListener(t,n,!0),Q.remove(r,e))}}});var we=r.location,Se={guid:Date.now()},Ee=/\?/;S.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(i){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Ce=/\[\]$/,ke=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function Ae(t,e,n,r){var i;if(Array.isArray(e))S.each(e,function(e,i){n||Ce.test(t)?r(t,i):Ae(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==w(e))r(t,e);else for(i in e)Ae(t+"["+i+"]",e[i],n,r)}S.param=function(t,e){var n,r=[],i=function(t,e){var n=v(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,function(){i(this.name,this.value)});else for(n in t)Ae(n,t[n],e,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&Pe.test(this.nodeName)&&!Te.test(t)&&(this.checked||!gt.test(t))}).map(function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(t){return{name:e.name,value:t.replace(ke,"\r\n")}}):{name:e.name,value:n.replace(ke,"\r\n")}}).get()}});var De=/%20/g,Oe=/#.*$/,Me=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:GET|HEAD)$/,Ne=/^\/\//,Re={},Fe={},Be="*/".concat("*"),je=b.createElement("a");function ze(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(F)||[];if(v(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ve(t,e,n,r){var i={},o=t===Fe;function s(a){var l;return i[a]=!0,S.each(t[a]||[],function(t,a){var u=a(e,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),s(u),!1)}),l}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Ge(t,e){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&S.extend(!0,t,r),t}je.href=we.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(we.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,S.ajaxSettings),e):Ge(S.ajaxSettings,t)},ajaxPrefilter:ze(Re),ajaxTransport:ze(Fe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var n,i,o,s,a,l,u,c,h,d,p=S.ajaxSetup({},e=e||{}),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?S(f):S.event,m=S.Deferred(),v=S.Callbacks("once memory"),y=p.statusCode||{},_={},x={},w="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s)for(s={};e=Ie.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)E.always(t[E.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),C(0,e),this}};if(m.promise(E),p.url=((t||p.url||we.href)+"").replace(Ne,we.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=je.protocol+"//"+je.host!=l.protocol+"//"+l.host}catch(k){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Ve(Re,p,e,E),u)return E;for(h in(c=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Le.test(p.type),i=p.url.replace(Oe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(De,"+")):(d=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Ee.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Me,"$1"),d=(Ee.test(i)?"&":"?")+"_="+Se.guid+++d),p.url=i+d),p.ifModified&&(S.lastModified[i]&&E.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&E.setRequestHeader("If-None-Match",S.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Be+"; q=0.01":""):p.accepts["*"]),p.headers)E.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,E,p)||u))return E.abort();if(w="abort",v.add(p.complete),E.done(p.success),E.fail(p.error),n=Ve(Fe,p,e,E)){if(E.readyState=1,c&&g.trigger("ajaxSend",[E,p]),u)return E;p.async&&p.timeout>0&&(a=r.setTimeout(function(){E.abort("timeout")},p.timeout));try{u=!1,n.send(_,C)}catch(k){if(u)throw k;C(-1,k)}}else C(-1,"No Transport");function C(t,e,s,l){var h,d,b,_,x,w=e;u||(u=!0,a&&r.clearTimeout(a),n=void 0,o=l||"",E.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(_=function(t,e,n){for(var r,i,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,E,s)),!h&&S.inArray("script",p.dataTypes)>-1&&S.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),_=function(t,e,n,r){var i,o,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(k){return{state:"parsererror",error:s?k:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(p,_,E,h),h?(p.ifModified&&((x=E.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=x),(x=E.getResponseHeader("etag"))&&(S.etag[i]=x)),204===t||"HEAD"===p.type?w="nocontent":304===t?w="notmodified":(w=_.state,d=_.data,h=!(b=_.error))):(b=w,!t&&w||(w="error",t<0&&(t=0))),E.status=t,E.statusText=(e||w)+"",h?m.resolveWith(f,[d,w,E]):m.rejectWith(f,[E,w,b]),E.statusCode(y),y=void 0,c&&g.trigger(h?"ajaxSuccess":"ajaxError",[E,p,h?d:b]),v.fireWith(f,[E,w]),c&&(g.trigger("ajaxComplete",[E,p]),--S.active||S.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],function(t,e){S[e]=function(t,n,r,i){return v(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:t,type:e,dataType:i,data:n,success:r},S.isPlainObject(t)&&t))}}),S.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),S._evalUrl=function(t,e,n){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e,n)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return v(t)?this.each(function(e){S(this).wrapInner(t.call(this,e))}):this.each(function(){var e=S(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=v(t);return this.each(function(n){S(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ue={0:200,1223:204},He=S.ajaxSettings.xhr();m.cors=!!He&&"withCredentials"in He,m.ajax=He=!!He,S.ajaxTransport(function(t){var e,n;if(m.cors||He&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ue[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout(function(){e&&n()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(l){if(e)throw l}},abort:function(){e&&e()}}}),S.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),S.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=S("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}});var qe,We=[],$e=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||S.expando+"_"+Se.guid++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,s,a=!1!==t.jsonp&&($e.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&$e.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace($e,"$1"+i):!1!==t.jsonp&&(t.url+=(Ee.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||S.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always(function(){void 0===o?S(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,We.push(i)),s&&v(o)&&o(s[0]),s=o=void 0}),"script"}),m.createHTMLDocument=((qe=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=D.exec(t))?[e.createElement(i[1])]:(i=wt([t],e,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return a>-1&&(r=me(t.slice(a)),t=t.slice(0,a)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&S.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?S("<div>").append(S.parseHTML(t)).find(r):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(t,e,n){var r,i,o,s,a,l,u=S.css(t,"position"),c=S(t),h={};"static"===u&&(t.style.position="relative"),a=c.offset(),o=S.css(t,"top"),l=S.css(t,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(r=c.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),v(e)&&(e=e.call(t,n,S.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):c.css(h)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),i.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-S.css(r,"marginTop",!0),left:e.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||ot})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;S.fn[t]=function(r){return H(this,function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),S.each(["top","left"],function(t,e){S.cssHooks[e]=Ht(m.pixelPosition,function(t,n){if(n)return n=Ut(t,e),jt.test(n)?S(t).position()[e]+"px":n})}),S.each({Height:"height",Width:"width"},function(t,e){S.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){S.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return H(this,function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?S.css(e,n,a):S.style(e,n,i,a)},e,s?i:void 0,s)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){S.fn[e]=function(t){return this.on(e,t)}}),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){S.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});var Ye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return r=a.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(a.call(arguments)))}).guid=t.guid=t.guid||S.guid++,i},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=v,S.isWindow=y,S.camelCase=Y,S.type=w,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},S.trim=function(t){return null==t?"":(t+"").replace(Ye,"")},void 0===(n=(function(){return S}).apply(e,[]))||(t.exports=n);var Ke=r.jQuery,Xe=r.$;return S.noConflict=function(t){return r.$===S&&(r.$=Xe),t&&r.jQuery===S&&(r.jQuery=Ke),S},void 0===i&&(r.jQuery=r.$=S),S})},5132:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var r=n(2458),i=r.glob.performance&&r.glob.performance.now?function(){return r.glob.performance.now()}:function(){return(new Date).getTime()};e.Animation=function(){function t(e,n){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=e,this.setLayers(n)}return t.prototype.setLayers=function(t){return this.layers=t?t.length>0?t:[t]:[],this},t.prototype.getLayers=function(){return this.layers},t.prototype.addLayer=function(t){var e,n=this.layers,r=n.length;for(e=0;e<r;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0},t.prototype.isRunning=function(){var e,n=t.animations,r=n.length;for(e=0;e<r;e++)if(n[e].id===this.id)return!0;return!1},t.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this),this},t.prototype.stop=function(){return t._removeAnimation(this),this},t.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,n=t.id,r=this.animations,i=r.length;for(e=0;e<i;e++)if(r[e].id===n){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,n,r,o,s,a,l,u={},c=this.animations;for(r=0;r<c.length;r++)if(e=(t=c[r]).layers,n=t.func,t._updateFrameObject(i()),s=e.length,!n||!1!==n.call(t,t.frame))for(o=0;o<s;o++)void 0!==(a=e[o])._id&&(u[a._id]=a);for(l in u)u.hasOwnProperty(l)&&u[l].draw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},t.animations=[],t.animIdCounter=0,t.animRunning=!1,t}()},3114:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;var o,s=n(9923),a=n(4138),l=n(2458),u=n(6207),c=n(8760),h=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||l.Konva.pixelRatio||function(){if(o)return o;var t=s.Util.createCanvasElement().getContext("2d");return o=(l.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=s.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return t.prototype.getContext=function(){return this.context},t.prototype.getPixelRatio=function(){return this.pixelRatio},t.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},t.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.setSize=function(t,e){this.setWidth(t||0),this.setHeight(e||0)},t.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(r){return s.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},t}();e.Canvas=h,u.Factory.addGetterSetter(h,"pixelRatio",void 0,c.getNumberValidator()),e.SceneCanvas=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.context=new a.SceneContext(n),n.setSize(e.width,e.height),n}return i(e,t),e}(h),e.HitCanvas=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.hitCanvas=!0,n.context=new a.HitContext(n),n.setSize(e.width,e.height),n}return i(e,t),e}(h)},687:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var o=n(9923),s=n(6207),a=n(6191),l=n(8760),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new o.Collection,e}return i(e,t),e.prototype.getChildren=function(t){if(!t)return this.children;var e=new o.Collection;return this.children.each(function(n){t(n)&&e.push(n)}),e},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new o.Collection,this},e.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new o.Collection,this},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var r=t[0];if(r.getParent())return r.moveTo(this),this;var i=this.children;return this._validateAdd(r),r._clearCaches(),r.index=i.length,r.parent=this,i.push(r),this._fire("add",{child:r}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return o.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},e.prototype._generalFind=function(t,e){var n=[];return this._descendants(function(r){var i=r._isMatch(t);return i&&n.push(r),!(!i||!e)}),o.Collection.toCollection(n)},e.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var n=this.children[e];if(t(n))return!0;if(n.hasChildren()&&n._descendants(t))return!0}return!1},e.prototype.toObject=function(){var t=a.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,r=0;r<n;r++)t.children.push(e[r].toObject());return t},e.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},e.prototype.clone=function(t){var e=a.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},e.prototype.getAllIntersections=function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},e.prototype._setChildrenIndices=function(){this.children.each(function(t,e){t.index=e})},e.prototype.drawScene=function(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas(),i=r&&r.getContext(),o=this._getCanvasCache(),s=o&&o.scene,a=r&&r.isCache;if(!this.isVisible()&&!a)return this;if(s){i.save();var l=this.getAbsoluteTransform(e).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(i),i.restore()}else this._drawChildren("drawScene",r,e);return this},e.prototype.drawHit=function(t,e){if(!this.shouldDrawHit(e))return this;var n=this.getLayer(),r=t||n&&n.hitCanvas,i=r&&r.getContext(),o=this._getCanvasCache();if(o&&o.hit){i.save();var s=this.getAbsoluteTransform(e).getMatrix();i.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",r,e);return this},e.prototype._drawChildren=function(t,e,n){var r=e&&e.getContext(),i=this.clipWidth(),o=this.clipHeight(),s=this.clipFunc(),a=i&&o||s,l=n===this;if(a){r.save();var u=this.getAbsoluteTransform(n),c=u.getMatrix();if(r.transform(c[0],c[1],c[2],c[3],c[4],c[5]),r.beginPath(),s)s.call(this,r,this);else{var h=this.clipX(),d=this.clipY();r.rect(h,d,i,o)}r.clip(),c=u.copy().invert().getMatrix(),r.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var p=!l&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;p&&(r.save(),r._applyGlobalCompositeOperation(this)),this.children.each(function(r){r[t](e,n)}),p&&r.restore(),a&&r.restore()},e.prototype.getClientRect=function(t){var e,n,r,i,o,s=(t=t||{}).skipTransform,a=t.relativeTo,l=this;this.children.each(function(o){if(o.visible()){var s=o.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===s.width&&0===s.height||(void 0===e?(e=s.x,n=s.y,r=s.x+s.width,i=s.y+s.height):(e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x+s.width),i=Math.max(i,s.y+s.height)))}});for(var u=this.find("Shape"),c=!1,h=0;h<u.length;h++)if(u[h]._isVisible(this)){c=!0;break}return o=c&&void 0!==e?{x:e,y:n,width:r-e,height:i-n}:{x:0,y:0,width:0,height:0},s?o:this._transformedRect(o,a)},e}(a.Node);e.Container=u,s.Factory.addComponentsGetterSetter(u,"clip",["x","y","width","height"]),s.Factory.addGetterSetter(u,"clipX",void 0,l.getNumberValidator()),s.Factory.addGetterSetter(u,"clipY",void 0,l.getNumberValidator()),s.Factory.addGetterSetter(u,"clipWidth",void 0,l.getNumberValidator()),s.Factory.addGetterSetter(u,"clipHeight",void 0,l.getNumberValidator()),s.Factory.addGetterSetter(u,"clipFunc"),o.Collection.mapMethods(u)},4138:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;var o=n(9923),s=n(2458),a=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],l=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),s.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return t.prototype.fillShape=function(t){t.fillEnabled()&&this._fill(t)},t.prototype._fill=function(t){},t.prototype.strokeShape=function(t){t.hasStroke()&&this._stroke(t)},t.prototype._stroke=function(t){},t.prototype.fillStrokeShape=function(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))},t.prototype.getTrace=function(t){var e,n,r,i,s=this.traceArr,a=s.length,l="";for(e=0;e<a;e++)(r=(n=s[e]).method)?(i=n.args,l+=r,t?l+="()":o.Util._isArray(i[0])?l+="(["+i.join(",")+"])":l+="("+i.join(",")+")"):(l+=n.property,t||(l+="="+n.val)),l+=";";return l},t.prototype.clearTrace=function(){this.traceArr=[]},t.prototype._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},t.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},t.prototype._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},t.prototype._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},t.prototype._applyLineJoin=function(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)},t.prototype.setAttr=function(t,e){this._context[t]=e},t.prototype.arc=function(t,e,n,r,i,o){this._context.arc(t,e,n,r,i,o)},t.prototype.arcTo=function(t,e,n,r,i){this._context.arcTo(t,e,n,r,i)},t.prototype.beginPath=function(){this._context.beginPath()},t.prototype.bezierCurveTo=function(t,e,n,r,i,o){this._context.bezierCurveTo(t,e,n,r,i,o)},t.prototype.clearRect=function(t,e,n,r){this._context.clearRect(t,e,n,r)},t.prototype.clip=function(){this._context.clip()},t.prototype.closePath=function(){this._context.closePath()},t.prototype.createImageData=function(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0},t.prototype.createLinearGradient=function(t,e,n,r){return this._context.createLinearGradient(t,e,n,r)},t.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,r,i,o){return this._context.createRadialGradient(t,e,n,r,i,o)},t.prototype.drawImage=function(t,e,n,r,i,o,s,a,l){var u=arguments,c=this._context;3===u.length?c.drawImage(t,e,n):5===u.length?c.drawImage(t,e,n,r,i):9===u.length&&c.drawImage(t,e,n,r,i,o,s,a,l)},t.prototype.ellipse=function(t,e,n,r,i,o,s,a){this._context.ellipse(t,e,n,r,i,o,s,a)},t.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},t.prototype.fill=function(){this._context.fill()},t.prototype.fillRect=function(t,e,n,r){this._context.fillRect(t,e,n,r)},t.prototype.strokeRect=function(t,e,n,r){this._context.strokeRect(t,e,n,r)},t.prototype.fillText=function(t,e,n){this._context.fillText(t,e,n)},t.prototype.measureText=function(t){return this._context.measureText(t)},t.prototype.getImageData=function(t,e,n,r){return this._context.getImageData(t,e,n,r)},t.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},t.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},t.prototype.rect=function(t,e,n,r){this._context.rect(t,e,n,r)},t.prototype.putImageData=function(t,e,n){this._context.putImageData(t,e,n)},t.prototype.quadraticCurveTo=function(t,e,n,r){this._context.quadraticCurveTo(t,e,n,r)},t.prototype.restore=function(){this._context.restore()},t.prototype.rotate=function(t){this._context.rotate(t)},t.prototype.save=function(){this._context.save()},t.prototype.scale=function(t,e){this._context.scale(t,e)},t.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},t.prototype.getLineDash=function(){return this._context.getLineDash()},t.prototype.setTransform=function(t,e,n,r,i,o){this._context.setTransform(t,e,n,r,i,o)},t.prototype.stroke=function(){this._context.stroke()},t.prototype.strokeText=function(t,e,n,r){this._context.strokeText(t,e,n,r)},t.prototype.transform=function(t,e,n,r,i,o){this._context.transform(t,e,n,r,i,o)},t.prototype.translate=function(t,e){this._context.translate(t,e)},t.prototype._enableTrace=function(){var t,e,n=this,r=a.length,i=o.Util._simplifyArray,s=this.setAttr,l=function(t){var r,o=n[t];n[t]=function(){return e=i(Array.prototype.slice.call(arguments,0)),r=o.apply(n,arguments),n._trace({method:t,args:e}),r}};for(t=0;t<r;t++)l(a[t]);n.setAttr=function(){s.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}},t.prototype._applyGlobalCompositeOperation=function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)},t}();e.Context=l,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(t){Object.defineProperty(l.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}),e.SceneContext=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},e.prototype._fillPattern=function(t){var e=t.getFillPatternX(),n=t.getFillPatternY(),r=s.Konva.getAngle(t.getFillPatternRotation()),i=t.getFillPatternOffsetX(),o=t.getFillPatternOffsetY();t.getFillPatternScaleX(),t.getFillPatternScaleY(),(e||n)&&this.translate(e||0,n||0),r&&this.rotate(r),(i||o)&&this.translate(-1*i,-1*o),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fill=function(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var r=t.getFillPatternImage();if(r&&"pattern"===n)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}},e.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,n.x,n.y);if(r){for(var o=0;o<r.length;o+=2)i.addColorStop(r[o],r[o+1]);this.setAttr("strokeStyle",i)}},e.prototype._stroke=function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}},e.prototype._applyShadow=function(t){var e=o.Util,n=e.get(t.getShadowRGBA(),"black"),r=e.get(t.getShadowBlur(),5),i=e.get(t.getShadowOffset(),{x:0,y:0}),s=t.getAbsoluteScale(),a=this.canvas.getPixelRatio(),l=s.x*a,u=s.y*a;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",r*Math.min(Math.abs(l),Math.abs(u))),this.setAttr("shadowOffsetX",i.x*l),this.setAttr("shadowOffsetY",i.y*u)},e}(l),e.HitContext=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i="auto"===r?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(l)},2356:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;var r=n(2458),i=n(9923);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach(function(e){"dragging"===e.dragStatus&&(t=!0)}),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach(function(e){t=e.node}),t},_dragElements:new Map,_drag:function(t){var n=[];e.DD._dragElements.forEach(function(e,r){var o=e.node,s=o.getStage();s.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=i.Util._getFirstPointerId(t));var a=s._changedPointerPositions.find(function(t){return t.id===e.pointerId});if(a){if("dragging"!==e.dragStatus){var l=o.dragDistance();if(Math.max(Math.abs(a.x-e.startPointerPos.x),Math.abs(a.y-e.startPointerPos.y))<l)return;if(o.startDrag({evt:t}),!o.isDragging())return}o._setDragPosition(t,e),n.push(o)}}),n.forEach(function(e){e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)})},_endDragBefore:function(t){e.DD._dragElements.forEach(function(n,i){var o=n.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find(function(t){return t.id===n.pointerId})){"dragging"!==n.dragStatus&&"stopped"!==n.dragStatus||(e.DD.justDragged=!0,r.Konva.listenClickTap=!1,n.dragStatus="stopped");var s=n.node.getLayer()||n.node instanceof r.Konva.Stage&&n.node;s&&s.batchDraw()}})},_endDragAfter:function(t){e.DD._dragElements.forEach(function(n,r){"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(r)})}},r.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},6207:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;var r=n(9923),i=n(8760);e.Factory={addGetterSetter:function(t,n,r,i,o){e.Factory.addGetter(t,n,r),e.Factory.addSetter(t,n,i,o),e.Factory.addOverloadedGetterSetter(t,n)},addGetter:function(t,e,n){var i="get"+r.Util._capitalize(e);t.prototype[i]=t.prototype[i]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter:function(t,n,i,o){var s="set"+r.Util._capitalize(n);t.prototype[s]||e.Factory.overWriteSetter(t,n,i,o)},overWriteSetter:function(t,e,n,i){var o="set"+r.Util._capitalize(e);t.prototype[o]=function(t){return n&&null!=t&&(t=n.call(this,t,e)),this._setAttr(e,t),i&&i.call(this),this}},addComponentsGetterSetter:function(t,n,o,s,a){var l,u,c=o.length,h=r.Util._capitalize,d="get"+h(n),p="set"+h(n);t.prototype[d]=function(){var t={};for(l=0;l<c;l++)t[u=o[l]]=this.getAttr(n+h(u));return t};var f=i.getComponentValidator(o);t.prototype[p]=function(t){var e,r=this.attrs[n];for(e in s&&(t=s.call(this,t)),f&&f.call(this,t,n),t)t.hasOwnProperty(e)&&this._setAttr(n+h(e),t[e]);return this._fireChangeEvent(n,r,t),a&&a.call(this),this},e.Factory.addOverloadedGetterSetter(t,n)},addOverloadedGetterSetter:function(t,e){var n=r.Util._capitalize(e),i="set"+n,o="get"+n;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(t,n,i,o){r.Util.error("Adding deprecated "+n);var s="get"+r.Util._capitalize(n),a=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[s]=function(){r.Util.error(a);var t=this.attrs[n];return void 0===t?i:t},e.Factory.addSetter(t,n,o,function(){r.Util.error(a)}),e.Factory.addOverloadedGetterSetter(t,n)},backCompat:function(t,e){r.Util.each(e,function(e,n){var i=t.prototype[n],o="get"+r.Util._capitalize(e),s="set"+r.Util._capitalize(e);function a(){i.apply(this,arguments),r.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=a,t.prototype[o]=a,t.prototype[s]=a})},afterSetFilter:function(){this._filterUpToDate=!1}}},9725:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;var o=n(9923),s=n(8909),a=n(2458),l=function(t){function e(e){var n=t.call(this,e)||this;return n.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),n}return i(e,t),e}(s.Layer);e.FastLayer=l,l.prototype.nodeType="FastLayer",a._registerNode(l),o.Collection.mapMethods(l)},2458:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e._NODES_REGISTRY=e.Konva=e.glob=e._parseUA=void 0;var n=Math.PI/180,r=function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)};e._parseUA=function(t){var e=t.toLowerCase(),n=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),o=!!t.match(/IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",isIE:r(e),mobile:i,ieMobile:o}},e.glob="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"7.2.5",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*n:t},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},UA:e._parseUA(e.glob.navigator&&e.glob.navigator.userAgent||""),document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t},_parseUA:e._parseUA},e._NODES_REGISTRY={},e._registerNode=function(t){e._NODES_REGISTRY[t.prototype.getClassName()]=t,e.Konva[t.prototype.getClassName()]=t}},829:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var o=n(9923),s=n(687),a=n(2458),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to groups.")},e}(s.Container);e.Group=l,l.prototype.nodeType="Group",a._registerNode(l),o.Collection.mapMethods(l)},8909:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;var o=n(9923),s=n(687),a=n(6191),l=n(6207),u=n(3114),c=n(8760),h=n(535),d=n(2458),p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],f=p.length,g=function(t){function e(e){var n=t.call(this,e)||this;return n.canvas=new u.SceneCanvas,n.hitCanvas=new u.HitCanvas({pixelRatio:1}),n._waitingForDraw=!1,n.on("visibleChange.konva",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange.konva",n._setSmoothEnabled),n._setSmoothEnabled(),n}return i(e,t),e.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},e.prototype.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),e<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){a.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){if(!a.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.children.length-1?t.content.insertBefore(this.getCanvas()._canvas,t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas),!0)},e.prototype.moveDown=function(){if(a.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(a.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return a.Node.prototype.remove.call(this),t&&t.parentNode&&o.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var e=t.width,n=t.height;return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this},e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to a layer.")},e.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),a.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},e.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},e.prototype.getIntersection=function(t,e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(var i=0;i<f;i++){var o=p[i],s=this._getIntersection({x:t.x+o.x*n,y:t.y+o.y*n}),a=s.shape;if(a&&e)return a.findAncestor(e,!0);if(a)return a;if(r=!!s.antialiased,!s.antialiased)break}if(!r)return null;n+=1}},e.prototype._getIntersection=function(t){var e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(255===r){var i=o.Util._rgbToHex(n[0],n[1],n[2]),s=h.shapes["#"+i];return s?{shape:s}:{antialiased:!0}}return r>0?{antialiased:!0}:{}},e.prototype.drawScene=function(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),s.Container.prototype.drawScene.call(this,r,e),this._fire("draw",{node:this}),this},e.prototype.drawHit=function(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),s.Container.prototype.drawHit.call(this,r,e),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.setHitGraphEnabled=function(t){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},e.prototype.getHitGraphEnabled=function(t){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e}(s.Container);e.Layer=g,g.prototype.nodeType="Layer",d._registerNode(g),l.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(g,"clearBeforeDraw",!0),l.Factory.addGetterSetter(g,"hitGraphEnabled",!0,c.getBooleanValidator()),o.Collection.mapMethods(g)},6191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Node=e._removeName=e._addName=e._removeId=e.names=e.ids=void 0;var r=n(9923),i=n(6207),o=n(3114),s=n(2458),a=n(2356),l=n(8760);e.ids={},e.names={},e._removeId=function(t,n){t&&e.ids[t]===n&&delete e.ids[t]},e._addName=function(t,n){n&&(e.names[n]||(e.names[n]=[]),e.names[n].push(t))},e._removeName=function(t,n){if(t){var r=e.names[t];if(r){for(var i=0;i<r.length;i++)r[i]._id===n&&r.splice(i,1);0===r.length&&delete e.names[t]}}};var u=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),c=(["scaleXChange.konva","scaleYChange.konva"].join(" "),new r.Collection),h=1,d=function(){function t(t){this._id=h++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=c,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}return t.prototype.hasChildren=function(){return!1},t.prototype.getChildren=function(){return c},t.prototype._clearCache=function(t){"transform"!==t&&"absoluteTransform"!==t||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0},t.prototype._getCache=function(t,e){var n=this._cache.get(t);return(void 0===n||("transform"===t||"absoluteTransform"===t)&&!0===n.dirty)&&(n=e.call(this),this._cache.set(t,n)),n},t.prototype._calculate=function(t,e,n){var r=this;if(!this._attachedDepsListeners.get(t)){var i=e.map(function(t){return t+"Change.konva"}).join(" ");this.on(i,function(){r._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)},t.prototype._getCanvasCache=function(){return this._cache.get("canvas")},t.prototype._clearSelfAndDescendantCache=function(t,e){this._clearCache(t),e&&"absoluteTransform"===t&&this.fire("_clearTransformCache"),this.isCached()||this.children&&this.children.each(function(e){e._clearSelfAndDescendantCache(t,!0)})},t.prototype.clearCache=function(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this},t.prototype.cache=function(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(e.width||n.width),s=Math.ceil(e.height||n.height),a=e.pixelRatio,l=void 0===e.x?n.x:e.x,u=void 0===e.y?n.y:e.y,c=e.offset||0,h=e.drawBorder||!1;if(i&&s){l-=c,u-=c;var d=new o.SceneCanvas({pixelRatio:a,width:i+=2*c,height:s+=2*c}),p=new o.SceneCanvas({pixelRatio:a,width:0,height:0}),f=new o.HitCanvas({pixelRatio:1,width:i,height:s}),g=d.getContext(),m=f.getContext();return f.isCache=!0,d.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,p.getContext()._context.imageSmoothingEnabled=!1),g.save(),m.save(),g.translate(-l,-u),m.translate(-l,-u),this._isUnderCache=!0,this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this.drawScene(d,this),this.drawHit(f,this),this._isUnderCache=!1,g.restore(),m.restore(),h&&(g.save(),g.beginPath(),g.rect(0,0,i,s),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set("canvas",{scene:d,filter:p,hit:f,x:l,y:u}),this}r.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},t.prototype.isCached=function(){return this._cache.has("canvas")},t.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},t.prototype._transformedRect=function(t,e){var n,r,i,o,s=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],a=this.getAbsoluteTransform(e);return s.forEach(function(t){var e=a.point(t);void 0===n&&(n=i=e.x,r=o=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y)}),{x:n,y:r,width:i-n,height:o-r}},t.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/r,n.height/r),t.restore()},t.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0),t.restore()},t.prototype._getCachedSceneCanvas=function(){var t,e,n,i,o=this.filters(),s=this._getCanvasCache(),a=s.scene,l=s.filter,u=l.getContext();if(o){if(!this._filterUpToDate){var c=a.pixelRatio;l.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(t=o.length,u.clear(),u.drawImage(a._canvas,0,0,a.getWidth()/c,a.getHeight()/c),e=u.getImageData(0,0,l.getWidth(),l.getHeight()),n=0;n<t;n++)"function"==typeof(i=o[n])?(i.call(this,e),u.putImageData(e,0,0)):r.Util.error("Filter should be type of function, but got "+typeof i+" instead. Please check correct filters")}catch(h){r.Util.error("Unable to apply filter. "+h.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return a},t.prototype.on=function(t,e){if(this._cache&&this._cache.delete("allEventListeners"),3===arguments.length)return this._delegate.apply(this,arguments);var n,r,i,o,s=t.split(" "),a=s.length;for(n=0;n<a;n++)o=(r=s[n].split("."))[1]||"",this.eventListeners[i=r[0]]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:o,handler:e});return this},t.prototype.off=function(t,e){var n,r,i,o,s,a=(t||"").split(" "),l=a.length;if(this._cache&&this._cache.delete("allEventListeners"),!t)for(r in this.eventListeners)this._off(r);for(n=0;n<l;n++)if(s=(i=a[n].split("."))[1],o=i[0])this.eventListeners[o]&&this._off(o,s,e);else for(r in this.eventListeners)this._off(r,s,e);return this},t.prototype.dispatchEvent=function(t){return this.fire(t.type,{target:this,type:t.type,evt:t}),this},t.prototype.addEventListener=function(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this},t.prototype.removeEventListener=function(t){return this.off(t),this},t.prototype._delegate=function(t,e,n){var i=this;this.on(t,function(t){for(var o=t.target.findAncestors(e,!0,i),s=0;s<o.length;s++)(t=r.Util.cloneObject(t)).currentTarget=o[s],n.call(o[s],t)})},t.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),a.DD._dragElements.delete(this._id),this._remove(),this},t.prototype._clearCaches=function(){this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening")},t.prototype._remove=function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},t.prototype.destroy=function(){e._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),n=0;n<t.length;n++)e._removeName(t[n],this._id);return this.remove(),this},t.prototype.getAttr=function(t){var e="get"+r.Util._capitalize(t);return r.Util._isFunction(this[e])?this[e]():this.attrs[t]},t.prototype.getAncestors=function(){for(var t=this.getParent(),e=new r.Collection;t;)e.push(t),t=t.getParent();return e},t.prototype.getAttrs=function(){return this.attrs||{}},t.prototype.setAttrs=function(t){var e=this;return this._batchTransformChanges(function(){var n,i;if(!t)return e;for(n in t)"children"!==n&&(i="set"+r.Util._capitalize(n),r.Util._isFunction(e[i])?e[i](t[n]):e._setAttr(n,t[n]))}),this},t.prototype.isListening=function(){return this._getCache("listening",this._isListening)},t.prototype._isListening=function(t){if(!this.listening())return!1;var e=this.getParent();return!e||e===t||this===t||e._isListening(t)},t.prototype.isVisible=function(){return this._getCache("visible",this._isVisible)},t.prototype._isVisible=function(t){if(!this.visible())return!1;var e=this.getParent();return!e||e===t||this===t||e._isVisible(t)},t.prototype.shouldDrawHit=function(t,e){if(void 0===e&&(e=!1),t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),r=!1;a.DD._dragElements.forEach(function(t){"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===n)&&(r=!0)});var i=!e&&!s.Konva.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!i},t.prototype.show=function(){return this.visible(!0),this},t.prototype.hide=function(){return this.visible(!1),this},t.prototype.getZIndex=function(){return this.index||0},t.prototype.getAbsoluteZIndex=function(){var t,e,n,r,i=this.getDepth(),o=this,s=0;return"Stage"!==o.nodeType&&function a(l){for(t=[],e=l.length,n=0;n<e;n++)s++,"Shape"!==(r=l[n]).nodeType&&(t=t.concat(r.getChildren().toArray())),r._id===o._id&&(n=e);t.length>0&&t[0].getDepth()<=i&&a(t)}(o.getStage().getChildren()),s},t.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},t.prototype._batchTransformChanges=function(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform",!0)),this._needClearTransformCache=!1},t.prototype.setPosition=function(t){var e=this;return this._batchTransformChanges(function(){e.x(t.x),e.y(t.y)}),this},t.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},t.prototype.getAbsolutePosition=function(t){for(var e=!1,n=this.parent;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),o=new r.Transform,s=this.offset();return o.m=i.slice(),o.translate(s.x,s.y),o.getTranslation()},t.prototype.setAbsolutePosition=function(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache("transform");var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),this},t.prototype._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e]},t.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t},t.prototype.move=function(t){var e=t.x,n=t.y,r=this.x(),i=this.y();return void 0!==e&&(r+=e),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this},t.prototype._eachAncestorReverse=function(t,e){var n,r,i=[],o=this.getParent();if(!e||e._id!==this._id){for(i.unshift(this);o&&(!e||o._id!==e._id);)i.unshift(o),o=o.parent;for(n=i.length,r=0;r<n;r++)t(i[r])}},t.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},t.prototype.moveToTop=function(){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):(r.Util.warn("Node has no parent. moveToTop function is ignored."),!1)},t.prototype.moveUp=function(){if(!this.parent)return r.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveDown=function(){if(!this.parent)return r.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveToBottom=function(){if(!this.parent)return r.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},t.prototype.setZIndex=function(t){return this.parent?((t<0||t>=this.parent.children.length)&&r.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this):(r.Util.warn("Node has no parent. zIndex parameter is ignored."),this)},t.prototype.getAbsoluteOpacity=function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},t.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},t.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},t.prototype.toObject=function(){var t,e,n,i,o={},s=this.getAttrs();for(t in o.attrs={},s)r.Util.isObject(e=s[t])&&!r.Util._isPlainObject(e)&&!r.Util._isArray(e)||(n="function"==typeof this[t]&&this[t],delete s[t],i=n?n.call(this):null,s[t]=e,i!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),r.Util._prepareToStringify(o)},t.prototype.toJSON=function(){return JSON.stringify(this.toObject())},t.prototype.getParent=function(){return this.parent},t.prototype.findAncestors=function(t,e,n){var r=[];e&&this._isMatch(t)&&r.push(this);for(var i=this.parent;i;){if(i===n)return r;i._isMatch(t)&&r.push(i),i=i.parent}return r},t.prototype.isAncestorOf=function(t){return!1},t.prototype.findAncestor=function(t,e,n){return this.findAncestors(t,e,n)[0]},t.prototype._isMatch=function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,i=t.replace(/ /g,"").split(","),o=i.length;for(e=0;e<o;e++)if(r.Util.isValidSelector(n=i[e])||(r.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),r.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),r.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1},t.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},t.prototype.getStage=function(){return this._getCache("stage",this._getStage)},t.prototype._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},t.prototype.fire=function(t,e,n){return void 0===e&&(e={}),e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this},t.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache("absoluteTransform",this._getAbsoluteTransform)},t.prototype._getAbsoluteTransform=function(t){var e;if(t)return e=new r.Transform,this._eachAncestorReverse(function(t){var n=t.transformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},t),e;e=this._cache.get("absoluteTransform")||new r.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var n=this.transformsEnabled();return"all"===n?e.multiply(this.getTransform()):"position"===n&&e.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),e.dirty=!1,e},t.prototype.getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}},t.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},t.prototype.getTransform=function(){return this._getCache("transform",this._getTransform)},t.prototype._getTransform=function(){var t,e,n=this._cache.get("transform")||new r.Transform;n.reset();var i=this.x(),o=this.y(),a=s.Konva.getAngle(this.rotation()),l=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,u=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,c=this.attrs.skewX||0,h=this.attrs.skewY||0,d=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return 0===i&&0===o||n.translate(i,o),0!==a&&n.rotate(a),0===c&&0===h||n.skew(c,h),1===l&&1===u||n.scale(l,u),0===d&&0===p||n.translate(-1*d,-1*p),n.dirty=!1,n},t.prototype.clone=function(t){var e,n,i,o,s,a=r.Util.cloneObject(this.attrs);for(e in t)a[e]=t[e];var l=new this.constructor(a);for(e in this.eventListeners)for(i=(n=this.eventListeners[e]).length,o=0;o<i;o++)(s=n[o]).name.indexOf("konva")<0&&(l.eventListeners[e]||(l.eventListeners[e]=[]),l.eventListeners[e].push(s));return l},t.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),r=void 0!==t.x?t.x:e.x,i=void 0!==t.y?t.y:e.y,s=t.pixelRatio||1,a=new o.SceneCanvas({width:t.width||e.width||(n?n.width():0),height:t.height||e.height||(n?n.height():0),pixelRatio:s}),l=a.getContext();return l.save(),(r||i)&&l.translate(-1*r,-1*i),this.drawScene(a),l.restore(),a},t.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},t.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(r),r},t.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,r.Util._urlToImage(this.toDataURL(t),function(t){e(t)})},t.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},t.prototype.getSize=function(){return{width:this.width(),height:this.height()}},t.prototype.getClassName=function(){return this.className||this.nodeType},t.prototype.getType=function(){return this.nodeType},t.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance},t.prototype._off=function(t,e,n){var r,i,o=this.eventListeners[t];for(r=0;r<o.length;r++)if(!("konva"===(i=o[r].name)&&"konva"!==e||e&&i!==e||n&&n!==o[r].handler)){if(o.splice(r,1),0===o.length){delete this.eventListeners[t];break}r--}},t.prototype._fireChangeEvent=function(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})},t.prototype.setId=function(t){var n=this.id();return e._removeId(n,this),function(t,n){n&&(e.ids[n]=t)}(this,t),this._setAttr("id",t),this},t.prototype.setName=function(t){var n,r,i=(this.name()||"").split(/\s/g),o=(t||"").split(/\s/g);for(r=0;r<i.length;r++)-1===o.indexOf(n=i[r])&&n&&e._removeName(n,this._id);for(r=0;r<o.length;r++)-1===i.indexOf(n=o[r])&&n&&e._addName(this,n);return this._setAttr("name",t),this},t.prototype.addName=function(t){if(!this.hasName(t)){var e=this.name();this.setName(e?e+" "+t:t)}return this},t.prototype.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},t.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.setName(e.join(" "))),this},t.prototype.setAttr=function(t,e){var n=this["set"+r.Util._capitalize(t)];return r.Util._isFunction(n)?n.call(this,e):this._setAttr(t,e),this},t.prototype._setAttr=function(t,e,n){void 0===n&&(n=!1);var i=this.attrs[t];(i!==e||r.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e))},t.prototype._setComponentAttr=function(t,e,n){var r;void 0!==n&&((r=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,r,n))},t.prototype._fireAndBubble=function(t,e,n){if(e&&"Shape"===this.nodeType&&(e.target=this),"mouseenter"!==t&&"mouseleave"!==t||!(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n)){this._fire(t,e);var r=("mouseenter"===t||"mouseleave"===t)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}},t.prototype._getProtoListeners=function(t){var e=this._cache.get("allEventListeners");if(!e){e={};for(var n=Object.getPrototypeOf(this);n;)if(n.eventListeners){for(var r in n.eventListeners)e[r]=n.eventListeners[r].concat(e[r]||[]);n=Object.getPrototypeOf(n)}else n=Object.getPrototypeOf(n);this._cache.set("allEventListeners",e)}return e[t]},t.prototype._fire=function(t,e){(e=e||{}).currentTarget=this,e.type=t;var n=this._getProtoListeners(t);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,e);var i=this.eventListeners[t];if(i)for(r=0;r<i.length;r++)i[r].handler.call(this,e)},t.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},t.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition(),i=n._getPointerById(e)||n._changedPointerPositions[0]||r;a.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-r.x,y:i.y-r.y},dragStatus:"ready",pointerId:e})},t.prototype.startDrag=function(t,e){void 0===e&&(e=!0),a.DD._dragElements.has(this._id)||this._createDragElement(t),a.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)},t.prototype._setDragPosition=function(t,e){var n=this.getStage()._getPointerById(e.pointerId);if(n){var i={x:n.x-e.offset.x,y:n.y-e.offset.y},o=this.dragBoundFunc();if(void 0!==o){var s=o.call(this,i,t);s?i=s:r.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=i}},t.prototype.stopDrag=function(t){var e=a.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),a.DD._endDragBefore(t),a.DD._endDragAfter(t)},t.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},t.prototype.isDragging=function(){var t=a.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},t.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var e=this;if((void 0===t.evt.button||s.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var n=!1;a.DD._dragElements.forEach(function(t){e.isAncestorOf(t.node)&&(n=!0)}),n||this._createDragElement(t)}})},t.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;var t=a.DD._dragElements.get(this._id),e=t&&"ready"===t.dragStatus;t&&"dragging"===t.dragStatus?this.stopDrag():e&&a.DD._dragElements.delete(this._id)}},t.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},t.create=function(t,e){return r.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},t._createNode=function(e,n){var i,o,a,l=t.prototype.getClassName.call(e),u=e.children;if(n&&(e.attrs.container=n),s._NODES_REGISTRY[l]||(r.Util.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape"),i=new(0,s._NODES_REGISTRY[l])(e.attrs),u)for(o=u.length,a=0;a<o;a++)i.add(t._createNode(u[a]));return i},t}();e.Node=d,d.prototype.nodeType="Node",d.prototype._attrsAffectingSize=[],d.prototype.eventListeners={},d.prototype.on.call(d.prototype,u,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"))}),d.prototype.on.call(d.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache("visible")}),d.prototype.on.call(d.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache("listening")}),d.prototype.on.call(d.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache("absoluteOpacity")});var p=i.Factory.addGetterSetter;p(d,"zIndex"),p(d,"absolutePosition"),p(d,"position"),p(d,"x",0,l.getNumberValidator()),p(d,"y",0,l.getNumberValidator()),p(d,"globalCompositeOperation","source-over",l.getStringValidator()),p(d,"opacity",1,l.getNumberValidator()),p(d,"name","",l.getStringValidator()),p(d,"id","",l.getStringValidator()),p(d,"rotation",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(d,"scale",["x","y"]),p(d,"scaleX",1,l.getNumberValidator()),p(d,"scaleY",1,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(d,"skew",["x","y"]),p(d,"skewX",0,l.getNumberValidator()),p(d,"skewY",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(d,"offset",["x","y"]),p(d,"offsetX",0,l.getNumberValidator()),p(d,"offsetY",0,l.getNumberValidator()),p(d,"dragDistance",null,l.getNumberValidator()),p(d,"width",0,l.getNumberValidator()),p(d,"height",0,l.getNumberValidator()),p(d,"listening",!0,l.getBooleanValidator()),p(d,"preventDefault",!0,l.getBooleanValidator()),p(d,"filters",null,function(t){return this._filterUpToDate=!1,t}),p(d,"visible",!0,l.getBooleanValidator()),p(d,"transformsEnabled","all",l.getStringValidator()),p(d,"size"),p(d,"dragBoundFunc"),p(d,"draggable",!1,l.getBooleanValidator()),i.Factory.backCompat(d,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),r.Collection.mapMethods(d)},2564:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.releaseCapture=e.setPointerCapture=e.hasPointerCapture=e.createEvent=e.getCapturedShape=void 0;var r=n(2458),i=new Map,o=void 0!==r.Konva._global.PointerEvent;function s(t){return{evt:t,pointerId:t.pointerId}}function a(t,e){var n=i.get(t);n&&(n.getStage(),i.delete(t),o&&n._fire("lostpointercapture",s(new PointerEvent("lostpointercapture"))))}e.getCapturedShape=function(t){return i.get(t)},e.createEvent=s,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){a(t),e.getStage()&&(i.set(t,e),o&&e._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))},e.releaseCapture=a},535:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;var o,s=n(9923),a=n(6207),l=n(6191),u=n(8760),c=n(2458),h=n(2564);function d(){return o||(o=s.Util.createCanvasElement().getContext("2d"))}e.shapes={};var p=function(t){function n(n){for(var r,i=t.call(this,n)||this;!(r=s.Util.getRandomColor())||r in e.shapes;);return i.colorKey=r,e.shapes[r]=i,i}return i(n,t),n.prototype.getContext=function(){return this.getLayer().getContext()},n.prototype.getCanvas=function(){return this.getLayer().getCanvas()},n.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},n.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},n.prototype.hasShadow=function(){return this._getCache("hasShadow",this._hasShadow)},n.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},n.prototype._getFillPattern=function(){return this._getCache("patternImage",this.__getFillPattern)},n.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var t=d().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return t&&t.setTransform&&t.setTransform({a:this.fillPatternScaleX(),b:0,c:0,d:this.fillPatternScaleY(),e:0,f:0}),t}},n.prototype._getLinearGradient=function(){return this._getCache("linearGradient",this.__getLinearGradient)},n.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=d(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(n.x,n.y,r.x,r.y),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},n.prototype._getRadialGradient=function(){return this._getCache("radialGradient",this.__getRadialGradient)},n.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=d(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},n.prototype.getShadowRGBA=function(){return this._getCache("shadowRGBA",this._getShadowRGBA)},n.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=s.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},n.prototype.hasFill=function(){var t=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],function(){return t.fillEnabled()&&!!(t.fill()||t.fillPatternImage()||t.fillLinearGradientColorStops()||t.fillRadialGradientColorStops())})},n.prototype.hasStroke=function(){var t=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],function(){return t.strokeEnabled()&&t.strokeWidth()&&!(!t.stroke()&&!t.strokeLinearGradientColorStops())})},n.prototype.hasHitStroke=function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t},n.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},n.prototype.destroy=function(){return l.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this},n.prototype._useBufferCanvas=function(t){var e;if(!this.getStage())return!1;if(null!==(e=this.attrs.perfectDrawEnabled)&&void 0!==e&&!e)return!1;var n=t||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(n&&r&&i)return!0;var o=this.hasShadow(),s=this.shadowForStrokeEnabled();return!!(n&&r&&o&&s)},n.prototype.setStrokeHitEnabled=function(t){s.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(t?"auto":0)},n.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},n.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}},n.prototype.getClientRect=function(t){void 0===t&&(t={});var e=t.skipTransform,n=t.relativeTo,r=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+i,s=r.height+i,a=!t.skipShadow&&this.hasShadow(),l=a?this.shadowOffsetX():0,u=a?this.shadowOffsetY():0,c=o+Math.abs(l),h=s+Math.abs(u),d=a&&this.shadowBlur()||0,p=c+2*d,f=h+2*d,g=0;Math.round(i/2)!==i/2&&(g=1);var m={width:p+g,height:f+g,x:-Math.round(i/2+d)+Math.min(l,0)+r.x,y:-Math.round(i/2+d)+Math.min(u,0)+r.y};return e?m:this._transformedRect(m,n)},n.prototype.drawScene=function(t,e){var n,r,i=this.getLayer(),o=t||i.getCanvas(),s=o.getContext(),a=this._getCanvasCache(),l=this.getSceneFunc(),u=this.hasShadow(),c=o.isCache,h=o.isCache,d=e===this;if(!this.isVisible()&&!c)return this;if(a){s.save();var p=this.getAbsoluteTransform(e).getMatrix();return s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!l)return this;if(s.save(),this._useBufferCanvas()&&!h){(r=(n=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this);var f=this.getAbsoluteTransform(e).getMatrix();r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),l.call(this,r,this),r.restore();var g=n.pixelRatio;u&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(n._canvas,0,0,n.width/g,n.height/g)}else s._applyLineJoin(this),d||(f=this.getAbsoluteTransform(e).getMatrix(),s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)),u&&s._applyShadow(this),l.call(this,s,this);return s.restore(),this},n.prototype.drawHit=function(t,e,n){if(void 0===n&&(n=!1),!this.shouldDrawHit(e,n))return this;var r=this.getLayer(),i=t||r.hitCanvas,o=i&&i.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),u=l&&l.hit;if(this.colorKey||(console.log(this),s.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),u){o.save();var c=this.getAbsoluteTransform(e).getMatrix();return o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),this!==e){var h=this.getAbsoluteTransform(e).getMatrix();o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return a.call(this,o,this),o.restore(),this},n.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,n,r,i,o,a=this._getCanvasCache(),l=this._getCachedSceneCanvas(),u=a.hit,c=u.getContext(),h=u.getWidth(),d=u.getHeight();c.clear(),c.drawImage(l._canvas,0,0,h,d);try{for(r=(n=(e=c.getImageData(0,0,h,d)).data).length,i=s.Util._hexToRgb(this.colorKey),o=0;o<r;o+=4)n[o+3]>t?(n[o]=i.r,n[o+1]=i.g,n[o+2]=i.b,n[o+3]=255):n[o+3]=0;c.putImageData(e,0,0)}catch(p){s.Util.error("Unable to draw hit graph from cached scene canvas. "+p.message)}return this},n.prototype.hasPointerCapture=function(t){return h.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){h.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){h.releaseCapture(t,this)},n}(l.Node);e.Shape=p,p.prototype._fillFunc=function(t){t.fill()},p.prototype._strokeFunc=function(t){t.stroke()},p.prototype._fillFuncHit=function(t){t.fill()},p.prototype._strokeFuncHit=function(t){t.stroke()},p.prototype._centroid=!1,p.prototype.nodeType="Shape",c._registerNode(p),p.prototype.eventListeners={},p.prototype.on.call(p.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache("hasShadow")}),p.prototype.on.call(p.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache("shadowRGBA")}),p.prototype.on.call(p.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",function(){this._clearCache("patternImage")}),p.prototype.on.call(p.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache("linearGradient")}),p.prototype.on.call(p.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache("radialGradient")}),a.Factory.addGetterSetter(p,"stroke",void 0,u.getStringOrGradientValidator()),a.Factory.addGetterSetter(p,"strokeWidth",2,u.getNumberValidator()),a.Factory.addGetterSetter(p,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(p,"hitStrokeWidth","auto",u.getNumberOrAutoValidator()),a.Factory.addGetterSetter(p,"strokeHitEnabled",!0,u.getBooleanValidator()),a.Factory.addGetterSetter(p,"perfectDrawEnabled",!0,u.getBooleanValidator()),a.Factory.addGetterSetter(p,"shadowForStrokeEnabled",!0,u.getBooleanValidator()),a.Factory.addGetterSetter(p,"lineJoin"),a.Factory.addGetterSetter(p,"lineCap"),a.Factory.addGetterSetter(p,"sceneFunc"),a.Factory.addGetterSetter(p,"hitFunc"),a.Factory.addGetterSetter(p,"dash"),a.Factory.addGetterSetter(p,"dashOffset",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"shadowColor",void 0,u.getStringValidator()),a.Factory.addGetterSetter(p,"shadowBlur",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"shadowOpacity",1,u.getNumberValidator()),a.Factory.addComponentsGetterSetter(p,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(p,"shadowOffsetX",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"shadowOffsetY",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"fillPatternImage"),a.Factory.addGetterSetter(p,"fill",void 0,u.getStringOrGradientValidator()),a.Factory.addGetterSetter(p,"fillPatternX",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"fillPatternY",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(p,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(p,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(p,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(p,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(p,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(p,"fillEnabled",!0),a.Factory.addGetterSetter(p,"strokeEnabled",!0),a.Factory.addGetterSetter(p,"shadowEnabled",!0),a.Factory.addGetterSetter(p,"dashEnabled",!0),a.Factory.addGetterSetter(p,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(p,"fillPriority","color"),a.Factory.addComponentsGetterSetter(p,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(p,"fillPatternOffsetX",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"fillPatternOffsetY",0,u.getNumberValidator()),a.Factory.addComponentsGetterSetter(p,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(p,"fillPatternScaleX",1,u.getNumberValidator()),a.Factory.addGetterSetter(p,"fillPatternScaleY",1,u.getNumberValidator()),a.Factory.addComponentsGetterSetter(p,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(p,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(p,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(p,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(p,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(p,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(p,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(p,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(p,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(p,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(p,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(p,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(p,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(p,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(p,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(p,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(p,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(p,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(p,"fillPatternRotation",0),a.Factory.backCompat(p,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),s.Collection.mapMethods(p)},8648:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;var o=n(9923),s=n(6207),a=n(687),l=n(2458),u=n(3114),c=n(2356),h=n(2458),d=n(2564),p=["mouseenter","mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend","mouseover","wheel","contextmenu","pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"],f=p.length;function g(t,e){t.content.addEventListener(e,function(n){t["_"+e](n)},!1)}function m(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&o.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var v=function(t){function n(n){var r=t.call(this,m(n))||this;return r._pointerPositions=[],r._changedPointerPositions=[],r._buildDOM(),r._bindContentEvents(),e.stages.push(r),r.on("widthChange.konva heightChange.konva",r._resizeDOM),r.on("visibleChange.konva",r._checkVisibility),r.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){m(r.attrs)}),r._checkVisibility(),r}return i(n,t),n.prototype._validateAdd=function(t){var e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||o.Util.throw("You may only add layers to the stage.")},n.prototype._checkVisibility=function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}},n.prototype.setContainer=function(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},n.prototype.shouldDrawHit=function(){return!0},n.prototype.clear=function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this},n.prototype.clone=function(t){return t||(t={}),t.container=document.createElement("div"),a.Container.prototype.clone.call(this,t)},n.prototype.destroy=function(){t.prototype.destroy.call(this);var n=this.content;n&&o.Util._isInDocument(n)&&this.container().removeChild(n);var r=e.stages.indexOf(this);return r>-1&&e.stages.splice(r,1),this},n.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(o.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},n.prototype._getPointerById=function(t){return this._pointerPositions.find(function(e){return e.id===t})},n.prototype.getPointersPositions=function(){return this._pointerPositions},n.prototype.getStage=function(){return this},n.prototype.getContent=function(){return this.content},n.prototype._toKonvaCanvas=function(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new u.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,r=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),r.each(function(e){if(e.isVisible()){var r=e._toKonvaCanvas(t);n.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}}),e},n.prototype.getIntersection=function(t,e){if(!t)return null;var n,r,i=this.children;for(n=i.length-1;n>=0;n--)if(r=i[n].getIntersection(t,e))return r;return null},n.prototype._resizeDOM=function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.each(function(n){n.setSize({width:t,height:e}),n.draw()})},n.prototype.add=function(e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}t.prototype.add.call(this,e);var r=this.children.length;return r>5&&o.Util.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),l.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this},n.prototype.getParent=function(){return null},n.prototype.getLayer=function(){return null},n.prototype.hasPointerCapture=function(t){return d.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){d.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){d.releaseCapture(t,this)},n.prototype.getLayers=function(){return this.getChildren()},n.prototype._bindContentEvents=function(){if(l.Konva.isBrowser)for(var t=0;t<f;t++)g(this,p[t])},n.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire("mouseenter",{evt:t,target:this,currentTarget:this})},n.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire("mouseover",{evt:t,target:this,currentTarget:this})},n.prototype._mouseleave=function(t){var e;this.setPointersPositions(t);var n=(null===(e=this.targetShape)||void 0===e?void 0:e.getStage())?this.targetShape:null,r=!c.DD.isDragging||l.Konva.hitOnDragEnabled;n&&r?(n._fireAndBubble("mouseout",{evt:t}),n._fireAndBubble("mouseleave",{evt:t}),this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this.targetShape=null):r&&(this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this._fire("mouseout",{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},n.prototype._mousemove=function(t){var e;if(l.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var n,r=o.Util._getFirstPointerId(t),i=(null===(e=this.targetShape)||void 0===e?void 0:e.getStage())?this.targetShape:null,s=!c.DD.isDragging||l.Konva.hitOnDragEnabled;s&&((n=this.getIntersection(this.getPointerPosition()))&&n.isListening()?s&&i!==n?(i&&(i._fireAndBubble("mouseout",{evt:t,pointerId:r},n),i._fireAndBubble("mouseleave",{evt:t,pointerId:r},n)),n._fireAndBubble("mouseover",{evt:t,pointerId:r},i),n._fireAndBubble("mouseenter",{evt:t,pointerId:r},i),n._fireAndBubble("mousemove",{evt:t,pointerId:r}),this.targetShape=n):n._fireAndBubble("mousemove",{evt:t,pointerId:r}):(i&&s&&(i._fireAndBubble("mouseout",{evt:t,pointerId:r}),i._fireAndBubble("mouseleave",{evt:t,pointerId:r}),this._fire("mouseover",{evt:t,target:this,currentTarget:this,pointerId:r}),this.targetShape=null),this._fire("mousemove",{evt:t,target:this,currentTarget:this,pointerId:r})),this._fire("contentMousemove",{evt:t})),t.cancelable&&t.preventDefault()},n.prototype._mousedown=function(t){if(l.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition());c.DD.justDragged=!1,l.Konva.listenClickTap=!0,n&&n.isListening()?(this.clickStartShape=n,n._fireAndBubble("mousedown",{evt:t,pointerId:e})):this._fire("mousedown",{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},n.prototype._mouseup=function(t){if(l.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition()),r=this.clickStartShape,i=this.clickEndShape,s=!1;l.Konva.inDblClickWindow?(s=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){l.Konva.inDblClickWindow=!1},l.Konva.dblClickWindow),n&&n.isListening()?(this.clickEndShape=n,n._fireAndBubble("mouseup",{evt:t,pointerId:e}),l.Konva.listenClickTap&&r&&r._id===n._id&&(n._fireAndBubble("click",{evt:t,pointerId:e}),s&&i&&i===n&&n._fireAndBubble("dblclick",{evt:t,pointerId:e}))):(this.clickEndShape=null,this._fire("mouseup",{evt:t,target:this,currentTarget:this,pointerId:e}),l.Konva.listenClickTap&&this._fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),s&&this._fire("dblclick",{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),s&&this._fire("contentDblclick",{evt:t})),l.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},n.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("contextmenu",{evt:t}):this._fire("contextmenu",{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},n.prototype._touchstart=function(t){var e=this;this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach(function(r){var i=e.getIntersection(r);l.Konva.listenClickTap=!0,c.DD.justDragged=!1,i&&i.isListening()&&(l.Konva.captureTouchEventsEnabled&&i.setPointerCapture(r.id),e.tapStartShape=i,i._fireAndBubble("touchstart",{evt:t,pointerId:r.id},e),n=!0,i.isListening()&&i.preventDefault()&&t.cancelable&&t.preventDefault())}),n||this._fire("touchstart",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:t})},n.prototype._touchmove=function(t){var e=this;if(this.setPointersPositions(t),!c.DD.isDragging||l.Konva.hitOnDragEnabled){var n=!1,r={};this._changedPointerPositions.forEach(function(i){var o=d.getCapturedShape(i.id)||e.getIntersection(i);o&&o.isListening()&&(r[o._id]||(r[o._id]=!0,o._fireAndBubble("touchmove",{evt:t,pointerId:i.id}),n=!0,o.isListening()&&o.preventDefault()&&t.cancelable&&t.preventDefault()))}),n||this._fire("touchmove",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:t})}c.DD.isDragging&&c.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},n.prototype._touchend=function(t){var e=this;this.setPointersPositions(t);var n=this.tapEndShape,r=!1;l.Konva.inDblClickWindow?(r=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){l.Konva.inDblClickWindow=!1},l.Konva.dblClickWindow);var i=!1,o={},s=!1,a=!1;this._changedPointerPositions.forEach(function(u){var c=d.getCapturedShape(u.id)||e.getIntersection(u);c&&c.releaseCapture(u.id),c&&c.isListening()&&(o[c._id]||(o[c._id]=!0,e.tapEndShape=c,c._fireAndBubble("touchend",{evt:t,pointerId:u.id}),i=!0,l.Konva.listenClickTap&&c===e.tapStartShape&&(s=!0,c._fireAndBubble("tap",{evt:t,pointerId:u.id}),r&&n&&n===c&&(a=!0,c._fireAndBubble("dbltap",{evt:t,pointerId:u.id}))),c.isListening()&&c.preventDefault()&&t.cancelable&&t.preventDefault()))}),i||this._fire("touchend",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l.Konva.listenClickTap&&!s&&(this.tapEndShape=null,this._fire("tap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})),r&&!a&&this._fire("dbltap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentTap",{evt:t}),r&&this._fire("contentDbltap",{evt:t})),this.preventDefault()&&t.cancelable&&t.preventDefault(),l.Konva.listenClickTap=!1},n.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("wheel",{evt:t}):this._fire("wheel",{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},n.prototype._pointerdown=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerdown",d.createEvent(t))}},n.prototype._pointermove=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointermove",d.createEvent(t))}},n.prototype._pointerup=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",d.createEvent(t)),d.releaseCapture(t.pointerId)}},n.prototype._pointercancel=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",d.createEvent(t)),d.releaseCapture(t.pointerId)}},n.prototype._lostpointercapture=function(t){d.releaseCapture(t.pointerId)},n.prototype.setPointersPositions=function(t){var e=this,n=this._getContentPosition(),r=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],o.Collection.prototype.each.call(t.touches,function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})}),o.Collection.prototype.each.call(t.changedTouches||t.touches,function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})})):(this.pointerPos={x:r=(t.clientX-n.left)/n.scaleX,y:i=(t.clientY-n.top)/n.scaleY},this._pointerPositions=[{x:r,y:i,id:o.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:i,id:o.Util._getFirstPointerId(t)}])},n.prototype._setPointerPosition=function(t){o.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},n.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},n.prototype._buildDOM=function(){if(this.bufferCanvas=new u.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new u.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),l.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},n.prototype.cache=function(){return o.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},n.prototype.clearCache=function(){return this},n.prototype.batchDraw=function(){return this.children.each(function(t){t.batchDraw()}),this},n}(a.Container);e.Stage=v,v.prototype.nodeType="Stage",h._registerNode(v),s.Factory.addGetterSetter(v,"container")},3760:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;var r=n(9923),i=n(5132),o=n(6191),s=n(2458),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=0,u=["fill","stroke","shadowColor"],c=function(){function t(t,e,n,r,i,o,s){this.prop=t,this.propFunc=e,this.begin=r,this._pos=r,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()}return t.prototype.fire=function(t){var e=this[t];e&&e()},t.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},t.prototype.getTime=function(){return this._time},t.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},t.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},t.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},t.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},t.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},t.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},t.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},t.prototype.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},t.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},t.prototype.pause=function(){this.state=1,this.fire("onPause")},t.prototype.getTimer=function(){return(new Date).getTime()},t}(),h=function(){function t(n){var o,u,h=this,d=n.node,p=d._id,f=n.easing||e.Easings.Linear,g=!!n.yoyo;o=void 0===n.duration?.3:0===n.duration?.001:n.duration,this.node=d,this._id=l++;var m=d.getLayer()||(d instanceof s.Konva.Stage?d.getLayers():null);for(u in m||r.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){h.tween.onEnterFrame()},m),this.tween=new c(u,function(t){h._tweenFunc(t)},f,0,1,1e3*o,g),this._addListeners(),t.attrs[p]||(t.attrs[p]={}),t.attrs[p][this._id]||(t.attrs[p][this._id]={}),t.tweens[p]||(t.tweens[p]={}),n)void 0===a[u]&&this._addAttr(u,n[u]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset,this.onUpdate=n.onUpdate}return t.prototype._addAttr=function(e,n){var i,o,s,a,l,c,h,d,p=this.node,f=p._id;if((s=t.tweens[f][e])&&delete t.attrs[f][s][e],i=p.getAttr(e),r.Util._isArray(n))if(o=[],l=Math.max(n.length,i.length),"points"===e&&n.length!==i.length&&(n.length>i.length?(h=i,i=r.Util._prepareArrayForTween(i,n,p.closed())):(c=n,n=r.Util._prepareArrayForTween(n,i,p.closed()))),0===e.indexOf("fill"))for(a=0;a<l;a++)if(a%2==0)o.push(n[a]-i[a]);else{var g=r.Util.colorToRGBA(i[a]);d=r.Util.colorToRGBA(n[a]),i[a]=g,o.push({r:d.r-g.r,g:d.g-g.g,b:d.b-g.b,a:d.a-g.a})}else for(a=0;a<l;a++)o.push(n[a]-i[a]);else-1!==u.indexOf(e)?(i=r.Util.colorToRGBA(i),o={r:(d=r.Util.colorToRGBA(n)).r-i.r,g:d.g-i.g,b:d.b-i.b,a:d.a-i.a}):o=n-i;t.attrs[f][this._id][e]={start:i,diff:o,end:n,trueEnd:c,trueStart:h},t.tweens[f][e]=this._id},t.prototype._tweenFunc=function(e){var n,i,o,s,a,l,c,h,d=this.node,p=t.attrs[d._id][this._id];for(n in p){if(s=(i=p[n]).diff,h=i.end,r.Util._isArray(o=i.start))if(a=[],c=Math.max(o.length,h.length),0===n.indexOf("fill"))for(l=0;l<c;l++)a.push(l%2==0?(o[l]||0)+s[l]*e:"rgba("+Math.round(o[l].r+s[l].r*e)+","+Math.round(o[l].g+s[l].g*e)+","+Math.round(o[l].b+s[l].b*e)+","+(o[l].a+s[l].a*e)+")");else for(l=0;l<c;l++)a.push((o[l]||0)+s[l]*e);else a=-1!==u.indexOf(n)?"rgba("+Math.round(o.r+s.r*e)+","+Math.round(o.g+s.g*e)+","+Math.round(o.b+s.b*e)+","+(o.a+s.a*e)+")":o+s*e;d.setAttr(n,a)}},t.prototype._addListeners=function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueEnd&&n.setAttr("points",r.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueStart&&n.points(r.points.trueStart),e.onReset&&e.onReset()},this.tween.onUpdate=function(){e.onUpdate&&e.onUpdate.call(e)}},t.prototype.play=function(){return this.tween.play(),this},t.prototype.reverse=function(){return this.tween.reverse(),this},t.prototype.reset=function(){return this.tween.reset(),this},t.prototype.seek=function(t){return this.tween.seek(1e3*t),this},t.prototype.pause=function(){return this.tween.pause(),this},t.prototype.finish=function(){return this.tween.finish(),this},t.prototype.destroy=function(){var e,n=this.node._id,r=this._id,i=t.tweens[n];for(e in this.pause(),i)delete t.tweens[n][e];delete t.attrs[n][r]},t.attrs={},t.tweens={},t}();e.Tween=h,o.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new h(t).play()},e.Easings={BackEaseIn:function(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn:function(t,e,n,r,i,o){var s=0;return 0===t?e:1==(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,n,r,i,o){var s=0;return 0===t?e:1==(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-s)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut:function(t,e,n,r,i,o){var s=0;return 0===t?e:2==(t/=r/2)?e+n:(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,n,r,i){return r-e.Easings.BounceEaseOut(i-t,0,r,i)+n},BounceEaseInOut:function(t,n,r,i){return t<i/2?.5*e.Easings.BounceEaseIn(2*t,0,r,i)+n:.5*e.Easings.BounceEaseOut(2*t-i,0,r,i)+.5*r+n},EaseIn:function(t,e,n,r){return n*(t/=r)*t+e},EaseOut:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,r){return n*t/r+e}}},9923:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=e.Collection=void 0;var r=n(2458),i=function(){function t(){}return t.toCollection=function(e){var n,r=new t,i=e.length;for(n=0;n<i;n++)r.push(e[n]);return r},t._mapMethod=function(e){t.prototype[e]=function(){var t,n=this.length,r=[].slice.call(arguments);for(t=0;t<n;t++)this[t][e].apply(this[t],r);return this}},t.mapMethods=function(e){var n=e.prototype;for(var r in n)t._mapMethod(r)},t}();e.Collection=i,i.prototype=[],i.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},i.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;t<n;t++)e.push(this[t]);return e};var o=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}return t.prototype.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},t.prototype.copy=function(){return new t(this.m)},t.prototype.copyInto=function(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]},t.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},t.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},t.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.m[1]*e+this.m[3]*n,i=this.m[0]*-n+this.m[2]*e,o=this.m[1]*-n+this.m[3]*e;return this.m[0]=this.m[0]*e+this.m[2]*n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this},t.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},t.prototype.skew=function(t,e){var n=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,i=this.m[3]+this.m[1]*t;return this.m[0]=this.m[0]+this.m[2]*e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this},t.prototype.multiply=function(t){var e=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],i=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=e,this.m[2]=n,this.m[3]=r,this.m[4]=i,this.m[5]=o,this},t.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=-this.m[1]*t,n=-this.m[2]*t,r=this.m[0]*t,i=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*t,this.m[1]=e,this.m[2]=n,this.m[3]=r,this.m[4]=i,this.m[5]=o,this},t.prototype.getMatrix=function(){return this.m},t.prototype.setAbsolutePosition=function(t,e){var n=this.m[0],r=this.m[1],i=this.m[2],o=this.m[4],s=(n*(e-this.m[5])-r*(t-o))/(n*this.m[3]-r*i);return this.translate((t-o-i*s)/n,s)},t.prototype.decompose=function(){var t=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],o=t*i-n*r,s={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=n){var a=Math.sqrt(t*t+n*n);s.rotation=n>0?Math.acos(t/a):-Math.acos(t/a),s.scaleX=a,s.scaleY=o/a,s.skewX=(t*r+n*i)/o,s.skewY=0}else if(0!=r||0!=i){var l=Math.sqrt(r*r+i*i);s.rotation=Math.PI/2-(i>0?Math.acos(-r/l):-Math.acos(r/l)),s.scaleX=o/l,s.scaleY=l,s.skewX=0,s.skewY=(t*r+n*i)/o}return s.rotation=e.Util._getRotation(s.rotation),s},t}();e.Transform=o;var s=Math.PI/180,a=180/Math.PI,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},u=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,c=[];e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t||t>0?1:-1},requestAnimFrame:function(t){c.push(t),1===c.length&&requestAnimationFrame(function(){var t=c;c=[],t.forEach(function(t){t()})})},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var n,r,i=[],o=t.length,s=e.Util;for(n=0;n<o;n++)s._isNumber(r=t[n])?r=Math.round(1e3*r)/1e3:s._isString(r)||(r=r.toString()),i.push(r);return i},_urlToImage:function(t,e){var n=new r.glob.Image;n.onload=function(){e(n)},n.src=t},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in l?{r:(e=l[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=u.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return e.Util._namedColorToRBA(t=t||"black")||e.Util._hex3ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=l[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e,n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t).slice(1),r=Number(n[0])/360,i=Number(n[1])/100,o=Number(n[2])/100,s=void 0,a=void 0;if(0===i)return a=255*o,{r:Math.round(a),g:Math.round(a),b:Math.round(a),a:1};for(var l=2*o-(e=o<.5?o*(1+i):o+i-o*i),u=[0,0,0],c=0;c<3;c++)(s=r+1/3*-(c-1))<0&&s++,s>1&&s--,u[c]=255*(a=6*s<1?l+6*(e-l)*s:2*s<1?e:3*s<2?l+(e-l)*(2/3-s)*6:l);return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var n in t)e[n]=this._isPlainObject(t[n])?this.cloneObject(t[n]):this._isArray(t[n])?this.cloneArray(t[n]):t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*s},_radToDeg:function(t){return t*a},_getRotation:function(t){return r.Konva.angleDeg?e.Util._radToDeg(t):t},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error("Konva error: "+t)},error:function(t){console.error("Konva error: "+t)},warn:function(t){r.Konva.showWarnings&&console.warn("Konva warning: "+t)},extend:function(t,e){function n(){this.constructor=t}n.prototype=e.prototype;var r=t.prototype;for(var i in t.prototype=new n,r)r.hasOwnProperty(i)&&(t.prototype[i]=r[i]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,n,r,i,o,s){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)),u=s*a/(a+l),c=s*l/(a+l);return[n-u*(i-t),r-u*(o-e),n+c*(i-t),r+c*(o-e)]},_expandPoints:function(t,n){var r,i,o=t.length,s=[];for(r=2;r<o-2;r+=2)i=e.Util._getControlPoints(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],n),isNaN(i[0])||(s.push(i[0]),s.push(i[1]),s.push(t[r]),s.push(t[r+1]),s.push(i[2]),s.push(i[3]));return s},each:function(t,e){for(var n in t)e(n,t[n])},_inRange:function(t,e,n){return e<=t&&t<n},_getProjectionToSegment:function(t,e,n,r,i,o){var s,a,l,u=(t-n)*(t-n)+(e-r)*(e-r);if(0==u)s=t,a=e,l=(i-n)*(i-n)+(o-r)*(o-r);else{var c=((i-t)*(n-t)+(o-e)*(r-e))/u;c<0?(s=t,a=e,l=(t-i)*(t-i)+(e-o)*(e-o)):c>1?(s=n,a=r,l=(n-i)*(n-i)+(r-o)*(r-o)):l=((s=t+c*(n-t))-i)*(s-i)+((a=e+c*(r-e))-o)*(a-o)}return[s,a,l]},_getProjectionToLine:function(t,n,r){var i=e.Util.cloneObject(t),o=Number.MAX_VALUE;return n.forEach(function(s,a){if(r||a!==n.length-1){var l=n[(a+1)%n.length],u=e.Util._getProjectionToSegment(s.x,s.y,l.x,l.y,t.x,t.y),c=u[1],h=u[2];h<o&&(i.x=u[0],i.y=c,o=h)}}),i},_prepareArrayForTween:function(t,n,r){var i,o=[],s=[];if(t.length>n.length){var a=n;n=t,t=a}for(i=0;i<t.length;i+=2)o.push({x:t[i],y:t[i+1]});for(i=0;i<n.length;i+=2)s.push({x:n[i],y:n[i+1]});var l=[];return s.forEach(function(t){var n=e.Util._getProjectionToLine(t,o,r);l.push(n.x),l.push(n.y)}),l},_prepareToStringify:function(t){var n;for(var r in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(r)&&t[r]&&"object"==typeof t[r])if(n=Object.getOwnPropertyDescriptor(t,r),t[r].visitedByCircularReferenceRemoval||e.Util._isElement(t[r])){if(!n.configurable)return null;delete t[r]}else if(null===e.Util._prepareToStringify(t[r])){if(!n.configurable)return null;delete t[r]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}},8760:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getComponentValidator=e.getBooleanValidator=e.getNumberArrayValidator=e.getFunctionValidator=e.getStringOrGradientValidator=e.getStringValidator=e.getNumberOrAutoValidator=e.getNumberOrArrayOfNumbersValidator=e.getNumberValidator=e.alphaComponent=e.RGBComponent=void 0;var r=n(2458),i=n(9923);function o(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrArrayOfNumbersValidator=function(t){if(r.Konva.isUnminified)return function(e,n){var r=i.Util._isNumber(e),s=i.Util._isArray(e)&&e.length==t;return r||s||i.Util.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}},e.getNumberOrAutoValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||"auto"===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isString(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getStringOrGradientValidator=function(){if(r.Konva.isUnminified)return function(t,e){var n=i.Util._isString(t),r="[object CanvasGradient]"===Object.prototype.toString.call(t);return n||r||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},e.getFunctionValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isFunction(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isArray(t)?t.forEach(function(t){i.Util._isNumber(t)||i.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},e.getBooleanValidator=function(){if(r.Konva.isUnminified)return function(t,e){return!0===t||!1===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(r.Konva.isUnminified)return function(e,n){return i.Util.isObject(e)||i.Util.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}},929:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var r=n(2458),i=n(9923),o=n(6191),s=n(687),a=n(8648),l=n(8909),u=n(9725),c=n(829),h=n(2356),d=n(535),p=n(5132),f=n(3760),g=n(4138),m=n(3114);e.Konva=i.Util._assign(r.Konva,{Collection:i.Collection,Util:i.Util,Transform:i.Transform,Node:o.Node,ids:o.ids,names:o.names,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:l.Layer,FastLayer:u.FastLayer,Group:c.Group,DD:h.DD,Shape:d.Shape,shapes:d.shapes,Animation:p.Animation,Tween:f.Tween,Easings:f.Easings,Context:g.Context,Canvas:m.Canvas})},6496:function(t,e,n){"use strict";e.S=void 0;var r=n(929),i=n(1937),o=n(2099),s=n(1960),a=n(8237),l=n(1422),u=n(5694),c=n(2346),h=n(2747),d=n(576),p=n(3754),f=n(7025),g=n(5070),m=n(9896),v=n(6135),y=n(1794),b=n(1161),_=n(1353),x=n(732),w=n(2896),S=n(1088),E=n(4e3),C=n(2972),k=n(451),T=n(7513),P=n(9373),A=n(2483),D=n(4898),O=n(9797),M=n(7730),I=n(1106),L=n(4233),N=n(7984),R=n(5179),F=n(4423),B=n(2105),j=n(4170);e.S=r.Konva.Util._assign(r.Konva,{Arc:i.Arc,Arrow:o.Arrow,Circle:s.Circle,Ellipse:a.Ellipse,Image:l.Image,Label:u.Label,Tag:u.Tag,Line:c.Line,Path:h.Path,Rect:d.Rect,RegularPolygon:p.RegularPolygon,Ring:f.Ring,Sprite:g.Sprite,Star:m.Star,Text:v.Text,TextPath:y.TextPath,Transformer:b.Transformer,Wedge:_.Wedge,Filters:{Blur:x.Blur,Brighten:w.Brighten,Contrast:S.Contrast,Emboss:E.Emboss,Enhance:C.Enhance,Grayscale:k.Grayscale,HSL:T.HSL,HSV:P.HSV,Invert:A.Invert,Kaleidoscope:D.Kaleidoscope,Mask:O.Mask,Noise:M.Noise,Pixelate:I.Pixelate,Posterize:L.Posterize,RGB:N.RGB,RGBA:R.RGBA,Sepia:F.Sepia,Solarize:B.Solarize,Threshold:j.Threshold}})},732:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;var r=n(6207),i=n(6191),o=n(8760);function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,r,i,o,u,c,h,d,p,f,g,m,v,y,b,_,x,w,S,E,C,k,T,P,A=t.data,D=t.width,O=t.height,M=e+e+1,I=D-1,L=O-1,N=e+1,R=N*(N+1)/2,F=new s,B=null,j=F,z=null,V=null,G=a[e],U=l[e];for(i=1;i<M;i++)j=j.next=new s,i===N&&(B=j);for(j.next=F,h=c=0,r=0;r<O;r++){for(_=x=w=S=d=p=f=g=0,m=N*(E=A[c]),v=N*(C=A[c+1]),y=N*(k=A[c+2]),b=N*(T=A[c+3]),d+=R*E,p+=R*C,f+=R*k,g+=R*T,j=F,i=0;i<N;i++)j.r=E,j.g=C,j.b=k,j.a=T,j=j.next;for(i=1;i<N;i++)d+=(j.r=E=A[o=c+((I<i?I:i)<<2)])*(P=N-i),p+=(j.g=C=A[o+1])*P,f+=(j.b=k=A[o+2])*P,g+=(j.a=T=A[o+3])*P,_+=E,x+=C,w+=k,S+=T,j=j.next;for(z=F,V=B,n=0;n<D;n++)A[c+3]=T=g*G>>U,0!==T?(A[c]=(d*G>>U)*(T=255/T),A[c+1]=(p*G>>U)*T,A[c+2]=(f*G>>U)*T):A[c]=A[c+1]=A[c+2]=0,d-=m,p-=v,f-=y,g-=b,m-=z.r,v-=z.g,y-=z.b,b-=z.a,o=h+((o=n+e+1)<I?o:I)<<2,d+=_+=z.r=A[o],p+=x+=z.g=A[o+1],f+=w+=z.b=A[o+2],g+=S+=z.a=A[o+3],z=z.next,m+=E=V.r,v+=C=V.g,y+=k=V.b,b+=T=V.a,_-=E,x-=C,w-=k,S-=T,V=V.next,c+=4;h+=D}for(n=0;n<D;n++){for(x=w=S=_=p=f=g=d=0,m=N*(E=A[c=n<<2]),v=N*(C=A[c+1]),y=N*(k=A[c+2]),b=N*(T=A[c+3]),d+=R*E,p+=R*C,f+=R*k,g+=R*T,j=F,i=0;i<N;i++)j.r=E,j.g=C,j.b=k,j.a=T,j=j.next;for(u=D,i=1;i<=e;i++)d+=(j.r=E=A[c=u+n<<2])*(P=N-i),p+=(j.g=C=A[c+1])*P,f+=(j.b=k=A[c+2])*P,g+=(j.a=T=A[c+3])*P,_+=E,x+=C,w+=k,S+=T,j=j.next,i<L&&(u+=D);for(c=n,z=F,V=B,r=0;r<O;r++)A[3+(o=c<<2)]=T=g*G>>U,T>0?(A[o]=(d*G>>U)*(T=255/T),A[o+1]=(p*G>>U)*T,A[o+2]=(f*G>>U)*T):A[o]=A[o+1]=A[o+2]=0,d-=m,p-=v,f-=y,g-=b,m-=z.r,v-=z.g,y-=z.b,b-=z.a,o=n+((o=r+N)<L?o:L)*D<<2,d+=_+=z.r=A[o],p+=x+=z.g=A[o+1],f+=w+=z.b=A[o+2],g+=S+=z.a=A[o+3],z=z.next,m+=E=V.r,v+=C=V.g,y+=k=V.b,b+=T=V.a,_-=E,x-=C,w-=k,S-=T,V=V.next,c+=D}}(t,e)},r.Factory.addGetterSetter(i.Node,"blurRadius",0,o.getNumberValidator(),r.Factory.afterSetFilter)},2896:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Brighten=function(t){var e,n=255*this.brightness(),r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=n,r[e+1]+=n,r[e+2]+=n},r.Factory.addGetterSetter(i.Node,"brightness",0,o.getNumberValidator(),r.Factory.afterSetFilter)},1088:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Contrast=function(t){var e,n=Math.pow((this.contrast()+100)/100,2),r=t.data,i=r.length,o=150,s=150,a=150;for(e=0;e<i;e+=4)o=r[e],s=r[e+1],a=r[e+2],o/=255,o-=.5,o*=n,o+=.5,s/=255,s-=.5,s*=n,s+=.5,a/=255,a-=.5,a*=n,a+=.5,s=(s*=255)<0?0:s>255?255:s,a=(a*=255)<0?0:a>255?255:a,r[e]=o=(o*=255)<0?0:o>255?255:o,r[e+1]=s,r[e+2]=a},r.Factory.addGetterSetter(i.Node,"contrast",0,o.getNumberValidator(),r.Factory.afterSetFilter)},4e3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;var r=n(6207),i=n(6191),o=n(9923),s=n(8760);e.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),s=0,a=0,l=t.data,u=t.width,c=t.height,h=4*u,d=c;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:o.Util.error("Unknown emboss direction: "+r)}do{var p=(d-1)*h,f=s;d+f<1&&(f=0),d+f>c&&(f=0);var g=(d-1+f)*u*4,m=u;do{var v=p+4*(m-1),y=a;m+y<1&&(y=0),m+y>u&&(y=0);var b=g+4*(m-1+y),_=l[v+1]-l[b+1],x=l[v+2]-l[b+2],w=l[v]-l[b],S=w>0?w:-w;if((_>0?_:-_)>S&&(w=_),(x>0?x:-x)>S&&(w=x),w*=e,i){var E=l[v]+w,C=l[v+1]+w,k=l[v+2]+w;l[v]=E>255?255:E<0?0:E,l[v+1]=C>255?255:C<0?0:C,l[v+2]=k>255?255:k<0?0:k}else{var T=n-w;T<0?T=0:T>255&&(T=255),l[v]=l[v+1]=l[v+2]=T}}while(--m)}while(--d)},r.Factory.addGetterSetter(i.Node,"embossStrength",.5,s.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,s.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,r.Factory.afterSetFilter)},2972:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;var r=n(6207),i=n(6191),o=n(8760);function s(t,e,n,r,i){var o=n-e,s=i-r;return 0===o?r+s/2:0===s?r:s*((t-e)/o)+r}e.Enhance=function(t){var e,n,r,i,o=t.data,a=o.length,l=o[0],u=l,c=o[1],h=c,d=o[2],p=d,f=this.enhance();if(0!==f){for(i=0;i<a;i+=4)(e=o[i+0])<l?l=e:e>u&&(u=e),(n=o[i+1])<c?c=n:n>h&&(h=n),(r=o[i+2])<d?d=r:r>p&&(p=r);var g,m,v,y,b,_,x,w,S;for(u===l&&(u=255,l=0),h===c&&(h=255,c=0),p===d&&(p=255,d=0),f>0?(m=u+f*(255-u),v=l-f*(l-0),b=h+f*(255-h),_=c-f*(c-0),w=p+f*(255-p),S=d-f*(d-0)):(m=u+f*(u-(g=.5*(u+l))),v=l+f*(l-g),b=h+f*(h-(y=.5*(h+c))),_=c+f*(c-y),w=p+f*(p-(x=.5*(p+d))),S=d+f*(d-x)),i=0;i<a;i+=4)o[i+0]=s(o[i+0],l,u,v,m),o[i+1]=s(o[i+1],c,h,_,b),o[i+2]=s(o[i+2],d,p,S,w)}},r.Factory.addGetterSetter(i.Node,"enhance",0,o.getNumberValidator(),r.Factory.afterSetFilter)},451:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0,e.Grayscale=function(t){var e,n,r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]=n=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e+1]=n,r[e+2]=n}},7513:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0;var r=n(6207),i=n(6191),o=n(8760);r.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"luminance",0,o.getNumberValidator(),r.Factory.afterSetFilter),e.HSL=function(t){var e,n,r,i,o,s=t.data,a=s.length,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=127*this.luminance(),h=1*l*Math.cos(u*Math.PI/180),d=1*l*Math.sin(u*Math.PI/180),p=.299+.701*h+.167*d,f=.587-.587*h+.33*d,g=.114-.114*h-.497*d,m=.299-.299*h-.328*d,v=.587+.413*h+.035*d,y=.114-.114*h+.293*d,b=.299-.3*h+1.25*d,_=.587-.586*h-1.05*d,x=.114+.886*h-.2*d;for(e=0;e<a;e+=4)o=s[e+3],s[e+0]=p*(n=s[e+0])+f*(r=s[e+1])+g*(i=s[e+2])+c,s[e+1]=m*n+v*r+y*i+c,s[e+2]=b*n+_*r+x*i+c,s[e+3]=o}},9373:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;var r=n(6207),i=n(6191),o=n(8760);e.HSV=function(t){var e,n,r,i,o,s=t.data,a=s.length,l=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=l*u*Math.cos(c*Math.PI/180),d=l*u*Math.sin(c*Math.PI/180),p=.299*l+.701*h+.167*d,f=.587*l-.587*h+.33*d,g=.114*l-.114*h-.497*d,m=.299*l-.299*h-.328*d,v=.587*l+.413*h+.035*d,y=.114*l-.114*h+.293*d,b=.299*l-.3*h+1.25*d,_=.587*l-.586*h-1.05*d,x=.114*l+.886*h-.2*d;for(e=0;e<a;e+=4)o=s[e+3],s[e+0]=p*(n=s[e+0])+f*(r=s[e+1])+g*(i=s[e+2]),s[e+1]=m*n+v*r+y*i,s[e+2]=b*n+_*r+x*i,s[e+3]=o},r.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"value",0,o.getNumberValidator(),r.Factory.afterSetFilter)},2483:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0,e.Invert=function(t){var e,n=t.data,r=n.length;for(e=0;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}},4898:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;var r=n(6207),i=n(6191),o=n(9923),s=n(8760);e.Kaleidoscope=function(t){var e,n,r,i,s,a,l,u,c,h=t.width,d=t.height,p=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),g=Math.floor(h*(f%360)/360);if(!(p<1)){var m=o.Util.createCanvasElement();m.width=h,m.height=d;var v=m.getContext("2d").getImageData(0,0,h,d);!function(t,e,n){var r,i,o,s,a=t.data,l=e.data,u=t.width,c=t.height,h=n.polarCenterX||u/2,d=n.polarCenterY||c/2,p=0,f=0,g=0,m=0,v=Math.sqrt(h*h+d*d);i=u-h,o=c-d,v=(s=Math.sqrt(i*i+o*o))>v?s:v;var y,b,_,x,w=c,S=u,E=360/S*Math.PI/180;for(b=0;b<S;b+=1)for(_=Math.sin(b*E),x=Math.cos(b*E),y=0;y<w;y+=1)i=Math.floor(h+v*y/w*x),p=a[0+(r=4*((o=Math.floor(d+v*y/w*_))*u+i))],f=a[r+1],g=a[r+2],m=a[r+3],l[0+(r=4*(b+y*u))]=p,l[r+1]=f,l[r+2]=g,l[r+3]=m}(t,v,{polarCenterX:h/2,polarCenterY:d/2});for(var y=h/Math.pow(2,p);y<=8;)y*=2,p-=1;var b=y=Math.ceil(y),_=0,x=b,w=1;for(g+y>h&&(_=b,x=0,w=-1),n=0;n<d;n+=1)for(e=_;e!==x;e+=w)r=Math.round(e+g)%h,s=v.data[1+(u=4*(h*n+r))],a=v.data[u+2],l=v.data[u+3],v.data[0+(c=4*(h*n+e))]=v.data[u+0],v.data[c+1]=s,v.data[c+2]=a,v.data[c+3]=l;for(n=0;n<d;n+=1)for(b=Math.floor(y),i=0;i<p;i+=1){for(e=0;e<b+1;e+=1)s=v.data[1+(u=4*(h*n+e))],a=v.data[u+2],l=v.data[u+3],v.data[0+(c=4*(h*n+2*b-e-1))]=v.data[u+0],v.data[c+1]=s,v.data[c+2]=a,v.data[c+3]=l;b*=2}!function(t,e,n){var r,i,o,s,a,l,u=t.data,c=e.data,h=t.width,d=t.height,p=n.polarCenterX||h/2,f=n.polarCenterY||d/2,g=0,m=0,v=0,y=0,b=Math.sqrt(p*p+f*f);i=h-p,o=d-f,b=(l=Math.sqrt(i*i+o*o))>b?l:b;var _,x,w,S=d,E=h,C=n.polarRotation||0;for(i=0;i<h;i+=1)for(o=0;o<d;o+=1)s=i-p,a=o-f,_=Math.sqrt(s*s+a*a)*S/b,x=(x=(180*Math.atan2(a,s)/Math.PI+360+C)%360)*E/360,w=Math.floor(x),g=u[0+(r=4*(Math.floor(_)*h+w))],m=u[r+1],v=u[r+2],y=u[r+3],c[0+(r=4*(o*h+i))]=g,c[r+1]=m,c[r+2]=v,c[r+3]=y}(v,t,{polarRotation:0})}},r.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,s.getNumberValidator(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,s.getNumberValidator(),r.Factory.afterSetFilter)},9797:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;var r=n(6207),i=n(6191),o=n(8760);function s(t,e,n){var r=4*(n*t.width+e),i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function a(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var n=s(t,0,0),r=s(t,t.width-1,0),i=s(t,0,t.height-1),o=s(t,t.width-1,t.height-1),l=e||10;if(a(n,r)<l&&a(r,o)<l&&a(o,i)<l&&a(i,n)<l){for(var u=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([r,n,o,i]),c=[],h=0;h<t.width*t.height;h++){var d=a(u,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);c[h]=d<l?0:255}return c}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var u=a*e+l,c=0,h=0;h<i;h++)for(var d=0;d<i;d++){var p=a+h-o,f=l+d-o;p>=0&&p<n&&f>=0&&f<e&&(c+=t[p*e+f]*r[h*i+d])}s[u]=c}return s}(e=function(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var u=a*e+l,c=0,h=0;h<i;h++)for(var d=0;d<i;d++){var p=a+h-o,f=l+d-o;p>=0&&p<n&&f>=0&&f<e&&(c+=t[p*e+f]*r[h*i+d])}s[u]=c>=1020?255:0}return s}(e=function(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var u=a*e+l,c=0,h=0;h<i;h++)for(var d=0;d<i;d++){var p=a+h-o,f=l+d-o;p>=0&&p<n&&f>=0&&f<e&&(c+=t[p*e+f]*r[h*i+d])}s[u]=2040===c?255:0}return s}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},r.Factory.addGetterSetter(i.Node,"threshold",0,o.getNumberValidator(),r.Factory.afterSetFilter)},7730:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Noise=function(t){var e,n=255*this.noise(),r=t.data,i=r.length,o=n/2;for(e=0;e<i;e+=4)r[e+0]+=o-2*o*Math.random(),r[e+1]+=o-2*o*Math.random(),r[e+2]+=o-2*o*Math.random()},r.Factory.addGetterSetter(i.Node,"noise",.2,o.getNumberValidator(),r.Factory.afterSetFilter)},1106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;var r=n(6207),i=n(9923),o=n(6191),s=n(8760);e.Pixelate=function(t){var e,n,r,o,s,a,l,u,c,h,d,p,f,g,m=Math.ceil(this.pixelSize()),v=t.width,y=t.height,b=Math.ceil(v/m),_=Math.ceil(y/m),x=t.data;if(m<=0)i.Util.error("pixelSize value can not be <= 0");else for(p=0;p<b;p+=1)for(f=0;f<_;f+=1){for(o=0,s=0,a=0,l=0,c=(u=p*m)+m,d=(h=f*m)+m,g=0,e=u;e<c;e+=1)if(!(e>=v))for(n=h;n<d;n+=1)n>=y||(o+=x[0+(r=4*(v*n+e))],s+=x[r+1],a+=x[r+2],l+=x[r+3],g+=1);for(o/=g,s/=g,a/=g,l/=g,e=u;e<c;e+=1)if(!(e>=v))for(n=h;n<d;n+=1)n>=y||(x[0+(r=4*(v*n+e))]=o,x[r+1]=s,x[r+2]=a,x[r+3]=l)}},r.Factory.addGetterSetter(o.Node,"pixelSize",8,s.getNumberValidator(),r.Factory.afterSetFilter)},4233:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,r=t.data,i=r.length,o=255/n;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/o)*o},r.Factory.addGetterSetter(i.Node,"levels",.5,o.getNumberValidator(),r.Factory.afterSetFilter)},7984:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;var r=n(6207),i=n(6191),o=n(8760);e.RGB=function(t){var e,n,r=t.data,i=r.length,o=this.red(),s=this.green(),a=this.blue();for(e=0;e<i;e+=4)r[e]=(n=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255)*o,r[e+1]=n*s,r[e+2]=n*a,r[e+3]=r[e+3]},r.Factory.addGetterSetter(i.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,r.Factory.afterSetFilter)},5179:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;var r=n(6207),i=n(6191),o=n(8760);e.RGBA=function(t){var e,n,r=t.data,i=r.length,o=this.red(),s=this.green(),a=this.blue(),l=this.alpha();for(e=0;e<i;e+=4)r[e]=o*l+r[e]*(n=1-l),r[e+1]=s*l+r[e+1]*n,r[e+2]=a*l+r[e+2]*n},r.Factory.addGetterSetter(i.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),r.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})},4423:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0,e.Sepia=function(t){var e,n,r,i,o=t.data,s=o.length;for(e=0;e<s;e+=4)n=o[e+0],r=o[e+1],i=o[e+2],o[e+0]=Math.min(255,.393*n+.769*r+.189*i),o[e+1]=Math.min(255,.349*n+.686*r+.168*i),o[e+2]=Math.min(255,.272*n+.534*r+.131*i)}},2105:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0,e.Solarize=function(t){var e=t.data,n=t.width,r=4*n,i=t.height;do{var o=(i-1)*r,s=n;do{var a=o+4*(s-1),l=e[a],u=e[a+1],c=e[a+2];l>127&&(l=255-l),u>127&&(u=255-u),c>127&&(c=255-c),e[a]=l,e[a+1]=u,e[a+2]=c}while(--s)}while(--i)}},4170:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;var r=n(6207),i=n(6191),o=n(8760);e.Threshold=function(t){var e,n=255*this.threshold(),r=t.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<n?0:255},r.Factory.addGetterSetter(i.Node,"threshold",.5,o.getNumberValidator(),r.Factory.afterSetFilter)},8429:function(t,e,n){var r=n(6496).S;r._injectGlobal(r),e.default=r,t.exports=e.default},1937:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(2458),u=n(8760),c=n(2458),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=l.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(a.Shape);e.Arc=h,h.prototype._centroid=!0,h.prototype.className="Arc",h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(h),s.Factory.addGetterSetter(h,"innerRadius",0,u.getNumberValidator()),s.Factory.addGetterSetter(h,"outerRadius",0,u.getNumberValidator()),s.Factory.addGetterSetter(h,"angle",0,u.getNumberValidator()),s.Factory.addGetterSetter(h,"clockwise",!1,u.getBooleanValidator()),o.Collection.mapMethods(h)},2099:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;var o=n(9923),s=n(6207),a=n(2346),l=n(8760),u=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var n=2*Math.PI,r=this.points(),i=r,o=0!==this.tension()&&r.length>4;o&&(i=this.getTensionPoints());var s,a,l=r.length;o?(s=r[l-2]-(i[i.length-2]+i[i.length-4])/2,a=r[l-1]-(i[i.length-1]+i[i.length-3])/2):(s=r[l-2]-r[l-4],a=r[l-1]-r[l-3]);var u=(Math.atan2(a,s)+n)%n,c=this.pointerLength(),h=this.pointerWidth();e.save(),e.beginPath(),e.translate(r[l-2],r[l-1]),e.rotate(u),e.moveTo(0,0),e.lineTo(-c,h/2),e.lineTo(-c,-h/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(r[0],r[1]),o?(s=(i[0]+i[2])/2-r[0],a=(i[1]+i[3])/2-r[1]):(s=r[2]-r[0],a=r[3]-r[1]),e.rotate((Math.atan2(-a,-s)+n)%n),e.moveTo(0,0),e.lineTo(-c,h/2),e.lineTo(-c,-h/2),e.closePath(),e.restore());var d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var e=t.prototype.getSelfRect.call(this),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+2*n,height:e.height+2*n}},e}(a.Line);e.Arrow=c,c.prototype.className="Arrow",u._registerNode(c),s.Factory.addGetterSetter(c,"pointerLength",10,l.getNumberValidator()),s.Factory.addGetterSetter(c,"pointerWidth",10,l.getNumberValidator()),s.Factory.addGetterSetter(c,"pointerAtBeginning",!1),o.Collection.mapMethods(c)},1960:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(8760),u=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(a.Shape);e.Circle=c,c.prototype._centroid=!0,c.prototype.className="Circle",c.prototype._attrsAffectingSize=["radius"],u._registerNode(c),s.Factory.addGetterSetter(c,"radius",0,l.getNumberValidator()),o.Collection.mapMethods(c)},8237:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(8760),u=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radiusX()},e.prototype.getHeight=function(){return 2*this.radiusY()},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(a.Shape);e.Ellipse=c,c.prototype.className="Ellipse",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radiusX","radiusY"],u._registerNode(c),s.Factory.addComponentsGetterSetter(c,"radius",["x","y"]),s.Factory.addGetterSetter(c,"radiusX",0,l.getNumberValidator()),s.Factory.addGetterSetter(c,"radiusY",0,l.getNumberValidator()),o.Collection.mapMethods(c)},1422:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(8760),u=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._useBufferCanvas=function(){return t.prototype._useBufferCanvas.call(this,!0)},e.prototype._sceneFunc=function(t){var e,n=this.getWidth(),r=this.getHeight(),i=this.attrs.image;if(i){var o=this.attrs.cropWidth,s=this.attrs.cropHeight;e=o&&s?[i,this.cropX(),this.cropY(),o,s,0,0,n,r]:[i,0,0,n,r]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,e)},e.prototype._hitFunc=function(t){var e=this.width(),n=this.height();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:(null===(e=this.image())||void 0===e?void 0:e.width)||0},e.prototype.getHeight=function(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:(null===(e=this.image())||void 0===e?void 0:e.height)||0},e.fromURL=function(t,n){var r=o.Util.createImageElement();r.onload=function(){var t=new e({image:r});n(t)},r.crossOrigin="Anonymous",r.src=t},e}(a.Shape);e.Image=c,c.prototype.className="Image",u._registerNode(c),s.Factory.addGetterSetter(c,"image"),s.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),s.Factory.addGetterSetter(c,"cropX",0,l.getNumberValidator()),s.Factory.addGetterSetter(c,"cropY",0,l.getNumberValidator()),s.Factory.addGetterSetter(c,"cropWidth",0,l.getNumberValidator()),s.Factory.addGetterSetter(c,"cropHeight",0,l.getNumberValidator()),o.Collection.mapMethods(c)},5694:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(829),u=n(8760),c=n(2458),h=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],d=h.length,p=function(t){function e(e){var n=t.call(this,e)||this;return n.on("add.konva",function(t){this._addListeners(t.child),this._sync()}),n}return i(e,t),e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var e,n=this,r=function(){n._sync()};for(e=0;e<d;e++)t.on(h[e]+"Change.konva",r)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t,e,n,r,i,o,s,a=this.getText(),l=this.getTag();if(a&&l){switch(t=a.width(),e=a.height(),n=l.pointerDirection(),r=l.pointerWidth(),s=l.pointerHeight(),i=0,o=0,n){case"up":i=t/2,o=-1*s;break;case"right":i=t+r,o=e/2;break;case"down":i=t/2,o=e+s;break;case"left":i=-1*r,o=e/2}l.setAttrs({x:-1*i,y:-1*o,width:t,height:e}),a.setAttrs({x:-1*i,y:-1*o})}},e}(l.Group);e.Label=p,p.prototype.className="Label",c._registerNode(p),o.Collection.mapMethods(p);var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.width(),n=this.height(),r=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius(),a=0,l=0,u=0,c=0;"number"==typeof s?a=l=u=c=Math.min(s,e/2,n/2):(a=Math.min(s[0]||0,e/2,n/2),l=Math.min(s[1]||0,e/2,n/2),c=Math.min(s[2]||0,e/2,n/2),u=Math.min(s[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(a,0),"up"===r&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+i)/2,0)),t.lineTo(e-l,0),t.arc(e-l,l,l,3*Math.PI/2,0,!1),"right"===r&&(t.lineTo(e,(n-o)/2),t.lineTo(e+i,n/2),t.lineTo(e,(n+o)/2)),t.lineTo(e,n-c),t.arc(e-c,n-c,c,0,Math.PI/2,!1),"down"===r&&(t.lineTo((e+i)/2,n),t.lineTo(e/2,n+o),t.lineTo((e-i)/2,n)),t.lineTo(u,n),t.arc(u,n-u,u,Math.PI/2,Math.PI,!1),"left"===r&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*i,n/2),t.lineTo(0,(n-o)/2)),t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,e=0,n=this.pointerWidth(),r=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),s=this.height();return"up"===i?(e-=r,s+=r):"down"===i?s+=r:"left"===i?(t-=1.5*n,o+=n):"right"===i&&(o+=1.5*n),{x:t,y:e,width:o,height:s}},e}(a.Shape);e.Tag=f,f.prototype.className="Tag",c._registerNode(f),s.Factory.addGetterSetter(f,"pointerDirection","none"),s.Factory.addGetterSetter(f,"pointerWidth",0,u.getNumberValidator()),s.Factory.addGetterSetter(f,"pointerHeight",0,u.getNumberValidator()),s.Factory.addGetterSetter(f,"cornerRadius",0,u.getNumberOrArrayOfNumbersValidator(4)),o.Collection.mapMethods(f)},2346:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var s=n(9923),a=n(6207),l=n(535),u=n(8760),c=n(2458),h=function(t){function e(e){var n=t.call(this,e)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),n}return i(e,t),e.prototype._sceneFunc=function(t){var e,n,r,i=this.points(),o=i.length,s=this.tension(),a=this.closed(),l=this.bezier();if(o){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==s&&o>4){for(n=(e=this.getTensionPoints()).length,r=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<n-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);a||t.quadraticCurveTo(e[n-2],e[n-1],i[o-2],i[o-1])}else if(l)for(r=2;r<o;)t.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);else for(r=2;r<o;r+=2)t.lineTo(i[r],i[r+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():s.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,n=this.tension(),r=s.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),i=s.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),o=s.Util._expandPoints(t,n);return[r[2],r[3]].concat(o).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],r[0],r[1],t[0],t[1]])},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,r=(t=0!==this.tension()?o([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):this.points())[0],i=t[0],s=t[1],a=t[1],l=0;l<t.length/2;l++)e=t[2*l],n=t[2*l+1],r=Math.min(r,e),i=Math.max(i,e),s=Math.min(s,n),a=Math.max(a,n);return{x:r,y:s,width:i-r,height:a-s}},e}(l.Shape);e.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],c._registerNode(h),a.Factory.addGetterSetter(h,"closed",!1),a.Factory.addGetterSetter(h,"bezier",!1),a.Factory.addGetterSetter(h,"tension",0,u.getNumberValidator()),a.Factory.addGetterSetter(h,"points",[],u.getNumberArrayValidator()),s.Collection.mapMethods(h)},2747:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(2458),u=function(t){function e(n){var r=t.call(this,n)||this;r.dataArray=[],r.pathLength=0,r.dataArray=e.parsePathData(r.data()),r.pathLength=0;for(var i=0;i<r.dataArray.length;++i)r.pathLength+=r.dataArray[i].pathLength;return r.on("dataChange.konva",function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength}),r}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var n=!1,r=0;r<e.length;r++){var i=e[r].points;switch(e[r].command){case"L":t.lineTo(i[0],i[1]);break;case"M":t.moveTo(i[0],i[1]);break;case"C":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"Q":t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"A":var o=i[0],s=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],p=a>l?a:l,f=a>l?1:a/l,g=a>l?l/a:1;t.translate(o,s),t.rotate(h),t.scale(f,g),t.arc(0,0,p,u,u+c,1-d),t.scale(1/f,1/g),t.rotate(-h),t.translate(-o,-s);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach(function(n){if("A"===n.command){var r=n.points[4],i=n.points[5],o=n.points[4]+i,s=Math.PI/180;if(Math.abs(r-o)<s&&(s=Math.abs(r-o)),i<0)for(var a=r-s;a>o;a-=s){var l=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],a,0);t.push(l.x,l.y)}else for(a=r+s;a<o;a+=s)l=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],a,0),t.push(l.x,l.y)}else if("C"===n.command)for(a=0;a<=1;a+=.01)l=e.getPointOnCubicBezier(a,n.start.x,n.start.y,n.points[0],n.points[1],n.points[2],n.points[3],n.points[4],n.points[5]),t.push(l.x,l.y);else t=t.concat(n.points)});for(var n,r,i=t[0],o=t[0],s=t[1],a=t[1],l=0;l<t.length/2;l++)n=t[2*l],r=t[2*l+1],isNaN(n)||(i=Math.min(i,n),o=Math.max(o,n)),isNaN(r)||(s=Math.min(s,r),a=Math.max(a,r));return{x:Math.round(i),y:Math.round(s),width:Math.round(o-i),height:Math.round(a-s)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&t>this.dataArray[r].pathLength;)t-=this.dataArray[r].pathLength,++r;if(r===i)return{x:(n=this.dataArray[r-1].points.slice(-2))[0],y:n[1]};if(t<.01)return{x:(n=this.dataArray[r].points.slice(0,2))[0],y:n[1]};var o=this.dataArray[r],s=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,s[0],s[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var a=s[4];return e.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],a+=s[5]*t/o.pathLength,s[6])}return null},e.getLineLength=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},e.getPointOnLine=function(t,e,n,r,i,o,s){void 0===o&&(o=e),void 0===s&&(s=n);var a=(i-n)/(r-e+1e-8),l=Math.sqrt(t*t/(1+a*a));r<e&&(l*=-1);var u,c=a*l;if(r===e)u={x:o,y:s+c};else if((s-n)/(o-e+1e-8)===a)u={x:o+l,y:s+c};else{var h,d,p=this.getLineLength(e,n,r,i),f=(o-e)*(r-e)+(s-n)*(i-n),g=this.getLineLength(o,s,h=e+(f/=p*p)*(r-e),d=n+f*(i-n)),m=Math.sqrt(t*t-g*g);l=Math.sqrt(m*m/(1+a*a)),r<e&&(l*=-1),u={x:h+l,y:d+(c=a*l)}}return u},e.getPointOnCubicBezier=function(t,e,n,r,i,o,s,a,l){function u(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:a*u(t)+o*c(t)+r*h(t)+e*d(t),y:l*u(t)+s*c(t)+i*h(t)+n*d(t)}},e.getPointOnQuadraticBezier=function(t,e,n,r,i,o,s){function a(t){return t*t}function l(t){return 2*t*(1-t)}function u(t){return(1-t)*(1-t)}return{x:o*a(t)+r*l(t)+e*u(t),y:s*a(t)+i*l(t)+n*u(t)}},e.getPointOnEllipticalArc=function(t,e,n,r,i,o){var s=Math.cos(o),a=Math.sin(o),l=n*Math.cos(i),u=r*Math.sin(i);return{x:t+(l*s-u*a),y:e+(l*a+u*s)}},e.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)e=e.replace(new RegExp(n[r],"g"),"|"+n[r]);var i,o=e.split("|"),s=[],a=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<o.length;r++){var h=o[r],d=h.charAt(0);for(h=h.slice(1),a.length=0;i=c.exec(h);)a.push(i[0]);for(var p=[],f=0,g=a.length;f<g;f++){var m=parseFloat(a[f]);isNaN(m)?p.push(0):p.push(m)}for(;p.length>0&&!isNaN(p[0]);){var v,y,b,_,x,w,S,E,C,k,T=null,P=[],A=l,D=u;switch(d){case"l":l+=p.shift(),u+=p.shift(),T="L",P.push(l,u);break;case"L":l=p.shift(),u=p.shift(),P.push(l,u);break;case"m":var O=p.shift(),M=p.shift();if(l+=O,u+=M,T="M",s.length>2&&"z"===s[s.length-1].command)for(var I=s.length-2;I>=0;I--)if("M"===s[I].command){l=s[I].points[0]+O,u=s[I].points[1]+M;break}P.push(l,u),d="l";break;case"M":l=p.shift(),u=p.shift(),T="M",P.push(l,u),d="L";break;case"h":l+=p.shift(),T="L",P.push(l,u);break;case"H":l=p.shift(),T="L",P.push(l,u);break;case"v":u+=p.shift(),T="L",P.push(l,u);break;case"V":u=p.shift(),T="L",P.push(l,u);break;case"C":P.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),u=p.shift(),P.push(l,u);break;case"c":P.push(l+p.shift(),u+p.shift(),l+p.shift(),u+p.shift()),l+=p.shift(),u+=p.shift(),T="C",P.push(l,u);break;case"S":y=l,b=u,"C"===(v=s[s.length-1]).command&&(y=l+(l-v.points[2]),b=u+(u-v.points[3])),P.push(y,b,p.shift(),p.shift()),l=p.shift(),u=p.shift(),T="C",P.push(l,u);break;case"s":y=l,b=u,"C"===(v=s[s.length-1]).command&&(y=l+(l-v.points[2]),b=u+(u-v.points[3])),P.push(y,b,l+p.shift(),u+p.shift()),l+=p.shift(),u+=p.shift(),T="C",P.push(l,u);break;case"Q":P.push(p.shift(),p.shift()),l=p.shift(),u=p.shift(),P.push(l,u);break;case"q":P.push(l+p.shift(),u+p.shift()),l+=p.shift(),u+=p.shift(),T="Q",P.push(l,u);break;case"T":y=l,b=u,"Q"===(v=s[s.length-1]).command&&(y=l+(l-v.points[0]),b=u+(u-v.points[1])),l=p.shift(),u=p.shift(),T="Q",P.push(y,b,l,u);break;case"t":y=l,b=u,"Q"===(v=s[s.length-1]).command&&(y=l+(l-v.points[0]),b=u+(u-v.points[1])),l+=p.shift(),u+=p.shift(),T="Q",P.push(y,b,l,u);break;case"A":_=p.shift(),x=p.shift(),w=p.shift(),S=p.shift(),E=p.shift(),C=l,k=u,l=p.shift(),u=p.shift(),T="A",P=this.convertEndpointToCenterParameterization(C,k,l,u,S,E,_,x,w);break;case"a":_=p.shift(),x=p.shift(),w=p.shift(),S=p.shift(),E=p.shift(),C=l,k=u,l+=p.shift(),u+=p.shift(),T="A",P=this.convertEndpointToCenterParameterization(C,k,l,u,S,E,_,x,w)}s.push({command:T||d,points:P,start:{x:A,y:D},pathLength:this.calcLength(A,D,T||d,P)})}"z"!==d&&"Z"!==d||s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},e.calcLength=function(t,n,r,i){var o,s,a,l,u=e;switch(r){case"L":return u.getLineLength(t,n,i[0],i[1]);case"C":for(o=0,s=u.getPointOnCubicBezier(0,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)a=u.getPointOnCubicBezier(l,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),o+=u.getLineLength(s.x,s.y,a.x,a.y),s=a;return o;case"Q":for(o=0,s=u.getPointOnQuadraticBezier(0,t,n,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)a=u.getPointOnQuadraticBezier(l,t,n,i[0],i[1],i[2],i[3]),o+=u.getLineLength(s.x,s.y,a.x,a.y),s=a;return o;case"A":o=0;var c=i[4],h=i[5],d=i[4]+h,p=Math.PI/180;if(Math.abs(c-d)<p&&(p=Math.abs(c-d)),s=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),h<0)for(l=c-p;l>d;l-=p)a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=u.getLineLength(s.x,s.y,a.x,a.y),s=a;else for(l=c+p;l<d;l+=p)a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=u.getLineLength(s.x,s.y,a.x,a.y),s=a;return a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),o+u.getLineLength(s.x,s.y,a.x,a.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,n,r,i,o,s,a,l){var u=l*(Math.PI/180),c=Math.cos(u)*(t-n)/2+Math.sin(u)*(e-r)/2,h=-1*Math.sin(u)*(t-n)/2+Math.cos(u)*(e-r)/2,d=c*c/(s*s)+h*h/(a*a);d>1&&(s*=Math.sqrt(d),a*=Math.sqrt(d));var p=Math.sqrt((s*s*(a*a)-s*s*(h*h)-a*a*(c*c))/(s*s*(h*h)+a*a*(c*c)));i===o&&(p*=-1),isNaN(p)&&(p=0);var f=p*s*h/a,g=p*-a*c/s,m=(t+n)/2+Math.cos(u)*f-Math.sin(u)*g,v=(e+r)/2+Math.sin(u)*f+Math.cos(u)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},x=_([1,0],[(c-f)/s,(h-g)/a]),w=[(c-f)/s,(h-g)/a],S=[(-1*c-f)/s,(-1*h-g)/a],E=_(w,S);return b(w,S)<=-1&&(E=Math.PI),b(w,S)>=1&&(E=0),0===o&&E>0&&(E-=2*Math.PI),1===o&&E<0&&(E+=2*Math.PI),[m,v,s,a,x,E,u,o]},e}(a.Shape);e.Path=u,u.prototype.className="Path",u.prototype._attrsAffectingSize=["data"],l._registerNode(u),s.Factory.addGetterSetter(u,"data"),o.Collection.mapMethods(u)},576:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(2458),u=n(8760),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),n=this.width(),r=this.height();if(t.beginPath(),e){var i=0,o=0,s=0,a=0;"number"==typeof e?i=o=s=a=Math.min(e,n/2,r/2):(i=Math.min(e[0]||0,n/2,r/2),o=Math.min(e[1]||0,n/2,r/2),a=Math.min(e[2]||0,n/2,r/2),s=Math.min(e[3]||0,n/2,r/2)),t.moveTo(i,0),t.lineTo(n-o,0),t.arc(n-o,o,o,3*Math.PI/2,0,!1),t.lineTo(n,r-a),t.arc(n-a,r-a,a,0,Math.PI/2,!1),t.lineTo(s,r),t.arc(s,r-s,s,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,r);t.closePath(),t.fillStrokeShape(this)},e}(a.Shape);e.Rect=c,c.prototype.className="Rect",l._registerNode(c),s.Factory.addGetterSetter(c,"cornerRadius",0,u.getNumberOrArrayOfNumbersValidator(4)),o.Collection.mapMethods(c)},3754:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(8760),u=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fillStrokeShape(this)},e.prototype._getPoints=function(){for(var t=this.attrs.sides,e=this.attrs.radius||0,n=[],r=0;r<t;r++)n.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return n},e.prototype.getSelfRect=function(){var t=this._getPoints(),e=t[0].x,n=t[0].y,r=t[0].x,i=t[0].y;return t.forEach(function(t){e=Math.min(e,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)}),{x:e,y:r,width:n-e,height:i-r}},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(a.Shape);e.RegularPolygon=c,c.prototype.className="RegularPolygon",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],u._registerNode(c),s.Factory.addGetterSetter(c,"radius",0,l.getNumberValidator()),s.Factory.addGetterSetter(c,"sides",0,l.getNumberValidator()),o.Collection.mapMethods(c)},7025:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(8760),u=n(2458),c=2*Math.PI,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,c,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),c,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(a.Shape);e.Ring=h,h.prototype.className="Ring",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(h),s.Factory.addGetterSetter(h,"innerRadius",0,l.getNumberValidator()),s.Factory.addGetterSetter(h,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(h)},5070:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(5132),u=n(8760),c=n(2458),h=function(t){function e(e){var n=t.call(this,e)||this;return n._updated=!0,n.anim=new l.Animation(function(){var t=n._updated;return n._updated=!1,t}),n.on("animationChange.konva",function(){this.frameIndex(0)}),n.on("frameIndexChange.konva",function(){this._updated=!0}),n.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),n}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],o=this.frameOffsets(),s=i[r+0],a=i[r+1],l=i[r+2],u=i[r+3],c=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,u),t.closePath(),t.fillStrokeShape(this)),c)if(o){var h=o[e],d=2*n;t.drawImage(c,s,a,l,u,h[d+0],h[d+1],l,u)}else t.drawImage(c,s,a,l,u,0,0,l,u)},e.prototype._hitFunc=function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],o=this.frameOffsets(),s=i[r+2],a=i[r+3];if(t.beginPath(),o){var l=o[e],u=2*n;t.rect(l[u+0],l[u+1],s,a)}else t.rect(0,0,s,a);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return t.prototype._useBufferCanvas.call(this,!0)},e.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation(),n=this.animations();this.frameIndex(t<n[e].length/4-1?t+1:0)},e}(a.Shape);e.Sprite=h,h.prototype.className="Sprite",c._registerNode(h),s.Factory.addGetterSetter(h,"animation"),s.Factory.addGetterSetter(h,"animations"),s.Factory.addGetterSetter(h,"frameOffsets"),s.Factory.addGetterSetter(h,"image"),s.Factory.addGetterSetter(h,"frameIndex",0,u.getNumberValidator()),s.Factory.addGetterSetter(h,"frameRate",17,u.getNumberValidator()),s.Factory.backCompat(h,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),o.Collection.mapMethods(h)},9896:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(8760),u=n(2458),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var i=1;i<2*r;i++){var o=i%2==0?n:e,s=o*Math.sin(i*Math.PI/r),a=-1*o*Math.cos(i*Math.PI/r);t.lineTo(s,a)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(a.Shape);e.Star=c,c.prototype.className="Star",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(c),s.Factory.addGetterSetter(c,"numPoints",5,l.getNumberValidator()),s.Factory.addGetterSetter(c,"innerRadius",0,l.getNumberValidator()),s.Factory.addGetterSetter(c,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(c)},6135:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Text=e.stringToArray=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(2458),u=n(8760),c=n(2458);function h(t){return Array.from(t)}e.stringToArray=h;var d,p=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],f=p.length;function g(){return d||(d=o.Util.createCanvasElement().getContext("2d"))}var m=function(t){function e(e){var n=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this;n._partialTextX=0,n._partialTextY=0;for(var r=0;r<f;r++)n.on(p[r]+"Change.konva",n._setTextData);return n._setTextData(),n}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.textArr,n=e.length;if(this.text()){var r,i=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,a=this.verticalAlign(),l=0,u=this.align(),c=this.getWidth(),d=this.letterSpacing(),p=this.fill(),f=this.textDecoration(),g=-1!==f.indexOf("underline"),m=-1!==f.indexOf("line-through"),v=0,y=(v=s/2,0),b=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===a?l=(this.getHeight()-n*s-2*i)/2:"bottom"===a&&(l=this.getHeight()-n*s-2*i),t.translate(i,l+i),r=0;r<n;r++){y=0,b=0;var _,x,w,S=e[r],E=S.text,C=S.width,k=r!==n-1;if(t.save(),"right"===u?y+=c-C-2*i:"center"===u&&(y+=(c-C-2*i)/2),g&&(t.save(),t.beginPath(),t.moveTo(y,v+b+Math.round(o/2)),x=0==(_=E.split(" ").length-1),w="justify"===u&&k&&!x?c-2*i:C,t.lineTo(y+Math.round(w),v+b+Math.round(o/2)),t.lineWidth=o/15,t.strokeStyle=p,t.stroke(),t.restore()),m&&(t.save(),t.beginPath(),t.moveTo(y,v+b),x=0==(_=E.split(" ").length-1),w="justify"===u&&k&&!x?c-2*i:C,t.lineTo(y+Math.round(w),v+b),t.lineWidth=o/15,t.strokeStyle=p,t.stroke(),t.restore()),0!==d||"justify"===u){_=E.split(" ").length-1;for(var T=h(E),P=0;P<T.length;P++){var A=T[P];" "===A&&r!==n-1&&"justify"===u&&(y+=(c-2*i-C)/_),this._partialTextX=y,this._partialTextY=v+b,this._partialText=A,t.fillStrokeShape(this),y+=this.measureSize(A).width+d}}else this._partialTextX=y,this._partialTextY=v+b,this._partialText=E,t.fillStrokeShape(this);t.restore(),n>1&&(v+=s)}}},e.prototype._hitFunc=function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var e=o.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this},e.prototype.getWidth=function(){return"auto"===this.attrs.width||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},e.prototype.getHeight=function(){return"auto"===this.attrs.height||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var e,n=g(),r=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:r}},e.prototype._getContextFont=function(){return l.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(function(t){var e=(t=t.trim()).indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t='"'+t+'"'),t}).join(", ")},e.prototype._addTextLine=function(t){"justify"===this.align()&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},e.prototype._getTextWidth=function(t){var e=this.letterSpacing(),n=t.length;return g().measureText(t).width+(n?e*(n-1):0)},e.prototype._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,r=this.lineHeight()*e,i=this.attrs.width,o=this.attrs.height,s="auto"!==i&&void 0!==i,a="auto"!==o&&void 0!==o,l=this.padding(),u=i-2*l,c=o-2*l,h=0,d=this.wrap(),p="none"!==d,f="char"!==d&&p,m=this.ellipsis();this.textArr=[],g().font=this._getContextFont();for(var v=m?this._getTextWidth("\u2026"):0,y=0,b=t.length;y<b;++y){var _=t[y],x=this._getTextWidth(_);if(s&&x>u)for(;_.length>0;){for(var w=0,S=_.length,E="",C=0;w<S;){var k=w+S>>>1,T=_.slice(0,k+1),P=this._getTextWidth(T)+v;P<=u?(w=k+1,E=T,C=P):S=k}if(!E)break;if(f){var A,D=_[E.length];(A=(" "===D||"-"===D)&&C<=u?E.length:Math.max(E.lastIndexOf(" "),E.lastIndexOf("-"))+1)>0&&(E=E.slice(0,w=A),C=this._getTextWidth(E))}if(E=E.trimRight(),this._addTextLine(E),n=Math.max(n,C),h+=r,!p||a&&h+r>c){var O=this.textArr[this.textArr.length-1];O&&m&&(this._getTextWidth(O.text+"\u2026")<u||(O.text=O.text.slice(0,O.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(O.text+"\u2026"));break}if((_=(_=_.slice(w)).trimLeft()).length>0&&(x=this._getTextWidth(_))<=u){this._addTextLine(_),h+=r,n=Math.max(n,x);break}}else this._addTextLine(_),h+=r,n=Math.max(n,x);if(a&&h+r>c)break}this.textHeight=e,this.textWidth=n},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(a.Shape);e.Text=m,m.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},m.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},m.prototype.className="Text",m.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],c._registerNode(m),s.Factory.overWriteSetter(m,"width",u.getNumberOrAutoValidator()),s.Factory.overWriteSetter(m,"height",u.getNumberOrAutoValidator()),s.Factory.addGetterSetter(m,"fontFamily","Arial"),s.Factory.addGetterSetter(m,"fontSize",12,u.getNumberValidator()),s.Factory.addGetterSetter(m,"fontStyle","normal"),s.Factory.addGetterSetter(m,"fontVariant","normal"),s.Factory.addGetterSetter(m,"padding",0,u.getNumberValidator()),s.Factory.addGetterSetter(m,"align","left"),s.Factory.addGetterSetter(m,"verticalAlign","top"),s.Factory.addGetterSetter(m,"lineHeight",1,u.getNumberValidator()),s.Factory.addGetterSetter(m,"wrap","word"),s.Factory.addGetterSetter(m,"ellipsis",!1,u.getBooleanValidator()),s.Factory.addGetterSetter(m,"letterSpacing",0,u.getNumberValidator()),s.Factory.addGetterSetter(m,"text","",u.getStringValidator()),s.Factory.addGetterSetter(m,"textDecoration",""),o.Collection.mapMethods(m)},1794:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(2747),u=n(6135),c=n(8760),h=n(2458);function d(t){t.fillText(this.partialText,0,0)}function p(t){t.strokeText(this.partialText,0,0)}var f=function(t){function e(e){var n=t.call(this,e)||this;return n.dummyCanvas=o.Util.createCanvasElement(),n.dataArray=[],n.dataArray=l.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",function(){this.dataArray=l.Path.parsePathData(this.attrs.data),this._setTextData()}),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),e&&e.getKerning&&(o.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(e.getKerning)),n._setTextData(),n}return i(e,t),e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<i.length;o++){t.save();var s=i[o].p0;t.translate(s.x,s.y),t.rotate(i[o].rotation),this.partialText=i[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=r/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var r=0;r<e.length;r++){var i=e[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return u.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return u.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),r=this.align(),i=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var s=0,a=0;a<t.dataArray.length;a++)t.dataArray[a].pathLength>0&&(s+=t.dataArray[a].pathLength);var c=0;"center"===r&&(c=Math.max(0,s/2-o/2)),"right"===r&&(c=Math.max(0,s-o));for(var h,d,p,f=u.stringToArray(this.text()),g=this.text().split(" ").length-1,m=-1,v=0,y=function(){v=0;for(var e=t.dataArray,n=m+1;n<e.length;n++){if(e[n].pathLength>0)return m=n,e[n];"M"===e[n].command&&(h={x:e[n].points[0],y:e[n].points[1]})}return{}},b=function(e){var i=t._getTextSize(e).width+n;" "===e&&"justify"===r&&(i+=(s-o)/g);var a=0,u=0;for(d=void 0;Math.abs(i-a)/i>.01&&u<20;){u++;for(var c=a;void 0===p;)(p=y())&&c+p.pathLength<i&&(c+=p.pathLength,p=void 0);if(p==={}||void 0===h)return;var f=!1;switch(p.command){case"L":l.Path.getLineLength(h.x,h.y,p.points[0],p.points[1])>i?d=l.Path.getPointOnLine(i,h.x,h.y,p.points[0],p.points[1],h.x,h.y):p=void 0;break;case"A":var m=p.points[5],b=p.points[4]+m;0===v?v=p.points[4]+1e-8:i>a?v+=Math.PI/180*m/Math.abs(m):v-=Math.PI/360*m/Math.abs(m),(m<0&&v<b||m>=0&&v>b)&&(v=b,f=!0),d=l.Path.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],v,p.points[6]);break;case"C":0===v?v=i>p.pathLength?1e-8:i/p.pathLength:i>a?v+=(i-a)/p.pathLength/2:v=Math.max(v-(a-i)/p.pathLength/2,0),v>1&&(v=1,f=!0),d=l.Path.getPointOnCubicBezier(v,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case"Q":0===v?v=i/p.pathLength:i>a?v+=(i-a)/p.pathLength:v-=(a-i)/p.pathLength,v>1&&(v=1,f=!0),d=l.Path.getPointOnQuadraticBezier(v,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3])}void 0!==d&&(a=l.Path.getLineLength(h.x,h.y,d.x,d.y)),f&&(f=!1,p=void 0)}},_=c/(t._getTextSize("C").width+n)-1,x=0;x<_&&(b("C"),void 0!==h&&void 0!==d);x++)h=d;for(var w=0;w<f.length&&(b(f[w]),void 0!==h&&void 0!==d);w++){var S=l.Path.getLineLength(h.x,h.y,d.x,d.y),E=0;if(i)try{E=i(f[w-1],f[w])*this.fontSize()}catch(T){E=0}h.x+=E,d.x+=E,this.textWidth+=E;var C=l.Path.getPointOnLine(E+S/2,h.x,h.y,d.x,d.y),k=Math.atan2(d.y-h.y,d.x-h.x);this.glyphInfo.push({transposeX:C.x,transposeY:C.y,text:f[w],rotation:k,p0:h,p1:d}),h=d}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)});for(var e,n,r=t[0]||0,i=t[0]||0,o=t[1]||0,s=t[1]||0,a=0;a<t.length/2;a++)e=t[2*a],n=t[2*a+1],r=Math.min(r,e),i=Math.max(i,e),o=Math.min(o,n),s=Math.max(s,n);var l=this.fontSize();return{x:r-l/2,y:o-l/2,width:i-r+l,height:s-o+l}},e}(a.Shape);e.TextPath=f,f.prototype._fillFunc=d,f.prototype._strokeFunc=p,f.prototype._fillFuncHit=d,f.prototype._strokeFuncHit=p,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],h._registerNode(f),s.Factory.addGetterSetter(f,"data"),s.Factory.addGetterSetter(f,"fontFamily","Arial"),s.Factory.addGetterSetter(f,"fontSize",12,c.getNumberValidator()),s.Factory.addGetterSetter(f,"fontStyle","normal"),s.Factory.addGetterSetter(f,"align","left"),s.Factory.addGetterSetter(f,"letterSpacing",0,c.getNumberValidator()),s.Factory.addGetterSetter(f,"textBaseline","middle"),s.Factory.addGetterSetter(f,"fontVariant","normal"),s.Factory.addGetterSetter(f,"text",""),s.Factory.addGetterSetter(f,"textDecoration",null),s.Factory.addGetterSetter(f,"kerningFunc",null),o.Collection.mapMethods(f)},1161:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;var s=n(9923),a=n(6207),l=n(6191),u=n(535),c=n(576),h=n(829),d=n(2458),p=n(8760),f=n(2458),g=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(t){return t+".tr-konva"}).join(" "),m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(t){return t+".tr-konva"}).join(" "),v={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},y="ontouchstart"in d.Konva._global,b=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function _(t,e,n){var r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return o(o({},t),{rotation:t.rotation+e,x:r,y:i})}var x=function(t){function e(e){var n=t.call(this,e)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(g,n.update),n.getNode()&&n.update(),n}return i(e,t),e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){return s.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},e.prototype.getNode=function(){return this._nodes&&this._nodes[0]},e.prototype.setNodes=function(t){var e=this;return void 0===t&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,this.rotation(1===t.length?t[0].getAbsoluteRotation():0),this._nodes.forEach(function(t){var n=t._attrsAffectingSize.map(function(t){return t+"Change.tr-konva"}).join(" "),r=function(){1===e.nodes().length&&e.rotation(e.nodes()[0].getAbsoluteRotation()),e._resetTransformCache(),e._transforming||e.isDragging()||e.update()};t.on(n,r),t.on(m,r),t.on("_clearTransformCache.tr-konva",r),t.on("xChange.tr-konva yChange.tr-konva",r),e._proxyDrag(t)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this},e.prototype._proxyDrag=function(t){var e,n=this;t.on("dragstart.tr-konva",function(r){e=t.getAbsolutePosition(),n.isDragging()||t===n.findOne(".back")||n.startDrag(r,!1)}),t.on("dragmove.tr-konva",function(r){if(e){var i=t.getAbsolutePosition(),o=i.x-e.x,s=i.y-e.y;n.nodes().forEach(function(e){if(e!==t&&!e.isDragging()){var n=e.getAbsolutePosition();e.setAbsolutePosition({x:n.x+o,y:n.y+s}),e.startDrag(r)}}),e=null}})},e.prototype.getNodes=function(){return this._nodes||[]},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this._nodes&&this._nodes.forEach(function(t){t.off(".tr-konva")}),this._nodes=[],this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache("nodesRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache("nodesRect",this.__getNodeRect)},e.prototype.__getNodeShape=function(t,e,n){void 0===e&&(e=this.rotation());var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),s=r.x*i.x-t.offsetX()*i.x,a=r.y*i.y-t.offsetY()*i.y,l=(d.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return _({x:o.x+s*Math.cos(l)+a*Math.sin(-l),y:o.y+a*Math.cos(l)+s*Math.sin(l),width:r.width*i.x,height:r.height*i.y,rotation:l},-d.Konva.getAngle(e),{x:0,y:0})},e.prototype.__getNodeRect=function(){var t=this;if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var e=[];this.nodes().map(function(n){var r=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),i=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],o=n.getAbsoluteTransform();i.forEach(function(t){var n=o.point(t);e.push(n)})});var n,r,i,o,a=new s.Transform;a.rotate(-d.Konva.getAngle(this.rotation())),e.forEach(function(t){var e=a.point(t);void 0===n&&(n=i=e.x,r=o=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y)}),a.invert();var l=a.point({x:n,y:r});return{x:l.x,y:l.y,width:i-n,height:o-r,rotation:d.Konva.getAngle(this.rotation())}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),b.forEach((function(t){this._createAnchor(t)}).bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var e=this,n=new c.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:y?10:"auto"}),r=this;n.on("mousedown touchstart",function(t){r._handleMouseDown(t)}),n.on("dragstart",function(t){n.stopDrag(),t.cancelBubble=!0}),n.on("dragend",function(t){t.cancelBubble=!0}),n.on("mouseenter",function(){var r=d.Konva.getAngle(e.rotation()),i=function(t,e){if("rotater"===t)return"crosshair";e+=s.Util._degToRad(v[t]||0);var n=(s.Util._radToDeg(e)%360+360)%360;return s.Util._inRange(n,337.5,360)||s.Util._inRange(n,0,22.5)?"ns-resize":s.Util._inRange(n,22.5,67.5)?"nesw-resize":s.Util._inRange(n,67.5,112.5)?"ew-resize":s.Util._inRange(n,112.5,157.5)?"nwse-resize":s.Util._inRange(n,157.5,202.5)?"ns-resize":s.Util._inRange(n,202.5,247.5)?"nesw-resize":s.Util._inRange(n,247.5,292.5)?"ew-resize":s.Util._inRange(n,292.5,337.5)?"nwse-resize":(s.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,r);n.getStage().content.style.cursor=i,e._cursorChange=!0}),n.on("mouseout",function(){n.getStage().content.style.cursor="",e._cursorChange=!1}),this.add(n)},e.prototype._createBack=function(){var t=this,e=new u.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*s.Util._sign(this.height())-n),t.fillStrokeShape(this)},hitFunc:function(e,n){if(t.shouldOverdrawWholeArea()){var r=t.padding();e.beginPath(),e.rect(-r,-r,n.width()+2*r,n.height()+2*r),e.fillStrokeShape(n)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",function(t){t.cancelBubble=!0}),e.on("dragmove",function(t){t.cancelBubble=!0}),e.on("dragend",function(t){t.cancelBubble=!0})},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/i),this.cos=Math.abs(n/i),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;var o=t.target.getAbsolutePosition(),s=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-o.x,y:s.y-o.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(function(e){e._fire("transformstart",{evt:t,target:e})})},e.prototype._handleMouseMove=function(t){var e,n,r,i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(t);var s=o.getPointerPosition(),a={x:s.x-this._anchorDragOffset.x,y:s.y-this._anchorDragOffset.y},l=i.getAbsolutePosition();i.setAbsolutePosition(a);var u=i.getAbsolutePosition();if(l.x!==u.x||l.y!==u.y)if("rotater"!==this._movingAnchorName){var c=this.keepRatio()||t.shiftKey,h=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(c){var p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(p.x-i.x(),2)+Math.pow(p.y-i.y(),2));var f=this.findOne(".top-left").x()>p.x?-1:1,g=this.findOne(".top-left").y()>p.y?-1:1;e=r*this.cos*f,n=r*this.sin*g,this.findOne(".top-left").x(p.x-e),this.findOne(".top-left").y(p.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){c&&(p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},r=Math.sqrt(Math.pow(i.x()-p.x,2)+Math.pow(p.y-i.y(),2)),f=this.findOne(".top-right").x()<p.x?-1:1,g=this.findOne(".top-right").y()>p.y?-1:1,e=r*this.cos*f,n=r*this.sin*g,this.findOne(".top-right").x(p.x+e),this.findOne(".top-right").y(p.y-n));var m=i.position();this.findOne(".top-left").y(m.y),this.findOne(".bottom-right").x(m.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(i.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(i.x()):"bottom-left"===this._movingAnchorName?(c&&(p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},r=Math.sqrt(Math.pow(p.x-i.x(),2)+Math.pow(i.y()-p.y,2)),f=p.x<i.x()?-1:1,g=i.y()<p.y?-1:1,n=r*this.sin*g,i.x(p.x-(e=r*this.cos*f)),i.y(p.y+n)),m=i.position(),this.findOne(".top-left").x(m.x),this.findOne(".bottom-right").y(m.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(i.y()):"bottom-right"===this._movingAnchorName?c&&(p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},r=Math.sqrt(Math.pow(i.x()-p.x,2)+Math.pow(i.y()-p.y,2)),f=this.findOne(".bottom-right").x()<p.x?-1:1,g=this.findOne(".bottom-right").y()<p.y?-1:1,e=r*this.cos*f,n=r*this.sin*g,this.findOne(".bottom-right").x(p.x+e),this.findOne(".bottom-right").y(p.y+n)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(h=this.centeredScaling()||t.altKey){var v=this.findOne(".top-left"),y=this.findOne(".bottom-right"),b=v.x(),x=v.y(),w=this.getWidth()-y.x(),S=this.getHeight()-y.y();y.move({x:-b,y:-x}),v.move({x:w,y:S})}var E=this.findOne(".top-left").getAbsolutePosition();e=E.x,n=E.y;var C=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),k=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:C,height:k,rotation:d.Konva.getAngle(this.rotation())},t)}else{var T=this._getNodeRect();e=i.x()-T.width/2,n=-i.y()+T.height/2;var P=Math.atan2(-n,e)+Math.PI/2;T.height<0&&(P-=Math.PI);var A=d.Konva.getAngle(this.rotation())+P,D=d.Konva.getAngle(this.rotationSnapTolerance()),O=function(t,e){return _(t,e,function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t))}(T,function(t,e,n){for(var r=e,i=0;i<t.length;i++){var o=d.Konva.getAngle(t[i]),s=Math.abs(o-e)%(2*Math.PI);Math.min(s,2*Math.PI-s)<n&&(r=o)}return r}(this.rotationSnaps(),A,D)-T.rotation);this._fitNodesInto(O,t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype.getAbsoluteTransform=function(){return this.getTransform()},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(function(e){e._fire("transformend",{evt:t,target:e})}),this._movingAnchorName=null}},e.prototype._fitNodesInto=function(t,e){var n=this,r=this._getNodeRect();if(s.Util._inRange(t.width,2*-this.padding()-1,1))this.update();else if(s.Util._inRange(t.height,2*-this.padding()-1,1))this.update();else{var i=new s.Transform;if(i.rotate(d.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var o=i.point({x:2*-this.padding(),y:0});t.x+=o.x,t.y+=o.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y}else this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0&&(o=i.point({x:2*this.padding(),y:0}),this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y,t.width+=2*this.padding());if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0?(o=i.point({x:0,y:2*-this.padding()}),t.x+=o.x,t.y+=o.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y,t.height+=2*this.padding()):this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0&&(o=i.point({x:0,y:2*this.padding()}),this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y,t.height+=2*this.padding()),this.boundBoxFunc()){var a=this.boundBoxFunc()(r,t);a?t=a:s.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var l=new s.Transform;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/1e7,r.height/1e7);var u=new s.Transform;u.translate(t.x,t.y),u.rotate(t.rotation),u.scale(t.width/1e7,t.height/1e7);var c=u.multiply(l.invert());this._nodes.forEach(function(t){var r,i=t.getParent().getAbsoluteTransform(),o=t.getTransform().copy();o.translate(t.offsetX(),t.offsetY());var a=new s.Transform;a.multiply(i.copy().invert()).multiply(c).multiply(i).multiply(o);var l=a.decompose();t.setAttrs(l),n._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(r=t.getLayer())||void 0===r||r.batchDraw()}),this.rotation(s.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype._batchChangeChild=function(t,e){this.findOne(t).setAttrs(e)},e.prototype.update=function(){var t,e=this,n=this._getNodeRect();this.rotation(s.Util._getRotation(n.rotation));var r=n.width,i=n.height,o=this.enabledAnchors(),a=this.resizeEnabled(),l=this.padding(),u=this.anchorSize();this.find("._anchor").each(function(t){t.setAttrs({width:u,height:u,offsetX:u/2,offsetY:u/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:u/2+l,offsetY:u/2+l,visible:a&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:u/2+l,visible:a&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:u/2-l,offsetY:u/2+l,visible:a&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:u/2+l,visible:a&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:u/2-l,visible:a&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:u/2+l,offsetY:u/2-l,visible:a&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:u/2-l,visible:a&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:u/2-l,offsetY:u/2-l,visible:a&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*s.Util._sign(i)-l,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),h.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return l.Node.prototype.toObject.call(this)},e}(h.Group);e.Transformer=x,x.prototype.className="Transformer",f._registerNode(x),a.Factory.addGetterSetter(x,"enabledAnchors",b,function(t){return t instanceof Array||s.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===b.indexOf(t)&&s.Util.warn("Unknown anchor name: "+t+". Available names are: "+b.join(", "))}),t||[]}),a.Factory.addGetterSetter(x,"resizeEnabled",!0),a.Factory.addGetterSetter(x,"anchorSize",10,p.getNumberValidator()),a.Factory.addGetterSetter(x,"rotateEnabled",!0),a.Factory.addGetterSetter(x,"rotationSnaps",[]),a.Factory.addGetterSetter(x,"rotateAnchorOffset",50,p.getNumberValidator()),a.Factory.addGetterSetter(x,"rotationSnapTolerance",5,p.getNumberValidator()),a.Factory.addGetterSetter(x,"borderEnabled",!0),a.Factory.addGetterSetter(x,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(x,"anchorStrokeWidth",1,p.getNumberValidator()),a.Factory.addGetterSetter(x,"anchorFill","white"),a.Factory.addGetterSetter(x,"anchorCornerRadius",0,p.getNumberValidator()),a.Factory.addGetterSetter(x,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(x,"borderStrokeWidth",1,p.getNumberValidator()),a.Factory.addGetterSetter(x,"borderDash"),a.Factory.addGetterSetter(x,"keepRatio",!0),a.Factory.addGetterSetter(x,"centeredScaling",!1),a.Factory.addGetterSetter(x,"ignoreStroke",!1),a.Factory.addGetterSetter(x,"padding",0,p.getNumberValidator()),a.Factory.addGetterSetter(x,"node"),a.Factory.addGetterSetter(x,"nodes"),a.Factory.addGetterSetter(x,"boundBoxFunc"),a.Factory.addGetterSetter(x,"shouldOverdrawWholeArea",!1),a.Factory.backCompat(x,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),s.Collection.mapMethods(x)},1353:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;var o=n(9923),s=n(6207),a=n(535),l=n(2458),u=n(8760),c=n(2458),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,l.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(a.Shape);e.Wedge=h,h.prototype.className="Wedge",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["radius"],c._registerNode(h),s.Factory.addGetterSetter(h,"radius",0,u.getNumberValidator()),s.Factory.addGetterSetter(h,"angle",0,u.getNumberValidator()),s.Factory.addGetterSetter(h,"clockwise",!1),s.Factory.backCompat(h,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),o.Collection.mapMethods(h)},6188:function(t){var e=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")(),u=Object.prototype.toString,c=Math.max,h=Math.min,d=function(){return l.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function f(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(p(t)){var s="function"==typeof t.valueOf?t.valueOf():t;t=p(s)?s+"":s}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(e,"");var a=r.test(t);return a||i.test(t)?o(t.slice(2),a?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,n){var r,i,o,s,a,l,u=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function b(t){return u=t,a=setTimeout(x,e),g?y(t):s}function _(t){var n=t-l;return void 0===l||n>=e||n<0||m&&t-u>=o}function x(){var t=d();if(_(t))return w(t);a=setTimeout(x,function(t){var n=e-(t-l);return m?h(n,o-(t-u)):n}(t))}function w(t){return a=void 0,v&&r?y(t):(r=i=void 0,s)}function S(){var t=d(),n=_(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return b(l);if(m)return a=setTimeout(x,e),y(l)}return void 0===a&&(a=setTimeout(x,e)),s}return e=f(e)||0,p(n)&&(g=!!n.leading,o=(m="maxWait"in n)?c(f(n.maxWait)||0,e):o,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=i=a=void 0},S.flush=function(){return void 0===a?s:w(d())},S}},6301:function(t){var e,n=/^\[object .+?Constructor\]$/,r="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")(),s=Array.prototype,a=Function.prototype,l=Object.prototype,u=o["__core-js_shared__"],c=(e=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",h=a.toString,d=l.hasOwnProperty,p=l.toString,f=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=s.splice,m=S(o,"Map"),v=S(Object,"create");function y(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function b(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function x(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function w(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function S(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!C(t)||(e=t,c&&c in e))&&(function(t){var e=C(t)?p.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}(t)?f:n).test(function(t){if(null!=t){try{return h.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t));var e}(r)?r:void 0}function E(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(E.Cache||_),n}function C(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}y.prototype.clear=function(){this.__data__=v?v(null):{}},y.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},y.prototype.get=function(t){var e=this.__data__;if(v){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return d.call(e,t)?e[t]:void 0},y.prototype.has=function(t){var e=this.__data__;return v?void 0!==e[t]:d.call(e,t)},y.prototype.set=function(t,e){return this.__data__[t]=v&&void 0===e?"__lodash_hash_undefined__":e,this},b.prototype.clear=function(){this.__data__=[]},b.prototype.delete=function(t){var e=this.__data__,n=x(e,t);return!(n<0||(n==e.length-1?e.pop():g.call(e,n,1),0))},b.prototype.get=function(t){var e=this.__data__,n=x(e,t);return n<0?void 0:e[n][1]},b.prototype.has=function(t){return x(this.__data__,t)>-1},b.prototype.set=function(t,e){var n=this.__data__,r=x(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},_.prototype.clear=function(){this.__data__={hash:new y,map:new(m||b),string:new y}},_.prototype.delete=function(t){return w(this,t).delete(t)},_.prototype.get=function(t){return w(this,t).get(t)},_.prototype.has=function(t){return w(this,t).has(t)},_.prototype.set=function(t,e){return w(this,t).set(t,e),this},E.Cache=_,t.exports=E},2548:function(t){var e=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")(),u=Object.prototype.toString,c=Math.max,h=Math.min,d=function(){return l.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function f(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(p(t)){var s="function"==typeof t.valueOf?t.valueOf():t;t=p(s)?s+"":s}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(e,"");var a=r.test(t);return a||i.test(t)?o(t.slice(2),a?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return p(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(t,e,n){var r,i,o,s,a,l,u=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function b(t){return u=t,a=setTimeout(x,e),g?y(t):s}function _(t){var n=t-l;return void 0===l||n>=e||n<0||m&&t-u>=o}function x(){var t=d();if(_(t))return w(t);a=setTimeout(x,function(t){var n=e-(t-l);return m?h(n,o-(t-u)):n}(t))}function w(t){return a=void 0,v&&r?y(t):(r=i=void 0,s)}function S(){var t=d(),n=_(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return b(l);if(m)return a=setTimeout(x,e),y(l)}return void 0===a&&(a=setTimeout(x,e)),s}return e=f(e)||0,p(n)&&(g=!!n.leading,o=(m="maxWait"in n)?c(f(n.maxWait)||0,e):o,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=i=a=void 0},S.flush=function(){return void 0===a?s:w(d())},S}(t,e,{leading:r,maxWait:e,trailing:i})}},1282:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(9812)),r(n(5098)),r(n(9895)),r(n(3408)),r(n(6082)),r(n(3839)),r(n(1390)),r(n(3807)),r(n(4232)),r(n(2267)),r(n(741)),r(n(1539)),r(n(7002)),r(n(9147)),r(n(980)),r(n(6684))},9812:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1390),s=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=o.Layout.dragStart,n.dragend=n.dragEnd=o.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(o.Layout);e.LayoutAdaptor=s,e.adaptor=function(t){return new s(t)}},6684:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1390),i=n(6082);e.gridify=function(t,e,n,r){return t.cola.start(0,0,0,10,!1),function(t,e,n,r){t.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}}),e.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat(void 0!==e.leaves?e.leaves.map(function(t){return t.index}):[])}});var o=t.concat(e).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new i.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})},e.powerGraphGridLayout=function(t,e,n){var i;t.nodes.forEach(function(t,e){return t.index=e}),(new r.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){return t.padding=n})});var o=t.nodes.length,s=[],a=t.nodes.slice(0);return a.forEach(function(t,e){return t.index=e}),i.groups.forEach(function(t){var e=t.index=t.id+o;a.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return s.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return s.push({source:e,target:t.id+o})})}),i.powerEdges.forEach(function(t){s.push({source:t.source.index,target:t.target.index})}),(new r.Layout).size(e).nodes(a).links(s).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new r.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){t.padding=n})}).start(50,0,100,0,!1),powerGraph:i}}},5098:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9738),i=n(2834);e.d3adaptor=function(t){return!t||function(t){return t.version&&null!==t.version.match(/^3\./)}(t)?new r.D3StyleLayoutAdaptor:new i.D3StyleLayoutAdaptor(t)}},9738:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1390),s=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(t){o.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},e.prototype.on=function(t,e){return this.event.on("string"==typeof t?t:o.EventType[t],e),this},e}(o.Layout);e.D3StyleLayoutAdaptor=s,e.d3adaptor=function(){return new s}},2834:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1390);e.D3StyleLayoutAdaptor=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(o.Layout.dragOrigin).on("start.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(t){o.Layout.drag(t,e.event),r.resume()}).on("end.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer(function(){return t.prototype.tick.call(e)&&n.stop()})},e.prototype.on=function(t,e){return this.event.on("string"==typeof t?t:o.EventType[t],e),this},e}(o.Layout)},9895:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=n,e.Descent=function(){function t(t,e,i){void 0===i&&(i=null),this.D=e,this.G=i,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new r,this.project=null,this.x=t,this.k=t.length;var o=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new n,this.minD=Number.MAX_VALUE;for(var s,a=o;a--;)for(s=o;--s>a;){var l=e[a][s];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(o),this.H[a]=new Array(o),s=o;s--;)this.H[a][s]=new Array(o);this.Hd[a]=new Array(o),this.a[a]=new Array(o),this.b[a]=new Array(o),this.c[a]=new Array(o),this.d[a]=new Array(o),this.e[a]=new Array(o),this.ia[a]=new Array(o),this.ib[a]=new Array(o),this.xtmp[a]=new Array(o)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*(t.minD/n)})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),s=new Array(this.k),a=0,l=0;l<n;++l){for(r=0;r<this.k;++r)s[r]=this.g[r][l]=0;for(var u=0;u<n;++u)if(l!==u){for(var c=n;c--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=t[r][l]-t[r][u];h+=o[r]=d*d}if(h>1e-9)break;var p=this.offsetDir();for(r=0;r<this.k;++r)t[r][u]+=p[r]}var f=Math.sqrt(h),g=this.D[l][u],m=null!=this.G?this.G[l][u]:1;if(m>1&&f>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][l][u]=0;else{m>1&&(m=1);var v=g*g,y=2*m*(f-g)/(v*f),b=f*f*f,_=2*-m/(v*b);for(isFinite(y)||console.log(y),r=0;r<this.k;++r)this.g[r][l]+=i[r]*y,s[r]-=this.H[r][l][u]=_*(b+g*(o[r]-h)+f*h)}}for(r=0;r<this.k;++r)a=Math.max(a,this.H[r][l][l]=s[r])}var x=this.snapGridSize/2,w=this.snapGridSize,S=this.snapStrength/(x*x),E=this.numGridSnapNodes;for(l=0;l<E;++l)for(r=0;r<this.k;++r){var C=this.x[r][l],k=C/w,T=k%1,P=k-T;-x<(d=Math.abs(T)<=.5?C-P*w:C>0?C-(P+1)*w:C-(P-1)*w)&&d<=x&&(this.scaleSnapByMaxH?(this.g[r][l]+=a*S*d,this.H[r][l][l]+=a*S):(this.g[r][l]+=S*d,this.H[r][l][l]+=S))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=a,e.g[r][n]-=a*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,s=0;s<this.k;++s){var a=this.x[s][e]-this.x[s][r];o+=a*a}o=Math.sqrt(o);var l=this.D[e][r];if(isFinite(l)){var u=l-o;t+=u*u/(l*l)}}return t},t.zeroDistance=1e-10,t}();var r=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=r},3408:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(7002),s=function(){return function(){}}();e.Point=s;var a=function(){return function(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}}();function l(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function u(t,e,n){return l(t,e,n)>0}function c(t,e,n){return l(t,e,n)<0}function h(t,e){var n,r,i,o,s=e.length-1;if(c(t,e[1],e[0])&&!u(t,e[s-1],e[0]))return 0;for(n=0,r=s;;){if(r-n==1)return u(t,e[n],e[r])?n:r;if((o=c(t,e[(i=Math.floor((n+r)/2))+1],e[i]))&&!u(t,e[i-1],e[i]))return i;u(t,e[n+1],e[n])?o||u(t,e[n],e[i])?r=i:n=i:o&&c(t,e[n],e[i])?r=i:n=i}}function d(t,e){var n,r,i,o,s=e.length-1;if(u(t,e[s-1],e[0])&&!c(t,e[1],e[0]))return 0;for(n=0,r=s;;){if(r-n==1)return c(t,e[n],e[r])?n:r;if(o=c(t,e[(i=Math.floor((n+r)/2))+1],e[i]),u(t,e[i-1],e[i])&&!o)return i;c(t,e[n+1],e[n])?o?c(t,e[n],e[i])?r=i:n=i:r=i:o?n=i:u(t,e[n],e[i])?r=i:n=i}}function p(t,e,n,r,i,o){var s,a;a=r(t[s=n(e[0],t)],e);for(var l=!1;!l;){for(l=!0;s===t.length-1&&(s=0),!i(e[a],t[s],t[s+1]);)++s;for(;0===a&&(a=e.length-1),!o(t[s],e[a],e[a-1]);)--a,l=!1}return{t1:s,t2:a}}function f(t,e){return p(t,e,h,d,u,c)}e.LineSegment=a,e.PolyPoint=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s),e.isLeft=l,e.ConvexHull=function(t){var e,n=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),r=t.length,i=n[0].x;for(e=1;e<r&&n[e].x===i;++e);var o=e-1,s=[];if(s.push(n[0]),o===r-1)n[o].y!==n[0].y&&s.push(n[o]);else{var a,u=r-1,c=n[r-1].x;for(e=r-2;e>=0&&n[e].x===c;e--);for(a=e+1,e=o;++e<=a;)if(!(l(n[0],n[a],n[e])>=0&&e<a)){for(;s.length>1&&!(l(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}u!=a&&s.push(n[u]);var h=s.length;for(e=a;--e>=o;)if(!(l(n[u],n[o],n[e])>=0&&e>o)){for(;s.length>h&&!(l(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}}return s},e.clockwiseRadialSweep=function(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)},e.tangent_PolyPolyC=p,e.LRtangent_PolyPolyC=function(t,e){var n=f(e,t);return{t1:n.t2,t2:n.t1}},e.RLtangent_PolyPolyC=f,e.LLtangent_PolyPolyC=function(t,e){return p(t,e,d,d,c,c)},e.RRtangent_PolyPolyC=function(t,e){return p(t,e,h,h,u,u)};var g=function(){return function(t,e){this.t1=t,this.t2=e}}();e.BiTangent=g;var m=function(){return function(){}}();e.BiTangents=m,e.TVGPoint=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s);var v=function(){return function(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this}}();e.VisibilityVertex=v;var y=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();function b(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var s=o.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);s&&n.push(s)}return n}function _(t,e){for(var n=t.length-1,r=e.length-1,i=new m,o=0;o<n;++o)for(var s=0;s<r;++s){var a=t[0==o?n-1:o-1],u=t[o],c=t[o+1],h=e[0==s?r-1:s-1],d=e[s],p=e[s+1],f=l(a,u,d),v=l(u,h,d),y=l(u,d,p),b=l(h,d,u),_=l(d,a,u),x=l(d,u,c);f>=0&&v>=0&&y<0&&b>=0&&_>=0&&x<0?i.ll=new g(o,s):f<=0&&v<=0&&y>0&&b<=0&&_<=0&&x>0?i.rr=new g(o,s):f<=0&&v>0&&y<=0&&b>=0&&_<0&&x>=0?i.rl=new g(o,s):f>=0&&v<0&&y>=0&&b<=0&&_>0&&x<=0&&(i.lr=new g(o,s))}return i}function x(t,e){return!t.every(function(t){return!function(t,e){for(var n=1,r=e.length;n<r;++n)if(c(e[n-1],e[n],t))return!1;return!0}(t,e)})}e.VisibilityEdge=y,e.TangentVisibilityGraph=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],o=0;o<i.length;++o){var s=new v(this.V.length,r,o,i[o]);this.V.push(s),o>0&&this.E.push(new y(i[o-1].vv,s))}i.length>1&&this.E.push(new y(i[0].vv,i[i.length-1].vv))}for(r=0;r<n-1;r++){var a=t[r];for(o=r+1;o<n;o++){var l=t[o],u=_(a,l);for(var c in u){var h=u[c];this.addEdgeIfVisible(a[h.t1],l[h.t2],r,o)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new a(t.x,t.y,e.x,e.y),n,r)||this.E.push(new y(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n,r,i,o=this.P.length;this.V.push(new v(this.V.length,o,0,t));for(var s=0;s<o;++s)if(s!==e){var a=this.P[s],l=(n=t,i=void 0,(i=(r=a).slice(0)).push(r[0]),{rtan:h(n,i),ltan:d(n,i)});this.addEdgeIfVisible(t,a[l.ltan],e,s),this.addEdgeIfVisible(t,a[l.rtan],e,s)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&b(t,this.P[r]).length>0)return!0;return!1},t}(),e.tangents=_,e.polysOverlap=function(t,e){if(x(t,e))return!0;if(x(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(b(new a(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}},6082:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7002),i=n(980),o=n(9147),s=function(){return function(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length}}();e.NodeWrapper=s;var a=function(){return function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i}}();e.Vert=a;var l=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),s=0;s<n;s++){o[s]=new Array(r);for(var a=0;a<r;a++)if(t[s]===e[a]){var l=o[s][a]=0===s||0===a?1:o[s-1][a-1]+1;l>i.length&&(i.length=l,i.si=s-l+1,i.ti=a-l+1)}else o[s][a]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=l,e.GridRouter=function(){function t(t,e,n){var i=this;void 0===n&&(n=12),this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map(function(t,n){return new s(n,e.getBounds(t),e.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return i.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return i.getDepth(t)-i.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(t){var e=r.Rectangle.empty();t.children.forEach(function(t){return e=e.union(i.nodes[t].rect)}),t.rect=e.inflate(i.groupPadding)});var o=this.midPoints(this.cols.map(function(t){return t.pos})),l=this.midPoints(this.rows.map(function(t){return t.pos})),u=o[0],c=o[o.length-1],h=l[0],d=l[l.length-1],p=this.rows.map(function(t){return{x1:u,x2:c,y1:t.pos,y2:t.pos}}).concat(l.map(function(t){return{x1:u,x2:c,y1:t,y2:t}})),f=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:h,y2:d}}).concat(o.map(function(t){return{x1:t,x2:t,y1:h,y2:d}})),g=p.concat(f);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(t){return f.forEach(function(e){var n=new a(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],s=o.rect,l=Math.abs(n.x-s.cx()),u=Math.abs(n.y-s.cy());if(l<s.width()/2&&u<s.height()/2){n.node=o;break}}})}),g.forEach(function(t,e){i.nodes.forEach(function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(n,r){var o=new a(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)})});var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var s=t.verts[o-1],l=t.verts[o];s.node&&s.node===l.node&&s.node.leaf||i.edges.push({source:s.id,target:l.id,length:Math.abs(r(s,l))})}})}return t.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{e.push(t=t.parent)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],s=0;s<o.length;s++)(c=o[s]).edgeid=i,c.i=s,Math.abs(c[1][e]-c[0][e])<.1&&r.push(c);r.sort(function(t,n){return t[0][e]-n[0][e]});for(var a=[],l=null,u=0;u<r.length;u++){var c=r[u];(!l||Math.abs(c[0][e]-l.pos)>.1)&&a.push(l={pos:c[0][e],segments:[]}),l.segments.push(c)}return a},t.nudgeSegs=function(t,e,n,r,o,s){var a=r.length;if(!(a<=1)){for(var l=r.map(function(e){return new i.Variable(e[0][t])}),u=[],c=0;c<a;c++)for(var h=0;h<a;h++)if(c!==h){var d=r[c],p=d.edgeid,f=r[h].edgeid,g=-1,m=-1;"x"==t?o(p,f)&&(d[0][e]<d[1][e]?(g=h,m=c):(g=c,m=h)):o(p,f)&&(d[0][e]<d[1][e]?(g=c,m=h):(g=h,m=c)),g>=0&&u.push(new i.Constraint(l[g],l[m],s))}new i.Solver(l,u).solve(),l.forEach(function(e,i){var o=r[i],s=e.position();o[0][t]=o[1][t]=s;var a=n[o.edgeid];o.i>0&&(a[o.i-1][1][t]=s),o.i<a.length-1&&(a[o.i+1][0][t]=s)})}},t.nudgeSegments=function(e,n,r,i,o){for(var s=t.getSegmentSets(e,n,r),a=0;a<s.length;a++){for(var l=s[a],u=[],c=0;c<l.segments.length;c++){var h=l.segments[c];u.push({type:0,s:h,pos:Math.min(h[0][r],h[1][r])}),u.push({type:1,s:h,pos:Math.max(h[0][r],h[1][r])})}u.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var d=[],p=0;u.forEach(function(s){0===s.type?(d.push(s.s),p++):p--,0==p&&(t.nudgeSegs(n,r,e,d,i,o),d=[])})}},t.prototype.routeEdges=function(e,n,r,i){var o=this,s=e.map(function(t){return o.route(r(t),i(t))}),a=t.orderEdges(s),l=s.map(function(e){return t.makeSegments(e)});return t.nudgeSegments(l,"x","y",a,n),t.nudgeSegments(l,"y","x",a,n),t.unreverseEdges(l,s),l},t.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,s,a,u=e[r],c=e[i],h=new l(u,c);0!==h.length&&(h.reversed&&(c.reverse(),c.reversed=!0,h=new l(u,c)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=u.length||h.ti+h.length>=c.length)?n.push({l:r,r:i}):(h.si+h.length>=u.length||h.ti+h.length>=c.length?(o=u[h.si+1],a=u[h.si-1],s=c[h.ti-1]):(o=u[h.si+h.length-2],s=u[h.si+h.length],a=c[h.ti+h.length]),t.isLeft(o,s,a)?n.push({l:i,r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),o=1;o<t.length;o++){var s=e(t[o]),a=o<t.length-1?t[o+1]:null;a&&n(i,s,a)||(r.push([i,s]),i=s)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var s={};this.obstacles.forEach(function(t){return s[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in s||r.node&&r.node.id in s)});for(var a=1;a<r.ports.length;a++)this.passableEdges.push({source:r.ports[0].id,target:r.ports[a].id,length:0});for(a=1;a<i.ports.length;a++)this.passableEdges.push({source:i.ports[0].id,target:i.ports[a].id,length:0});var l=new o.Calculator(this.verts.length,this.passableEdges,function(t){return t.source},function(t){return t.target},function(t){return t.length}).PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,function(t,e,o){var s=n.verts[t],a=n.verts[e],l=n.verts[o],u=Math.abs(l.x-s.x),c=Math.abs(l.y-s.y);return s.node===r&&s.node===a.node||a.node===i&&a.node===l.node?0:u>1&&c>1?1e3:0}).reverse().map(function(t){return n.verts[t]});return l.push(this.nodes[i.id].ports[0]),l.filter(function(t,e){return!(e<l.length-1&&l[e+1].node===r&&t.node===r||e>0&&t.node===i&&l[e-1].node===i)})},t.getRoutePath=function(e,n,r,i){var o,s,a,l,u,c={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var h=0;h<e.length;h++){var d=(s=(o=e[h])[1].x)-o[0].x,p=(a=o[1].y)-o[0].y;if(h<e.length-1){Math.abs(d)>0?s-=d/Math.abs(d)*n:a-=p/Math.abs(p)*n,c.routepath+="L "+s+" "+a+" ";var f=e[h+1],g=f[0].x,m=f[0].y;d=f[1].x-g,p=f[1].y-m;var v,y,b=t.angleBetween2Lines(o,f)<0?1:0;Math.abs(d)>0?(v=g+d/Math.abs(d)*n,y=m):(v=g,y=m+p/Math.abs(p)*n);var _=Math.abs(v-s),x=Math.abs(y-a);c.routepath+="A "+_+" "+x+" 0 0 "+b+" "+v+" "+y+" "}else{var w=[s,a];Math.abs(d)>0?(l=[s-=d/Math.abs(d)*i,a+r],u=[s,a-r]):(l=[s+r,a-=p/Math.abs(p)*i],u=[s-r,a]),c.routepath+="L "+s+" "+a+" ",i>0&&(c.arrowpath="M "+w[0]+" "+w[1]+" L "+l[0]+" "+l[1]+" L "+u[0]+" "+u[1])}}else d=(s=(o=e[0])[1].x)-o[0].x,p=(a=o[1].y)-o[0].y,w=[s,a],Math.abs(d)>0?(l=[s-=d/Math.abs(d)*i,a+r],u=[s,a-r]):(l=[s+r,a-=p/Math.abs(p)*i],u=[s-r,a]),c.routepath+="L "+s+" "+a+" ",i>0&&(c.arrowpath="M "+w[0]+" "+w[1]+" L "+l[0]+" "+l[1]+" L "+u[0]+" "+u[1]);return c},t}()},3839:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(1+Math.sqrt(5))/2;e.applyPacking=function(t,e,r,i,o,s){void 0===o&&(o=1),void 0===s&&(s=!0);var a=e,l=r,u=(o=void 0!==o?o:1,i=void 0!==i?i:0,0),c=0,h=0,d=0,p=[];function f(t,e){p=[],u=0,c=0,d=0;for(var n=0;n<t.length;n++)g(t[n],e);return Math.abs(u/c-o)}function g(t,e){for(var n=void 0,r=0;r<p.length;r++)if(p[r].space_left>=t.height&&p[r].x+p[r].width+t.width+10-e<=1e-4){n=p[r];break}p.push(t),void 0!==n?(t.x=n.x+n.width+10,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+10,n.bottom+=t.height+10):(t.y=d,d+=t.height+10,t.x=0,t.bottom=t.y,t.space_left=t.height),t.y+t.height-c>-1e-4&&(c=t.y+t.height-0),t.x+t.width-u>-1e-4&&(u=t.x+t.width-0)}0!=t.length&&(function(t){t.forEach(function(t){var e,n,r,o,s;e=t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=0,s=0,e.array.forEach(function(t){var e=void 0!==t.width?t.width:i,a=void 0!==t.height?t.height:i;e/=2,a/=2,o=Math.max(t.x+e,o),n=Math.min(t.x-e,n),s=Math.max(t.y+a,s),r=Math.min(t.y-a,r)}),e.width=o-n,e.height=s-r})}(t),function(t,e){var r=Number.POSITIVE_INFINITY,i=0;t.sort(function(t,e){return e.height-t.height});for(var o=g=h=t.reduce(function(t,e){return t.width<e.width?t.width:e.width}),s=m=function(t){var e=0;return t.forEach(function(t){return e+=t.width+10}),e}(t),a=0,l=Number.MAX_VALUE,u=Number.MAX_VALUE,c=-1,d=Number.MAX_VALUE,p=Number.MAX_VALUE;d>h||p>1e-4;){if(1!=c){var g=s-(s-o)/n;l=f(t,g)}if(0!=c){var m=o+(s-o)/n;u=f(t,m)}if(d=Math.abs(g-m),p=Math.abs(l-u),l<r&&(r=l,i=g),u<r&&(r=u,i=m),l>u?(o=g,g=m,l=u,c=1):(s=m,m=g,u=l,c=0),a++>100)break}f(t,i)}(t),s&&function(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n=t.x-(e.x-t.width/2)+a/2-u/2,r=t.y-(e.y-t.height/2)+l/2-c/2;t.array.forEach(function(t){t.x+=n,t.y+=r})})}(t))},e.separateGraphs=function(t,e){for(var n={},r={},i=[],o=0,s=0;s<e.length;s++){var a=e[s],l=a.source,u=a.target;r[l.index]?r[l.index].push(u):r[l.index]=[u],r[u.index]?r[u.index].push(l):r[u.index]=[l]}for(s=0;s<t.length;s++){var c=t[s];n[c.index]||h(c,!0)}function h(t,e){if(void 0===n[t.index]){e&&(o++,i.push({array:[]})),n[t.index]=o,i[o-1].array.push(t);var s=r[t.index];if(s)for(var a=0;a<s.length;a++)h(s[a],!1)}}return i}},1390:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2267),i=n(4232),o=n(9895),s=n(7002),a=n(9147),l=n(3408),u=n(3839),c=e.EventType=function(t){return t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end",t}(e.EventType||{});function h(t){return void 0!==t.leaves||void 0!==t.groups}e.Layout=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[c[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:c.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;for(this._descent.locks.clear(),e=0;e<n;++e)(t=this._nodes[e]).fixed&&(void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y),this._descent.locks.add(e,[t.px,t.py]));var r=this._descent.rungeKutta();return 0===r?this._alpha=0:void 0!==this._lastStress&&(this._alpha=r),this._lastStress=r,this.updateNodePositions(),this.trigger({type:c.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(t=this._nodes[r]).x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=r.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:c.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return i.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return i.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,l,u,c){var h=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===l&&(l=0),void 0===u&&(u=!0),void 0===c&&(c=!0);var d,p=this.nodes().length,f=p+2*this._groups.length,g=this._canvasSize[0],m=this._canvasSize[1],v=new Array(f),y=new Array(f),b=null,_=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=g/2,t.y=m/2),v[e]=t.x,y[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?d=this._distanceMatrix:(d=new a.Calculator(f,this._links,t.getSourceIndex,t.getTargetIndex,function(t){return h.getLinkLength(t)}).DistanceMatrix(),b=o.Descent.createSquareMatrix(f,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=h._nodes[t.source]),"number"==typeof t.target&&(t.target=h._nodes[t.target])}),this._links.forEach(function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);b[n][r]=b[r][n]=e.weight||1}));var x=o.Descent.createSquareMatrix(f,function(t,e){return d[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var w=p;this._groups.forEach(function(t){!function(t,e,n,r){b[t][e]=b[e][t]=n,x[t][e]=x[e][t]=.1}(w,w+1,h._groupCompactness),v[w]=0,y[w++]=0,v[w]=0,y[w++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var S=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,S=S.concat(i.generateDirectedEdgeConstraints(p,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new o.Descent([v,y],x),this._descent.locks.clear(),w=0;w<p;++w){var E=this._nodes[w];E.fixed&&(E.px=E.x,E.py=E.y,this._descent.locks.add(w,[E.x,E.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(e,v,y),S.length>0&&(this._descent.project=new s.Projection(this._nodes,this._groups,this._rootGroup,S).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(g,m,c),this.avoidOverlaps(_),_&&(this._nodes.forEach(function(t,e){t.x=v[e],t.y=y[e]}),this._descent.project=new s.Projection(this._nodes,this._groups,this._rootGroup,S,!0).projectFunctions(),this._nodes.forEach(function(t,e){v[e]=t.x,y[e]=t.y})),this._descent.G=b,this._descent.run(r),l){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=p,this._descent.scaleSnapByMaxH=p!=f;var C=o.Descent.createSquareMatrix(f,function(t,e){return t>=p||e>=p?b[t][e]:0});this._descent.G=C,this._descent.run(l)}return this.updateNodePositions(),this.separateOverlappingComponents(g,m,c),u?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),s=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){s.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t).size(this.size()).nodes(s).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=s[t.index].x,r[t.index]=s[t.index].y})}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e,n){var r=this;if(void 0===n&&(n=!0),!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=i[e],t.y=o[e]});var s=u.separateGraphs(this._nodes,this._links);u.applyPacking(s,t,e,this._defaultNodeSize,1,n),this._nodes.forEach(function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new l.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new l.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},u={x:t.target.x,y:t.target.y},c=i.addPoint(o,t.source.index),h=i.addPoint(u,t.target.index);i.addEdgeIfVisible(o,u,t.source.index,t.target.index),void 0!==n&&n(i);var d=new a.Calculator(i.V.length,i.E,function(t){return t.source.id},function(t){return t.target.id},function(t){return t.length()}).PathFromNodeToNode(c.id,h.id);if(1===d.length||d.length===i.V.length){var p=s.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[p.sourceIntersection,p.arrowStart]}else{for(var f=d.length-2,g=i.V[d[f]].p,m=i.V[d[0]].p,v=(r=[t.source.innerBounds.rayIntersection(g.x,g.y)],f);v>=0;--v)r.push(i.V[d[v]].p);r.push(s.makeEdgeTo(m,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){h(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.storeOffset(e,n)})},t.dragOrigin=function(t){return h(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){h(e)?(void 0!==e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.drag(e,n)})):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){h(e)?(void 0!==e.leaves&&e.leaves.forEach(function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}()},3807:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9147),i=n(9895),o=n(7002),s=n(4232);e.Link3D=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}(),e.Node3D=function(){return function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}}(),e.Layout3D=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var s=o[r];void 0===e[s]&&(e[s]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,l=new a;this.useJaccardLinkLengths&&s.jaccardLinkLengths(this.links,l,1.5),this.links.forEach(function(t){return t.length*=e.idealLinkLength});var u=new r.Calculator(n,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),c=i.Descent.createSquareMatrix(n,function(t,e){return u[t][e]}),h=i.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return h[e][n]=h[n][e]=1}),this.descent=new i.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=h,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var d=0;d<this.nodes.length;d++){var p=this.nodes[d];p.fixed&&this.descent.locks.add(d,[p.x,p.y,p.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.k=(t.dims=["x","y","z"]).length,t}();var a=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},4232:function(t,e){"use strict";function n(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function r(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function i(t,e,n,r){var i=function(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}(t,r);t.forEach(function(t){var o=i[r.getSourceIndex(t)],s=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,s))})}function o(t,e,n){var r=[],i=0,o=[],s=[];function a(t){t.index=t.lowlink=i++,o.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var r=n[e];void 0===r.index?(a(r),t.lowlink=Math.min(t.lowlink,r.lowlink)):r.onStack&&(t.lowlink=Math.min(t.lowlink,r.index))}if(t.lowlink===t.index){for(var l=[];o.length&&((r=o.pop()).onStack=!1,l.push(r),r!==t););s.push(l.map(function(t){return t.id}))}}for(var l=0;l<t;l++)r.push({id:l,out:[]});for(var u=0,c=e;u<c.length;u++){var h=c[u],d=r[n.getSourceIndex(h)],p=r[n.getTargetIndex(h)];d.out.push(p)}for(var f=0,g=r;f<g.length;f++){var m=g[f];void 0===m.index&&a(m)}return s}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,function(t,e){return Math.sqrt(n(t,e)-r(t,e))},e)},e.jaccardLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:r(t,e)/n(t,e)},e)},e.generateDirectedEdgeConstraints=function(t,e,n,r){var i=o(t,e,r),s={};i.forEach(function(t,e){return t.forEach(function(t){return s[t]=e})});var a=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);s[e]!==s[i]&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),a},e.stronglyConnectedComponents=o},2267:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t,e,n){this.source=t,this.target=e,this.type=n}}();e.PowerEdge=n;var r=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new s);for(var a=0;a<t;++a)this.roots[0].add(this.modules[a]=new o(a))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new s;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new o(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var l=0;l<t.groups.length;++l){var u=t.groups[l],c={};for(var h in u)"leaves"!==h&&"groups"!==h&&u.hasOwnProperty(h)&&(c[h]=u[h]);e.add(new o(-1-l,new a,new a,this.initModulesFromGroup(u),c))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),a=new s;a.add(t),a.add(e);var l=new o(this.modules.length,i,r,a);this.modules.push(l);var u=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var s=n[r];s.add(o,l),s.remove(o,t),s.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return u(i,"incoming","outgoing"),u(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(l),l},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,s=n-1;o<s;++o)for(var a=o+1;a<n;++a){var l=e[o],u=e[a];r[i]={id:i,nEdges:this.nEdges(l,u),a:l,b:u},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges})[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,r=[];return i(this.roots[0],{},r),this.allEdges().forEach(function(i){var o=e.modules[i.source],s=e.modules[i.target];t.push(new n(void 0===o.gid?i.source:r[o.gid],void 0===s.gid?i.target:r[s.gid],i.type))}),r},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();function i(t,e,n){t.forAll(function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var r=e;if(t.gid=n.length,!t.isIsland()||t.isPredefined()){if(r={id:t.gid},t.isPredefined())for(var o in t.definition)r[o]=t.definition[o];e.groups||(e.groups=[]),e.groups.push(t.gid),n.push(r)}i(t.children,r,n)}})}e.Configuration=r;var o=function(){function t(t,e,n,r,i){void 0===e&&(e=new a),void 0===n&&(n=new a),void 0===r&&(r=new s),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(r,i){r.forAll(function(r){t.push(new n(e.id,r.id,i))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();e.Module=o;var s=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=function(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();e.ModuleSet=s;var a=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new s).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();e.LinkSets=a,e.getGroups=function(t,e,n,i){for(var o=new r(t.length,e,n,i);o.greedyMerge(););var s=[],a=o.getGroupHierarchy(s);return s.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:a,powerEdges:s}}},741:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var s=new t(n);return null!==r&&r(n,s),this.merge(s,i)},t}();e.PairingHeap=n,e.PriorityQueue=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i,o=0;i=e[o];++o)t=new n(i),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}()},1539:function(t,e){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,function(t,n){return e(n,t)})},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(e(t,(n=r._ancestors[o]).data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();e.TreeBase=i;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=o;var s=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}();e.RBTree=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new s(t),n=!0,this.size++;else{var r=new s(void 0),i=!1,o=!1,a=null,l=r,u=null,c=this._root;for(l.right=this._root;;){if(null===c?(c=new s(t),u.set_child(i,c),n=!0,this.size++):e.is_red(c.left)&&e.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),e.is_red(c)&&e.is_red(u)){var h=l.right===a;c===u.get_child(o)?l.set_child(h,e.single_rotate(a,!o)):l.set_child(h,e.double_rotate(a,!o))}var d=this._comparator(c.data,t);if(0===d)break;o=i,null!==a&&(l=a),a=u,u=c,c=c.get_child(i=d<0)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new s(void 0),r=n;r.right=this._root;for(var i=null,o=null,a=null,l=!0;null!==r.get_child(l);){var u=l;o=i,i=r,r=r.get_child(l);var c=this._comparator(t,r.data);if(l=c>0,0===c&&(a=r),!e.is_red(r)&&!e.is_red(r.get_child(l)))if(e.is_red(r.get_child(!l))){var h=e.single_rotate(r,l);i.set_child(u,h),i=h}else if(!e.is_red(r.get_child(!l))){var d=i.get_child(!u);if(null!==d)if(e.is_red(d.get_child(!u))||e.is_red(d.get_child(u))){var p=o.right===i;e.is_red(d.get_child(u))?o.set_child(p,e.double_rotate(i,u)):e.is_red(d.get_child(!u))&&o.set_child(p,e.single_rotate(i,u));var f=o.get_child(p);f.red=!0,r.red=!0,f.left.red=!1,f.right.red=!1}else i.red=!1,d.red=!0,r.red=!0}}return null!==a&&(a.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==a},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i)},7002:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(980),s=n(1539);function a(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},l.empty()):l.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,e){return a(e).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}e.computeGroupBounds=a;var l=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],s=[],a=0;a<4;++a){var l=t.lineIntersection(e,n,r,i,o[a][0],o[a][1],o[a][2],o[a][3]);null!==l&&s.push({x:l.x,y:l.y})}return s},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,o,s,a){var l=n-t,u=s-i,c=r-e,h=a-o,d=h*l-u*c;if(0==d)return null;var p=t-i,f=e-o,g=(u*f-h*p)/d,m=(l*f-c*p)/d;return g>=0&&g<=1&&m>=0&&m<=1?{x:t+g*l,y:e+g*c}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=l,e.makeEdgeBetween=function(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,s=i.y-r.y,a=Math.sqrt(o*o+s*s),l=a-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+l*o/a,y:r.y+l*s/a}}},e.makeEdgeTo=function(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,s=Math.sqrt(i*i+o*o);return{x:r.x-n*i/s,y:r.y-n*o/s}};var u=function(){return function(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=d(),this.next=d()}}(),c=function(){return function(t,e,n){this.isOpen=t,this.v=e,this.pos=n}}();function h(t,e){return t.pos>e.pos?1:t.pos<e.pos||t.isOpen?-1:e.isOpen?1:0}function d(){return new s.RBTree(function(t,e){return t.pos-e.pos})}var p={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new l(n-r/2,n+r/2,t,e)},findNeighbours:function(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var s=i.r.overlapX(t.r);if((s<=0||s<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),s<=0)break}};n("next","prev"),n("prev","next")}},f={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new l(t,e,n-r/2,n+r/2)},findNeighbours:function(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}};function g(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,s=void 0!==t.leaves?t.leaves.length:0,a=o?t.groups.reduce(function(t,r){return t.concat(g(r,e,n,!0))},[]):[],l=(r?2:0)+s+o,u=new Array(l),c=new Array(l),h=0,d=function(t,e){c[h]=t,u[h++]=e};if(r){var p=t.bounds,f=e.getCentre(p),v=e.getSize(p)/2,y=e.getOpen(p),b=e.getClose(p),_=f-v+i/2,x=f+v-i/2;t.minVar.desiredPosition=_,d(e.makeRect(y,b,_,i),t.minVar),t.maxVar.desiredPosition=x,d(e.makeRect(y,b,x,i),t.maxVar)}s&&t.leaves.forEach(function(t){return d(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;d(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var w=m(c,u,e,n);return o&&(u.forEach(function(t){t.cOut=[],t.cIn=[]}),w.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),a.concat(w)}function m(t,e,n,r){var i,s=t.length,a=2*s;console.assert(e.length>=s);var l=new Array(a);for(i=0;i<s;++i){var p=t[i],f=new u(e[i],p,n.getCentre(p));l[i]=new c(!0,f,n.getOpen(p)),l[i+s]=new c(!1,f,n.getClose(p))}l.sort(h);var g=new Array,m=d();for(i=0;i<a;++i){var v=l[i];if(f=v.v,v.isOpen)m.insert(f),n.findNeighbours(f,m);else{m.remove(f);var y=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;g.push(new o.Constraint(t.v,e.v,i))},b=function(t,e,n){for(var r,i=f[t].iterator();null!==(r=i[t]());)n(r,f),r[e].remove(f)};b("prev","next",function(t,e){return y(t,e)}),b("next","prev",function(t,e){return y(e,t)})}}return console.assert(0===m.size),g}function v(t,e){return m(t,e,p,1e-6)}function y(t,e){return m(t,e,f,1e-6)}function b(t){return g(t,p,1e-6)}function _(t){return g(t,f,1e-6)}e.generateXConstraints=v,e.generateYConstraints=y,e.generateXGroupConstraints=b,e.generateYGroupConstraints=_,e.removeOverlaps=function(t){var e=t.map(function(t){return new o.Variable(t.cx())}),n=v(t,e),r=new o.Solver(e,n);r.solve(),e.forEach(function(e,n){return t[n].setXCentre(e.position())}),e=t.map(function(t){return new o.Variable(t.cy())}),n=y(t,e),(r=new o.Solver(e,n)).solve(),e.forEach(function(e,n){return t[n].setYCentre(e.position())})};var x=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return i(e,t),e}(o.Variable);e.IndexedVariable=x,e.Projection=function(){function t(t,e,n,r,i){var o=this;if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1),this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=i,this.variables=t.map(function(t,e){return t.variable=new x(e,1)}),r&&this.createConstraints(r),i&&n&&void 0!==n.groups){t.forEach(function(t){if(t.width&&t.height){var e=t.width/2,n=t.height/2;t.bounds=new l(t.x-e,t.x+e,t.y-n,t.y+n)}else t.bounds=new l(t.x,t.x,t.y,t.y)}),a(n);var s=t.length;e.forEach(function(t){o.variables[s]=t.minVar=new x(s++,void 0!==t.stiffness?t.stiffness:.01),o.variables[s]=t.maxVar=new x(s++,void 0!==t.stiffness?t.stiffness:.01)})}}return t.prototype.createSeparation=function(t){return new o.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),o=null;i.forEach(function(t){if(o){var e=o[n]+o[r];e>t[n]&&(t[n]=e)}o=t})}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){r.push(new o.Constraint(n,e.nodes[t.node].variable,t.offset,!0))})},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var s=(i.width||0)/2,a=(i.height||0)/2,u=t[o],c=e[o];i.bounds=new l(u-s,u+s,c-a,c+a)})},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,b,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,_,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,r,i,o,s,l,u){this.setupVariablesAndBounds(t,e,r,i),this.rootGroup&&this.avoidOverlaps&&(a(this.rootGroup),o=o.concat(s(this.rootGroup))),this.solve(this.variables,o,n,r),this.nodes.forEach(l),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(u),a(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new o.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}()},9147:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(741),i=function(){return function(t,e){this.id=t,this.distance=e}}(),o=function(){return function(t){this.id=t,this.neighbours=[]}}(),s=function(){return function(t,e,n){this.node=t,this.prev=e,this.d=n}}();e.Calculator=function(){function t(t,e,n,r,s){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var a=this.n;a--;)this.neighbours[a]=new o(a);for(a=this.es.length;a--;){var l=this.es[a],u=n(l),c=r(l),h=s(l);this.neighbours[u].neighbours.push(new i(c,h)),this.neighbours[c].neighbours.push(new i(u,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue(function(t,e){return t.d<=e.d}),o=this.neighbours[t],a=new s(o,null,0),l={};for(i.push(a);!i.empty()&&(o=(a=i.pop()).node).id!==e;)for(var u=o.neighbours.length;u--;){var c=o.neighbours[u],h=this.neighbours[c.id];if(!a.prev||h.id!==a.prev.node.id){var d=h.id+","+o.id;if(!(d in l&&l[d]<=a.d)){var p=a.prev?n(a.prev.node.id,o.id,h.id):0,f=a.d+c.distance+p;l[d]=f,i.push(new s(h,a,f))}}}for(var g=[];a.prev;)g.push((a=a.prev).node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue(function(t,e){return t.d<=e.d}),i=this.neighbours.length,o=new Array(i);i--;){var s=this.neighbours[i];s.d=i===t?0:Number.POSITIVE_INFINITY,s.q=n.push(s)}for(;!n.empty();){var a=n.pop();if(o[a.id]=a.d,a.id===e){for(var l=[],u=a;void 0!==u.prev;)l.push(u.prev.id),u=u.prev;return l}for(i=a.neighbours.length;i--;){var c=a.neighbours[i],h=(u=this.neighbours[c.id],a.d+c.distance);a.d!==Number.MAX_VALUE&&u.d>h&&(u.d=h,u.prev=a,n.reduceKey(u.q,u,function(t,e){return t.q=e}))}}return o},t}()},980:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.weight;this.AB+=n*e*(t.offset/t.scale),this.AD+=n*e*t.desiredPosition,this.A2+=n*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=n;var r=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=r;var i=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();e.Variable=i;var o=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var s=r.compute_lm(o,t,n);o===e.right?(i+=s*e.left.scale,e.lm=s):(i+=s*e.right.scale,e.lm=-s),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,s){o||s!==n&&!i.findPath(s,t,n,r)||(o=!0,r(e,s))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=o;var s=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new o(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<a.LAGRANGIAN_TOLERANCE&&(n=r.left.block,o.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();e.Blocks=s;var a=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new s(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,s=0;s<i;++s){var a=r[s];if(!a.unsatisfiable){var l=a.slack();if((a.equality||l<e)&&(e=l,n=a,o=s,a.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new s(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=a,e.removeOverlapInOneDimension=function(t,e,n){for(var o=t.map(function(t){return new i(t.desiredCenter)}),s=[],l=t.length,u=0;u<l-1;u++)s.push(new r(o[u],o[u+1],(t[u].size+t[u+1].size)/2));var c=o[0],h=o[l-1],d=t[0].size/2,p=t[l-1].size/2,f=null,g=null;return e&&(f=new i(e,1e3*c.weight),o.push(f),s.push(new r(f,c,d))),n&&(g=new i(n,1e3*h.weight),o.push(g),s.push(new r(h,g,p))),new a(o,s).solve(),{newCenters:o.slice(0,t.length).map(function(t){return t.position()}),lowerBound:f?f.position():c.position()-d,upperBound:g?g.position():h.position()+p}}},5050:function(t,e,n){"use strict";function r(t){return"function"==typeof t}let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){e=a instanceof c?d(a.errors):[a]}}if(l(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(u(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof c?e=e.concat(d(a.errors)):e.push(a)}}}if(e)throw new c(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[p](){return this}static create(t,e,n){const r=new f(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends f{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof f)return t;if(t[p])return t[p]()}return t||e||n?new f(t,e,n):new f(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?v:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const _=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class x extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class w extends f{constructor(t){super(t),this.destination=t}}let S=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new w(this)}lift(t){const e=new E(this,this);return e.operator=t,e}next(t){if(this.closed)throw new _;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new _;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new x(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new E(t,e),t})();class E extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function C(t){return t&&"function"==typeof t.schedule}function k(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new T(t,e))}}class T{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new P(t,this.project,this.thisArg))}}class P extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const A=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const O=D(),M=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function I(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const L=t=>{if(t&&"function"==typeof t[m])return n=t,t=>{const e=n[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(M(t))return A(t);if(I(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s),e))(t);if(t&&"function"==typeof t[O])return e=t,t=>{const n=e[O]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function N(t,e){return new y(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function R(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[m]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(I(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(M(t))return N(t,e);if(function(t){return t&&"function"==typeof t[O]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[O](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(L(t))}class F extends f{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class B extends f{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function j(t,e){if(e.closed)return;if(t instanceof y)return t.subscribe(e);let n;try{n=L(t)(e)}catch(r){e.error(r)}return n}function z(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(z((n,r)=>R(t(n,r)).pipe(k((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new V(t,n)))}class V{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new G(t,this.project,this.concurrent))}}class G extends B{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new F(this),n=this.destination;n.add(e);const r=j(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function U(t=Number.POSITIVE_INFINITY){return z(v,t)}function H(t,e){return e?N(t,e):new y(A(t))}function q(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return C(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:U(e)(H(t,n))}function W(){return function(t){return t.lift(new $(t))}}class ${constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new Y(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class Y extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class K extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Q(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return W()(this)}}const X=(()=>{const t=K.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Q extends w{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Z(){return new S}function J(){return t=>{return W()((e=Z,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,X);return r.source=t,r.subjectFactory=n,r})(t));var e}}function tt(t){for(let e in t)if(t[e]===tt)return e;throw Error("Could not find renamed property on target object.")}function et(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(nt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function rt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const it=tt({__forward_ref__:tt});function ot(t){return t.__forward_ref__=ot,t.toString=function(){return nt(this())},t}function st(t){return at(t)?t():t}function at(t){return"function"==typeof t&&t.hasOwnProperty(it)&&t.__forward_ref__===ot}class lt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ut(t){return"string"==typeof t?t:null==t?"":String(t)}function ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ut(t)}function ht(t,e){const n=e?` in ${e}`:"";throw new lt("201",`No provider for ${ct(t)} found${n}`)}function dt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ft(t){return gt(t,vt)||gt(t,bt)}function gt(t,e){return t.hasOwnProperty(e)?t[e]:null}function mt(t){return t&&(t.hasOwnProperty(yt)||t.hasOwnProperty(_t))?t[yt]:null}const vt=tt({"\u0275prov":tt}),yt=tt({"\u0275inj":tt}),bt=tt({ngInjectableDef:tt}),_t=tt({ngInjectorDef:tt});var xt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let wt;function St(t){const e=wt;return wt=t,e}function Et(t,e,n){const r=ft(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&xt.Optional?null:void 0!==e?e:void ht(nt(t),"Injector")}function Ct(t){return{toString:t}.toString()}var kt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Tt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Pt="undefined"!=typeof globalThis&&globalThis,At="undefined"!=typeof window&&window,Dt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ot="undefined"!=typeof global&&global,Mt=Pt||Ot||At||Dt,It={},Lt=[],Nt=tt({"\u0275cmp":tt}),Rt=tt({"\u0275dir":tt}),Ft=tt({"\u0275pipe":tt}),Bt=tt({"\u0275mod":tt}),jt=tt({"\u0275loc":tt}),zt=tt({"\u0275fac":tt}),Vt=tt({__NG_ELEMENT_ID__:tt});let Gt=0;function Ut(t){return Ct(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Lt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Tt.Emulated,id:"c",styles:t.styles||Lt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Gt++,n.inputs=Yt(t.inputs,e),n.outputs=Yt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ht):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(qt):null,n})}function Ht(t){return Qt(t)||function(t){return t[Rt]||null}(t)}function qt(t){return function(t){return t[Ft]||null}(t)}const Wt={};function $t(t){const e={type:t.type,bootstrap:t.bootstrap||Lt,declarations:t.declarations||Lt,imports:t.imports||Lt,exports:t.exports||Lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Ct(()=>{Wt[t.id]=t.type}),e}function Yt(t,e){if(null==t)return It;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Kt=Ut;function Xt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qt(t){return t[Nt]||null}function Zt(t,e){const n=t[Bt]||null;if(!n&&!0===e)throw new Error(`Type ${nt(t)} does not have '\u0275mod' property.`);return n}function Jt(t){return Array.isArray(t)&&"object"==typeof t[1]}function te(t){return Array.isArray(t)&&!0===t[1]}function ee(t){return 0!=(8&t.flags)}function ne(t){return 2==(2&t.flags)}function re(t){return 1==(1&t.flags)}function ie(t){return null!==t.template}function oe(t,e){return t.hasOwnProperty(zt)?t[zt]:null}class se{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ae(){return le}function le(t){return t.type.prototype.ngOnChanges&&(t.setInput=ce),ue}function ue(){const t=he(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===It)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function ce(t,e,n,r){const i=he(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:It,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new se(l&&l.currentValue,e,s===It),t[r]=e}function he(t){return t.__ngSimpleChanges__||null}let de;function pe(t){return!!t.listen}ae.ngInherit=!0;const fe={createRenderer:(t,e)=>void 0!==de?de:"undefined"!=typeof document?document:void 0};function ge(t){for(;Array.isArray(t);)t=t[0];return t}function me(t,e){return ge(e[t.index])}function ve(t,e){return t.data[e]}function ye(t,e){return t[e]}function be(t,e){const n=e[t];return Jt(n)?n:n[0]}function _e(t){return 4==(4&t[2])}function xe(t){return 128==(128&t[2])}function we(t,e){return null==e?null:t[e]}function Se(t){t[18]=0}function Ee(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ce={lFrame:$e(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ke(){return Ce.bindingsEnabled}function Te(){return Ce.lFrame.lView}function Pe(){return Ce.lFrame.tView}function Ae(t){return Ce.lFrame.contextLView=t,t[8]}function De(){let t=Oe();for(;null!==t&&64===t.type;)t=t.parent;return t}function Oe(){return Ce.lFrame.currentTNode}function Me(t,e){const n=Ce.lFrame;n.currentTNode=t,n.isParent=e}function Ie(){return Ce.lFrame.isParent}function Le(){Ce.lFrame.isParent=!1}function Ne(){return Ce.isInCheckNoChangesMode}function Re(t){Ce.isInCheckNoChangesMode=t}function Fe(){return Ce.lFrame.bindingIndex++}function Be(t,e){const n=Ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,je(e)}function je(t){Ce.lFrame.currentDirectiveIndex=t}function ze(t){const e=Ce.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Ve(){return Ce.lFrame.currentQueryIndex}function Ge(t){Ce.lFrame.currentQueryIndex=t}function Ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function He(t,e,n){if(n&xt.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&xt.Host||(r=Ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ce.lFrame=We();return r.currentTNode=e,r.lView=t,!0}function qe(t){const e=We(),n=t[1];Ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function We(){const t=Ce.lFrame,e=null===t?null:t.child;return null===e?$e(t):e}function $e(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Ye(){const t=Ce.lFrame;return Ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ke=Ye;function Xe(){const t=Ye();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Qe(){return Ce.lFrame.selectedIndex}function Ze(t){Ce.lFrame.selectedIndex=t}function Je(){const t=Ce.lFrame;return ve(t.tView,t.selectedIndex)}function tn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function en(t,e,n){on(t,e,3,n)}function nn(t,e,n,r){(3&t[2])===n&&on(t,e,n,r)}function rn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function on(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(sn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function sn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}class an{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ln(t,e,n){const r=pe(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];cn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function un(t){return 3===t||4===t||6===t}function cn(t){return 64===t.charCodeAt(0)}function hn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||dn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function dn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function pn(t){return-1!==t}function fn(t){return 32767&t}function gn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let mn=!0;function vn(t){const e=mn;return mn=t,e}let yn=0;function bn(t,e){const n=xn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,_n(r.data,t),_n(e,null),_n(r.blueprint,null));const i=wn(t,e),o=t.injectorIndex;if(pn(i)){const t=fn(i),n=gn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function _n(t,e){t.push(0,0,0,0,0,0,0,0,e)}function xn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function wn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Sn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Vt)&&(r=n[Vt]),null==r&&(r=n[Vt]=yn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function En(t,e,n){if(n&xt.Optional)return t;ht(e,"NodeInjector")}function Cn(t,e,n,r){if(n&xt.Optional&&void 0===r&&(r=null),0==(n&(xt.Self|xt.Host))){const i=t[9],o=St(void 0);try{return i?i.get(e,r,n&xt.Optional):Et(e,r,n&xt.Optional)}finally{St(o)}}return En(r,e,n)}function kn(t,e,n,r=xt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Vt)?t[Vt]:void 0;return"number"==typeof e?e>=0?255&e:Pn:e}(n);if("function"==typeof o){if(!He(e,t,r))return r&xt.Host?En(i,n,r):Cn(e,n,r,i);try{const t=o(r);if(null!=t||r&xt.Optional)return t;ht(n)}finally{Ke()}}else if("number"==typeof o){let i=null,s=xn(t,e),a=-1,l=r&xt.Host?e[16][6]:null;for((-1===s||r&xt.SkipSelf)&&(a=-1===s?wn(t,e):e[s+8],-1!==a&&In(r,!1)?(i=e[1],s=fn(a),e=gn(a,e)):s=-1);-1!==s;){const t=e[1];if(Mn(o,s,t.data)){const t=An(s,e,n,i,r,l);if(t!==Tn)return t}a=e[s+8],-1!==a&&In(r,e[1].data[s+8]===l)&&Mn(o,s,e)?(i=t,s=fn(a),e=gn(a,e)):s=-1}}}return Cn(e,n,r,i)}const Tn={};function Pn(){return new Ln(De(),Te())}function An(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],l=Dn(a,s,n,null==r?ne(a)&&mn:r!=s&&0!=(3&a.type),i&xt.Host&&o===a);return null!==l?On(e,s,l,a):Tn}function Dn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,u=o>>20,c=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<c;h++){const t=s[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(i){const t=s[l];if(t&&ie(t)&&t.type===n)return l}return null}function On(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof an){const s=i;s.resolving&&function(t,e){throw new lt("200",`Circular dependency in DI detected for ${t}`)}(ct(o[n]));const a=vn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?St(s.injectImpl):null;He(t,r,xt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=le(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&St(l),vn(a),s.resolving=!1,Ke()}}return i}function Mn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function In(t,e){return!(t&xt.Self||t&xt.Host&&e)}class Ln{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return kn(this._tNode,this._lView,t,void 0,e)}}function Nn(t){return Ct(()=>{const e=t.prototype.constructor,n=e[zt]||Rn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[zt]||Rn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Rn(t){return at(t)?()=>{const e=Rn(st(t));return e&&e()}:oe(t)}function Fn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(un(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(De(),t)}function Bn(t,e,n){return Ct(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class jn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=dt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zn=new jn("AnalyzeForEntryComponents"),Vn=Function;function Gn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Gn(r,e)):e!==t&&e.push(r)}return e}function Un(t,e){t.forEach(t=>Array.isArray(t)?Un(t,e):e(t))}function Hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Wn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function $n(t,e,n){let r=Kn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Yn(t,e){const n=Kn(t,e);if(n>=0)return t[1|n]}function Kn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const Xn={},Qn=/\n/gm,Zn=tt({provide:String,useValue:tt});let Jn;function tr(t){const e=Jn;return Jn=t,e}function er(t,e=xt.Default){if(void 0===Jn)throw new Error("inject() must be called from an injection context");return null===Jn?Et(t,void 0,e):Jn.get(t,e&xt.Optional?null:void 0,e)}function nr(t,e=xt.Default){return(wt||er)(st(t),e)}const rr=nr;function ir(t){const e=[];for(let n=0;n<t.length;n++){const r=st(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=xt.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(nr(t,n))}else e.push(nr(r))}return e}function or(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const sr=or(Bn("Inject",t=>({token:t})),-1),ar=or(Bn("Optional"),8),lr=or(Bn("SkipSelf"),4);let ur;function cr(t){var e;return(null===(e=function(){if(void 0===ur&&(ur=null,Mt.trustedTypes))try{ur=Mt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return ur}())||void 0===e?void 0:e.createHTML(t))||t}class hr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class dr extends hr{getTypeName(){return"HTML"}}class pr extends hr{getTypeName(){return"Style"}}class fr extends hr{getTypeName(){return"Script"}}class gr extends hr{getTypeName(){return"URL"}}class mr extends hr{getTypeName(){return"ResourceURL"}}function vr(t){return t instanceof hr?t.changingThisBreaksApplicationSecurity:t}function yr(t,e){const n=br(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function br(t){return t instanceof hr&&t.getTypeName()||null}class _r{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(cr(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class xr{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=cr(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=cr(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const wr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Sr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Er(t){return(t=String(t)).match(wr)||t.match(Sr)?t:"unsafe:"+t}function Cr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function kr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Tr=Cr("area,br,col,hr,img,wbr"),Pr=Cr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ar=Cr("rp,rt"),Dr=kr(Ar,Pr),Or=kr(Tr,kr(Pr,Cr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kr(Ar,Cr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dr),Mr=Cr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ir=Cr("srcset"),Lr=kr(Mr,Ir,Cr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Nr=Cr("script,style,template");class Rr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Or.hasOwnProperty(e))return this.sanitizedSomething=!0,!Nr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Lr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Mr[o]&&(s=Er(s)),Ir[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Er(t.trim())).join(", ")),this.buf.push(" ",e,'="',jr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Or.hasOwnProperty(e)&&!Tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(jr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Fr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Br=/([^\#-~ |!])/g;function jr(t){return t.replace(/&/g,"&amp;").replace(Fr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Br,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zr;function Vr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Ur(t){const e=function(){const t=Te();return t&&t[12]}();return e?e.sanitize(Gr.URL,t)||"":yr(t,"URL")?vr(t):Er(ut(t))}function Hr(t,e){t.__ngContext__=e}function qr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Wr(t){return t.ngDebugContext}function $r(t){return t.ngOriginalError}function Yr(t,...e){t.error(...e)}class Kr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Wr(t)?Wr(t):this._findContext($r(t)):null}_findOriginalError(t){let e=$r(t);for(;e&&$r(e);)e=$r(e);return e}}const Xr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mt))();function Qr(t){return t instanceof Function?t():t}var Zr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Jr(t,e){return(void 0)(t,e)}function ti(t){const e=t[3];return te(e)?e[3]:e}function ei(t){return ri(t[13])}function ni(t){return ri(t[4])}function ri(t){for(;null!==t&&!te(t);)t=t[4];return t}function ii(t,e,n,r,i){if(null!=r){let o,s=!1;te(r)?o=r:Jt(r)&&(s=!0,r=r[0]);const a=ge(r);0===t&&null!==n?null==i?di(e,n,a):hi(e,n,a,i||null,!0):1===t&&null!==n?hi(e,n,a,i||null,!0):2===t?function(t,e,n){const r=fi(t,e);r&&function(t,e,n,r){pe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==ge(n)&&ii(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];wi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function oi(t,e,n){return pe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function si(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ee(i,-1)),n.splice(r,1)}function ai(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&si(o,r),e>0&&(t[n-1][4]=r[4]);const s=qn(t,10+e);wi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function li(t,e){if(!(256&e[2])){const n=e[11];pe(n)&&n.destroyNode&&wi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ui(t[1],t);for(;e;){let n=null;if(Jt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Jt(e)&&ui(e[1],e),e=e[3];null===e&&(e=t),Jt(e)&&ui(e[1],e),n=e&&e[4]}e=n}}(e)}}function ui(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof an)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):ge(e[t]),a=r[i=n[o+2]],l=n[o+3];"boolean"==typeof l?s.removeEventListener(n[o],a,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&pe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&te(e[3])){n!==e[3]&&si(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function ci(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===Tt.None||e===Tt.Emulated)return null}return me(r,n)}(t,e.parent,n)}function hi(t,e,n,r,i){pe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function di(t,e,n){pe(t)?t.appendChild(e,n):e.appendChild(n)}function pi(t,e,n,r,i){null!==r?hi(t,e,n,r,i):di(t,e,n)}function fi(t,e){return pe(t)?t.parentNode(e):e.parentNode}function gi(t,e,n){return mi(t,e,n)}let mi=function(t,e,n){return 40&t.type?me(t,n):null};function vi(t,e,n,r){const i=ci(t,r,e),o=e[11],s=gi(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)pi(o,i,n[a],s,!1);else pi(o,i,n,s,!1)}function yi(t,e){if(null!==e){const n=e.type;if(3&n)return me(e,t);if(4&n)return _i(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return yi(t,n);{const n=t[e.index];return te(n)?_i(-1,n):ge(n)}}if(32&n)return Jr(e,t)()||ge(t[e.index]);{const n=bi(t,e);return null!==n?Array.isArray(n)?n[0]:yi(ti(t[16]),n):yi(t,e.next)}}return null}function bi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function _i(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return yi(t,r)}return e[7]}function xi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&Hr(ge(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)xi(t,e,n.child,r,i,o,!1),ii(e,t,i,a,o);else if(32&l){const s=Jr(n,r);let l;for(;l=s();)ii(e,t,i,l,o);ii(e,t,i,a,o)}else 16&l?Si(t,e,r,n,i,o):ii(e,t,i,a,o);n=s?n.projectionNext:n.next}}function wi(t,e,n,r,i,o){xi(n,r,t.firstChild,e,i,o,!1)}function Si(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)ii(e,t,i,a[l],o);else xi(t,e,a,s[3],i,o,!0)}function Ei(t,e,n){pe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ci(t,e,n){pe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ki(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function Ti(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ki(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Pi(t){return 4===t.type&&"ng-template"!==t.value}function Ai(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function Di(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(un(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Ai(t,l,n)||""===l&&1===e.length){if(Oi(r))return!1;s=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!Ti(t.attrs,u,n)){if(Oi(r))return!1;s=!0}continue}const c=Mi(8&r?"class":l,i,Pi(t),n);if(-1===c){if(Oi(r))return!1;s=!0;continue}if(""!==u){let t;t=c>o?"":i[c+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ki(e,u,0)||2&r&&u!==t){if(Oi(r))return!1;s=!0}}}}else{if(!s&&!Oi(r)&&!Oi(l))return!1;if(s&&Oi(l))continue;s=!1,r=l|1&r}}return Oi(r)||s}function Oi(t){return 0==(1&t)}function Mi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ii(t,e,n=!1){for(let r=0;r<e.length;r++)if(Di(t,e[r],n))return!0;return!1}function Li(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Ni(t,e){return t?":not("+e.trim()+")":e}function Ri(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Oi(s)||(e+=Ni(o,i),i=""),r=s,o=o||!Oi(r);n++}return""!==i&&(e+=Ni(o,i)),e}const Fi={};function Bi(t){ji(Pe(),Te(),Qe()+t,Ne())}function ji(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&en(e,r,n)}else{const r=t.preOrderHooks;null!==r&&nn(e,r,0,n)}Ze(n)}function zi(t,e){return t<<17|e<<2}function Vi(t){return t>>17&32767}function Gi(t){return 2|t}function Ui(t){return(131068&t)>>2}function Hi(t,e){return-131069&t|e<<2}function qi(t){return 1|t}function Wi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Ge(i),n.contentQueries(2,e[o],o)}}}function $i(t,e,n,r,i,o,s,a,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,Se(c),c[3]=c[15]=t,c[8]=n,c[10]=s||t&&t[10],c[11]=a||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=o,c[16]=2==e.type?t[16]:c,c}function Yi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Oe(),s=Ie(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ce.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Me(o,!0),o}function Ki(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xi(t,e,n){qe(e);try{const r=t.viewQuery;null!==r&&ko(1,r,n);const i=t.template;null!==i&&Ji(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wi(t,e),t.staticViewQueries&&ko(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)xo(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Xe()}}function Qi(t,e,n,r){const i=e[2];if(256==(256&i))return;qe(e);const o=Ne();try{Se(e),Ce.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ji(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&en(e,n,null)}else{const n=t.preOrderHooks;null!==n&&nn(e,n,0,null),rn(e,0)}if(function(t){for(let e=ei(t);null!==e;e=ni(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ee(r,1),n[2]|=1024}}}(e),function(t){for(let e=ei(t);null!==e;e=ni(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];xe(n)&&Qi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Wi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&en(e,n)}else{const n=t.contentHooks;null!==n&&nn(e,n,1),rn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Ze(~r);else{const i=r,o=n[++t],s=n[++t];Be(o,i),s(2,e[i])}}}finally{Ze(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)bo(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&ko(2,l,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&en(e,n)}else{const n=t.viewHooks;null!==n&&nn(e,n,2),rn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ee(e[3],-1))}finally{Xe()}}function Zi(t,e,n,r){const i=e[10],o=!Ne(),s=_e(e);try{o&&!s&&i.begin&&i.begin(),s&&Xi(t,e,r),Qi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ji(t,e,n,r,i){const o=Qe(),s=2&r;try{Ze(-1),s&&e.length>20&&ji(t,e,20,Ne()),n(r,i)}finally{Ze(o)}}function to(t,e,n){ke()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||bn(n,e),Hr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ie(r);o&&go(e,n,r);const l=On(e,t,a,n);Hr(l,e),null!==s&&mo(0,a-i,l,r,0,s),o&&(be(n.index,e)[8]=l)}}(t,e,n,me(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ce.lFrame.currentDirectiveIndex;try{Ze(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];je(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||uo(r,i)}}finally{Ze(-1),je(s)}}(t,e,n))}function eo(t,e,n=me){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function no(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ro(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ro(t,e,n,r,i,o,s,a,l,u){const c=20+r,h=c+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Fi);return n}(c,h),p="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function io(t,e,n,r){const i=Po(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Ao(t).push(r,i.length-1))}function oo(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function so(t,e,n,r,i,o,s,a){const l=me(e,n);let u,c=e.inputs;var h;!a&&null!=c&&(u=c[r])?(Mo(t,n,u,r,i),ne(e)&&function(t,e){const n=be(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,pe(o)?o.setProperty(l,r,i):cn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function ao(t,e,n,r){let i=!1;if(ke()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ii(n,s.selectors,!1)&&(i||(i=[]),Sn(bn(n,e),t,s.type),ie(s)?(co(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,po(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,l=Ki(t,e,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=hn(n.mergedAttrs,u.hostAttrs),fo(t,n,e,l,u),ho(l,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const c=u.type.prototype;!r&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,u=null===i||Pi(e)?null:vo(n,i);o.push(u),s=oo(n,l,s),a=oo(t.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new lt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=hn(n.mergedAttrs,n.attrs),i}function lo(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function uo(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function co(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ho(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ie(e)&&(n[""]=t)}}function po(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function fo(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=oe(i.type)),s=new an(o,ie(i),null);t.blueprint[r]=s,n[r]=s,lo(t,e,0,r,Ki(t,n,i.hostVars,Fi),i)}function go(t,e,n){const r=me(e,t),i=no(n),o=t[10],s=wo(t,$i(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function mo(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function vo(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function yo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function bo(t,e){const n=be(e,t);if(xe(n)){const t=n[1];80&n[2]?Qi(t,n,t.template,n[8]):n[5]>0&&_o(n)}}function _o(t){for(let n=ei(t);null!==n;n=ni(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Qi(t,e,t.template,e[8])}else e[5]>0&&_o(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=be(e[n],t);xe(r)&&r[5]>0&&_o(r)}}function xo(t,e){const n=be(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Xi(r,n,n[8])}function wo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function So(t){for(;t;){t[2]|=64;const e=ti(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Eo(t,e,n){const r=e[10];r.begin&&r.begin();try{Qi(t,e,t.template,n)}catch(i){throw Oo(e,i),i}finally{r.end&&r.end()}}function Co(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=qr(n),i=r[1];Zi(i,r,i.template,n)}}(t[8])}function ko(t,e,n){Ge(0),e(t,n)}const To=(()=>Promise.resolve(null))();function Po(t){return t[7]||(t[7]=[])}function Ao(t){return t.cleanup||(t.cleanup=[])}function Do(t,e,n){return(null===t||ie(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Oo(t,e){const n=t[9],r=n?n.get(Kr,null):null;r&&r.handleError(e)}function Mo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],u=t.data[s];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Io(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=rt(i,t):2==o&&(r=rt(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Lo=new jn("INJECTOR",-1);class No{get(t,e=Xn){if(e===Xn){const e=new Error(`NullInjectorError: No provider for ${nt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ro=new jn("Set Injector scope."),Fo={},Bo={};let jo;function zo(){return void 0===jo&&(jo=new No),jo}function Vo(t,e=null,n=null,r){return new Go(t,n,e||zo(),r)}class Go{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Un(e,n=>this.processProvider(n,t,e)),Un([t],t=>this.processInjectorType(t,[],i)),this.records.set(Lo,qo(void 0,this));const o=this.records.get(Ro);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:nt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Xn,n=xt.Default){this.assertNotDestroyed();const r=tr(this);try{if(!(n&xt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof jn)&&ft(t);e=n&&this.injectableDefInScope(n)?qo(Uo(t),Fo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&xt.Self?zo():this.parent).get(t,e=n&xt.Optional&&e===Xn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(nt(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=nt(e);if(Array.isArray(e))i=e.map(nt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):nt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Qn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{tr(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(nt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=st(t)))return!1;let r=mt(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=mt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Un(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Un(r,t=>this.processProvider(t,n,r||Lt))}}this.injectorDefTypes.add(o);const a=oe(o)||(()=>new o);this.records.set(o,qo(a,Fo));const l=r.providers;if(null!=l&&!s){const e=t;Un(l,t=>this.processProvider(t,e,l))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=$o(t=st(t))?t:st(t&&t.provide);const i=function(t,e,n){return Wo(t)?qo(void 0,t.useValue):qo(Ho(t),Fo)}(t);if($o(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=qo(void 0,Fo,!0),e.factory=()=>ir(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Fo&&(e.value=Bo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=st(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Uo(t){const e=ft(t),n=null!==e?e.factory:oe(t);if(null!==n)return n;if(t instanceof jn)throw new Error(`Token ${nt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Wn(e,"?");throw new Error(`Can't resolve all parameters for ${nt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[vt]||t[bt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ho(t,e,n){let r;if($o(t)){const e=st(t);return oe(e)||Uo(e)}if(Wo(t))r=()=>st(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...ir(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>nr(st(t.useExisting));else{const e=st(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return oe(e)||Uo(e);r=()=>new e(...ir(t.deps))}var i;return r}function qo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Wo(t){return null!==t&&"object"==typeof t&&Zn in t}function $o(t){return"function"==typeof t}const Yo=function(t,e,n){return function(t,e=null,n=null,r){const i=Vo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Ko=(()=>{class t{static create(t,e){return Array.isArray(t)?Yo(t,e,""):Yo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Xn,t.NULL=new No,t.\u0275prov=dt({token:t,providedIn:"any",factory:()=>nr(Lo)}),t.__NG_ELEMENT_ID__=-1,t})();function Xo(t,e){tn(qr(t)[1],De())}function Qo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(ie(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Zo(t.inputs),e.declaredInputs=Zo(t.declaredInputs),e.outputs=Zo(t.outputs);const n=i.hostBindings;n&&es(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Jo(t,o),s&&ts(t,s),et(t.inputs,i.inputs),et(t.declaredInputs,i.declaredInputs),et(t.outputs,i.outputs),ie(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Qo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hn(i.hostAttrs,n=hn(n,i.hostAttrs))}}(r)}function Zo(t){return t===It?{}:t===Lt?[]:t}function Jo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ts(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function es(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let ns=null;function rs(){if(!ns){const t=Mt.Symbol;if(t&&t.iterator)ns=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ns=n)}}}return ns}class is{constructor(t){this.wrapped=t}static wrap(t){return new is(t)}static unwrap(t){return is.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof is}}function os(t){return!!ss(t)&&(Array.isArray(t)||!(t instanceof Map)&&rs()in t)}function ss(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function as(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ls(t,e,n,r){const i=Te();return as(i,Fe(),e)&&(Pe(),function(t,e,n,r,i,o){const s=me(t,e);!function(t,e,n,r,i,o,s){if(null==o)pe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?ut(o):s(o,r||"",i);pe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(Je(),i,t,e,n,r)),ls}function us(t,e,n,r,i,o,s,a){const l=Te(),u=Pe(),c=t+20,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,l){const u=e.consts,c=Yi(e,t,4,s||null,we(u,a));ao(e,n,c,we(u,l)),tn(e,c);const h=c.tViews=ro(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,i,o,s):u.data[c];Me(h,!1);const d=l[11].createComment("");vi(u,l,d,h),Hr(d,l),wo(l,l[c]=yo(d,l,d,h)),re(h)&&to(u,l,h),null!=s&&eo(l,h,a)}function cs(t){return ye(Ce.lFrame.contextLView,20+t)}function hs(t,e=xt.Default){const n=Te();return null===n?nr(t,e):kn(De(),n,st(t),e)}function ds(t,e,n){const r=Te();return as(r,Fe(),e)&&so(Pe(),Je(),r,t,e,r[11],n,!1),ds}function ps(t,e,n,r,i){const o=i?"class":"style";Mo(t,n,e.inputs[o],o,r)}function fs(t,e,n,r){const i=Te(),o=Pe(),s=20+t,a=i[11],l=i[s]=oi(a,e,Ce.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,l=Yi(e,t,2,i,we(a,o));return ao(e,n,l,we(a,s)),null!==l.attrs&&Io(l,l.attrs,!1),null!==l.mergedAttrs&&Io(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,i,0,e,n,r):o.data[s];Me(u,!0);const c=u.mergedAttrs;null!==c&&ln(a,l,c);const h=u.classes;null!==h&&Ci(a,l,h);const d=u.styles;null!==d&&Ei(a,l,d),64!=(64&u.flags)&&vi(o,i,l,u),0===Ce.lFrame.elementDepthCount&&Hr(l,i),Ce.lFrame.elementDepthCount++,re(u)&&(to(o,i,u),function(t,e,n){if(ee(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,u,i)),null!==r&&eo(i,u)}function gs(){let t=De();Ie()?Le():(t=t.parent,Me(t,!1));const e=t;Ce.lFrame.elementDepthCount--;const n=Pe();n.firstCreatePass&&(tn(n,t),ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ps(n,e,Te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ps(n,e,Te(),e.stylesWithoutHost,!1)}function ms(t,e,n,r){fs(t,e,n,r),gs()}function vs(){return Te()}function ys(t){return!!t&&"function"==typeof t.then}function bs(t){return!!t&&"function"==typeof t.subscribe}const _s=bs;function xs(t,e,n,r){const i=Te(),o=Pe(),s=De();return Ss(o,i,i[11],s,t,e,!!n,r),xs}function ws(t,e){const n=De(),r=Te(),i=Pe();return Ss(i,r,Do(ze(i.data),n,r),n,t,e,!1),ws}function Ss(t,e,n,r,i,o,s,a){const l=re(r),u=t.firstCreatePass&&Ao(t),c=Po(e);let h=!0;if(3&r.type||a){const d=me(r,e),p=a?a(d):d,f=c.length,g=a?t=>a(ge(t[r.index])):r.index;if(pe(n)){let s=null;if(!a&&l&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Cs(r,e,0,o,!1);const t=n.listen(p,i,o);c.push(o,t),u&&u.push(i,g,f,f+1)}}else o=Cs(r,e,0,o,!0),p.addEventListener(i,o,s),c.push(o),u&&u.push(i,g,f,s)}else o=Cs(r,e,0,o,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=c.length;c.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}function Es(t,e,n,r){try{return!1!==n(r)}catch(i){return Oo(t,i),!1}}function Cs(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?be(t.index,e):e;0==(32&e[2])&&So(s);let a=Es(e,0,r,o),l=n.__ngNextListenerFn__;for(;l;)a=Es(e,0,l,o)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ks(t=1){return function(t){return(Ce.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ce.lFrame.contextLView))[8]}(t)}function Ts(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Ii(t,o,!0):Li(r,o))return i}else n=i}return n}function Ps(t){const e=Te()[16][6];if(!e.projection){const n=e.projection=Wn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Ts(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function As(t,e=0,n){const r=Te(),i=Pe(),o=Yi(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),Le(),64!=(64&o.flags)&&function(t,e,n){Si(e[11],0,e,n,ci(t,n,e),gi(n.parent||e[6],n,e))}(i,r,o)}function Ds(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Vi(o):Ui(o),l=!1;for(;0!==a&&(!1===l||s);){const n=t[a+1];Os(t[a],e)&&(l=!0,t[a+1]=r?qi(n):Gi(n)),a=r?Vi(n):Ui(n)}l&&(t[n+1]=r?Gi(o):qi(o))}function Os(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Kn(t,e)>=0}function Ms(t,e,n){return Ls(t,e,n,!1),Ms}function Is(t,e){return Ls(t,e,null,!0),Is}function Ls(t,e,n,r){const i=Te(),o=Pe(),s=function(t){const e=Ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Qe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=ze(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Rs(n=Ns(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ns(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ui(r))return t[Vi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Ns(null,t,e,n[1],r),n=Rs(n,e.attrs,r),function(t,e,n,r){t[Vi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Rs(r,t[o].hostAttrs,n);return Rs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vi(s),l=Ui(s);t[r]=n;let u,c=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||Kn(t,u)>0)&&(c=!0)}else u=n;if(i)if(0!==l){const e=Vi(t[a+1]);t[r+1]=zi(e,a),0!==e&&(t[e+1]=Hi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=zi(a,0),0!==a&&(t[a+1]=Hi(t[a+1],r)),a=r;else t[r+1]=zi(l,0),0===a?a=r:t[l+1]=Hi(t[l+1],r),l=r;c&&(t[r+1]=Gi(t[r+1])),Ds(t,u,r,!0),Ds(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Kn(o,e)>=0&&(n[r+1]=qi(n[r+1]))}(e,u,t,r,o),s=zi(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Fi&&as(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,u=l[a+1];Bs(1==(1&u)?Fs(l,e,n,i,Ui(u),s):void 0)||(Bs(o)||function(t){return 2==(2&t)}(u)&&(o=Fs(l,null,n,i,a,s)),function(t,e,n,r,i){const o=pe(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Zr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Zr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,function(t,e){return ge(e[t])}(Qe(),n),i,o))}(o,o.data[Qe()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=nt(vr(t)))),t}(e,n),r,s)}function Ns(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Rs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Rs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),$n(t,s,!!n||e[++o]))}return void 0===t?null:t}function Fs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),l=o?e[1]:e,u=null===l;let c=n[i+1];c===Fi&&(c=u?Lt:void 0);let h=u?Yn(c,r):l===r?c:void 0;if(o&&!Bs(h)&&(h=Yn(e,r)),Bs(h)&&(a=h,s))return a;const d=t[i+1];i=s?Vi(d):Ui(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Yn(t,r))}return a}function Bs(t){return void 0!==t}function js(t,e=""){const n=Te(),r=Pe(),i=t+20,o=r.firstCreatePass?Yi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return pe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);vi(r,n,s,o),Me(o,!1)}function zs(t,e,n){const r=Te();if(as(r,Fe(),e)){const i=Pe(),o=Je();so(i,o,r,t,e,Do(ze(i.data),o,r),n,!0)}return zs}const Vs=void 0;var Gs=["en",[["a","p"],["AM","PM"],Vs],[["AM","PM"],Vs,Vs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vs,"{1} 'at' {0}",Vs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Us={};function Hs(t){return t in Us||(Us[t]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[t]),Us[t]}var qs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Ws="en-US";function $s(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ws=t.toLowerCase().replace(/_/g,"-"))}function Ys(t,e,n,r,i){if(t=st(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ys(t[o],e,n,r,i);else{const o=Pe(),s=Te();let a=$o(t)?t:st(t.provide),l=Ho(t);const u=De(),c=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if($o(t)||!t.multi){const r=new an(l,i,hs),p=Qs(a,e,i?c:c+d,h);-1===p?(Sn(bn(u,s),o,a),Ks(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=Qs(a,e,c+d,h),f=Qs(a,e,c,c+d),g=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!g){Sn(bn(u,s),o,a);const c=function(t,e,n,r,i){const o=new an(t,n,hs);return o.multi=[],o.index=e,o.componentProviders=0,Xs(o,i,r&&!n),o}(i?Js:Zs,n.length,i,r,l);!i&&m&&(n[f].providerFactory=c),Ks(o,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(c),s.push(c)}else Ks(o,t,p>-1?p:f,Xs(n[i?f:p],l,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function Ks(t,e,n,r){const i=$o(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Xs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Qs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Zs(t,e,n,r){return ta(this.multi,[])}function Js(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=On(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ta(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ta(i,o);return o}function ta(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ea(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Pe();if(r.firstCreatePass){const i=ie(t);Ys(n,r.data,r.blueprint,i,!0),Ys(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class na{}class ra{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${nt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ia=(()=>{class t{}return t.NULL=new ra,t})();function oa(...t){}function sa(t,e){return new la(me(t,e))}const aa=function(){return sa(De(),Te())};let la=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=aa,t})();function ua(t){return t instanceof la?t.nativeElement:t}class ca{}let ha=(()=>{class t{}return t.\u0275prov=dt({token:t,providedIn:"root",factory:()=>null}),t})();class da{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const pa=new da("12.0.1");class fa{constructor(){}supports(t){return os(t)}create(t){return new ma(t)}}const ga=(t,e)=>e;class ma{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ga}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<_a(n,r,i)?e:n,s=_a(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!os(t))throw new Error(`Error trying to diff '${nt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[rs()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new va(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ba),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ba),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class va{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ya{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ba{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ya,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _a(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class xa{constructor(){}supports(t){return t instanceof Map||ss(t)}create(){return new wa}}class wa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||ss(t)))throw new Error(`Error trying to diff '${nt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Sa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Sa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ea(){return new Ca([new fa])}let Ca=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ea()),deps:[[t,new lr,new ar]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=dt({token:t,providedIn:"root",factory:Ea}),t})();function ka(){return new Ta([new xa])}let Ta=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ka()),deps:[[t,new lr,new ar]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=dt({token:t,providedIn:"root",factory:ka}),t})();function Pa(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(ge(o)),te(o))for(let t=10;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Pa(e[1],e,n,r)}const s=n.type;if(8&s)Pa(t,e,n.child,r);else if(32&s){const t=Jr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=bi(e,n);if(Array.isArray(t))r.push(...t);else{const n=ti(e[16]);Pa(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Aa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Pa(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(te(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(ai(t,n),qn(e,n))}this._attachedToViewContainer=!1}li(this._lView[1],this._lView)}onDestroy(t){io(this._lView[1],this._lView,null,t)}markForCheck(){So(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Eo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Re(!0);try{Eo(t,e,n)}finally{Re(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,wi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Da extends Aa{constructor(t){super(t),this._view=t}detectChanges(){Co(this._view)}checkNoChanges(){!function(t){Re(!0);try{Co(t)}finally{Re(!1)}}(this._view)}get context(){return null}}const Oa=function(t){return function(t,e,n){if(ne(t)&&!n){const n=be(t.index,e);return new Aa(n,n)}return 47&t.type?new Aa(e[16],e):null}(De(),Te(),16==(16&t))};let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=Oa,t})();const Ia=[new xa],La=new Ca([new fa]),Na=new Ta(Ia),Ra=function(){return za(De(),Te())};let Fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ra,t})();const Ba=Fa,ja=class extends Ba{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=$i(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Xi(e,n,t),new Aa(n)}};function za(t,e){return 4&t.type?new ja(e,t,sa(t,e)):null}class Va{}class Ga{}const Ua=function(){return Ka(De(),Te())};let Ha=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ua,t})();const qa=Ha,Wa=class extends qa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new Ln(this._hostTNode,this._hostLView)}get parentInjector(){const t=wn(this._hostTNode,this._hostLView);if(pn(t)){const e=gn(t,this._hostLView),n=fn(t);return new Ln(e[1].data[n+8],e)}return new Ln(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=$a(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Va,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(te(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Wa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Hn(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=_i(i,o),a=n[11],l=fi(a,o[7]);return null!==l&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,wi(t,r,n,1,i,o)}(r,o[6],a,n,l,s),t.attachToViewContainerRef(),Hn(Ya(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=$a(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=ai(this._lContainer,e);n&&(qn(Ya(this._lContainer),e),li(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=ai(this._lContainer,e);return n&&null!=qn(Ya(this._lContainer),e)?new Aa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function $a(t){return t[8]}function Ya(t){return t[8]||(t[8]=[])}function Ka(t,e){let n;const r=e[t.index];if(te(r))n=r;else{let i;if(8&t.type)i=ge(r);else{const n=e[11];i=n.createComment("");const r=me(t,e);hi(n,fi(n,r),i,function(t,e){return pe(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=yo(r,e,i,t),wo(e,n)}return new Wa(n,t,e)}const Xa={};class Qa extends ia{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Qt(t);return new tl(e,this.ngModule)}}function Za(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ja=new jn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xr});class tl extends na{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ri).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Za(this.componentDef.inputs)}get outputs(){return Za(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Xa,i);return o!==Xa||r===Xa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ca,fe),s=i.get(ha,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(pe(t))return t.selectRootElement(e,n===Tt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):oi(o.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:Xr,clean:To,playerHandler:null,flags:0},d=ro(0,null,null,1,0,null,null,null,null,null),p=$i(null,d,h,c,null,null,o,a,s,i);let f,g;qe(p);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Yi(s,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(Io(a,l,!0),null!==t&&(ln(i,t,l),null!==a.classes&&Ci(i,t,a.classes),null!==a.styles&&Ei(i,t,a.styles)));const u=r.createRenderer(t,e),c=$i(n,no(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(Sn(bn(a,n),s,e.type),co(s,a),po(a,n.length,1)),wo(n,c),n[20]=c}(u,this.componentDef,p,o,a);if(u)if(n)ln(a,u,["ng-version",pa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Oi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ln(a,u,t),e&&e.length>0&&Ci(a,u,e.join(" "))}if(g=ve(d,20),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}f=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=De();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),fo(t,r,e,Ki(t,e,1,null),n));const i=On(e,t,r.directiveStart,r);Hr(i,e);const o=me(r,e);return o&&Hr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=De();e.contentQueries(1,s,t.directiveStart)}const a=De();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ze(a.index),lo(n[1],a,0,a.directiveStart,a.directiveEnd,e),uo(e,s)),s}(t,this.componentDef,p,h,[Xo]),Xi(d,p,null)}finally{Xe()}return new el(this.componentType,f,sa(g,p),p,g)}}class el extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Da(r),this.componentType=t}get injector(){return new Ln(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const nl=new Map;class rl extends Va{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qa(this);const n=Zt(t),r=t[jt]||null;r&&$s(r),this._bootstrapComponents=Qr(n.bootstrap),this._r3Injector=Vo(t,e,[{provide:Va,useValue:this},{provide:ia,useValue:this.componentFactoryResolver}],nt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ko.THROW_IF_NOT_FOUND,n=xt.Default){return t===Ko||t===Va||t===Lo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class il extends Ga{constructor(t){super(),this.moduleType=t,null!==Zt(t)&&function(t){const e=new Set;!function t(n){const r=Zt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${nt(e)} vs ${nt(e.name)}`)}(i,nl.get(i),n),nl.set(i,n));const o=Qr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new rl(this.moduleType,t)}}function ol(t,e){const n=Pe();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new lt("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=oe(r.type)),s=St(hs);try{const t=vn(!1),e=o();return vn(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Te(),i,e),e}finally{St(s)}}function sl(t,e,n){const r=t+20,i=Te(),o=ye(i,r);return function(t,e){return is.isWrapped(e)&&(e=is.unwrap(e),t[Ce.lFrame.bindingIndex]=Fi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?function(t,e,n,r,i,o){const s=e+n;return as(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===Fi?void 0:n}(t,s+1)}(i,function(){const t=Ce.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n))}function al(t){return e=>{setTimeout(t,void 0,e)}}const ll=class extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,o;let s=t,a=e||(()=>null),l=n;if(t&&"object"==typeof t){const e=t;s=null===(r=e.next)||void 0===r?void 0:r.bind(e),a=null===(i=e.error)||void 0===i?void 0:i.bind(e),l=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(a=al(a),s&&(s=al(s)),l&&(l=al(l)));const u=super.subscribe({next:s,error:a,complete:l});return t instanceof h&&t.add(u),u}};function ul(){return this._results[rs()]()}class cl{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=rs(),n=cl.prototype;n[e]||(n[e]=ul)}get changes(){return this._changes||(this._changes=new ll)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=Gn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class hl{constructor(t){this.queryList=t,this.matches=null}clone(){return new hl(this.queryList)}setDirty(){this.queryList.setDirty()}}class dl{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new dl(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==kl(t,e).matches&&this.queries[e].setDirty()}}class pl{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class fl{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new fl(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class gl{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new gl(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ml(e,i)),this.matchTNodeWithReadOption(t,e,Dn(e,t,i,!1,!1))}else n===Fa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Dn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===la||r===Ha||r===Fa&&4&e.type)this.addMatch(e.index,-2);else{const n=Dn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ml(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function vl(t,e,n,r){return-1===n?function(t,e){return 11&t.type?sa(t,e):4&t.type?za(t,e):null}(e,t):-2===n?function(t,e,n){return n===la?sa(e,t):n===Fa?za(e,t):n===Ha?Ka(e,t):void 0}(t,e,r):On(t,t[1],n,e)}function yl(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:vl(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function bl(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=yl(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=10;t<s.length;t++){const e=s[t];e[17]===e[3]&&bl(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];bl(n[1],n,i,r)}}}}}return r}function _l(t){const e=Te(),n=Pe(),r=Ve();Ge(r+1);const i=kl(n,r);if(t.dirty&&_e(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?bl(n,e,r,[]):yl(n,e,i,r);t.reset(o,ua),t.notifyOnChanges()}return!0}return!1}function xl(t,e,n){const r=Pe();r.firstCreatePass&&(Cl(r,new pl(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),El(r,Te(),e)}function wl(t,e,n,r){const i=Pe();if(i.firstCreatePass){const o=De();Cl(i,new pl(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}El(i,Te(),n)}function Sl(){return t=Te(),e=Ve(),t[19].queries[e].queryList;var t,e}function El(t,e,n){const r=new cl(4==(4&n));io(t,e,r,r.destroy),null===e[19]&&(e[19]=new dl),e[19].queries.push(new hl(r))}function Cl(t,e,n){null===t.queries&&(t.queries=new fl),t.queries.track(new gl(e,n))}function kl(t,e){return t.queries.getByIndex(e)}const Tl=new jn("Application Initializer");let Pl=(()=>{class t{constructor(t){this.appInits=t,this.resolve=oa,this.reject=oa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(ys(e))t.push(e);else if(_s(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(nr(Tl,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Al=new jn("AppId"),Dl={provide:Al,useFactory:function(){return`${Ol()}${Ol()}${Ol()}`},deps:[]};function Ol(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ml=new jn("Platform Initializer"),Il=new jn("Platform ID"),Ll=new jn("appBootstrapListener");let Nl=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Rl=new jn("LocaleId"),Fl=new jn("DefaultCurrencyCode");class Bl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const jl=function(t){return new il(t)},zl=jl,Vl=function(t){return Promise.resolve(jl(t))},Gl=function(t){const e=jl(t),n=Qr(Zt(t).declarations).reduce((t,e)=>{const n=Qt(e);return n&&t.push(new tl(n)),t},[]);return new Bl(e,n)},Ul=Gl,Hl=function(t){return Promise.resolve(Gl(t))};let ql=(()=>{class t{constructor(){this.compileModuleSync=zl,this.compileModuleAsync=Vl,this.compileModuleAndAllComponentsSync=Ul,this.compileModuleAndAllComponentsAsync=Hl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Wl=(()=>Promise.resolve(0))();function $l(t){"undefined"==typeof Zone?Wl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Yl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ll(!1),this.onMicrotaskEmpty=new ll(!1),this.onStable=new ll(!1),this.onError=new ll(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&e,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Mt.requestAnimationFrame,e=Mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ql(t),t.isCheckStableRunning=!0,Xl(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ql(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Zl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Jl(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return Zl(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Jl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ql(t),Xl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Kl,oa,oa);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Kl={};function Xl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ql(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Zl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Jl(t){t._nesting--,Xl(t)}class tu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ll,this.onMicrotaskEmpty=new ll,this.onStable=new ll,this.onError=new ll}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let eu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yl.assertNotInAngularZone(),$l(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$l(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(nr(Yl))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),nu=(()=>{class t{constructor(){this._applications=new Map,ou.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ou.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class ru{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let iu,ou=new ru,su=!0,au=!1;function lu(){return au=!0,su}const uu=new jn("AllowMultipleToken");class cu{constructor(t,e){this.name=t,this.token=e}}function hu(t,e,n=[]){const r=`Platform: ${e}`,i=new jn(r);return(e=[])=>{let o=du();if(!o||o.injector.get(uu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ro,useValue:"platform"});!function(t){if(iu&&!iu.destroyed&&!iu.injector.get(uu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");iu=t.get(pu);const e=t.get(Ml,null);e&&e.forEach(t=>t())}(Ko.create({providers:t,name:r}))}return function(t){const e=du();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function du(){return iu&&!iu.destroyed?iu:null}let pu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new tu:("zone.js"===t?void 0:t)||new Yl({enableLongStackTrace:lu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Yl,useValue:n}];return n.run(()=>{const e=Ko.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Kr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{mu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ys(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Pl);return t.runInitializers(),t.donePromise.then(()=>($s(i.injector.get(Rl,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=fu({},e);return function(t,e,n){const r=new il(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(gu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${nt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(nr(Ko))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function fu(t,e){return Array.isArray(e)?e.reduce(fu,t):Object.assign(Object.assign({},t),e)}let gu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Yl.assertNotInAngularZone(),$l(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Yl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=q(o,s.pipe(J()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof na?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Va),i=n.create(Ko.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(eu,null),a=s&&i.injector.get(nu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),mu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;mu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ll,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(nr(Yl),nr(Ko),nr(Kr),nr(ia),nr(Pl))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function mu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class vu{}class yu{}const bu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let _u=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||bu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>xu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>xu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(nr(ql),nr(yu,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function xu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const wu=hu(null,"core",[{provide:Il,useValue:"unknown"},{provide:pu,deps:[Ko]},{provide:nu,deps:[]},{provide:Nl,deps:[]}]),Su=[{provide:gu,useClass:gu,deps:[Yl,Ko,Kr,ia,Pl]},{provide:Ja,deps:[Yl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Pl,useClass:Pl,deps:[[new ar,Tl]]},{provide:ql,useClass:ql,deps:[]},Dl,{provide:Ca,useFactory:function(){return La},deps:[]},{provide:Ta,useFactory:function(){return Na},deps:[]},{provide:Rl,useFactory:function(t){return $s(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new sr(Rl),new ar,new lr]]},{provide:Fl,useValue:"USD"}];let Eu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(nr(gu))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:Su}),t})(),Cu=null;function ku(){return Cu}const Tu=new jn("DocumentToken");let Pu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({factory:Au,token:t,providedIn:"platform"}),t})();function Au(){return nr(Ou)}const Du=new jn("Location Initialized");let Ou=(()=>{class t extends Pu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ku().getBaseHref(this._doc)}onPopState(t){const e=ku().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=ku().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Mu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Mu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(nr(Tu))},t.\u0275prov=dt({factory:Iu,token:t,providedIn:"platform"}),t})();function Mu(){return!!window.history.pushState}function Iu(){return new Ou(nr(Tu))}function Lu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Nu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ru(t){return t&&"?"!==t[0]?"?"+t:t}let Fu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({factory:Bu,token:t,providedIn:"root"}),t})();function Bu(t){const e=nr(Tu).location;return new zu(nr(Pu),e&&e.origin||"")}const ju=new jn("appBaseHref");let zu=(()=>{class t extends Fu{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Lu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Ru(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Ru(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Ru(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(nr(Pu),nr(ju,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Vu=(()=>{class t extends Fu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Lu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Ru(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Ru(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(nr(Pu),nr(ju,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Gu=(()=>{class t{constructor(t,e){this._subject=new ll,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Nu(Hu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Ru(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Hu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ru(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ru(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(nr(Fu),nr(Pu))},t.normalizeQueryParams=Ru,t.joinWithSlash=Lu,t.stripTrailingSlash=Nu,t.\u0275prov=dt({factory:Uu,token:t,providedIn:"root"}),t})();function Uu(){return new Gu(nr(Fu),nr(Pu))}function Hu(t){return t.replace(/\/index.html$/,"")}var qu=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Wu{}let $u=(()=>{class t extends Wu{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Hs(e);if(n)return n;const r=e.split("-")[0];if(n=Hs(r),n)return n;if("en"===r)return Gs;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[qs.PluralCase]}(e||this.locale)(t)){case qu.Zero:return"zero";case qu.One:return"one";case qu.Two:return"two";case qu.Few:return"few";case qu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(nr(Rl))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function Yu(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class Ku{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xu=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Ku(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Qu(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Qu(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(hs(Ha),hs(Fa),hs(Ca))},t.\u0275dir=Kt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Qu{constructor(t,e){this.record=t,this.view=e}}let Zu=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Ju,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(hs(Ha),hs(Fa))},t.\u0275dir=Kt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Ju{constructor(){this.$implicit=null,this.ngIf=null}}function tc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${nt(e)}'.`)}class ec{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class nc{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const rc=new nc,ic=new ec;let oc=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(ys(e))return rc;if(bs(e))return ic;throw Error(`InvalidPipeArgument: '${e}' for pipe '${nt(t)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(hs(Ma,16))},t.\u0275pipe=Xt({name:"async",type:t,pure:!1}),t})(),sc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[{provide:Wu,useClass:$u}]}),t})();function ac(t){return"browser"===t}function lc(t){return"server"===t}let uc=(()=>{class t{}return t.\u0275prov=dt({token:t,providedIn:"root",factory:()=>new cc(nr(Tu),window)}),t})();class cc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=hc(this.window.history)||hc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function hc(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class dc{}class pc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new pc,Cu||(Cu=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(gc=gc||document.querySelector("base"),gc?gc.getAttribute("href"):null);return null==e?null:function(t){fc=fc||document.createElement("a"),fc.setAttribute("href",t);const e=fc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Yu(document.cookie,t)}}let fc,gc=null;const mc=new jn("TRANSITION_ID"),vc=[{provide:Tl,useFactory:function(t,e,n){return()=>{n.get(Pl).donePromise.then(()=>{const n=ku();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[mc,Tu,Ko],multi:!0}];class yc{static init(){var t;t=new yc,ou=t}addToWindow(t){Mt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Mt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Mt.getAllAngularRootElements=()=>t.getAllRootElements(),Mt.frameworkStabilizers||(Mt.frameworkStabilizers=[]),Mt.frameworkStabilizers.push(t=>{const e=Mt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?ku().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let bc=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const _c=new jn("EventManagerPlugins");let xc=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(nr(_c),nr(Yl))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class wc{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=ku().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Sc=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Ec=(()=>{class t extends Sc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Cc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Cc))}}return t.\u0275fac=function(e){return new(e||t)(nr(Tu))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function Cc(t){ku().remove(t)}const kc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tc=/%COMP%/g;function Pc(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Pc(t,i,n):(i=i.replace(Tc,t),n.push(i))}return n}function Ac(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dc=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Oc(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Tt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Mc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Tt.ShadowDom:return new Ic(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Pc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(nr(xc),nr(Ec),nr(Al))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class Oc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(kc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=kc[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=kc[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Zr.DashCase|Zr.Important)?t.style.setProperty(e,n,r&Zr.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Zr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ac(n)):this.eventManager.addEventListener(t,e,Ac(n))}}class Mc extends Oc{constructor(t,e,n,r){super(t),this.component=n;const i=Pc(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Tc,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Tc,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Ic extends Oc{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Pc(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Lc=(()=>{class t extends wc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(nr(Tu))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Nc=["alt","control","meta","shift"],Rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Bc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let jc=(()=>{class t extends wc{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ku().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Nc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Fc.hasOwnProperty(e)&&(e=Fc[e]))}return Rc[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Nc.forEach(r=>{r!=n&&(0,Bc[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(nr(Tu))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),zc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({factory:function(){return nr(Gc)},token:t,providedIn:"root"}),t})();function Vc(t){return new Gc(t.get(Tu))}let Gc=(()=>{class t extends zc{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Gr.NONE:return e;case Gr.HTML:return yr(e,"HTML")?vr(e):function(t,e){let n=null;try{zr=zr||function(t){const e=new xr(t);return function(){try{return!!(new window.DOMParser).parseFromString(cr(""),"text/html")}catch(t){return!1}}()?new _r(e):e}(t);let r=e?String(e):"";n=zr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=zr.getInertBodyElement(r)}while(r!==o);return cr((new Rr).sanitizeChildren(Vr(n)||n))}finally{if(n){const t=Vr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e)).toString();case Gr.STYLE:return yr(e,"Style")?vr(e):e;case Gr.SCRIPT:if(yr(e,"Script"))return vr(e);throw new Error("unsafe value used in a script context");case Gr.URL:return br(e),yr(e,"URL")?vr(e):Er(String(e));case Gr.RESOURCE_URL:if(yr(e,"ResourceURL"))return vr(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new dr(t)}bypassSecurityTrustStyle(t){return new pr(t)}bypassSecurityTrustScript(t){return new fr(t)}bypassSecurityTrustUrl(t){return new gr(t)}bypassSecurityTrustResourceUrl(t){return new mr(t)}}return t.\u0275fac=function(e){return new(e||t)(nr(Tu))},t.\u0275prov=dt({factory:function(){return Vc(nr(Lo))},token:t,providedIn:"root"}),t})();const Uc=hu(wu,"browser",[{provide:Il,useValue:"browser"},{provide:Ml,useValue:function(){pc.makeCurrent(),yc.init()},multi:!0},{provide:Tu,useFactory:function(){return function(t){de=t}(document),document},deps:[]}]),Hc=[[],{provide:Ro,useValue:"root"},{provide:Kr,useFactory:function(){return new Kr},deps:[]},{provide:_c,useClass:Lc,multi:!0,deps:[Tu,Yl,Il]},{provide:_c,useClass:jc,multi:!0,deps:[Tu]},[],{provide:Dc,useClass:Dc,deps:[xc,Ec,Al]},{provide:ca,useExisting:Dc},{provide:Sc,useExisting:Ec},{provide:Ec,useClass:Ec,deps:[Tu]},{provide:eu,useClass:eu,deps:[Yl]},{provide:xc,useClass:xc,deps:[_c,Yl]},{provide:dc,useClass:bc,deps:[]},[]];let qc=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Al,useValue:e.appId},{provide:mc,useExisting:Al},vc]}}}return t.\u0275fac=function(e){return new(e||t)(nr(t,12))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:Hc,imports:[sc,Eu]}),t})();"undefined"!=typeof window&&window;class Wc{}function $c(t,e){return{type:7,name:t,definitions:e,options:{}}}function Yc(t,e=null){return{type:4,styles:e,timings:t}}function Kc(t,e=null){return{type:2,steps:t,options:e}}function Xc(t){return{type:6,styles:t,offset:null}}function Qc(t,e,n){return{type:0,name:t,styles:e,options:n}}function Zc(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Jc(t){Promise.resolve(null).then(t)}class th{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Jc(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class eh{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Jc(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function nh(){return"undefined"!=typeof window&&void 0!==window.document}function rh(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ih(t){switch(t.length){case 0:return new th;case 1:return t[0];default:return new eh(t)}}function oh(t,e,n,r,i={},o={}){const s=[],a=[];let l=-1,u=null;if(r.forEach(t=>{const n=t.offset,r=n==l,c=r&&u||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}c[r]=a}),r||a.push(c),u=c,l=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function sh(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&ah(n,"start",t)));break;case"done":t.onDone(()=>r(n&&ah(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&ah(n,"destroy",t)))}}function ah(t,e,n){const r=n.totalTime,i=lh(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function lh(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function uh(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function ch(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let hh=(t,e)=>!1,dh=(t,e)=>!1,ph=(t,e,n)=>[];const fh=rh();(fh||"undefined"!=typeof Element)&&(hh=nh()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),dh=(()=>{if(fh||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):dh}})(),ph=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let gh=null,mh=!1;function vh(t){gh||(gh=("undefined"!=typeof document?document.body:null)||{},mh=!!gh.style&&"WebkitAppearance"in gh.style);let e=!0;return gh.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in gh.style,!e&&mh)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in gh.style),e}const yh=dh,bh=hh,_h=ph;function xh(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let wh=(()=>{class t{validateStyleProperty(t){return vh(t)}matchesElement(t,e){return yh(t,e)}containsElement(t,e){return bh(t,e)}query(t,e,n){return _h(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new th(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Sh=(()=>{class t{}return t.NOOP=new wh,t})();function Eh(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ch(parseFloat(e[1]),e[2])}function Ch(t,e){switch(e){case"s":return 1e3*t;default:return t}}function kh(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Ch(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Ch(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Th(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Ph(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Th(t,n);return n}function Ah(t,e,n){return n?e+":"+n+";":""}function Dh(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Ah(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Ah(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Oh(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=jh(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),rh()&&Dh(t))}function Mh(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=jh(e);t.style[n]=""}),rh()&&Dh(t))}function Ih(t){return Array.isArray(t)?1==t.length?t[0]:Kc(t):t}const Lh=new RegExp("{{\\s*(.+?)\\s*}}","g");function Nh(t){let e=[];if("string"==typeof t){let n;for(;n=Lh.exec(t);)e.push(n[1]);Lh.lastIndex=0}return e}function Rh(t,e,n){const r=t.toString(),i=r.replace(Lh,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Fh(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Bh=/-+([a-z0-9])/g;function jh(t){return t.replace(Bh,(...t)=>t[1].toUpperCase())}function zh(t,e){return 0===t||0===e}function Vh(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=Uh(t,e)})}}return e}function Gh(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Uh(t,e){return window.getComputedStyle(t)[e]}function Hh(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push($h(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push($h(s,i))}(t,n,e)):n.push(t),n}const qh=new Set(["true","1"]),Wh=new Set(["false","0"]);function $h(t,e){const n=qh.has(t)||Wh.has(t),r=qh.has(e)||Wh.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?qh.has(t):Wh.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?qh.has(e):Wh.has(e)),s&&a}}const Yh=new RegExp("s*:selfs*,?","g");function Kh(t,e,n){return new Xh(t).build(e,n)}class Xh{constructor(t){this._driver=t}build(t,e){const n=new Qh(e);return this._resetContextStyleTimingState(n),Gh(this,Ih(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(Zh(t)){const e=t;Object.keys(e).forEach(t=>{Nh(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Fh(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Gh(this,Ih(t.animation),e);return{type:1,matchers:Hh(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Jh(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Gh(this,t,e)),options:Jh(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Gh(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Jh(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return td(kh(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=td(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||kh(r,e),td(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Xc({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Xc(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Zh(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Nh(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Zh(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Zh(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),s=s||u<0||u>1,o=o||u<a,a=u,i.push(u),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return l.forEach((t,r)=>{const o=c>0?r==h?1:c*r:i[r],s=o*f;e.currentTime=d+p.delay+s,p.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Gh(this,Ih(t.animation),e),options:Jh(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Jh(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Jh(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Yh,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,uh(e.collectedStyles,e.currentQuerySelector,{});const s=Gh(this,Ih(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Jh(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:kh(t.timings,e.errors,!0);return{type:12,animation:Gh(this,Ih(t.animation),e),timings:n,options:null}}}class Qh{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Zh(t){return!Array.isArray(t)&&"object"==typeof t}function Jh(t){var e;return t?(t=Th(t)).params&&(t.params=(e=t.params)?Th(e):null):t={},t}function td(t,e,n){return{duration:t,delay:e,easing:n}}function ed(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class nd{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const rd=new RegExp(":enter","g"),id=new RegExp(":leave","g");function od(t,e,n,r,i,o={},s={},a,l,u=[]){return(new sd).buildKeyframes(t,e,n,r,i,o,s,a,l,u)}class sd{buildKeyframes(t,e,n,r,i,o,s,a,l,u=[]){l=l||new nd;const c=new ld(t,e,l,r,i,u,[]);c.options=a,c.currentTimeline.setStyles([o],null,c.errors,a),Gh(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[ed(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Eh(n.duration):null,o=null!=n.delay?Eh(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Gh(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ad);const t=Eh(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Gh(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Eh(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),Gh(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return kh(e.params?Rh(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Eh(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ad);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),Gh(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;Gh(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const ad={};class ld{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ad,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new ud(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Eh(n.duration)),null!=n.delay&&(r.delay=Eh(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Rh(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new ld(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=ad,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new cd(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(rd,"."+this._enterClassName)).replace(id,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class ud{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ud(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):Ph(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Rh(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Ph(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Fh(t.values()):[],o=e.size?Fh(e.values()):[];if(n){const t=r[0],e=Th(t);t.offset=0,e.offset=1,r=[t,e]}return ed(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class cd extends ud{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Ph(t[0],!1);a.offset=0,i.push(a);const l=Ph(t[0],!1);l.offset=hd(s),i.push(l);const u=t.length-1;for(let r=1;r<=u;r++){let s=Ph(t[r],!1);s.offset=hd((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return ed(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function hd(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class dd{}class pd extends dd{normalizePropertyName(t,e){return jh(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(fd[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const fd=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function gd(t,e,n,r,i,o,s,a,l,u,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const md={};class vd{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||md,d=this.buildStyles(n,s&&s.params||md,c),p=a&&a.params||md,f=this.buildStyles(r,p,c),g=new Set,m=new Map,v=new Map,y="void"===r,b={params:Object.assign(Object.assign({},h),p)},_=u?[]:od(t,e,this.ast.animation,i,o,d,f,b,l,c);let x=0;if(_.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),c.length)return gd(e,this._triggerName,n,r,y,d,f,[],[],m,v,x,c);_.forEach(t=>{const n=t.element,r=uh(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=uh(v,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const w=Fh(g.values());return gd(e,this._triggerName,n,r,y,d,f,_,w,m,v,x)}}class yd{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Th(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=Rh(o,r,e)),n[t]=o})}}),n}}class bd{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new yd(t.style,t.options&&t.options.params||{})}),_d(this.states,"true","1"),_d(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new vd(t,e,this.states))}),this.fallbackTransition=new vd(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function _d(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const xd=new nd;class wd{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Kh(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=oh(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=od(this._driver,e,i,"ng-enter","ng-leave",{},{},n,xd,r),o.forEach(t=>{const e=uh(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=ih(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=lh(e,"","","");return sh(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Sd=[],Ed={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Cd={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class kd{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Th(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Td=new kd("void");class Pd{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Nd(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=uh(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=uh(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Nd(t,"ng-trigger"),Nd(t,"ng-trigger-"+e),a[e]=Td),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new Dd(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Nd(t,"ng-trigger"),Nd(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const l=new kd(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[e]=l,a||(a=Td),"void"!==l.value&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,l.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Mh(t,n),Oh(t,r)})}return}const u=uh(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=i.matchTransition(a.value,l.value,t,l.params),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:l,player:o,isFallbackTransition:h}),h||(Nd(t,"ng-animate-queued"),o.onStart(()=>{Rd(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),u.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ih(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||Td,a=new kd("void"),l=new Dd(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Ed||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Nd(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=lh(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,sh(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Ad{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Pd(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Od(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Od(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Nd(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Rd(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(Od(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Od(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ih(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Ed,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Nd(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ih(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new nd,r=[],i=new Map,o=[],s=new Map,a=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)u.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Ld(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n="ng-enter"+f++;p.set(e,n),t.forEach(t=>Nd(t,n))});const g=[],m=new Set,v=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const t=this.collectedLeaveElements[D],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):v.add(t))}const y=new Map,b=Ld(h,Array.from(m));b.forEach((t,e)=>{const n="ng-leave"+f++;y.set(e,n),t.forEach(t=>Nd(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>Rd(t,n))}),b.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>Rd(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],x=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const u=!c||!this.driver.containsElement(c,i),h=y.get(i),d=p.get(i),f=this._buildInstruction(t,n,d,h,u);if(f.errors&&f.errors.length)x.push(f);else{if(u)return e.onStart(()=>Mh(i,f.fromStyles)),e.onDestroy(()=>Oh(i,f.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Mh(i,f.fromStyles)),e.onDestroy(()=>Oh(i,f.toStyles)),void r.push(e);f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,f.timelines),o.push({instruction:f,player:e,element:i}),f.queriedElements.forEach(t=>uh(s,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=l.get(e);r||l.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const w=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,w))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{uh(w,e,[]).push(t),t.destroy()})});const E=g.filter(t=>jd(t,a,l)),C=new Map;Id(C,this.driver,v,l,"*").forEach(t=>{jd(t,a,l)&&E.push(t)});const k=new Map;d.forEach((t,e)=>{Id(k,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=C.get(t),n=k.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const T=[],P=[],A={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(u.has(e))return o.onDestroy(()=>Oh(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=A;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,w,i,k,C);if(o.setRealPlayer(n),t===A)T.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=ih(e)),r.push(o)}}else Mh(e,s.fromStyles),o.onDestroy(()=>Oh(e,s.toStyles)),P.push(o),u.has(e)&&r.push(o)}),P.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ih(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let D=0;D<g.length;D++){const t=g[D],e=t.__ng_removed;if(Rd(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Fd(this,t,r):this.processLeaveNode(t)}return g.length=0,T.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),T}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,l=uh(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}Mh(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,l=[],u=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new th(e.duration,e.delay);const p=h!==a,f=function(t){const e=[];return Bd(t,e),e}((n.get(h)||Sd).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),v=oh(0,this._normalizer,0,e.keyframes,g,m),y=this._buildPlayer(e,v,f);if(e.subTimeline&&r&&c.add(h),p){const e=new Dd(t,s,h);e.setRealPlayer(y),l.push(e)}return y});l.forEach(t=>{uh(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>Nd(t,"ng-animating"));const d=ih(h);return d.onDestroy(()=>{u.forEach(t=>Rd(t,"ng-animating")),Oh(a,e.toStyles)}),c.forEach(t=>{uh(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new th(t.duration,t.delay)}}class Dd{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new th,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>sh(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){uh(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Od(t){return t&&1===t.nodeType}function Md(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Id(t,e,n,r,i){const o=[];n.forEach(t=>o.push(Md(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Cd,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>Md(t,o[a++])),s}function Ld(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function Nd(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Rd(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Fd(t,e,n){ih(n).onDone(()=>t.processLeaveNode(e))}function Bd(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof eh?Bd(r.players,e):e.push(r)}}function jd(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class zd{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Ad(t,e,n),this._timelineEngine=new wd(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=Kh(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new bd(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=ch(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=ch(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Vd(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Ud(e[0]),e.length>1&&(r=Ud(e[e.length-1]))):e&&(n=Ud(e)),n||r?new Gd(t,n,r):null}let Gd=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Oh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Oh(this._element,this._initialStyles),this._endStyles&&(Oh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Mh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mh(this._element,this._endStyles),this._endStyles=null),Oh(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Ud(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];Hd(i)&&(e=e||{},e[i]=t[i])}return e}function Hd(t){return"display"===t||"position"===t}class qd{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Qd(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),Xd(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Kd(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Wd(this._element,this._name,"paused")}resume(){Wd(this._element,this._name,"running")}setPosition(t){const e=$d(this._element,this._name);this._position=t*this._duration,Xd(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Kd(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Qd(t,"").split(","),r=Yd(n,e);r>=0&&(n.splice(r,1),Xd(t,"",n.join(",")))}(this._element,this._name))}}function Wd(t,e,n){Xd(t,"PlayState",n,$d(t,e))}function $d(t,e){const n=Qd(t,"");return n.indexOf(",")>0?Yd(n.split(","),e):Yd([n],e)}function Yd(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Kd(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function Xd(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Qd(t,e){return t.style["animation"+e]||""}class Zd{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new qd(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Uh(this.element,n))})}this.currentSnapshot=t}}class Jd extends th{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=xh(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class tp{constructor(){this._count=0}validateStyleProperty(t){return vh(t)}matchesElement(t,e){return yh(t,e)}containsElement(t,e){return bh(t,e)}query(t,e,n){return _h(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>xh(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof Zd),l={};zh(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Vh(t,e,l));if(0==n)return new Jd(t,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=Vd(t,e),p=new Zd(t,e,c,n,r,i,u,d);return p.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),p}}class ep{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Uh(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class np{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(rp().toString()),this._cssKeyframesDriver=new tp}validateStyleProperty(t){return vh(t)}matchesElement(t,e){return yh(t,e)}containsElement(t,e){return bh(t,e)}query(t,e,n){return _h(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},u=o.filter(t=>t instanceof ep);zh(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=Vd(t,e=Vh(t,e=e.map(t=>Ph(t,!1)),l));return new ep(t,e,a,c)}}function rp(){return nh()&&Element.prototype.animate||{}}let ip=(()=>{class t extends Wc{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Tt.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Kc(t):t;return ap(this._renderer,null,e,"register",[n]),new op(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(nr(ca),nr(Tu))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class op extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new sp(this._id,t,e||{},this._renderer)}}class sp{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return ap(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function ap(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let lp=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new up("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new cp(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(nr(ca),nr(zd),nr(Yl))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class up{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class cp extends up{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let hp=(()=>{class t extends zd{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(nr(Tu),nr(Sh),nr(dd))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const dp=new jn("AnimationModuleType"),pp=[{provide:Wc,useClass:ip},{provide:dd,useFactory:function(){return new pd}},{provide:zd,useClass:hp},{provide:ca,useFactory:function(t,e,n){return new lp(t,e,n)},deps:[Dc,zd,Yl]}],fp=[{provide:Sh,useFactory:function(){return"function"==typeof rp()?new np:new tp}},{provide:dp,useValue:"BrowserAnimations"},...pp],gp=[{provide:Sh,useClass:wh},{provide:dp,useValue:"NoopAnimations"},...pp];let mp=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?gp:fp}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:fp,imports:[qc]}),t})();function vp(t){return null!=t&&"false"!=`${t}`}function yp(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function bp(t){return Array.isArray(t)?t:[t]}function _p(t){return t instanceof la?t.nativeElement:t}class xp extends f{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class wp extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Sp(t,e,n,r,i=new wp(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):L(e)(i)}const Ep={};function Cp(...t){let e,n;return C(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),H(t,n).lift(new kp(e))}class kp{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Tp(t,this.resultSelector))}}class Tp extends xp{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ep),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Sp(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ep?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Pp(...t){let e=t[t.length-1];return C(e)?(t.pop(),N(t,e)):H(t)}function Ap(...t){return U(1)(Pp(...t))}const Dp=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})(),Op=new y(t=>t.complete());function Mp(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):Op}function Ip(t){return e=>0===t?Mp():e.lift(new Lp(t))}class Lp{constructor(t){if(this.total=t,this.total<0)throw new Dp}call(t,e){return e.subscribe(new Np(t,this.total))}}class Np extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}class Rp{constructor(t){this.total=t}call(t,e){return e.subscribe(new Fp(t,this.total))}}class Fp extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class Bp extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class jp extends Bp{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let zp=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Vp extends zp{constructor(t,e=zp.now){super(t,()=>Vp.delegate&&Vp.delegate!==this?Vp.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Vp.delegate&&Vp.delegate!==this?Vp.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Gp=new Vp(jp);function Up(t,e=Gp){return n=>n.lift(new Hp(t,e))}class Hp{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new qp(t,this.dueTime,this.scheduler))}}class qp extends f{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Wp,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Wp(t){t.debouncedNext()}function $p(...t){const e=t[t.length-1];return C(e)?(t.pop(),n=>Ap(t,n,e)):e=>Ap(t,e)}function Yp(t){return e=>e.lift(new Kp(t))}class Kp{constructor(t){this.notifier=t}call(t,e){const n=new Xp(t),r=j(this.notifier,new F(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Xp extends B{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Qp;try{Qp="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Pw){Qp=!1}let Zp,Jp,tf,ef,nf=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?ac(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Qp)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(nr(Il))},t.\u0275prov=dt({factory:function(){return new t(nr(Il))},token:t,providedIn:"root"}),t})(),rf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();function of(t){return function(){if(null==Zp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Zp=!0}))}finally{Zp=Zp||!1}return Zp}()?t:!!t.capture}function sf(){if("object"!=typeof document||!document)return 0;if(null==Jp){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",t.appendChild(n),document.body.appendChild(t),Jp=0,0===t.scrollLeft&&(t.scrollLeft=1,Jp=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return Jp}let af=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();const lf=new Set;let uf,cf=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):hf}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!lf.has(t))try{uf||(uf=document.createElement("style"),uf.setAttribute("type","text/css"),document.head.appendChild(uf)),uf.sheet&&(uf.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),lf.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(nr(nf))},t.\u0275prov=dt({factory:function(){return new t(nr(nf))},token:t,providedIn:"root"}),t})();function hf(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let df=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new S}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return pf(bp(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){let e=Cp(pf(bp(t)).map(t=>this._registerQuery(t).observable));return e=Ap(e.pipe(Ip(1)),e.pipe(t=>t.lift(new Rp(1)),Up(0))),e.pipe(k(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(({matches:t,query:n})=>{e.matches=e.matches||t,e.breakpoints[n]=t}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new y(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe($p(e),k(({matches:e})=>({query:t,matches:e})),Yp(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.\u0275fac=function(e){return new(e||t)(nr(cf),nr(Yl))},t.\u0275prov=dt({factory:function(){return new t(nr(cf),nr(Yl))},token:t,providedIn:"root"}),t})();function pf(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class ff extends S{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(t){super.next(this._value=t)}}function gf(t,e){return function(n){return n.lift(new mf(t,e))}}class mf{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new vf(t,this.predicate,this.thisArg))}}class vf extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function yf(){}function bf(t,e,n){return function(r){return r.lift(new _f(t,e,n))}}class _f{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new xf(t,this.nextOrObserver,this.error,this.complete))}}class xf extends f{constructor(t,e,n,i){super(t),this._tapNext=yf,this._tapError=yf,this._tapComplete=yf,this._tapError=n||yf,this._tapComplete=i||yf,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||yf,this._tapError=e.error||yf,this._tapComplete=e.complete||yf)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}const wf={provide:Ll,useFactory:function(t,e){return()=>{if(ac(e)){const e=Array.from(t.querySelectorAll(`[class*=${Sf}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(t=>{t.classList.contains(`${Sf}ssr`)&&t.parentNode?t.parentNode.removeChild(t):t.className.replace(n,"")})}}},deps:[Tu,Il],multi:!0},Sf="flex-layout-";let Ef=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[wf]}),t})();class Cf{constructor(t=!1,e="all",n="",r="",i=0){this.matches=t,this.mediaQuery=e,this.mqAlias=n,this.suffix=r,this.priority=i,this.property=""}clone(){return new Cf(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let kf=(()=>{class t{constructor(){this.stylesheet=new Map}addStyleToElement(t,e,n){const r=this.stylesheet.get(t);r?r.set(e,n):this.stylesheet.set(t,new Map([[e,n]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,e){const n=this.stylesheet.get(t);let r="";if(n){const t=n.get(e);"number"!=typeof t&&"string"!=typeof t||(r=t+"")}return r}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Tf={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},Pf=new jn("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Tf}),Af=new jn("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Df=new jn("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Of(t,e){return t=t?t.clone():new Cf,e&&(t.mqAlias=e.alias,t.mediaQuery=e.mediaQuery,t.suffix=e.suffix,t.priority=e.priority),t}const Mf=["row","column","row-reverse","column-reverse"];function If(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}let Lf=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.styleBuilder=e,this.styler=n,this.marshal=r,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new S,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(e=>{if(-1!==this.inputs.indexOf(e)){const n=e.split(".").slice(1).join(".");this.setValue(t[e].currentValue,n)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,e){const n=this.styleBuilder,r=n.shouldCache;let i=this.styleCache.get(t);i&&r||(i=n.buildStyles(t,e),r&&this.styleCache.set(t,i)),this.mru=Object.assign({},i),this.applyStyleToElement(i),n.sideEffect(t,i,e)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,e=!1){if(t){const[n,r]=this.styler.getFlowDirection(t);if(!r&&e){const e=function(t){let[e,n,r]=function(t){t=t?t.toLowerCase():"";let[e,n,r]=t.split(" ");return Mf.find(t=>t===e)||(e=Mf[0]),"inline"===n&&(n="inline"!==r?r:"",r="inline"),[e,If(n),!!r]}(t);return function(t,e=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":e||null}}(e,n,r)}(n);this.styler.applyStyleToElements(e,[t])}return n.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,e,n=this.nativeElement){this.styler.applyStyleToElement(n,t,e)}setValue(t,e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,e)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return t.\u0275fac=function(t){!function(){throw new Error("invalid")}()},t.\u0275dir=Kt({type:t,features:[ae]}),t})();const Nf=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Rf="(orientation: portrait) and (max-width: 599.98px)",Ff="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",Bf="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",jf="(orientation: portrait) and (min-width: 840px)",zf="(orientation: landscape) and (min-width: 1280px)",Vf={HANDSET:`${Rf}, (orientation: landscape) and (max-width: 959.98px)`,TABLET:`${Ff} , ${Bf}`,WEB:`${jf}, ${zf} `,HANDSET_PORTRAIT:`${Rf}`,TABLET_PORTRAIT:`${Ff} `,WEB_PORTRAIT:`${jf}`,HANDSET_LANDSCAPE:"(orientation: landscape) and (max-width: 959.98px)",TABLET_LANDSCAPE:`${Bf}`,WEB_LANDSCAPE:`${zf}`},Gf=[{alias:"handset",priority:2e3,mediaQuery:Vf.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Vf.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Vf.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Vf.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Vf.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Vf.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Vf.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Vf.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Vf.WEB_PORTRAIT,overlapping:!0}],Uf=/(\.|-|_)/g;function Hf(t){let e=t.length>0?t.charAt(0):"",n=t.length>1?t.slice(1):"";return e.toUpperCase()+n}const qf=new jn("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const t=rr(Df),e=rr(Pf),n=[].concat.apply([],(t||[]).map(t=>Array.isArray(t)?t:[t]));return function(t,e=[]){const n={};return t.forEach(t=>{n[t.alias]=t}),e.forEach(t=>{n[t.alias]?function(t,...e){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let n of e)if(null!=n)for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}(n[t.alias],t):n[t.alias]=t}),(r=Object.keys(n).map(t=>n[t])).forEach(t=>{t.suffix||(t.suffix=t.alias.replace(Uf,"|").split("|").map(Hf).join(""),t.overlapping=!!t.overlapping)}),r;var r}((e.disableDefaultBps?[]:Nf).concat(e.addOrientationBps?Gf:[]),n)}});function Wf(t,e){return(e&&e.priority||0)-(t&&t.priority||0)}function $f(t,e){return(t.priority||0)-(e.priority||0)}let Yf=(()=>{class t{constructor(t){this.findByMap=new Map,this.items=[...t].sort($f)}findByAlias(t){return t?this.findWithPredicate(t,e=>e.alias==t):null}findByQuery(t){return this.findWithPredicate(t,e=>e.mediaQuery==t)}get overlappings(){return this.items.filter(t=>1==t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t.suffix?t.suffix:"")}findWithPredicate(t,e){let n=this.findByMap.get(t);return n||(n=this.items.find(e)||null,this.findByMap.set(t,n)),n||null}}return t.\u0275fac=function(e){return new(e||t)(nr(qf))},t.\u0275prov=dt({factory:function(){return new t(nr(qf))},token:t,providedIn:"root"}),t})(),Kf=(()=>{class t{constructor(t,e,n){this._zone=t,this._platformId=e,this._document=n,this.source=new ff(new Cf(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((e,n)=>{e.matches&&t.push(n)}),t}isActive(t){const e=this.registry.get(t);return e?e.matches:this.registerQuery(t).some(t=>t.matches)}observe(t,e=!1){if(t&&t.length){const n=this._observable$.pipe(gf(n=>!e||t.indexOf(n.mediaQuery)>-1));return q(new y(e=>{const n=this.registerQuery(t);if(n.length){const t=n.pop();n.forEach(t=>{e.next(t)}),this.source.next(t)}e.complete()}),n)}return this._observable$}registerQuery(t){const e=Array.isArray(t)?t:[t],n=[];return function(t,e){const n=t.filter(t=>!Xf[t]);if(n.length>0){const t=n.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${t} {.fx-query-test{ }}\n`)),e.head.appendChild(r),n.forEach(t=>Xf[t]=r)}catch(r){console.error(r)}}}(e,this._document),e.forEach(t=>{const e=e=>{this._zone.run(()=>this.source.next(new Cf(e.matches,t)))};let r=this.registry.get(t);r||(r=this.buildMQL(t),r.addListener(e),this.pendingRemoveListenerFns.push(()=>r.removeListener(e)),this.registry.set(t,r)),r.matches&&n.push(new Cf(!0,t))}),n}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function(t,e){return e&&window.matchMedia("all").addListener?window.matchMedia(t):{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,ac(this._platformId))}}return t.\u0275fac=function(e){return new(e||t)(nr(Yl),nr(Il),nr(Tu))},t.\u0275prov=dt({factory:function(){return new t(nr(Yl),nr(Il),nr(Tu))},token:t,providedIn:"root"}),t})();const Xf={},Qf={alias:"print",mediaQuery:"print",priority:1e3};let Zf=(()=>{class t{constructor(t,e,n){this.breakpoints=t,this.layoutConfig=e,this._document=n,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new Jf,this.deactivations=[]}withPrintQuery(t){return[...t,"print"]}isPrintEvent(t){return t.mediaQuery.startsWith("print")}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const e=this.breakpoints.findByQuery(t);return(e?[...this.printBreakPoints,e]:this.printBreakPoints).sort(Wf)}updateEvent(t){let e=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(e=this.getEventBreakpoints(t)[0],t.mediaQuery=e?e.mediaQuery:""),Of(t,e)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const e=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new Cf(!0,"print"))),t.updateStyles())},n=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",e),this._document.defaultView.addEventListener("afterprint",n),this.beforePrintEventListeners.push(e),this.afterPrintEventListeners.push(n)}interceptEvents(t){return this.registerBeforeAfterPrintHooks(t),e=>{this.isPrintEvent(e)?e.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(e)),t.updateStyles()):e.matches||!this.isPrinting||this.isPrintingBeforeAfterEvent||(this.stopPrinting(t),t.updateStyles()):this.collectActivations(e)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,e){this.isPrinting=!0,t.activatedBreakpoints=this.queue.addPrintBreakpoints(e)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(t){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(t.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const e=this.breakpoints.findByQuery(t.mediaQuery);e&&(this.deactivations.push(e),this.deactivations.sort(Wf))}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return t.\u0275fac=function(e){return new(e||t)(nr(Yf),nr(Pf),nr(Tu))},t.\u0275prov=dt({factory:function(){return new t(nr(Yf),nr(Pf),nr(Tu))},token:t,providedIn:"root"}),t})();class Jf{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(Qf),t.sort(Wf),t.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(e=>e.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function(t){return!!t&&t.mediaQuery.startsWith("print")}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}function tg(t){for(let e in t){let n=t[e]||"";switch(e){case"display":t.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+e]=n;break;case"flex-direction":n=n||"row",t["-webkit-flex-direction"]=n,t["flex-direction"]=n;break;case"order":t.order=t["-webkit-"+e]=isNaN(+n)?"0":n}}return t}let eg=(()=>{class t{constructor(t,e,n,r){this._serverStylesheet=t,this._serverModuleLoaded=e,this._platformId=n,this.layoutConfig=r}applyStyleToElement(t,e,n=null){let r={};"string"==typeof e&&(r[e]=n,e=r),r=this.layoutConfig.disableVendorPrefixes?e:tg(e),this._applyMultiValueStyleToElement(r,t)}applyStyleToElements(t,e=[]){const n=this.layoutConfig.disableVendorPrefixes?t:tg(t);e.forEach(t=>{this._applyMultiValueStyleToElement(n,t)})}getFlowDirection(t){let e=this.lookupStyle(t,"flex-direction");return[e||"row",this.lookupInlineStyle(t,"flex-direction")||lc(this._platformId)&&this._serverModuleLoaded?e:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,e){return t.getAttribute(e)||""}lookupInlineStyle(t,e){return ac(this._platformId)?t.style.getPropertyValue(e):this._getServerStyle(t,e)}lookupStyle(t,e,n=!1){let r="";return t&&((r=this.lookupInlineStyle(t,e))||(ac(this._platformId)?n||(r=getComputedStyle(t).getPropertyValue(e)):this._serverModuleLoaded&&(r=this._serverStylesheet.getStyleForElement(t,e)))),r?r.trim():""}_applyMultiValueStyleToElement(t,e){Object.keys(t).sort().forEach(n=>{const r=t[n],i=Array.isArray(r)?r:[r];i.sort();for(let t of i)t=t?t+"":"",ac(this._platformId)||!this._serverModuleLoaded?ac(this._platformId)?e.style.setProperty(n,t):this._setServerStyle(e,n,t):this._serverStylesheet.addStyleToElement(e,n,t)})}_setServerStyle(t,e,n){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const r=this._readStyleAttribute(t);r[e]=n||"",this._writeStyleAttribute(t,r)}_getServerStyle(t,e){return this._readStyleAttribute(t)[e]||""}_readStyleAttribute(t){const e={},n=t.getAttribute("style");if(n){const t=n.split(/;+/g);for(let n=0;n<t.length;n++){const r=t[n].trim();if(r.length>0){const t=r.indexOf(":");if(-1===t)throw new Error(`Invalid CSS style: ${r}`);e[r.substr(0,t).trim()]=r.substr(t+1).trim()}}}return e}_writeStyleAttribute(t,e){let n="";for(const r in e)e[r]&&(n+=r+":"+e[r]+";");t.setAttribute("style",n)}}return t.\u0275fac=function(e){return new(e||t)(nr(kf),nr(Af),nr(Il),nr(Pf))},t.\u0275prov=dt({factory:function(){return new t(nr(kf),nr(Af),nr(Il),nr(Pf))},token:t,providedIn:"root"}),t})();class ng{constructor(){this.shouldCache=!0}sideEffect(t,e,n){}}let rg=(()=>{class t{constructor(t,e,n){this.matchMedia=t,this.breakpoints=e,this.hook=n,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new S,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(t){const e=this.findByQuery(t.mediaQuery);e&&((t=Of(t,e)).matches&&-1===this.activatedBreakpoints.indexOf(e)?(this.activatedBreakpoints.push(e),this.activatedBreakpoints.sort(Wf),this.updateStyles()):t.matches||-1===this.activatedBreakpoints.indexOf(e)||(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(e),1),this.activatedBreakpoints.sort(Wf),this.updateStyles()))}init(t,e,n,r,i=[]){ig(this.updateMap,t,e,n),ig(this.clearMap,t,e,r),this.buildElementKeyMap(t,e),this.watchExtraTriggers(t,e,i)}getValue(t,e,n){const r=this.elementMap.get(t);if(r){const t=void 0!==n?r.get(n):this.getActivatedValues(r,e);if(t)return t.get(e)}}hasValue(t,e){const n=this.elementMap.get(t);if(n){const t=this.getActivatedValues(n,e);if(t)return void 0!==t.get(e)||!1}return!1}setValue(t,e,n,r){let i=this.elementMap.get(t);if(i){const o=(i.get(r)||new Map).set(e,n);i.set(r,o),this.elementMap.set(t,i)}else i=(new Map).set(r,(new Map).set(e,n)),this.elementMap.set(t,i);const o=this.getValue(t,e);void 0!==o&&this.updateElement(t,e,o)}trackValue(t,e){return this.subject.asObservable().pipe(gf(n=>n.element===t&&n.key===e))}updateStyles(){this.elementMap.forEach((t,e)=>{const n=new Set(this.elementKeyMap.get(e));let r=this.getActivatedValues(t);r&&r.forEach((t,r)=>{this.updateElement(e,r,t),n.delete(r)}),n.forEach(n=>{if(r=this.getActivatedValues(t,n),r){const t=r.get(n);this.updateElement(e,n,t)}else this.clearElement(e,n)})})}clearElement(t,e){const n=this.clearMap.get(t);if(n){const r=n.get(e);r&&(r(),this.subject.next({element:t,key:e,value:""}))}}updateElement(t,e,n){const r=this.updateMap.get(t);if(r){const i=r.get(e);i&&(i(n),this.subject.next({element:t,key:e,value:n}))}}releaseElement(t){const e=this.watcherMap.get(t);e&&(e.forEach(t=>t.unsubscribe()),this.watcherMap.delete(t));const n=this.elementMap.get(t);n&&(n.forEach((t,e)=>n.delete(e)),this.elementMap.delete(t))}triggerUpdate(t,e){const n=this.elementMap.get(t);if(n){const r=this.getActivatedValues(n,e);r&&(e?this.updateElement(t,e,r.get(e)):r.forEach((e,n)=>this.updateElement(t,n,e)))}}buildElementKeyMap(t,e){let n=this.elementKeyMap.get(t);n||(n=new Set,this.elementKeyMap.set(t,n)),n.add(e)}watchExtraTriggers(t,e,n){if(n&&n.length){let r=this.watcherMap.get(t);if(r||(r=new Map,this.watcherMap.set(t,r)),!r.get(e)){const i=q(...n).subscribe(()=>{const n=this.getValue(t,e);this.updateElement(t,e,n)});r.set(e,i)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,e){for(let r=0;r<this.activatedBreakpoints.length;r++){const n=t.get(this.activatedBreakpoints[r].alias);if(n&&(void 0===e||n.has(e)&&null!=n.get(e)))return n}const n=t.get("");return void 0===e||n&&n.has(e)?n:void 0}observeActivations(){const t=this.breakpoints.items.map(t=>t.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(bf(this.hook.interceptEvents(this)),gf(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return t.\u0275fac=function(e){return new(e||t)(nr(Kf),nr(Yf),nr(Zf))},t.\u0275prov=dt({factory:function(){return new t(nr(Kf),nr(Yf),nr(Zf))},token:t,providedIn:"root"}),t})();function ig(t,e,n,r){if(void 0!==r){let i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)}}new Map,new WeakMap;let og=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[Ef]]}),t})();const sg=new jn("cdk-dir-doc",{providedIn:"root",factory:function(){return rr(Tu)}});let ag=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new ll,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(nr(sg,8))},t.\u0275prov=dt({factory:function(){return new t(nr(sg,8))},token:t,providedIn:"root"}),t})(),lg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();const ug=["row","column","row-reverse","column-reverse"];function cg(t){t=t?t.toLowerCase():"";let[e,n,r]=t.split(" ");return ug.find(t=>t===e)||(e=ug[0]),"inline"===n&&(n="inline"!==r?r:"",r="inline"),[e,dg(n),!!r]}function hg(t){let[e]=cg(t);return e.indexOf("row")>-1}function dg(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}let pg=(()=>{class t extends ng{buildStyles(t){return function(t){let[e,n,r]=cg(t);return function(t,e=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":e||null}}(e,n,r)}(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Nn(t)))(n||t)}}(),t.\u0275prov=dt({factory:function(){return new t},token:t,providedIn:"root"}),t})();const fg=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let gg=(()=>{class t extends Lf{constructor(t,e,n,r){super(t,n,e,r),this.DIRECTIVE_KEY="layout",this.styleCache=vg,this.init()}}return t.\u0275fac=function(e){return new(e||t)(hs(la),hs(eg),hs(pg),hs(rg))},t.\u0275dir=Kt({type:t,features:[Qo]}),t})(),mg=(()=>{class t extends gg{constructor(){super(...arguments),this.inputs=fg}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Nn(t)))(n||t)}}(),t.\u0275dir=Kt({type:t,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[Qo]}),t})();const vg=new Map;new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map;let yg=(()=>{class t extends ng{buildStyles(t,e){const n={},[r,i]=t.split(" ");switch(r){case"center":n["justify-content"]="center";break;case"space-around":n["justify-content"]="space-around";break;case"space-between":n["justify-content"]="space-between";break;case"space-evenly":n["justify-content"]="space-evenly";break;case"end":case"flex-end":n["justify-content"]="flex-end";break;case"start":case"flex-start":default:n["justify-content"]="flex-start"}switch(i){case"start":case"flex-start":n["align-items"]=n["align-content"]="flex-start";break;case"center":n["align-items"]=n["align-content"]="center";break;case"end":case"flex-end":n["align-items"]=n["align-content"]="flex-end";break;case"space-between":n["align-content"]="space-between",n["align-items"]="stretch";break;case"space-around":n["align-content"]="space-around",n["align-items"]="stretch";break;case"baseline":n["align-content"]="stretch",n["align-items"]="baseline";break;case"stretch":default:n["align-items"]=n["align-content"]="stretch"}return function(t,...e){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let n of e)if(null!=n)for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}(n,{display:e.inline?"inline-flex":"flex","flex-direction":e.layout,"box-sizing":"border-box","max-width":"stretch"===i?hg(e.layout)?null:"100%":null,"max-height":"stretch"===i&&hg(e.layout)?"100%":null})}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Nn(t)))(n||t)}}(),t.\u0275prov=dt({factory:function(){return new t},token:t,providedIn:"root"}),t})();const bg=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let _g=(()=>{class t extends Lf{constructor(t,e,n,r){super(t,n,e,r),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Yp(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const e=this.layout||"row",n=this.inline;"row"===e&&n?this.styleCache=kg:"row"!==e||n?"row-reverse"===e&&n?this.styleCache=Pg:"row-reverse"!==e||n?"column"===e&&n?this.styleCache=Tg:"column"!==e||n?"column-reverse"===e&&n?this.styleCache=Ag:"column-reverse"!==e||n||(this.styleCache=Cg):this.styleCache=Sg:this.styleCache=Eg:this.styleCache=wg,this.addStyles(t,{layout:e,inline:n})}onLayoutChange(t){const e=t.value.split(" ");this.layout=e[0],this.inline=t.value.includes("inline"),ug.find(t=>t===this.layout)||(this.layout="row"),this.triggerUpdate()}}return t.\u0275fac=function(e){return new(e||t)(hs(la),hs(eg),hs(yg),hs(rg))},t.\u0275dir=Kt({type:t,features:[Qo]}),t})(),xg=(()=>{class t extends _g{constructor(){super(...arguments),this.inputs=bg}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Nn(t)))(n||t)}}(),t.\u0275dir=Kt({type:t,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[Qo]}),t})();const wg=new Map,Sg=new Map,Eg=new Map,Cg=new Map,kg=new Map,Tg=new Map,Pg=new Map,Ag=new Map;let Dg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[Ef,lg]]}),t})();new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map,new Map;let Og=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[Ef]]}),t})();new da("12.0.0-beta.34");let Mg=(()=>{class t{constructor(t,e){lc(e)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:Pf,useValue:Object.assign(Object.assign({},Tf),e)},{provide:Df,useValue:n,multi:!0},{provide:Af,useValue:!0}]:[{provide:Pf,useValue:Object.assign(Object.assign({},Tf),e)},{provide:Df,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(nr(Af),nr(Il))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[Dg,og,Og],Dg,og,Og]}),t})(),Ig=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(Pw){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===Ng(e))return!1;if(!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=Ng(t);return t.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Lg(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(nr(nf))},t.\u0275prov=dt({factory:function(){return new t(nr(nf))},token:t,providedIn:"root"}),t})();function Lg(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Ng(t){if(!Lg(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Rg{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Ip(1)).subscribe(t)}}let Fg=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new Rg(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(nr(Ig),nr(Yl),nr(Tu))},t.\u0275prov=dt({factory:function(){return new t(nr(Ig),nr(Yl),nr(Tu))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const Bg=new jn("cdk-focus-monitor-default-options"),jg=of({passive:!0,capture:!0});let zg=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=function(t){return 0===t.buttons}(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{!function(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t)?(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=Vg(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)):this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard")},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=Vg(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=_p(t);if(!this._platform.isBrowser||1!==n.nodeType)return Pp(null);const r=function(t){if(function(){if(null==ef){const t="undefined"!=typeof document?document.head:null;ef=!(!t||!t.createShadowRoot&&!t.attachShadow)}return ef}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const o={checkChildren:e,subject:new S,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=_p(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=_p(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=Vg(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===Vg(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,jg),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,jg)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,jg),t.addEventListener("mousedown",this._documentMousedownListener,jg),t.addEventListener("touchstart",this._documentTouchstartListener,jg),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,jg),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,jg),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,jg),t.removeEventListener("mousedown",this._documentMousedownListener,jg),t.removeEventListener("touchstart",this._documentTouchstartListener,jg),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(nr(Yl),nr(nf),nr(Tu,8),nr(Bg,8))},t.\u0275prov=dt({factory:function(){return new t(nr(Yl),nr(nf),nr(Tu,8),nr(Bg,8))},token:t,providedIn:"root"}),t})();function Vg(t){return t.composedPath?t.composedPath()[0]:t.target}let Gg=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black"),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(nr(nf),nr(Tu))},t.\u0275prov=dt({factory:function(){return new t(nr(nf),nr(Tu))},token:t,providedIn:"root"}),t})();const Ug=new da("12.0.5"),Hg=new da("12.0.5"),qg=new jn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Wg,$g=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return lu()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Hg.full!==Ug.full&&console.warn("The Angular Material version ("+Hg.full+") does not match the Angular CDK version ("+Ug.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(nr(Gg),nr(qg,8),nr(Tu))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[lg],lg]}),t})();function Yg(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=vp(t)}}}function Kg(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function Xg(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=vp(t)}}}try{Wg="undefined"!=typeof Intl}catch(Pw){Wg=!1}let Qg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[$g],$g]}),t})(),Zg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[$g,rf],$g]}),t})(),Jg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[$g]]}),t})();const tm=["*",[["mat-toolbar-row"]]],em=["*","mat-toolbar-row"];class nm{constructor(t){this._elementRef=t}}const rm=Kg(nm);let im=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Kt({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),om=(()=>{class t extends rm{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return t.\u0275fac=function(e){return new(e||t)(hs(la),hs(nf),hs(Tu))},t.\u0275cmp=Ut({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){if(1&t&&wl(n,im,5),2&t){let t;_l(t=Sl())&&(e._toolbarRows=t)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&Is("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Qo],ngContentSelectors:em,decls:2,vars:0,template:function(t,e){1&t&&(Ps(tm),As(0),As(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),sm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[$g],$g]}),t})(),am=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[Zg,$g],$g]}),t})();function lm(t,e,n,i){return r(n)&&(i=n,n=void 0),i?lm(t,e,n).pipe(k(t=>l(t)?i(...t):i(t))):new y(r=>{um(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function um(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)um(t[o],e,n,r,i)}r.add(o)}class cm{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new hm(t,this.compare,this.keySelector))}}class hm extends f{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class dm{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new pm(t,this.durationSelector))}}class pm extends B{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=j(n,new F(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function fm(t){return!l(t)&&t-parseFloat(t)+1>=0}function gm(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function mm(t,e=Gp){return n=()=>function(t=0,e,n){let r=-1;return fm(e)?r=Number(e)<1?1:Number(e):C(e)&&(n=e),C(n)||(n=Gp),new y(e=>{const i=fm(t)?t:+t-n.now();return n.schedule(gm,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new dm(n))};var n}function vm(t,e){return"function"==typeof e?n=>n.pipe(vm((n,r)=>R(t(n,r)).pipe(k((t,i)=>e(n,t,r,i))))):e=>e.lift(new ym(t))}class ym{constructor(t){this.project=t}call(t,e){return e.subscribe(new bm(t,this.project))}}class bm extends B{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new F(this),r=this.destination;r.add(n),this.innerSubscription=j(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}class _m extends jp{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class xm extends Vp{}const wm=new xm(_m);function Sm(t,e){return new y(e?n=>e.schedule(Em,0,{error:t,subscriber:n}):e=>e.error(t))}function Em({error:t,subscriber:e}){e.error(t)}let Cm=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Pp(this.value);case"E":return Sm(this.error);case"C":return Mp()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class km extends f{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(km.dispatch,this.delay,new Tm(t,this.destination)))}_next(t){this.scheduleMessage(Cm.createNext(t))}_error(t){this.scheduleMessage(Cm.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Cm.createComplete()),this.unsubscribe()}}class Tm{constructor(t,e){this.notification=t,this.destination=e}}class Pm extends S{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Am(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new _;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(t),o=new x(this,t)),r&&t.add(t=new km(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||wm).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Am{constructor(t,e){this.time=t,this.value=e}}let Dm=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new S,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(mm(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Pp()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(gf(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=_p(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>lm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(nr(Yl),nr(nf),nr(Tu,8))},t.\u0275prov=dt({factory:function(){return new t(nr(Yl),nr(nf),nr(Tu,8))},token:t,providedIn:"root"}),t})(),Om=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=r,this._destroyed=new S,this._elementScrolled=new y(t=>this.ngZone.runOutsideAngular(()=>lm(this.elementRef.nativeElement,"scroll").pipe(Yp(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=sf()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==sf()?t.left=t.right:1==sf()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;!function(){if(null==tf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return tf=!1,tf;if("scrollBehavior"in document.documentElement.style)tf=!0;else{const t=Element.prototype.scrollTo;tf=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return tf}()?(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left)):e.scrollTo(t)}measureScrollOffset(t){const e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;const n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&2==sf()?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&1==sf()?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(hs(la),hs(Dm),hs(Yl),hs(ag,8))},t.\u0275dir=Kt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),Mm=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new S,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(mm(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(nr(nf),nr(Yl),nr(Tu,8))},t.\u0275prov=dt({factory:function(){return new t(nr(nf),nr(Yl),nr(Tu,8))},token:t,providedIn:"root"}),t})(),Im=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();function Lm(t){return e=>e.lift(new Nm(t))}class Nm{constructor(t){this.value=t}call(t,e){return e.subscribe(new Rm(t,this.value))}}class Rm extends f{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const Fm=["*"];function Bm(t,e){if(1&t){const t=vs();fs(0,"div",2),xs("click",function(){return Ae(t),ks()._onBackdropClicked()}),gs()}2&t&&Is("mat-drawer-shown",ks()._isShowingBackdrop())}function jm(t,e){1&t&&(fs(0,"mat-drawer-content"),As(1,2),gs())}const zm=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Vm=["mat-drawer","mat-drawer-content","*"];function Gm(t,e){if(1&t){const t=vs();fs(0,"div",2),xs("click",function(){return Ae(t),ks()._onBackdropClicked()}),gs()}2&t&&Is("mat-drawer-shown",ks()._isShowingBackdrop())}function Um(t,e){1&t&&(fs(0,"mat-sidenav-content",3),As(1,2),gs())}const Hm=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],qm=["mat-sidenav","mat-sidenav-content","*"],Wm=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",$m={transformDrawer:$c("transform",[Qc("open, open-instant",Xc({transform:"none",visibility:"visible"})),Qc("void",Xc({"box-shadow":"none",visibility:"hidden"})),Zc("void => open-instant",Yc("0ms")),Zc("void <=> open, open-instant => void",Yc("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Ym=new jn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),Km=new jn("MAT_DRAWER_CONTAINER");let Xm=(()=>{class t extends Om{constructor(t,e,n,r,i){super(n,r,i),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(hs(Ma),hs(ot(()=>Zm)),hs(la),hs(Dm),hs(Yl))},t.\u0275cmp=Ut({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&Ms("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Qo],ngContentSelectors:Fm,decls:1,vars:0,template:function(t,e){1&t&&(Ps(),As(0))},encapsulation:2,changeDetection:0}),t})(),Qm=(()=>{class t{constructor(t,e,n,r,i,o,s){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=r,this._ngZone=i,this._doc=o,this._container=s,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new S,this._animationEnd=new S,this._animationState="void",this.openedChange=new ll(!0),this._openedStream=this.openedChange.pipe(gf(t=>t),k(()=>{})),this.openedStart=this._animationStarted.pipe(gf(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),Lm(void 0)),this._closedStream=this.openedChange.pipe(gf(t=>!t),k(()=>{})),this.closedStart=this._animationStarted.pipe(gf(t=>t.fromState!==t.toState&&"void"===t.toState),Lm(void 0)),this._destroyed=new S,this.onPositionChanged=new ll,this._modeChanged=new S,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{lm(this._elementRef.nativeElement,"keydown").pipe(gf(t=>27===t.keyCode&&!this.disableClose&&!function(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t)),Yp(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(function(t,e){return e=>e.lift(new cm(t,undefined))}((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:n}=t;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=vp(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"!==this.mode:t}set autoFocus(t){this._autoFocus=vp(t)}get opened(){return this._opened}set opened(t){this.toggle(vp(t))}_takeFocus(){this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var t;const e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(t=!this.opened,e){return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}_setOpen(t,e,n="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=n):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(Ip(1)).subscribe(e=>t(e?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(hs(la),hs(Fg),hs(zg),hs(nf),hs(Yl),hs(Tu,8),hs(Km,8))},t.\u0275cmp=Ut({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&ws("@transform.start",function(t){return e._animationStartListener(t)})("@transform.done",function(t){return e._animationDoneListener(t)}),2&t&&(ls("align",null),zs("@transform",e._animationState),Is("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Fm,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Ps(),fs(0,"div",0),As(1),gs())},directives:[Om],encapsulation:2,data:{animation:[$m.transformDrawer]},changeDetection:0}),t})(),Zm=(()=>{class t{constructor(t,e,n,r,i,o=!1,s){this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=r,this._animationMode=s,this._drawers=new cl,this.backdropClick=new ll,this._destroyed=new S,this._doCheckSubject=new S,this._contentMargins={left:null,right:null},this._contentMarginChanges=new S,t&&t.change.pipe(Yp(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),i.change().pipe(Yp(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=o}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=vp(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:vp(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe($p(this._allDrawers),Yp(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe($p(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Up(10),Yp(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const n=this._left._getWidth();t+=n,e-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._getWidth();else if("push"==this._right.mode){const n=this._right._getWidth();e+=n,t-=n}t=t||null,e=e||null,t===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(gf(t=>t.fromState!==t.toState),Yp(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Yp(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Yp(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Ip(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Yp(q(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return t.\u0275fac=function(e){return new(e||t)(hs(ag,8),hs(la),hs(Yl),hs(Ma),hs(Mm),hs(Ym),hs(dp,8))},t.\u0275cmp=Ut({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){if(1&t&&(wl(n,Xm,5),wl(n,Qm,5)),2&t){let t;_l(t=Sl())&&(e._content=t.first),_l(t=Sl())&&(e._allDrawers=t)}},viewQuery:function(t,e){if(1&t&&xl(Xm,5),2&t){let t;_l(t=Sl())&&(e._userContent=t.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&Is("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[ea([{provide:Km,useExisting:t}])],ngContentSelectors:Vm,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(Ps(zm),us(0,Bm,1,2,"div",0),As(1),As(2,1),us(3,jm,2,0,"mat-drawer-content",1)),2&t&&(ds("ngIf",e.hasBackdrop),Bi(3),ds("ngIf",!e._content))},directives:[Zu,Xm],styles:[Wm],encapsulation:2,changeDetection:0}),t})(),Jm=(()=>{class t extends Xm{constructor(t,e,n,r,i){super(t,e,n,r,i)}}return t.\u0275fac=function(e){return new(e||t)(hs(Ma),hs(ot(()=>ev)),hs(la),hs(Dm),hs(Yl))},t.\u0275cmp=Ut({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&Ms("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Qo],ngContentSelectors:Fm,decls:1,vars:0,template:function(t,e){1&t&&(Ps(),As(0))},encapsulation:2,changeDetection:0}),t})(),tv=(()=>{class t extends Qm{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=vp(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=yp(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=yp(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Nn(t)))(n||t)}}(),t.\u0275cmp=Ut({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(ls("align",null),Ms("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),Is("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Qo],ngContentSelectors:Fm,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Ps(),fs(0,"div",0),As(1),gs())},directives:[Om],encapsulation:2,data:{animation:[$m.transformDrawer]},changeDetection:0}),t})(),ev=(()=>{class t extends Zm{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Nn(t)))(n||t)}}(),t.\u0275cmp=Ut({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){if(1&t&&(wl(n,Jm,5),wl(n,tv,5)),2&t){let t;_l(t=Sl())&&(e._content=t.first),_l(t=Sl())&&(e._allDrawers=t)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&Is("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[ea([{provide:Km,useExisting:t}]),Qo],ngContentSelectors:qm,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(Ps(Hm),us(0,Gm,1,2,"div",0),As(1),As(2,1),us(3,Um,2,0,"mat-sidenav-content",1)),2&t&&(ds("ngIf",e.hasBackdrop),Bi(3),ds("ngIf",!e._content))},directives:[Zu,Jm,Om],styles:[Wm],encapsulation:2,changeDetection:0}),t})(),nv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[sc,$g,rf,Im],Im,$g]}),t})();function rv(t,e){return new y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const l=R(t[a]);let u=!1;n.add(l.subscribe({next:t=>{u||(u=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&u||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}function iv(t){return function(e){const n=new ov(t),r=e.lift(n);return n.caught=r}}class ov{constructor(t){this.selector=t}call(t,e){return e.subscribe(new sv(t,this.selector,this.caught))}}class sv extends B{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new F(this);this.add(r);const i=j(n,r);i!==r&&this.add(i)}}}function av(t){return e=>e.lift(new lv(t))}class lv{constructor(t){this.callback=t}call(t,e){return e.subscribe(new uv(t,this.callback))}}class uv extends f{constructor(t,e){super(t),this.add(new h(e))}}function cv(t,e){return z(t,e,1)}class hv{}class dv{}class pv{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof pv?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new pv;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof pv?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class fv{encodeKey(t){return gv(t)}encodeValue(t){return gv(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function gv(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function mv(t){return`${t}`}class vv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new fv,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new vv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(mv(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(mv(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class yv{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function bv(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function _v(t){return"undefined"!=typeof Blob&&t instanceof Blob}function xv(t){return"undefined"!=typeof FormData&&t instanceof FormData}class wv{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new pv),this.context||(this.context=new yv),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new vv,this.urlWithParams=e}serializeBody(){return null===this.body?null:bv(this.body)||_v(this.body)||xv(this.body)||"string"==typeof this.body?this.body:this.body instanceof vv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xv(this.body)?null:_v(this.body)?this.body.type||null:bv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,u=t.params||this.params;const c=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new wv(n,r,o,{params:u,headers:l,context:c,reportProgress:a,responseType:i,withCredentials:s})}}var Sv=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Ev{constructor(t,e=200,n="OK"){this.headers=t.headers||new pv,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Cv extends Ev{constructor(t={}){super(t),this.type=Sv.ResponseHeader}clone(t={}){return new Cv({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class kv extends Ev{constructor(t={}){super(t),this.type=Sv.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new kv({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Tv extends Ev{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Pv(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Av=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof wv)r=t;else{let i,o;i=n.headers instanceof pv?n.headers:new pv(n.headers),n.params&&(o=n.params instanceof vv?n.params:new vv({fromObject:n.params})),r=new wv(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Pp(r).pipe(cv(t=>this.handler.handle(t)));if(t instanceof wv||"events"===n.observe)return i;const o=i.pipe(gf(t=>t instanceof kv));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(k(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(k(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(k(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(k(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new vv).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Pv(n,e))}post(t,e,n={}){return this.request("POST",t,Pv(n,e))}put(t,e,n={}){return this.request("PUT",t,Pv(n,e))}}return t.\u0275fac=function(e){return new(e||t)(nr(hv))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class Dv{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Ov=new jn("HTTP_INTERCEPTORS");let Mv=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Iv=/^\)\]\}',?\n/;let Lv=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new pv(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Cv({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let u=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(Iv,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,u&&(u=!1,l={error:c,text:l})}}u?(e.next(new kv({body:l,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Tv({error:l,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Tv({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let l=!1;const u=r=>{l||(e.next(o()),l=!0);let i={type:Sv.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:Sv.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:Sv.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(nr(dc))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Nv=new jn("XSRF_COOKIE_NAME"),Rv=new jn("XSRF_HEADER_NAME");class Fv{}let Bv=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(nr(Tu),nr(Il),nr(Nv))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),jv=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(nr(Fv),nr(Rv))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),zv=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Ov,[]);this.chain=t.reduceRight((t,e)=>new Dv(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(nr(dv),nr(Ko))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Vv=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:jv,useClass:Mv}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Nv,useValue:e.cookieName}:[],e.headerName?{provide:Rv,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[jv,{provide:Ov,useExisting:jv,multi:!0},{provide:Fv,useClass:Bv},{provide:Nv,useValue:"XSRF-TOKEN"},{provide:Rv,useValue:"X-XSRF-TOKEN"}]}),t})(),Gv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[Av,{provide:hv,useClass:zv},Lv,{provide:dv,useExisting:Lv}],imports:[[Vv.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const Uv=["*"];function Hv(t){return Error(`Unable to find icon with the name "${t}"`)}function qv(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function Wv(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class $v{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let Yv=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new $v(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,r){const i=this._sanitizer.sanitize(Gr.HTML,n);if(!i)throw Wv(n);return this._addSvgIconConfig(t,e,new $v("",i,r))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new $v(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const r=this._sanitizer.sanitize(Gr.HTML,e);if(!r)throw Wv(e);return this._addSvgIconSetConfig(t,new $v("",r,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(Gr.RESOURCE_URL,t);if(!e)throw qv(t);const n=this._cachedIconsByUrl.get(e);return n?Pp(Kv(n)):this._loadSvgIconFromConfig(new $v(t,null)).pipe(bf(t=>this._cachedIconsByUrl.set(e,t)),k(t=>Kv(t)))}getNamedSvgIcon(t,e=""){const n=Xv(e,t);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):Sm(Hv(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Pp(Kv(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(k(t=>Kv(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?Pp(n):function(...t){if(1===t.length){const e=t[0];if(l(e))return rv(e,null);if(u(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return rv(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return rv(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(k(t=>e(...t)))}return rv(t,null)}(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(iv(e=>{const n=this._sanitizer.sanitize(Gr.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Pp(null)})))).pipe(k(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw Hv(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(bf(e=>t.svgText=e),k(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Pp(null):this._fetchIcon(t).pipe(bf(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:r}=t,i=null!==(e=null==r?void 0:r.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Gr.RESOURCE_URL,n);if(!o)throw qv(n);const s=this._inProgressUrlFetches.get(o);if(s)return s;const a=this._httpClient.get(o,{responseType:"text",withCredentials:i}).pipe(av(()=>this._inProgressUrlFetches.delete(o)),J());return this._inProgressUrlFetches.set(o,a),a}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(Xv(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let r=0;r<this._resolvers.length;r++){const i=this._resolvers[r](e,t);if(i)return(n=i).url&&n.options?new $v(i.url,null,i.options):new $v(i,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(nr(Av,8),nr(zc),nr(Tu,8),nr(Kr))},t.\u0275prov=dt({factory:function(){return new t(nr(Av,8),nr(zc),nr(Tu,8),nr(Kr))},token:t,providedIn:"root"}),t})();function Kv(t){return t.cloneNode(!0)}function Xv(t,e){return t+":"+e}class Qv{constructor(t){this._elementRef=t}}const Zv=Kg(Qv),Jv=new jn("mat-icon-location",{providedIn:"root",factory:function(){const t=rr(Tu),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),ty=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ey=ty.map(t=>`[${t}]`).join(", "),ny=/^url\(['"]?#(.*?)['"]?\)$/;let ry=(()=>{class t extends Zv{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=h.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=vp(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(ey),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)ty.forEach(t=>{const i=e[r],o=i.getAttribute(t),s=o?o.match(ny):null;if(s){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:s[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(Ip(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(hs(la),hs(Yv),Fn("aria-hidden"),hs(Jv),hs(Kr))},t.\u0275cmp=Ut({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(ls("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),Is("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Qo],ngContentSelectors:Uv,decls:1,vars:0,template:function(t,e){1&t&&(Ps(),As(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),iy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[$g],$g]}),t})(),oy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[$g],$g]}),t})();const sy=["*"];class ay{}const ly=Yg(Xg(ay)),uy=new jn("MatNavList");let cy=(()=>{class t extends ly{constructor(){super(...arguments),this._stateChanges=new S}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Nn(t)))(n||t)}}(),t.\u0275cmp=Ut({type:t,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[ea([{provide:uy,useExisting:t}]),Qo,ae],ngContentSelectors:sy,decls:1,vars:0,template:function(t,e){1&t&&(Ps(),As(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),t})(),hy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[Qg,Zg,$g,Jg,sc],Qg,$g,Jg,oy]}),t})();const dy=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function py(t){return new y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?R(n):Mp()).subscribe(e)})}function fy(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new gy(t,e,n))}}class gy{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new my(t,this.accumulator,this.seed,this.hasSeed))}}class my extends f{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function vy(t){return function(e){return 0===t?Mp():e.lift(new yy(t))}}class yy{constructor(t){if(this.total=t,this.total<0)throw new Dp}call(t,e){return e.subscribe(new by(t,this.total))}}class by extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function _y(t=Sy){return e=>e.lift(new xy(t))}class xy{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new wy(t,this.errorFactory))}}class wy extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Sy(){return new dy}function Ey(t=null){return e=>e.lift(new Cy(t))}class Cy{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ky(t,this.defaultValue))}}class ky extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ty(t,e){const n=arguments.length>=2;return r=>r.pipe(t?gf((e,n)=>t(e,n,r)):v,Ip(1),n?Ey(e):_y(()=>new dy))}class Py{constructor(t,e){this.id=t,this.url=e}}class Ay extends Py{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dy extends Py{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oy extends Py{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class My extends Py{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Iy extends Py{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ly extends Py{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ny extends Py{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ry extends Py{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fy extends Py{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class By{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jy{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zy{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vy{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gy{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uy{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hy{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class qy{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Wy(t){return new qy(t)}function $y(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Yy(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ky(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Xy(t[i],e[i]))return!1;return!0}function Xy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Qy(t){return Array.prototype.concat.apply([],t)}function Zy(t){return t.length>0?t[t.length-1]:null}function Jy(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function tb(t){return _s(t)?t:ys(t)?R(Promise.resolve(t)):Pp(t)}const eb={exact:function t(e,n,r){if(!cb(e.segments,n.segments))return!1;if(!sb(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:ib},nb={exact:function(t,e){return Ky(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Xy(t[n],e[n]))},ignored:()=>!0};function rb(t,e,n){return eb[n.paths](t.root,e.root,n.matrixParams)&&nb[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function ib(t,e,n){return ob(t,e,e.segments,n)}function ob(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!cb(i,n)&&!e.hasChildren()&&!!sb(i,n,r)}if(t.segments.length===n.length){if(!cb(t.segments,n))return!1;if(!sb(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ib(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!cb(t.segments,i)&&!!sb(t.segments,i,r)&&!!t.children.primary&&ob(t.children.primary,e,o,r)}}function sb(t,e,n){return e.every((e,r)=>nb[n](t[r].parameters,e.parameters))}class ab{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wy(this.queryParams)),this._queryParamMap}toString(){return pb.serialize(this)}}class lb{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Jy(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fb(this)}}class ub{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Wy(this.parameters)),this._parameterMap}toString(){return xb(this)}}function cb(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class hb{}class db{parse(t){const e=new kb(t);return new ab(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${gb(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${vb(e)}=${vb(t)}`).join("&"):`${vb(e)}=${vb(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const pb=new db;function fb(t){return t.segments.map(t=>xb(t)).join("/")}function gb(t,e){if(!t.hasChildren())return fb(t);if(e){const e=t.children.primary?gb(t.children.primary,!1):"",n=[];return Jy(t.children,(t,e)=>{"primary"!==e&&n.push(`${e}:${gb(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Jy(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),Jy(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>"primary"===n?[gb(t.children.primary,!1)]:[`${n}:${gb(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${fb(t)}/${e[0]}`:`${fb(t)}/(${e.join("//")})`}}function mb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vb(t){return mb(t).replace(/%3B/gi,";")}function yb(t){return mb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bb(t){return decodeURIComponent(t)}function _b(t){return bb(t.replace(/\+/g,"%20"))}function xb(t){return`${yb(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${yb(t)}=${yb(e[t])}`).join("")}`;var e}const wb=/^[^\/()?;=#]+/;function Sb(t){const e=t.match(wb);return e?e[0]:""}const Eb=/^[^=?&#]+/,Cb=/^[^?&#]+/;class kb{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lb([],{}):new lb([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new lb(t,e)),n}parseSegment(){const t=Sb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ub(bb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Sb(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Sb(this.remaining);t&&(n=t,this.capture(n))}t[bb(e)]=bb(n)}parseQueryParam(t){const e=function(t){const e=t.match(Eb);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Cb);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=_b(e),i=_b(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Sb(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new lb([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Tb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Pb(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Pb(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ab(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Ab(t,this._root).map(t=>t.value)}}function Pb(t,e){if(t===e.value)return e;for(const n of e.children){const e=Pb(t,n);if(e)return e}return null}function Ab(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Ab(t,n);if(r.length)return r.unshift(e),r}return[]}class Db{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ob(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Mb extends Tb{constructor(t,e){super(t),this.snapshot=e,Bb(this,t)}toString(){return this.snapshot.toString()}}function Ib(t,e){const n=function(t,e){const n=new Rb([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Fb("",new Db(n,[]))}(t,e),r=new ff([new ub("",{})]),i=new ff({}),o=new ff({}),s=new ff({}),a=new ff(""),l=new Lb(r,i,s,a,o,"primary",e,n.root);return l.snapshot=n.root,new Mb(new Db(l,[]),n)}class Lb{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(k(t=>Wy(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(k(t=>Wy(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nb(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Rb{constructor(t,e,n,r,i,o,s,a,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fb extends Tb{constructor(t,e){super(e),this.url=t,Bb(this,e)}toString(){return jb(this._root)}}function Bb(t,e){e.value._routerState=t,e.children.forEach(e=>Bb(t,e))}function jb(t){const e=t.children.length>0?` { ${t.children.map(jb).join(", ")} } `:"";return`${t.value}${e}`}function zb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ky(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ky(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ky(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ky(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Vb(t,e){var n,r;return Ky(t.params,e.params)&&cb(n=t.url,r=e.url)&&n.every((t,e)=>Ky(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Vb(t.parent,e.parent))}function Gb(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Gb(t,e,r);return Gb(t,e)})}(t,e,n);return new Db(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Ub(e,t),t}}const n=new Lb(new ff((r=e.value).url),new ff(r.params),new ff(r.queryParams),new ff(r.fragment),new ff(r.data),r.outlet,r.component,r),i=e.children.map(e=>Gb(t,e));return new Db(n,i)}var r}function Ub(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ub(t.children[n],e.children[n])}function Hb(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function qb(t){return"object"==typeof t&&null!=t&&t.outlets}function Wb(t,e,n,r,i){let o={};return r&&Jy(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new ab(n.root===t?e:$b(n.root,t,e),o,i)}function $b(t,e,n){const r={};return Jy(t.children,(t,i)=>{r[i]=t===e?n:$b(t,e,n)}),new lb(t.segments,r)}class Yb{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Hb(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(qb);if(r&&r!==Zy(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kb{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Xb(t,e,n){if(t||(t=new lb([],{})),0===t.segments.length&&t.hasChildren())return Qb(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(qb(s))break;const a=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!e_(a,l,e))return o;r+=2}else{if(!e_(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new lb(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new lb(t.segments.slice(r.pathIndex),t.children),Qb(e,0,i)}return r.match&&0===i.length?new lb(t.segments,{}):r.match&&!t.hasChildren()?Zb(t,e,n):r.match?Qb(t,0,i):Zb(t,e,n)}function Qb(t,e,n){if(0===n.length)return new lb(t.segments,{});{const r=function(t){return qb(t[0])?t[0].outlets:{primary:t}}(n),i={};return Jy(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Xb(t.children[r],e,n))}),Jy(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new lb(t.segments,i)}}function Zb(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(qb(o)){const t=Jb(o.outlets);return new lb(r,t)}if(0===i&&Hb(n[0])){r.push(new ub(t.segments[e].path,t_(n[0]))),i++;continue}const s=qb(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Hb(a)?(r.push(new ub(s,t_(a))),i+=2):(r.push(new ub(s,{})),i++)}return new lb(r,{})}function Jb(t){const e={};return Jy(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Zb(new lb([],{}),0,t))}),e}function t_(t){const e={};return Jy(t,(t,n)=>e[n]=`${t}`),e}function e_(t,e,n){return t==n.path&&Ky(e,n.parameters)}class n_{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),zb(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Ob(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Jy(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Ob(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Ob(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Uy(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Vy(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(zb(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),r_(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function r_(t){zb(t.value),t.children.forEach(r_)}class i_{constructor(t,e){this.routes=t,this.module=e}}function o_(t){return"function"==typeof t}function s_(t){return t instanceof ab}const a_=Symbol("INITIAL_VALUE");function l_(){return vm(t=>Cp(t.map(t=>t.pipe(Ip(1),$p(a_)))).pipe(fy((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==a_)return t;if(r===a_&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||s_(r))return r}return t},t)},a_),gf(t=>t!==a_),k(t=>s_(t)?t:!0===t),Ip(1)))}let u_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ut({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&ms(0,"router-outlet")},directives:function(){return[rx]},encapsulation:2}),t})();function c_(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];h_(r,d_(e,r))}}function h_(t,e){t.children&&c_(t.children,e)}function d_(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function p_(t){const e=t.children&&t.children.map(p_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=u_),n}function f_(t){return t.outlet||"primary"}function g_(t,e){const n=t.filter(t=>f_(t)===e);return n.push(...t.filter(t=>f_(t)!==e)),n}const m_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function v_(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},m_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Yy)(n,t,e);if(!i)return Object.assign({},m_);const o={};Jy(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function y_(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>b_(t,e,n)&&"primary"!==f_(n))}(t,n,r)){const i=new lb(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==f_(o)){const n=new lb([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[f_(o)]=n}return i}(t,e,r,new lb(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>b_(t,e,n))}(t,n,r)){const o=new lb(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(b_(t,n,a)&&!i[f_(a)]){const n=new lb([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[f_(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new lb(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function b_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function __(t,e,n,r){return!!(f_(t)===r||"primary"!==r&&b_(e,n,t))&&("**"===t.path||v_(e,t,n).matched)}function x_(t,e,n){return 0===e.length&&!t.children[n]}class w_{constructor(t){this.segmentGroup=t||null}}class S_{constructor(t){this.urlTree=t}}function E_(t){return new y(e=>e.error(new w_(t)))}function C_(t){return new y(e=>e.error(new S_(t)))}function k_(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class T_{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Va)}apply(){const t=y_(this.urlTree.root,[],[],this.config).segmentGroup,e=new lb(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,"primary").pipe(k(t=>this.createUrlTree(P_(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(iv(t=>{if(t instanceof S_)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof w_)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(k(e=>this.createUrlTree(P_(e),t.queryParams,t.fragment))).pipe(iv(t=>{if(t instanceof w_)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new lb([],{primary:t}):t;return new ab(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(k(t=>new lb([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return R(r).pipe(cv(r=>{const i=n.children[r],o=g_(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(k(t=>({segment:t,outlet:r})))}),fy((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?gf((e,n)=>t(e,n,r)):v,vy(1),n?Ey(e):_y(()=>new dy))}())}expandSegment(t,e,n,r,i,o){return R(n).pipe(cv(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(iv(t=>{if(t instanceof w_)return Pp(null);throw t}))),Ty(t=>!!t),iv((t,n)=>{if(t instanceof dy||"EmptyError"===t.name){if(x_(e,r,i))return Pp(new lb([],{}));throw new w_(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return __(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):E_(e):E_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?C_(i):this.lineralizeSegments(n,i).pipe(z(n=>{const i=new lb(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:u}=v_(e,r,i);if(!s)return E_(e);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?C_(c):this.lineralizeSegments(r,c).pipe(z(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Pp(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(k(t=>(n._loadedConfig=t,new lb(r,{})))):Pp(new lb(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=v_(e,n,r);if(!o)return E_(e);const l=r.slice(a);return this.getChildConfig(t,n,r).pipe(z(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:u}=y_(e,s,l,o),c=new lb(a.segments,a.children);if(0===u.length&&c.hasChildren())return this.expandChildren(r,o,c).pipe(k(t=>new lb(s,t)));if(0===o.length&&0===u.length)return Pp(new lb(s,{}));const h=f_(n)===i;return this.expandSegment(r,c,o,u,h?"primary":i,!0).pipe(k(t=>new lb(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Pp(new i_(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Pp(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(z(n=>n?this.configLoader.load(t.injector,e).pipe(k(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error($y(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Pp(new i_([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Pp(r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&o_(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!o_(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return tb(o)})).pipe(l_(),bf(t=>{if(!s_(t))return;const e=$y(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),k(t=>!0===t)):Pp(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Pp(n);if(r.numberOfChildren>1||!r.children.primary)return k_(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ab(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Jy(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Jy(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new lb(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function P_(t){const e={};for(const n of Object.keys(t.children)){const r=P_(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new lb(t.segments.concat(e.segments),e.children)}return t}(new lb(t.segments,e))}class A_{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class D_{constructor(t,e){this.component=t,this.route=e}}function O_(t,e,n){const r=t._root;return I_(r,e?e._root:null,n,[r.value])}function M_(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function I_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ob(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!cb(t.url,e.url);case"pathParamsOrQueryParamsChange":return!cb(t.url,e.url)||!Ky(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vb(t,e)||!Ky(t.queryParams,e.queryParams);case"paramsChange":default:return!Vb(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new A_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),I_(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new D_(a.outlet.component,s))}else s&&L_(e,a,i),i.canActivateChecks.push(new A_(r)),I_(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Jy(o,(t,e)=>L_(t,n.getContext(e),i)),i}function L_(t,e,n){const r=Ob(t),i=t.value;Jy(r,(t,r)=>{L_(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new D_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class N_{}function R_(t){return new y(e=>e.error(t))}class F_{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=y_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;const n=new Rb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Db(n,e),i=new Fb(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Nb(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=g_(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=j_(n);return r.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return x_(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!__(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Zy(n).parameters:{};i=new Rb(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,G_(t),f_(t),t.component,t,z_(e),V_(e)+n.length,U_(t))}else{const r=v_(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Rb(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,G_(t),f_(t),t.component,t,z_(e),V_(e)+o.length,U_(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=y_(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new Db(i,t)]}if(0===a.length&&0===u.length)return[new Db(i,[])];const c=f_(t)===r,h=this.processSegment(a,l,u,c?"primary":r);return null===h?null:[new Db(i,h)]}}function B_(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function j_(t){const e=[],n=new Set;for(const r of t){if(!B_(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=j_(r.children);e.push(new Db(r.value,t))}return e.filter(t=>!n.has(t))}function z_(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function V_(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function G_(t){return t.data||{}}function U_(t){return t.resolve||{}}function H_(t){return vm(e=>{const n=t(e);return n?R(n).pipe(k(()=>e)):Pp(e)})}class q_ extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const W_=new jn("ROUTES");class $_{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(k(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new i_(Qy(r.injector.get(W_,void 0,xt.Self|xt.Optional)).map(p_),r)}),iv(t=>{throw e._loader$=void 0,t}));return e._loader$=new K(n,()=>new S).pipe(W()),e._loader$}loadModuleFactory(t){return"string"==typeof t?R(this.loader.load(t)):tb(t()).pipe(z(t=>t instanceof Ga?Pp(t):R(this.compiler.compileModuleAsync(t))))}}class Y_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new K_,this.attachRef=null}}class K_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Y_,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class X_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Q_(t){throw t}function Z_(t,e,n){return e.parse("/")}function J_(t,e){return Pp(null)}const tx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ex={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let nx=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=Q_,this.malformedUriErrorHandler=Z_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:J_,afterPreactivation:J_},this.urlHandlingStrategy=new X_,this.routeReuseStrategy=new q_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(Va),this.console=i.get(Nl);const l=i.get(Yl);this.isNgZoneEnabled=l instanceof Yl&&Yl.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new ab(new lb([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $_(o,s,t=>this.triggerEvent(new By(t)),t=>this.triggerEvent(new jy(t))),this.routerState=Ib(this.currentUrlTree,this.rootComponentType),this.transitions=new ff({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(gf(t=>0!==t.id),k(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),vm(t=>{let n=!1,r=!1;return Pp(t).pipe(bf(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vm(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Pp(t).pipe(vm(t=>{const n=this.transitions.getValue();return e.next(new Ay(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Op:Promise.resolve(t)}),function(t,e,n,r){return vm(i=>function(t,e,n,r,i){return new T_(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(k(t=>Object.assign(Object.assign({},i),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),bf(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return z(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new F_(t,e,n,r,i,o).recognize();return null===s?R_(new N_):Pp(s)}catch(s){return R_(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(k(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),bf(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Iy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ay(n,this.serializeUrl(r),i,o);e.next(a);const l=Ib(r,this.rootComponentType).snapshot;return Pp(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Op}),H_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),bf(t=>{const e=new Ly(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),k(t=>Object.assign(Object.assign({},t),{guards:O_(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return z(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Pp(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return R(t).pipe(z(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Pp(o.map(o=>{const s=M_(o,e,i);let a;if(function(t){return t&&o_(t.canDeactivate)}(s))a=tb(s.canDeactivate(t,e,n,r));else{if(!o_(s))throw new Error("Invalid CanDeactivate guard");a=tb(s(t,e,n,r))}return a.pipe(Ty())})).pipe(l_()):Pp(!0)}(t.component,t.route,n,e,r)),Ty(t=>!0!==t,!0))}(s,r,i,t).pipe(z(n=>n&&"boolean"==typeof n?function(t,e,n,r){return R(e).pipe(cv(e=>Ap(function(t,e){return null!==t&&e&&e(new zy(t)),Pp(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Gy(t)),Pp(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>py(()=>Pp(e.guards.map(i=>{const o=M_(i,e.node,n);let s;if(function(t){return t&&o_(t.canActivateChild)}(o))s=tb(o.canActivateChild(r,t));else{if(!o_(o))throw new Error("Invalid CanActivateChild guard");s=tb(o(r,t))}return s.pipe(Ty())})).pipe(l_())));return Pp(i).pipe(l_())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Pp(r.map(r=>py(()=>{const i=M_(r,e,n);let o;if(function(t){return t&&o_(t.canActivate)}(i))o=tb(i.canActivate(e,t));else{if(!o_(i))throw new Error("Invalid CanActivate guard");o=tb(i(e,t))}return o.pipe(Ty())}))).pipe(l_()):Pp(!0)}(t,e.route,n))),Ty(t=>!0!==t,!0))}(r,o,t,e):Pp(n)),k(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),bf(t=>{if(s_(t.guardsResult)){const e=$y(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Ny(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),gf(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Oy(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),H_(t=>{if(t.guards.canActivateChecks.length)return Pp(t).pipe(bf(t=>{const e=new Ry(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),vm(t=>{let n=!1;return Pp(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,z(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Pp(t);let o=0;return R(n).pipe(cv(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Pp({});const o={};return R(i).pipe(z(i=>function(t,e,n,r){const i=M_(t,e,r);return tb(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(bf(t=>{o[i]=t}))),vy(1),z(()=>Object.keys(o).length===i.length?Pp(o):Op))}(t._resolve,t,e,r).pipe(k(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Nb(t,n).resolve),null)))}(t.route,e,r,i)),bf(()=>o++),vy(1),z(e=>o===n.length?Pp(t):Op))})),bf({next:()=>n=!0,complete:()=>{if(!n){const n=new Oy(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),bf(t=>{const e=new Fy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),H_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),k(t=>{const e=function(t,e,n){const r=Gb(t,e._root,n?n._root:void 0);return new Mb(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),bf(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),k(t=>(new n_(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),bf({next(){n=!0},complete(){n=!0}}),av(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Oy(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),iv(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=s_(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Oy(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new My(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return Op}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){c_(t),this.config=t.map(p_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,l=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return Wb(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Yb(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Jy(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Yb(n,e,r)}(n);if(o.toRoot())return Wb(e.root,new lb([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Kb(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Kb(t,t===e.root,0)}const r=Hb(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Kb(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Qb(s.segmentGroup,s.index,o.commands):Xb(s.segmentGroup,s.index,o.commands);return Wb(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,u,null!=l?l:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=s_(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},tx):!1===e?Object.assign({},ex):e,s_(t))return rb(this.currentUrlTree,t,n);const r=this.parseUrl(t);return rb(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Dy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let l,u,c;i?(l=i.resolve,u=i.reject,c=i.promise):c=new Promise((t,e)=>{l=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(nr(Vn),nr(hb),nr(K_),nr(Gu),nr(Ko),nr(vu),nr(ql),nr(void 0))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),rx=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ll,this.deactivateEvents=new ll,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ix(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(hs(K_),hs(Ha),hs(ia),Fn("name"),hs(Ma))},t.\u0275dir=Kt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ix{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Lb?this.route:t===K_?this.childContexts:this.parent.get(t,e)}}class ox{}class sx{preload(t,e){return Pp(null)}}let ax=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new $_(e,n,e=>t.triggerEvent(new By(e)),e=>t.triggerEvent(new jy(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(gf(t=>t instanceof Dy),cv(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Va);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return R(n).pipe(U(),k(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Pp(e._loadedConfig):this.loader.load(t.injector,e)).pipe(z(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(nr(nx),nr(vu),nr(ql),nr(Ko),nr(ox))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),lx=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ay?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Dy&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Hy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(nr(nx),nr(uc),nr(void 0))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const ux=new jn("ROUTER_CONFIGURATION"),cx=new jn("ROUTER_FORROOT_GUARD"),hx=[Gu,{provide:hb,useClass:db},{provide:nx,useFactory:function(t,e,n,r,i,o,s,a={},l,u){const c=new nx(null,t,e,n,r,i,o,Qy(s));return l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,c),a.enableTracing&&c.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),c},deps:[hb,K_,Gu,Ko,vu,ql,W_,ux,[class{},new ar],[class{},new ar]]},K_,{provide:Lb,useFactory:function(t){return t.routerState.root},deps:[nx]},{provide:vu,useClass:_u},ax,sx,class{preload(t,e){return e().pipe(iv(()=>Pp(null)))}},{provide:ux,useValue:{enableTracing:!1}}];function dx(){return new cu("Router",nx)}let px=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[hx,vx(e),{provide:cx,useFactory:mx,deps:[[nx,new ar,new lr]]},{provide:ux,useValue:n||{}},{provide:Fu,useFactory:gx,deps:[Pu,[new sr(ju),new ar],ux]},{provide:lx,useFactory:fx,deps:[nx,uc,ux]},{provide:ox,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:sx},{provide:cu,multi:!0,useFactory:dx},[yx,{provide:Tl,multi:!0,useFactory:bx,deps:[yx]},{provide:xx,useFactory:_x,deps:[yx]},{provide:Ll,multi:!0,useExisting:xx}]]}}static forChild(e){return{ngModule:t,providers:[vx(e)]}}}return t.\u0275fac=function(e){return new(e||t)(nr(cx,8),nr(nx,8))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();function fx(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new lx(t,e,n)}function gx(t,e,n={}){return n.useHash?new Vu(t,e):new zu(t,e)}function mx(t){return"guarded"}function vx(t){return[{provide:zn,multi:!0,useValue:t},{provide:W_,multi:!0,useValue:t}]}let yx=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(Du,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(nx),r=this.injector.get(ux);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Pp(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ux),n=this.injector.get(ax),r=this.injector.get(lx),i=this.injector.get(nx),o=this.injector.get(gu);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(nr(Ko))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function bx(t){return t.appInitializer.bind(t)}function _x(t){return t.bootstrapListener.bind(t)}const xx=new jn("Router Initializer"),wx=[];let Sx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[px.forRoot(wx)],px]}),t})();function Ex(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function Cx(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){Ex(o,r,i,s,a,"next",t)}function a(t){Ex(o,r,i,s,a,"throw",t)}s(void 0)})}}var kx=n(6934),Tx=n.n(kx);const Px={position:"absolute",left:"0",top:"0",userSelect:"none",outlineStyle:"none",width:"100%",height:"100%"};function Ax(t){t.stopPropagation()}function Dx(t){t.addEventListener("click",Ax),t.addEventListener("mousedown",Ax),t.addEventListener("mouseup",Ax),t.addEventListener("mousemove",Ax)}class Ox{constructor(t){this.adapter=t,this.updateOnRenderEnabled=!1}inVisibleBounds(t){return this.adapter.inVisibleBounds(t)}get updateOnRender(){return this.updateOnRenderEnabled}set updateOnRender(t){this.updateOnRenderEnabled!==t&&(this.updateOnRenderEnabled=t,t?this.cy.on("render",this.update):this.cy.off("render",void 0,this.update))}get cy(){return this.adapter.cy}moveUp(){this.adapter.move(this,-1)}moveDown(){this.adapter.move(this,1)}moveBack(){this.adapter.move(this,Number.NEGATIVE_INFINITY)}moveFront(){this.adapter.move(this,Number.POSITIVE_INFINITY)}insertBefore(t,e){return this.adapter.insert("before",this,t,e)}insertAfter(t,e){return this.adapter.insert("after",this,t,e)}}class Mx extends Ox{constructor(t,e){super(t),this.callbacks=[],this.update=()=>{for(const t of this.callbacks)t(this.node)},this.root=e,Object.assign(this.root.style,Px)}get visible(){return"none"!==this.root.style.display}set visible(t){this.visible!=t&&(this.root.style.display=t?"":"none")}show(){this.visible=!0}hide(){this.visible=!1}callback(t){return this.callbacks.push(t),this.update(),this}resize(){}remove(){this.root.remove()}}const Ix="http://www.w3.org/2000/svg";class Lx extends Mx{constructor(t,e,n={}){super(t,e.createElementNS(Ix,"svg")),this.type="svg",this.updateOnTransform=!1,this.root.__cy_layer=this,this.node=e.createElementNS(Ix,"g"),this.node.__cy_layer=this,this.root.appendChild(this.node),n.stopClicks&&Dx(this.node)}setViewport(t,e,n){this.node.setAttribute("transform",`translate(${t},${e})scale(${n})`),this.updateOnTransform&&this.update()}}class Nx extends Mx{constructor(t,e,n={}){super(t,e.createElementNS(Ix,"svg")),this.type="svg-static",this.root.__cy_layer=this,this.node=e.createElementNS(Ix,"g"),this.node.__cy_layer=this,this.root.appendChild(this.node),n.stopClicks&&Dx(this.node)}setViewport(){}}class Rx extends Ox{constructor(t,e,n={}){var r,i,o;super(t),this.callbacks=[],this.transform={tx:0,ty:0,zoom:1},this.update=()=>this.draw(),this.node=e.createElement("canvas"),Object.assign(this.node.style,Px),n.stopClicks&&Dx(this.node),this.pixelRatio=null!==(r=null!==(i=n.pixelRatio)&&void 0!==i?i:(null!==(o=window)&&void 0!==o?o:{}).devicePixelRatio)&&void 0!==r?r:1,this.ctx=this.node.getContext("2d",n),this.ctx.resetTransform()}get visible(){return"none"!==this.node.style.display}set visible(t){this.node.style.display=t?"":"none"}show(){this.visible=!0}hide(){this.visible=!1}get root(){return this.node}callback(t){return this.callbacks.push(t),this.update(),this}clear(){const t=this.ctx,e=t.getTransform();t.resetTransform(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.setTransform(e)}draw(){this.clear(),this.ctx.save(),this.ctx.resetTransform(),this.ctx.scale(this.pixelRatio,this.pixelRatio),this.ctx.translate(this.transform.tx,this.transform.ty),this.ctx.scale(this.transform.zoom,this.transform.zoom);for(const t of this.callbacks)t(this.ctx);this.ctx.restore()}resize(t,e){this.node.width=t*this.pixelRatio,this.node.height=e*this.pixelRatio,this.update()}setViewport(t,e,n){}remove(){this.node.remove()}}class Fx extends Rx{constructor(t,e,n={}){super(t,e,n),this.type="canvas",this.node.__cy_layer=this}setViewport(t,e,n){this.transform.tx=t,this.transform.ty=e,this.transform.zoom=n,this.update()}}class Bx extends Rx{constructor(t,e,n={}){super(t,e,n),this.type="canvas-static",this.node.__cy_layer=this}}class jx extends Mx{constructor(t,e,n={}){super(t,e.createElement("div")),this.type="html",this.updateOnTransform=!1,this.root.__cy_layer=this,this.node=e.createElement("div"),this.node.__cy_layer=this,this.node.style.position="absolute",this.node.style.left="0px",this.node.style.top="0px",this.root.appendChild(this.node),n.stopClicks&&Dx(this.node)}setViewport(t,e,n){this.node.style.transform=`translate(${t}px,${e}px)scale(${n})`,this.updateOnTransform&&this.update()}}class zx extends Mx{constructor(t,e,n={}){super(t,e.createElement("div")),this.type="html-static",this.node.__cy_layer=this,n.stopClicks&&Dx(this.node)}get node(){return this.root}setViewport(){}}class Vx extends Ox{constructor(t,e){super(t),this.update=()=>{},this.node=e}get root(){return this.node}resize(){}setViewport(){}remove(){}}class Gx extends Vx{constructor(t,e){super(t,e),this.type="node",this.node.__cy_layer=this}}class Ux extends Vx{constructor(t,e){super(t,e),this.type="drag",this.node.__cy_layer=this}}class Hx extends Vx{constructor(t,e){super(t,e),this.type="select-box",this.node.__cy_layer=this}}function qx(t,e,n){const r=Array.from(t.children);if(!n.uniqueElements){e.forEach(e=>{const i=n.bb(e);if(n.isVisible(i))if(r.length>0)n.update(r.shift(),e,i);else{const r=n.enter(e,i);t.appendChild(r),n.update(r,e,i)}});for(const t of r)t.remove();return}const i=new Map(r.map(t=>[t.dataset.id,t]));let o=-1;e.forEach(e=>{const s=n.bb(e);if(!n.isVisible(s))return;o++;const a=e.id(),l=r[o],u=i.get(a);let c;if(u){if(n.update(u,e,s),i.delete(a),l===u)return;c=u}else c=n.enter(e,s),c.dataset.id=a,n.update(c,e,s);0===o?t.insertAdjacentElement("afterbegin",c):r[o-1].insertAdjacentElement("afterend",c),r.splice(o,0,c)}),i.forEach(t=>t.remove())}function Wx(t,e){return t.callback(e),{remove:()=>{t.callbacks.splice(t.callbacks.indexOf(e),1)}}}function $x(t){return{selector:":visible",updateOn:null!=t&&t.queryEachTime?"render":"position",queryEachTime:!1,checkBounds:!0}}function Yx(t,e,n){const r=Object.assign({checkBoundsPointCount:5,initCollection:()=>{}},$x(n),n),i=r.queryEachTime?t.cy.collection():t.cy.edges(r.selector);r.queryEachTime||r.initCollection(i),"render"===r.updateOn?t.updateOnRender=!0:"position"===r.updateOn?(i.on("position add remove",t.update),i.sources().on("position",t.update),i.targets().on("position",t.update)):i.on("add remove",t.update);const o=Wx(t,n=>{const o=r.queryEachTime?t.cy.edges(r.selector):i;r.queryEachTime&&r.initCollection(o),o.forEach(i=>{const o=i._private.rscratch,s=o&&null!=o.startX&&null!=o.startY?{x:o.startX,y:o.startY}:i.sourceEndpoint(),a=o&&null!=o.endX&&null!=o.endY?{x:o.endX,y:o.endY}:i.targetEndpoint();if(r.checkBounds&&r.checkBoundsPointCount>0&&!function(t,e,n,r){const i=t=>({x:e.x*t+n.x*(1-t),y:e.y*t+n.y*(1-t)});if(1===r)return t.inVisibleBounds(i(.5));const o=1/r;for(let s=0;s<=r;s++)if(t.inVisibleBounds(i(s*o)))return!0;return!1}(t,s,a,r.checkBoundsPointCount))return;if(o&&o.pathCache)return void e(n,i,o.pathCache,s,a);const l=new Path2D;l.moveTo(s.x,s.y),l.lineTo(a.x,a.y),e(n,i,l,s,a)})});return{layer:t,edges:i,remove:()=>{i.off("position add remove",void 0,t.update),i.sources().off("position",void 0,t.update),i.targets().off("position",void 0,t.update),o.remove()}}}function Kx(t,e,n={}){const r=Object.assign({transform:"",position:"top-left",boundingBox:{includeLabels:!1,includeOverlays:!1},uniqueElements:!1,initCollection:()=>{}},$x(n),n),i=r.queryEachTime?t.cy.collection():t.cy.nodes(r.selector);r.queryEachTime||r.initCollection(i),"render"===r.updateOn?t.updateOnRender=!0:i.on("position"===r.updateOn?"position add remove":"add remove",t.update);const o=e=>({layer:t,nodes:i,remove:()=>{i.off("position add remove",void 0,t.update),e.remove()}});if("canvas"===t.type){const n=r,s=o=>{const s=o.getTransform(),a=n.queryEachTime?t.cy.nodes(n.selector):i;r.queryEachTime&&r.initCollection(a),a.forEach(i=>{const a=i.boundingBox(r.boundingBox);if(!n.checkBounds||t.inVisibleBounds(a)){if("top-left"===n.position)o.translate(a.x1,a.y1);else if("center"===n.position){const t=i.position();o.translate(t.x,t.y)}e(o,i,a),"none"!==n.position&&o.setTransform(s)}})};return o(Wx(t,s))}const s=r,a={bb:t=>t.boundingBox(s.boundingBox),isVisible:s.checkBounds?e=>t.inVisibleBounds(e):()=>!0,uniqueElements:!0===s.uniqueElements};if(s.checkBounds&&(t.updateOnTransform=!0),"html"===t.type){const n={...a,enter:(e,n)=>{const r=t.node.ownerDocument.createElement("div");return r.style.position="absolute",s.init&&s.init(r,e,n),r},update:(t,n,r)=>{if("top-left"===s.position)t.style.transform=`${s.transform}translate(${r.x1}px,${r.y1}px)`;else if("center"===s.position){const e=n.position();t.style.transform=`${s.transform}translate(${e.x}px,${e.y}px)`}e(t,n,r)}},l=e=>{const o=s.queryEachTime?t.cy.nodes(s.selector):i;r.queryEachTime&&r.initCollection(o),qx(e,o,n)};return o(Wx(t,l))}const l={...a,enter:(e,n)=>{const r=t.node.ownerDocument.createElementNS(Ix,"g");return s.init&&s.init(r,e,n),r},update:(t,n,r)=>{if("top-left"===s.position)t.setAttribute("transform",`${s.transform}translate(${r.x1},${r.y1})`);else if("center"===s.position){const e=n.position();t.setAttribute("transform",`${s.transform}translate(${e.x},${e.y})`)}e(t,n,r)}};return o(Wx(t,e=>{const n=s.queryEachTime?t.cy.nodes(s.selector):i;r.queryEachTime&&r.initCollection(n),qx(e,n,l)}))}class Xx{constructor(t){this.resize=()=>{const t=this.cy.width(),e=this.cy.height();this.viewport.width=t,this.viewport.height=e;for(const n of this.layers)n.resize(t,e)},this.destroy=()=>{for(const t of this.layers)t.remove();this.cy.off("destroy",void 0,this.destroy),this.cy.off("viewport",void 0,this.zoomed),this.cy.off("resize",void 0,this.resize),this.cy.scratch("_layers",void 0)},this.zoomed=()=>{const t=this.cy.pan(),e=this.cy.zoom();this.viewport.tx=t.x,this.viewport.ty=t.y,this.viewport.zoom=e;for(const n of this.layers)n.setViewport(t.x,t.y,e)},this.renderPerEdge=Yx,this.renderPerNode=Kx,this.cy=t,this.adapter={cy:this.cy,insert:(t,e,n)=>this.insert(t,e,n),move:(t,e)=>this.move(t,e),inVisibleBounds:t=>{const e=this.viewport,n=t=>{const n=t*e.zoom+e.tx;return n>=0&&n<=e.width},r=t=>{const n=t*e.zoom+e.ty;return n>=0&&n<=e.height};return function(t){return null!=t.x}(t)?n(t.x)&&r(t.y):n(t.x1)&&r(t.y1)||n(t.x2)&&r(t.y1)||n(t.x2)&&r(t.y2)||n(t.x1)&&r(t.y2)||n((t.x1+t.x2)/2)&&r((t.y1+t.y2)/2)}};const e=t.container(),n=new Gx(this.adapter,e.querySelector('[data-id="layer2-node"]'));this.nodeLayer=n;const r=new Ux(this.adapter,e.querySelector('[data-id="layer1-drag"]'));this.dragLayer=r;const i=new Hx(this.adapter,e.querySelector('[data-id="layer0-selectbox"]'));this.selectBoxLayer=i,n.root.style.zIndex="",r.root.style.zIndex="",i.root.style.zIndex="",n.root.insertAdjacentElement("afterend",r.root),r.root.insertAdjacentElement("afterend",i.root),t.on("viewport",this.zoomed),t.on("resize",this.resize),t.on("destroy",this.destroy),this.viewport={width:this.cy.width(),height:this.cy.height(),tx:this.cy.pan().x,ty:this.cy.pan().y,zoom:this.cy.zoom()}}move(t,e){const n=this.layers,r=n.indexOf(t),i=Math.max(Math.min(r+e,n.length,0));i!==r&&(r>=n.length-1?this.root.appendChild(t.root):this.root.insertBefore(t.root,n[i].root))}get document(){return this.cy.container().ownerDocument}get root(){return this.nodeLayer.node.parentElement}get layers(){return Array.from(this.root.children).map(t=>t.__cy_layer).filter(t=>null!=t)}getLayers(){return this.layers}init(t){return t.resize(this.viewport.width,this.viewport.height),t.setViewport(this.viewport.tx,this.viewport.ty,this.viewport.zoom),t}update(){this.zoomed();for(const t of this.layers)t instanceof Fx&&t.draw()}createLayer(t,e){switch(t){case"svg":return this.init(new Lx(this.adapter,this.document,e));case"html":return this.init(new jx(this.adapter,this.document,e));case"canvas":return this.init(new Fx(this.adapter,this.document,e));case"html-static":return this.init(new zx(this.adapter,this.document,e));case"svg-static":return this.init(new Nx(this.adapter,this.document,e));case"canvas-static":return this.init(new Bx(this.adapter,this.document,e))}}append(t,e){const n=this.createLayer(t,e);return this.root.appendChild(n.root),n}insert(t,e,n,r){const i=this.createLayer(n,r);return e.root.insertAdjacentElement("before"===t?"beforebegin":"afterend",i.root),i}getLast(){var t;const e=this.layers;return null!==(t=e[e.length-1])&&void 0!==t?t:null}getFirst(){var t;return null!==(t=this.layers[0])&&void 0!==t?t:null}}function Qx(t=this){if(!t.container())throw new Error("layers plugin does not work in headless environments");const e=t.scratch("_layers");if(e)return e;const n=new Xx(t);return t.scratch("_layers",n),n}function Zx(t){t("core","layers",Qx)}void 0!==window.cytoscape&&Zx(window.cytoscape);var Jx=Zx;function tw(t,e){if(1&t){const t=vs();fs(0,"div",8),xs("click",function(){return Ae(t),ks().onSettingsClicked()}),ms(1,"img",9),gs()}}let ew=(()=>{class t{constructor(t,e){this.sanitizer=t,this.ref=e,this.fitContainerToParent=!1,this.enableSettingsIcon=!0,this.borderSize=2,this.width=200,this.height=100}ngOnInit(){const t=this.sanitizer.bypassSecurityTrustUrl(this.blueprint.icon);this.blueprint.icon=t}onSettingsClicked(){console.log(this.blueprint.id,this.blueprint.name)}}return t.\u0275fac=function(e){return new(e||t)(hs(zc),hs(Ma))},t.\u0275cmp=Ut({type:t,selectors:[["app-node"]],inputs:{fitContainerToParent:"fitContainerToParent",enableSettingsIcon:"enableSettingsIcon",borderSize:"borderSize",width:"width",height:"height",blueprint:"blueprint"},decls:8,vars:16,consts:[["id","container"],["fxLayout","row","fxLayoutAlign","space-between"],["id","bp-icon"],["draggable","false",3,"src"],["id","bp-info"],["id","bp-name",3,"textContent"],["id","bp-type",3,"textContent"],["id","settings-icon",3,"click",4,"ngIf"],["id","settings-icon",3,"click"],["src","assets/icons/node/settings.svg"]],template:function(t,e){1&t&&(fs(0,"div",0),fs(1,"div",1),fs(2,"div",2),ms(3,"img",3),gs(),fs(4,"div",4),ms(5,"div",5),ms(6,"div",6),gs(),gs(),us(7,tw,2,0,"div",7),gs()),2&t&&(Ms("border-width",e.borderSize,"px")("width",e.fitContainerToParent?"":e.width,"px")("height",e.fitContainerToParent?"":e.height,"px")("width",e.fitContainerToParent?"99":"","%")("height",e.fitContainerToParent?"100":"","%"),Bi(3),Ms("width",e.width/2.7,"px"),ds("src",e.blueprint.icon,Ur),Bi(2),ds("textContent",e.blueprint.name),Bi(1),ds("textContent",e.blueprint.type),Bi(1),ds("ngIf",e.enableSettingsIcon))},directives:[mg,xg,Zu],styles:["#container[_ngcontent-%COMP%]{display:flex;flex:auto;align-items:stretch;margin:1px;padding:10px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;border-style:solid;border-color:#000;border-radius:8px}#container[_ngcontent-%COMP%]:hover{border-width:3px}#bp-icon[_ngcontent-%COMP%]{display:flex;align-items:center;border-right:1px solid #acacac;padding-right:5px}#bp-info[_ngcontent-%COMP%]{align-self:baseline;margin:10px 10px 10px 5px}#bp-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px}#bp-type[_ngcontent-%COMP%]{font-size:14px}#settings-icon[_ngcontent-%COMP%]{align-self:start;margin:-10px 0 0 15px;cursor:pointer}#settings-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}"]}),t})();const nw=new jn("blueprint.service");var rw=function(t){return t.Frontend="Frontend",t.Backend="Backend",t.Database="Database",t}({}),iw=n(9049),ow=n.n(iw),sw=n(2508),aw=n.n(sw),lw=n(2598),uw=n.n(lw),cw=n(4173),hw=n.n(cw),dw=n(8429),pw=n.n(dw),fw=n(3091),gw=n.n(fw),mw=n(6685),vw=n.n(mw),yw=n(7950),bw=n.n(yw);function _w(t,e){if(1&t){const t=vs();fs(0,"div",7),xs("drop",function(e){return Ae(t),ks().dropBp(e)})("dragover",function(e){return Ae(t),ks().allowDropBp(e)})("dragstart",function(e){const n=Ae(t).$implicit;return ks().dragBp(e,n)}),ms(1,"app-node",8),gs()}if(2&t){const t=e.$implicit;Bi(1),ds("borderSize",1)("fitContainerToParent",!0)("enableSettingsIcon",!1)("blueprint",t)}}let xw=(()=>{class t{constructor(t,e){this.breakpointObserver=t,this.blueprintsSvc=e,this.isExpanded=!0,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(k(t=>t.matches),function(t,e,n){let r;return r={bufferSize:undefined,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,l=!1;return function(u){let c;s++,!i||a?(a=!1,i=new Pm(t,e,r),c=i.subscribe(this),o=u.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){l=!0,o=void 0,i.complete()}}),l&&(o=void 0)):c=i.subscribe(this),this.add(()=>{s--,c.unsubscribe(),c=void 0,o&&!l&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}()),this.sdf=!1,this.bpCatalog=[]}ngOnInit(){var t=this;return Cx(function*(){const e=yield t.blueprintsSvc.getBlueprints();t.bpCatalog=[...Object.values(e),...t.bpCatalog]})()}allowDropBp(t){t.preventDefault()}dragBp(t,e){var n;null===(n=t.dataTransfer)||void 0===n||n.setData("bp",JSON.stringify(e))}dropBp(t){this.sdf=!0,t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(hs(df),hs(nw))},t.\u0275cmp=Ut({type:t,selectors:[["app-sidebar-catalog"]],decls:18,vars:10,consts:[[1,"sidenav-container"],["fixedInViewport","","position","end",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","class","bp-container","draggable","true",3,"drop","dragover","dragstart",4,"ngFor","ngForOf"],["id","nav-collapse-btn","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["id","nav-expand-btn","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["mat-list-item","","draggable","true",1,"bp-container",3,"drop","dragover","dragstart"],[3,"borderSize","fitContainerToParent","enableSettingsIcon","blueprint"]],template:function(t,e){if(1&t){const t=vs();fs(0,"mat-sidenav-container",0),fs(1,"mat-sidenav",1,2),ol(3,"async"),ol(4,"async"),ol(5,"async"),fs(6,"mat-toolbar"),js(7,"Blueprints Catalog"),gs(),fs(8,"mat-nav-list"),us(9,_w,2,4,"div",3),gs(),fs(10,"div",4),xs("click",function(){return Ae(t),cs(2).toggle()}),fs(11,"span"),js(12,"Collapse sidebar"),gs(),fs(13,"mat-icon",5),js(14,"arrow_forward_ios"),gs(),gs(),gs(),gs(),fs(15,"div",6),xs("click",function(){return Ae(t),cs(2).toggle()}),fs(16,"mat-icon",5),js(17,"arrow_back_ios"),gs(),gs()}2&t&&(Bi(1),ds("mode",sl(4,6,e.isHandset$)?"over":"side")("opened",!1===sl(5,8,e.isHandset$)),ls("role",sl(3,4,e.isHandset$)?"dialog":"navigation"),Bi(8),ds("ngForOf",e.bpCatalog))},directives:[ev,tv,om,cy,Xu,ry,ew],pipes:[oc],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%;z-index:4}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.bp-container[_ngcontent-%COMP%]{width:100%;height:100px;cursor:pointer;box-sizing:border-box}#nav-expand-btn[_ngcontent-%COMP%]{display:flex;position:fixed;align-items:center;bottom:0;right:0;padding:10px;background-color:#d3d3d3;color:#000;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:3}#nav-expand-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:translateX(20%)}#nav-collapse-btn[_ngcontent-%COMP%]{display:flex;position:absolute;flex:auto;justify-content:center;align-items:center;width:100%;bottom:0;padding:10px 0;background-color:#d3d3d3;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#nav-collapse-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}"]}),t})();const ww=["cy"];let Sw=(()=>{class t{constructor(t,e,n){var r=this;this.blueprintsSvc=t,this.resolver=e,this.injector=n,this.nodeWidth=200,this.nodeHeight=100,this.onCyReady=function(){var t=Cx(function*(t,e){const n=r.resolver.resolveComponentFactory(ew),i=t.cy.layers();i.nodeLayer.moveFront(),i.renderPerNode(i.append("html"),()=>{},{init:(t,e)=>{const i=e.data("bp");if(!i)return;console.log(e.id(),i);const o=n.create(r.injector);o.instance.width=r.nodeWidth,o.instance.height=r.nodeHeight,o.instance.blueprint={id:i.id,icon:i.icon.changingThisBreaksApplicationSecurity,name:i.name,type:rw.Frontend},o.changeDetectorRef.detectChanges(),t.insertAdjacentElement("beforeend",o.location.nativeElement)},uniqueElements:!0,checkBounds:!0})});return function(e,n){return t.apply(this,arguments)}}(),Tx().use(Jx),uw()(Tx()),aw()(Tx(),hw(),pw()),Tx().use(ow()),gw()(Tx()),vw()(Tx()),Tx().use(bw())}allowDropBp(t){t.preventDefault()}dropBp(t){var e;t.preventDefault();const n=null===(e=t.dataTransfer)||void 0===e?void 0:e.getData("bp"),r=JSON.parse(n);this.cy.add({group:"nodes",data:{id:`${r.id}_${Date.now().toString()}`,bp:r},position:{x:(t.clientX-this.cy.pan().x)/this.cy.zoom(),y:(t.clientY-this.cy.pan().y)/this.cy.zoom()}}),this.cy.trigger("bp-added",[r])}ngAfterViewInit(){var t=this;return Cx(function*(){document.addEventListener("keydown",e=>{e.ctrlKey&&"90"==e.which?t.cy.undoRedo().undo():e.ctrlKey&&"89"==e.which&&t.cy.undoRedo().redo()},!0),t.cy=Tx()({container:t.cyDiv.nativeElement,layout:{name:"cola"},boxSelectionEnabled:!0,maxZoom:3,minZoom:.5,zoom:1,style:[{selector:"node",style:{shape:"roundrectangle",width:t.nodeWidth,height:t.nodeHeight,color:"black","background-color":"white","overlay-opacity":0}},{selector:"edge",style:{"curve-style":"straight",width:2,"line-color":"black"}},{selector:".eh-handle",style:{"background-color":"white",width:15,height:15,shape:"ellipse","border-color":"black","overlay-opacity":0,"border-width":2,"border-opacity":1}},{selector:".eh-source",style:{"border-width":3,"border-color":"black"}},{selector:".eh-target",style:{"border-width":3,"border-color":"black",opacity:1}},{selector:".eh-preview, .eh-ghost-edge",style:{"line-color":"black","target-arrow-color":"black","source-arrow-color":"black"}},{selector:".eh-preview",style:{opacity:.3}}]}),t.cy.gridGuide({snapToGridDuringDrag:!0,distributionGuidelines:!0,geometricGuideline:!0,centerToEdgeAlignment:!0,panGrid:!0,guidelinesStackOrder:1,guidelinesTolerance:7,gridColor:"#e4e4e4",lineWidth:2}),t.cy.panzoom({minZoom:.5,maxZoom:3}),t.cy.undoRedo(),t.cy.edgeEditing({undoable:!0,initAnchorsAutomatically:!1,enableCreateAnchorOnDrag:!0,zIndex:1}),t.cy.on("bp-added",t.onCyReady),t.cy.edgehandles({snap:!0,loopAllowed:()=>!1}),t.cy.on("ehcomplete",(t,e,n,r)=>{r.addClass("edgebendediting-hasbendpoints"),r.data("cyedgebendeditingWeights",[.5]),r.data("cyedgebendeditingDistances",[.5])})})()}}return t.\u0275fac=function(e){return new(e||t)(hs(nw),hs(ia),hs(Ko))},t.\u0275cmp=Ut({type:t,selectors:[["app-topology-view"]],viewQuery:function(t,e){if(1&t&&xl(ww,5),2&t){let t;_l(t=Sl())&&(e.cyDiv=t.first)}},decls:4,vars:0,consts:[["id","cy",3,"drop","dragover"],["cy",""]],template:function(t,e){1&t&&(fs(0,"div"),fs(1,"div",0,1),xs("drop",function(t){return e.dropBp(t)})("dragover",function(t){return e.allowDropBp(t)}),gs(),ms(3,"app-sidebar-catalog"),gs())},directives:[xw],styles:["#cy[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}app-sidebar-catalog[_ngcontent-%COMP%]{z-index:5}"]}),t})(),Ew=(()=>{class t{constructor(){this.title="cloud-flow-frontend"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ut({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&ms(0,"app-topology-view")},directives:[Sw],styles:[""]}),t})(),Cw=(()=>{class t{constructor(t){this.http=t}getBlueprints(){var t=this;return Cx(function*(){const e=yield t.http.get("assets/mock-catalog.json").toPromise(),n={},r=Object.entries(e);for(let i=0;i<r.length;i++){const[e,o]=r[i],s=yield t.http.get(o.icon,{responseType:"text"}).toPromise(),a="data:image/svg+xml;base64,"+btoa(s);n[e]=Object.assign(Object.assign({},o),{id:e,icon:a})}return n})()}}return t.\u0275fac=function(e){return new(e||t)(nr(Av))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),kw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[{provide:nw,useClass:Cw}],imports:[[Gv]]}),t})(),Tw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t,bootstrap:[Ew]}),t.\u0275inj=pt({providers:[],imports:[[Sx,mp,qc,Mg,af,am,iy,hy,nv,sm,kw]]}),t})();(function(){if(au)throw new Error("Cannot enable prod mode after platform setup.");su=!1})(),Uc().bootstrapModule(Tw).catch(t=>console.error(t))}},function(t){"use strict";t(t.s=5050)}]);